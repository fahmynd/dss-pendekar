{"version":3,"file":"static/js/714.d40bfea5.chunk.js","mappings":"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","sources":["../node_modules/d3-geo/src/path/area.js","../node_modules/src/.internal/charts/map/MapChartDefaultTheme.ts","../node_modules/d3-geo/src/path/centroid.js","../node_modules/d3-geo/src/path/context.js","../node_modules/d3-geo/src/path/measure.js","../node_modules/d3-geo/src/path/string.js","../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js","../node_modules/src/.internal/charts/map/MapChart.ts","../node_modules/d3-geo/src/path/index.js","../node_modules/src/.internal/charts/map/MapSeries.ts","../node_modules/src/.internal/charts/map/MapPolygon.ts","../node_modules/src/.internal/charts/map/MapPolygonSeries.ts","../node_modules/d3-geo/src/centroid.js","../node_modules/d3-geo/src/bounds.js","../node_modules/src/.internal/charts/map/MapUtils.ts","../node_modules/src/.internal/charts/map/ZoomControl.ts","../node_modules/polylabel/polylabel.js","../node_modules/tinyqueue/index.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/@kurkle/color/dist/color.esm.js","../node_modules/chart.js/src/helpers/helpers.core.ts","../node_modules/chart.js/src/helpers/helpers.math.ts","../node_modules/chart.js/src/helpers/helpers.collection.ts","../node_modules/chart.js/src/helpers/helpers.extras.ts","../node_modules/chart.js/src/helpers/helpers.easing.ts","../node_modules/chart.js/src/helpers/helpers.color.ts","../node_modules/chart.js/src/core/core.animations.defaults.js","../node_modules/chart.js/src/helpers/helpers.intl.ts","../node_modules/chart.js/src/core/core.ticks.js","../node_modules/chart.js/src/core/core.defaults.js","../node_modules/chart.js/src/core/core.layouts.defaults.js","../node_modules/chart.js/src/core/core.scale.defaults.js","../node_modules/chart.js/src/helpers/helpers.canvas.js","../node_modules/chart.js/src/helpers/helpers.options.ts","../node_modules/chart.js/src/helpers/helpers.config.js","../node_modules/chart.js/src/helpers/helpers.curve.ts","../node_modules/chart.js/src/helpers/helpers.dom.ts","../node_modules/chart.js/src/helpers/helpers.interpolation.ts","../node_modules/chart.js/src/helpers/helpers.rtl.ts","../node_modules/chart.js/src/helpers/helpers.segment.js","../node_modules/chart.js/src/core/core.animator.js","../node_modules/chart.js/src/core/core.animation.js","../node_modules/chart.js/src/core/core.animations.js","../node_modules/chart.js/src/core/core.datasetController.js","../node_modules/chart.js/src/controllers/controller.bar.js","../node_modules/chart.js/src/controllers/controller.bubble.js","../node_modules/chart.js/src/controllers/controller.doughnut.js","../node_modules/chart.js/src/controllers/controller.line.js","../node_modules/chart.js/src/controllers/controller.polarArea.js","../node_modules/chart.js/src/controllers/controller.pie.js","../node_modules/chart.js/src/controllers/controller.radar.js","../node_modules/chart.js/src/controllers/controller.scatter.js","../node_modules/chart.js/src/core/core.adapters.ts","../node_modules/chart.js/src/core/core.interaction.js","../node_modules/chart.js/src/core/core.layouts.js","../node_modules/chart.js/src/platform/platform.base.js","../node_modules/chart.js/src/platform/platform.basic.js","../node_modules/chart.js/src/platform/platform.dom.js","../node_modules/chart.js/src/platform/index.js","../node_modules/chart.js/src/core/core.element.ts","../node_modules/chart.js/src/core/core.scale.autoskip.js","../node_modules/chart.js/src/core/core.scale.js","../node_modules/chart.js/src/core/core.typedRegistry.js","../node_modules/chart.js/src/core/core.registry.js","../node_modules/chart.js/src/core/core.plugins.js","../node_modules/chart.js/src/core/core.config.js","../node_modules/chart.js/src/core/core.controller.js","../node_modules/chart.js/src/elements/element.arc.ts","../node_modules/chart.js/src/elements/element.line.js","../node_modules/chart.js/src/elements/element.point.ts","../node_modules/chart.js/src/elements/element.bar.js","../node_modules/chart.js/src/plugins/plugin.filler/filler.segment.js","../node_modules/chart.js/src/plugins/plugin.filler/filler.helper.js","../node_modules/chart.js/src/plugins/plugin.filler/filler.options.js","../node_modules/chart.js/src/plugins/plugin.filler/filler.target.stack.js","../node_modules/chart.js/src/plugins/plugin.filler/simpleArc.js","../node_modules/chart.js/src/plugins/plugin.filler/filler.target.js","../node_modules/chart.js/src/plugins/plugin.filler/filler.drawing.js","../node_modules/chart.js/src/plugins/plugin.filler/index.js","../node_modules/chart.js/src/plugins/plugin.legend.js","../node_modules/chart.js/src/plugins/plugin.subtitle.js","../node_modules/chart.js/src/plugins/plugin.title.js","../node_modules/chart.js/src/plugins/plugin.tooltip.js","../node_modules/chart.js/src/scales/scale.category.js","../node_modules/chart.js/src/scales/scale.linearbase.js","../node_modules/chart.js/src/scales/scale.linear.js","../node_modules/chart.js/src/scales/scale.logarithmic.js","../node_modules/chart.js/src/scales/scale.radialLinear.js","../node_modules/chart.js/src/scales/scale.time.js","../node_modules/chart.js/src/scales/scale.timeseries.js","../node_modules/d3-array/src/fsum.js","../node_modules/d3-geo/src/area.js","../node_modules/d3-geo/src/cartesian.js","../node_modules/d3-geo/src/identity.js","../node_modules/d3-geo/src/math.js","../node_modules/d3-geo/src/noop.js","../node_modules/d3-geo/src/path/bounds.js","../node_modules/d3-geo/src/compose.js","../node_modules/d3-geo/src/rotation.js","../node_modules/d3-geo/src/clip/buffer.js","../node_modules/d3-geo/src/pointEqual.js","../node_modules/d3-geo/src/clip/rejoin.js","../node_modules/d3-geo/src/polygonContains.js","../node_modules/d3-array/src/merge.js","../node_modules/d3-geo/src/clip/index.js","../node_modules/d3-geo/src/clip/antimeridian.js","../node_modules/d3-geo/src/circle.js","../node_modules/d3-geo/src/clip/rectangle.js","../node_modules/d3-geo/src/clip/line.js","../node_modules/d3-geo/src/transform.js","../node_modules/d3-geo/src/projection/fit.js","../node_modules/d3-geo/src/projection/resample.js","../node_modules/d3-geo/src/projection/index.js","../node_modules/d3-geo/src/clip/circle.js","../node_modules/d3-geo/src/projection/mercator.js","../node_modules/d3-geo/src/stream.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../node_modules/react-chartjs-2/src/utils.ts","../node_modules/react-chartjs-2/src/chart.tsx","../node_modules/react-chartjs-2/src/typedCharts.tsx"],"sourcesContent":["import {Adder} from \"d3-array\";\nimport {abs} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nvar areaSum = new Adder(),\n    areaRingSum = new Adder(),\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    areaStream.lineStart = areaStream.lineEnd = areaStream.point = noop;\n    areaSum.add(abs(areaRingSum));\n    areaRingSum = new Adder();\n  },\n  result: function() {\n    var area = areaSum / 2;\n    areaSum = new Adder();\n    return area;\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaPointFirst(x, y) {\n  areaStream.point = areaPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction areaPoint(x, y) {\n  areaRingSum.add(y0 * x - x0 * y);\n  x0 = x, y0 = y;\n}\n\nfunction areaRingEnd() {\n  areaPoint(x00, y00);\n}\n\nexport default areaStream;\n","import { Theme } from \"../../core/Theme\";\r\nimport { p50, p100 } from \"../../core/util/Percent\";\r\nimport { setColor } from \"../../themes/DefaultTheme\";\r\n\r\nimport { geoMercator } from \"d3-geo\";\r\n\r\nimport * as $ease from \"../../core/util/Ease\";\r\n\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport class MapChartDefaultTheme extends Theme {\r\n\tprotected setupDefaultRules() {\r\n\t\tsuper.setupDefaultRules();\r\n\r\n\t\tconst ic = this._root.interfaceColors;\r\n\t\tconst r = this.rule.bind(this);\r\n\r\n\t\t/**\r\n\t\t * ========================================================================\r\n\t\t * charts/map\r\n\t\t * ========================================================================\r\n\t\t */\r\n\r\n\t\tr(\"MapChart\").setAll({\r\n\t\t\tprojection: geoMercator(),\r\n\t\t\tpanX: \"translateX\",\r\n\t\t\tpanY: \"translateY\",\r\n\t\t\tpinchZoom: true,\r\n\t\t\tzoomStep: 2,\r\n\t\t\tzoomLevel: 1,\r\n\t\t\trotationX: 0,\r\n\t\t\trotationY: 0,\r\n\t\t\trotationZ: 0,\r\n\t\t\tmaxZoomLevel: 32,\r\n\t\t\tminZoomLevel: 1,\r\n\t\t\twheelY: \"zoom\",\r\n\t\t\twheelX: \"none\",\r\n\t\t\tanimationEasing: $ease.out($ease.cubic),\r\n\t\t\twheelEasing: $ease.out($ease.cubic),\r\n\t\t\twheelDuration: 0,\r\n\t\t\twheelSensitivity: 1,\r\n\t\t\tmaxPanOut: 0.4,\r\n\t\t\tcenterMapOnZoomOut: true\r\n\t\t});\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"MapLine\");\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tprecision: 0.5,\r\n\t\t\t\trole: \"figure\",\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"stroke\", ic, \"grid\");\r\n\t\t}\r\n\r\n\t\tr(\"MapPolygonSeries\").setAll({\r\n\t\t\taffectsBounds: true\r\n\t\t})\r\n\r\n\r\n\t\tr(\"MapPointSeries\").setAll({\r\n\t\t\taffectsBounds: false,\r\n\t\t\tclipFront: false,\r\n\t\t\tclipBack: true,\r\n\t\t\tautoScale: false\r\n\t\t})\r\n\r\n\t\tr(\"MapLineSeries\").setAll({\r\n\t\t\taffectsBounds: false\r\n\t\t})\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"MapPolygon\");\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tprecision: 0.5,\r\n\t\t\t\tisMeasured: false,\r\n\t\t\t\trole: \"figure\",\r\n\t\t\t\tfillOpacity: 1,\r\n\t\t\t\tposition: \"absolute\",\r\n\t\t\t\tstrokeWidth: 0.2,\r\n\t\t\t\tstrokeOpacity: 1,\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"fill\", ic, \"primaryButton\");\r\n\t\t\tsetColor(rule, \"stroke\", ic, \"background\");\r\n\t\t}\r\n\r\n\t\tr(\"Graphics\", [\"map\", \"button\", \"plus\", \"icon\"]).setAll({\r\n\t\t\tx: p50,\r\n\t\t\ty: p50,\r\n\t\t\tdraw: (display) => {\r\n\t\t\t\tdisplay.moveTo(-4, 0);\r\n\t\t\t\tdisplay.lineTo(4, 0);\r\n\t\t\t\tdisplay.moveTo(0, -4);\r\n\t\t\t\tdisplay.lineTo(0, 4);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tr(\"Graphics\", [\"map\", \"button\", \"minus\", \"icon\"]).setAll({\r\n\t\t\tx: p50,\r\n\t\t\ty: p50,\r\n\t\t\tdraw: (display) => {\r\n\t\t\t\tdisplay.moveTo(-4, 0);\r\n\t\t\t\tdisplay.lineTo(4, 0);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\t/**\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t * charts/map: Series\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t */\r\n\r\n\t\tr(\"GraticuleSeries\").setAll({\r\n\t\t\tstep: 10\r\n\t\t});\r\n\r\n\r\n\t\tr(\"ZoomControl\").setAll({\r\n\t\t\tx: p100,\r\n\t\t\tcenterX: p100,\r\n\t\t\ty: p100,\r\n\t\t\tcenterY: p100,\r\n\t\t\tpaddingRight: 10,\r\n\t\t\tpaddingBottom: 10\r\n\t\t})\r\n\r\n\t}\r\n}\r\n","import {sqrt} from \"../math.js\";\n\n// TODO Enforce positive area for exterior, negative area for interior?\n\nvar X0 = 0,\n    Y0 = 0,\n    Z0 = 0,\n    X1 = 0,\n    Y1 = 0,\n    Z1 = 0,\n    X2 = 0,\n    Y2 = 0,\n    Z2 = 0,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar centroidStream = {\n  point: centroidPoint,\n  lineStart: centroidLineStart,\n  lineEnd: centroidLineEnd,\n  polygonStart: function() {\n    centroidStream.lineStart = centroidRingStart;\n    centroidStream.lineEnd = centroidRingEnd;\n  },\n  polygonEnd: function() {\n    centroidStream.point = centroidPoint;\n    centroidStream.lineStart = centroidLineStart;\n    centroidStream.lineEnd = centroidLineEnd;\n  },\n  result: function() {\n    var centroid = Z2 ? [X2 / Z2, Y2 / Z2]\n        : Z1 ? [X1 / Z1, Y1 / Z1]\n        : Z0 ? [X0 / Z0, Y0 / Z0]\n        : [NaN, NaN];\n    X0 = Y0 = Z0 =\n    X1 = Y1 = Z1 =\n    X2 = Y2 = Z2 = 0;\n    return centroid;\n  }\n};\n\nfunction centroidPoint(x, y) {\n  X0 += x;\n  Y0 += y;\n  ++Z0;\n}\n\nfunction centroidLineStart() {\n  centroidStream.point = centroidPointFirstLine;\n}\n\nfunction centroidPointFirstLine(x, y) {\n  centroidStream.point = centroidPointLine;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidPointLine(x, y) {\n  var dx = x - x0, dy = y - y0, z = sqrt(dx * dx + dy * dy);\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidLineEnd() {\n  centroidStream.point = centroidPoint;\n}\n\nfunction centroidRingStart() {\n  centroidStream.point = centroidPointFirstRing;\n}\n\nfunction centroidRingEnd() {\n  centroidPointRing(x00, y00);\n}\n\nfunction centroidPointFirstRing(x, y) {\n  centroidStream.point = centroidPointRing;\n  centroidPoint(x00 = x0 = x, y00 = y0 = y);\n}\n\nfunction centroidPointRing(x, y) {\n  var dx = x - x0,\n      dy = y - y0,\n      z = sqrt(dx * dx + dy * dy);\n\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n\n  z = y0 * x - x0 * y;\n  X2 += z * (x0 + x);\n  Y2 += z * (y0 + y);\n  Z2 += z * 3;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nexport default centroidStream;\n","import {tau} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nexport default function PathContext(context) {\n  this._context = context;\n}\n\nPathContext.prototype = {\n  _radius: 4.5,\n  pointRadius: function(_) {\n    return this._radius = _, this;\n  },\n  polygonStart: function() {\n    this._line = 0;\n  },\n  polygonEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line === 0) this._context.closePath();\n    this._point = NaN;\n  },\n  point: function(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._context.moveTo(x, y);\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._context.lineTo(x, y);\n        break;\n      }\n      default: {\n        this._context.moveTo(x + this._radius, y);\n        this._context.arc(x, y, this._radius, 0, tau);\n        break;\n      }\n    }\n  },\n  result: noop\n};\n","import {Adder} from \"d3-array\";\nimport {sqrt} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nvar lengthSum = new Adder(),\n    lengthRing,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar lengthStream = {\n  point: noop,\n  lineStart: function() {\n    lengthStream.point = lengthPointFirst;\n  },\n  lineEnd: function() {\n    if (lengthRing) lengthPoint(x00, y00);\n    lengthStream.point = noop;\n  },\n  polygonStart: function() {\n    lengthRing = true;\n  },\n  polygonEnd: function() {\n    lengthRing = null;\n  },\n  result: function() {\n    var length = +lengthSum;\n    lengthSum = new Adder();\n    return length;\n  }\n};\n\nfunction lengthPointFirst(x, y) {\n  lengthStream.point = lengthPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction lengthPoint(x, y) {\n  x0 -= x, y0 -= y;\n  lengthSum.add(sqrt(x0 * x0 + y0 * y0));\n  x0 = x, y0 = y;\n}\n\nexport default lengthStream;\n","// Simple caching for constant-radius points.\nlet cacheDigits, cacheAppend, cacheRadius, cacheCircle;\n\nexport default class PathString {\n  constructor(digits) {\n    this._append = digits == null ? append : appendRound(digits);\n    this._radius = 4.5;\n    this._ = \"\";\n  }\n  pointRadius(_) {\n    this._radius = +_;\n    return this;\n  }\n  polygonStart() {\n    this._line = 0;\n  }\n  polygonEnd() {\n    this._line = NaN;\n  }\n  lineStart() {\n    this._point = 0;\n  }\n  lineEnd() {\n    if (this._line === 0) this._ += \"Z\";\n    this._point = NaN;\n  }\n  point(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._append`M${x},${y}`;\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._append`L${x},${y}`;\n        break;\n      }\n      default: {\n        this._append`M${x},${y}`;\n        if (this._radius !== cacheRadius || this._append !== cacheAppend) {\n          const r = this._radius;\n          const s = this._;\n          this._ = \"\"; // stash the old string so we can cache the circle path fragment\n          this._append`m0,${r}a${r},${r} 0 1,1 0,${-2 * r}a${r},${r} 0 1,1 0,${2 * r}z`;\n          cacheRadius = r;\n          cacheAppend = this._append;\n          cacheCircle = this._;\n          this._ = s;\n        }\n        this._ += cacheCircle;\n        break;\n      }\n    }\n  }\n  result() {\n    const result = this._;\n    this._ = \"\";\n    return result.length ? result : null;\n  }\n}\n\nfunction append(strings) {\n  let i = 1;\n  this._ += strings[0];\n  for (const j = strings.length; i < j; ++i) {\n    this._ += arguments[i] + strings[i];\n  }\n}\n\nfunction appendRound(digits) {\n  const d = Math.floor(digits);\n  if (!(d >= 0)) throw new RangeError(`invalid digits: ${digits}`);\n  if (d > 15) return append;\n  if (d !== cacheDigits) {\n    const k = 10 ** d;\n    cacheDigits = d;\n    cacheAppend = function append(strings) {\n      let i = 1;\n      this._ += strings[0];\n      for (const j = strings.length; i < j; ++i) {\n        this._ += Math.round(arguments[i] * k) / k + strings[i];\n      }\n    };\n  }\n  return cacheAppend;\n}\n","export default function _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}","import type { MapSeries } from \"./MapSeries\";\nimport type { MapPointSeries } from \"./MapPointSeries\";\nimport type { GeoProjection, GeoPath } from \"d3-geo\";\nimport type { IPoint } from \"../../core/util/IPoint\";\nimport type { IGeoPoint } from \"../../core/util/IGeoPoint\";\nimport type { Time } from \"../../core/util/Animation\";\nimport type { ZoomControl } from \"./ZoomControl\";\nimport type { Animation } from \"../../core/util/Entity\";\nimport type { DataItem } from \"../../core/render/Component\";\nimport type { IMapPolygonSeriesDataItem } from \"./MapPolygonSeries\";\n\nimport { MapChartDefaultTheme } from \"./MapChartDefaultTheme\";\nimport { SerialChart, ISerialChartPrivate, ISerialChartSettings, ISerialChartEvents } from \"../../core/render/SerialChart\";\nimport { Rectangle } from \"../../core/render/Rectangle\";\nimport { geoPath } from \"d3-geo\";\nimport { Color } from \"../../core/util/Color\";\nimport { registry } from \"../../core/Registry\";\n\nimport * as $math from \"../../core/util/Math\";\nimport * as $array from \"../../core/util/Array\";\nimport * as $type from \"../../core/util/Type\";\nimport * as $mapUtils from \"./MapUtils\";\nimport * as $object from \"../../core/util/Object\";\nimport * as $utils from \"../../core/util/Utils\";\n\nimport type { IDisposer } from \"../../core/util/Disposer\";\nimport type { ISpritePointerEvent } from \"../../core/render/Sprite\";\n\nexport interface IMapChartSettings extends ISerialChartSettings {\n\n\t/**\n\t * A projection to use when plotting the map.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/map-chart/#Projections} for more info\n\t */\n\tprojection?: GeoProjection;\n\n\t/**\n\t * Current zoom level.\n\t */\n\tzoomLevel?: number;\n\n\t/**\n\t * current x position of a map\n\t */\n\ttranslateX?: number;\n\n\t/**\n\t * current y position of a map\n\t */\n\ttranslateY?: number;\n\n\t/**\n\t * Vertical centering of the map.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/map-chart/#Centering_the_map} for more info\n\t */\n\trotationY?: number;\n\n\t/**\n\t * Horizontal centering of the map.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/map-chart/#Centering_the_map} for more info\n\t */\n\trotationX?: number;\n\n\t/**\n\t * Depth centering of the map.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/map-chart/#Centering_the_map} for more info\n\t */\n\trotationZ?: number;\n\n\t/**\n\t * Highest zoom level map is allowed to zoom in to.\n\t *\n\t * @deault 32\n\t */\n\tmaxZoomLevel?: number;\n\n\t/**\n\t * Lowest zoom level map is allowed to zoom in to.\n\t *\n\t * @deault 1\n\t */\n\tminZoomLevel?: number;\n\n\t/**\n\t * Increment zoom level by `zoomStep` when user zooms in via [[ZoomControl]] or\n\t * API.\n\t *\n\t * @default 2\n\t */\n\tzoomStep?: number;\n\n\t/**\n\t * Defines what happens when map is being dragged horizontally.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/map-chart/map-pan-zoom/#Panning} for more info\n\t * @default \"translateX\"\n\t */\n\tpanX?: \"none\" | \"rotateX\" | \"translateX\";\n\n\t/**\n\t * Defines what happens when map is being dragged vertically.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/map-chart/map-pan-zoom/#Panning} for more info\n\t * @default \"translateY\"\n\t */\n\tpanY?: \"none\" | \"rotateY\" | \"translateY\";\n\n\t/**\n\t * Enables pinch-zooming of the map on multi-touch devices.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/map-chart/map-pan-zoom/#Pinch_zoom} for more info\n\t * @default true\n\t */\n\tpinchZoom?: boolean;\n\n\t/**\n\t * Defines what happens when mouse wheel is turned horizontally.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/map-chart/map-pan-zoom/#Mouse_wheel_behavior} for more info\n\t * @default \"none\"\n\t */\n\twheelX?: \"none\" | \"zoom\" | \"rotateX\" | \"rotateY\";\n\n\t/**\n\t * Defines what happens when mouse wheel is turned vertically.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/map-chart/map-pan-zoom/#Mouse_wheel_behavior} for more info\n\t * @default \"zoom\"\n\t */\n\twheelY?: \"none\" | \"zoom\" | \"rotateX\" | \"rotateY\";\n\n\t/**\n\t * Sensitivity of a mouse wheel.\n\t *\n\t * @default 1\n\t */\n\twheelSensitivity?: number;\n\n\t/**\n\t * Duration of mouse-wheel action animation, in milliseconds.\n\t */\n\twheelDuration?: number;\n\n\t/**\n\t * An easing function to use for mouse wheel action animations.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/animations/#Easing_functions} for more info\n\t * @default am5.ease.out($ease.cubic)\n\t */\n\twheelEasing?: (t: Time) => Time;\n\n\t/**\n\t * Duration of zoom/pan animations, in milliseconds.\n\t */\n\tanimationDuration?: number;\n\n\t/**\n\t * An easing function to use for zoom/pan animations.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/animations/#Easing_functions} for more info\n\t * @default am5.ease.out($ease.cubic)\n\t */\n\tanimationEasing?: (t: Time) => Time;\n\n\n\t/**\n\t * A [[ZoomControl]] instance.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/map-chart/#Zoom_control} for more info\n\t */\n\tzoomControl?: ZoomControl;\n\n\t/**\n\t * Initial/home zoom level.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/map-chart/map-pan-zoom/#Initial_position_and_zoom} for more info\n\t */\n\thomeZoomLevel?: number;\n\n\t/**\n\t * Initial coordinates to center map on load or `goHome()` call.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/map-chart/map-pan-zoom/#Initial_position_and_zoom} for more info\n\t */\n\thomeGeoPoint?: IGeoPoint;\n\n\t/**\n\t * How much of a map can go outside the viewport.\n\t *\n\t * @default 0.4\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/map-chart/map-pan-zoom/#Panning_outside_viewport} for more info\n\t */\n\tmaxPanOut?: number;\n\n\t/**\n\t * Setting `true` means that the map will automatically center itself (or go\n\t * to `homeGeoPoint` if set) when fully zoomed out.\n\t *\n\t * `false` would mean that zoom out will be centered around the mouse\n\t * cursor (when zooming using wheel), or current map position.\n\t * \n\t * @default true\n\t * @since 5.2.1\n\t */\n\tcenterMapOnZoomOut?: boolean;\n\n}\n\nexport interface IMapChartPrivate extends ISerialChartPrivate {\n\n\t/**\n\t * @ignore\n\t */\n\tgeoPath: GeoPath;\n\n\t/**\n\t * @ignore\n\t */\n\tmapScale: number;\n\n}\n\n\nexport interface IMapChartEvents extends ISerialChartEvents {\n\n\t/**\n\t * Invoked when geo bounds of the map change, usually after map is\n\t * initialized.\n\t */\n\tgeoboundschanged: {};\n\n}\n\n\nexport class MapChart extends SerialChart {\n\tpublic static className: string = \"MapChart\";\n\tpublic static classNames: Array<string> = SerialChart.classNames.concat([MapChart.className]);\n\n\tdeclare public _settings: IMapChartSettings;\n\tdeclare public _privateSettings: IMapChartPrivate;\n\tdeclare public _seriesType: MapSeries;\n\tdeclare public _events: IMapChartEvents;\n\n\tprotected _downTranslateX: number | undefined;\n\tprotected _downTranslateY: number | undefined;\n\tprotected _downRotationX: number | undefined;\n\tprotected _downRotationY: number | undefined;\n\tprotected _downRotationZ: number | undefined;\n\tprotected _pLat: number = 0;\n\tprotected _pLon: number = 0;\n\n\tprotected _movePoints: { [index: number]: IPoint } = {};\n\tprotected _downZoomLevel: number = 1;\n\tprotected _doubleDownDistance: number = 0;\n\n\tprotected _dirtyGeometries: boolean = false;\n\tprotected _geometryColection: GeoJSON.GeometryCollection = { type: \"GeometryCollection\", geometries: [] };\n\n\tpublic _centerLocation: [number, number] | null = null;\n\n\tprotected _za?: Animation<this[\"_settings\"][\"zoomLevel\"]>;\n\tprotected _rxa?: Animation<this[\"_settings\"][\"rotationX\"]>;\n\tprotected _rya?: Animation<this[\"_settings\"][\"rotationY\"]>;\n\tprotected _txa?: Animation<this[\"_settings\"][\"translateX\"]>;\n\tprotected _tya?: Animation<this[\"_settings\"][\"translateY\"]>;\n\n\tprotected _mapBounds = [[0, 0], [0, 0]];\n\n\tprotected _geoCentroid: IGeoPoint = { longitude: 0, latitude: 0 };\n\tprotected _geoBounds: { left: number, right: number, top: number, bottom: number } = { left: 0, right: 0, top: 0, bottom: 0 };\n\tprotected _prevGeoBounds: { left: number, right: number, top: number, bottom: number } = { left: 0, right: 0, top: 0, bottom: 0 };\n\n\tprotected _dispatchBounds: boolean = false;\n\n\tprotected _wheelDp: IDisposer | undefined;\n\n\tprotected _pw?: number;\n\tprotected _ph?: number;\n\n\tprotected _mapFitted: boolean = false;\n\n\tprotected _centerX: number = 0;\n\tprotected _centerY: number = 0;\n\n\tprotected _makeGeoPath() {\n\t\tconst projection = this.get(\"projection\")!;\n\t\tconst path = geoPath();\n\t\tpath.projection(projection);\n\t\tthis.setPrivateRaw(\"geoPath\", path);\n\t}\n\n\t/**\n\t * Returns a geoPoint of the current zoom position.\n\t * \n\t * You can later use it to restore zoom position, e.g.: `chart.zoomToGeoPoint(geoPoint, zoomLevel, true)`.\n\t *\n\t * @since 5.2.19\n\t */\n\tpublic geoPoint() {\n\t\treturn this.invert(this.seriesContainer.toGlobal({ x: this.width() / 2, y: this.height() / 2 }));\n\t}\n\n\t/**\n\t * Returns coordinates to geographical center of the map.\n\t */\n\tpublic geoCentroid() {\n\t\treturn this._geoCentroid;\n\t}\n\n\t/**\n\t * Returns geographical bounds of the map.\n\t */\n\tpublic geoBounds() {\n\t\treturn this._geoBounds;\n\t}\n\n\tprotected _handleSetWheel() {\n\n\t\tconst wheelX = this.get(\"wheelX\");\n\t\tconst wheelY = this.get(\"wheelY\");\n\t\tconst chartContainer = this.chartContainer;\n\n\t\tif (wheelX != \"none\" || wheelY != \"none\") {\n\t\t\tif (this._wheelDp) {\n\t\t\t\tthis._wheelDp.dispose();\n\t\t\t}\n\t\t\t\n\t\t\tthis._wheelDp = chartContainer.events.on(\"wheel\", (event) => {\n\t\t\t\tconst wheelEasing = this.get(\"wheelEasing\")!;\n\t\t\t\tconst wheelSensitivity = this.get(\"wheelSensitivity\", 1);\n\t\t\t\tconst wheelDuration = this.get(\"wheelDuration\", 0);\n\n\t\t\t\tconst wheelEvent = event.originalEvent;\n\n\t\t\t\t// Ignore wheel event if it is happening on a non-chart element, e.g. if\n\t\t\t\t// some page element is over the chart.\n\t\t\t\tif ($utils.isLocalEvent(wheelEvent, this)) {\n\t\t\t\t\twheelEvent.preventDefault();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst chartContainer = this.chartContainer;\n\t\t\t\tconst point = chartContainer._display.toLocal(event.point);\n\n\t\t\t\tif ((wheelY == \"zoom\")) {\n\t\t\t\t\tthis._handleWheelZoom(wheelEvent.deltaY, point);\n\t\t\t\t}\n\t\t\t\telse if (wheelY == \"rotateY\") {\n\t\t\t\t\tthis._handleWheelRotateY(wheelEvent.deltaY / 5 * wheelSensitivity, wheelDuration, wheelEasing);\n\t\t\t\t}\n\t\t\t\telse if (wheelY == \"rotateX\") {\n\t\t\t\t\tthis._handleWheelRotateX(wheelEvent.deltaY / 5 * wheelSensitivity, wheelDuration, wheelEasing);\n\t\t\t\t}\n\n\t\t\t\tif ((wheelX == \"zoom\")) {\n\t\t\t\t\tthis._handleWheelZoom(wheelEvent.deltaX, point);\n\t\t\t\t}\n\t\t\t\telse if (wheelX == \"rotateY\") {\n\t\t\t\t\tthis._handleWheelRotateY(wheelEvent.deltaX / 5 * wheelSensitivity, wheelDuration, wheelEasing);\n\t\t\t\t}\n\t\t\t\telse if (wheelX == \"rotateX\") {\n\t\t\t\t\tthis._handleWheelRotateX(wheelEvent.deltaX / 5 * wheelSensitivity, wheelDuration, wheelEasing);\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\tthis._disposers.push(this._wheelDp);\n\t\t}\n\t\telse {\n\t\t\tif (this._wheelDp) {\n\t\t\t\tthis._wheelDp.dispose();\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\n\t\tconst projection = this.get(\"projection\")!;\n\t\tconst w = this.innerWidth();\n\t\tconst h = this.innerHeight();\n\n\t\tif (this.isDirty(\"projection\")) {\n\t\t\tthis._makeGeoPath();\n\t\t\tthis.markDirtyProjection();\n\t\t\tthis._fitMap();\n\n\t\t\tprojection.scale(this.getPrivate(\"mapScale\") * this.get(\"zoomLevel\", 1));\n\t\t\tif (projection.rotate) {\n\t\t\t\tprojection.rotate([this.get(\"rotationX\", 0), this.get(\"rotationY\", 0), this.get(\"rotationZ\", 0)])\n\t\t\t}\n\n\t\t\tlet prev = this._prevSettings.projection;\n\t\t\tif (prev && prev != projection) {\n\t\t\t\tlet hw = w / 2;\n\t\t\t\tlet hh = h / 2;\n\t\t\t\tif (prev.invert) {\n\t\t\t\t\tlet centerLocation = prev.invert([hw, hh]);\n\n\t\t\t\t\tif (centerLocation) {\n\n\t\t\t\t\t\tlet xy = projection(centerLocation);\n\t\t\t\t\t\tif (xy) {\n\t\t\t\t\t\t\tlet translate = projection.translate();\n\n\t\t\t\t\t\t\tlet xx = hw - ((xy[0] - translate[0]));\n\t\t\t\t\t\t\tlet yy = hh - ((xy[1] - translate[1]));\n\n\t\t\t\t\t\t\tprojection.translate([xx, yy])\n\n\t\t\t\t\t\t\tthis.setRaw(\"translateX\", xx);\n\t\t\t\t\t\t\tthis.setRaw(\"translateY\", yy);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDirty(\"wheelX\") || this.isDirty(\"wheelY\")) {\n\t\t\tthis._handleSetWheel();\n\t\t}\n\t\tvar previousGeometries = this._geometryColection.geometries;\n\t\tif (this._dirtyGeometries) {\n\t\t\tthis._geometryColection.geometries = [];\n\n\t\t\tthis.series.each((series) => {\n\t\t\t\t$array.pushAll(this._geometryColection.geometries, series._geometries);\n\t\t\t})\n\t\t\n\n\t\t\tthis._fitMap();\n\t\t}\n\n\t\tif (previousGeometries.length != 0 && (w != this._pw || h != this._ph || this._dirtyGeometries)) {\n\t\t\tif (w > 0 && h > 0) {\n\t\t\t\tlet hw = w / 2;\n\t\t\t\tlet hh = h / 2;\n\n\t\t\t\tprojection.fitSize([w, h], this._geometryColection);\n\t\t\t\tconst newScale = projection.scale();\n\n\t\t\t\tthis.setPrivateRaw(\"mapScale\", newScale);\n\t\t\t\tprojection.scale(newScale * this.get(\"zoomLevel\", 1));\n\n\t\t\t\tif (this._centerLocation) {\n\t\t\t\t\tlet xy = projection(this._centerLocation);\n\t\t\t\t\tif (xy) {\n\t\t\t\t\t\tlet translate = projection.translate();\n\n\t\t\t\t\t\tlet xx = hw - ((xy[0] - translate[0]));\n\t\t\t\t\t\tlet yy = hh - ((xy[1] - translate[1]));\n\n\t\t\t\t\t\tprojection.translate([xx, yy])\n\n\t\t\t\t\t\tthis.setRaw(\"translateX\", xx);\n\t\t\t\t\t\tthis.setRaw(\"translateY\", yy);\n\n\t\t\t\t\t\tthis._centerX = translate[0];\n\t\t\t\t\t\tthis._centerY = translate[1];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.markDirtyProjection();\n\n\t\t\t\tconst geoPath = this.getPrivate(\"geoPath\");\n\t\t\t\tthis._mapBounds = geoPath.bounds(this._geometryColection);\n\t\t\t}\n\t\t}\n\n\t\tthis._pw = w;\n\t\tthis._ph = h;\n\n\t\tif (this.isDirty(\"zoomControl\")) {\n\t\t\tconst previous = this._prevSettings.zoomControl;\n\t\t\tconst zoomControl = this.get(\"zoomControl\")!;\n\t\t\tif (zoomControl !== previous) {\n\t\t\t\tthis._disposeProperty(\"zoomControl\");\n\t\t\t\tif (previous) {\n\t\t\t\t\tprevious.dispose();\n\t\t\t\t}\n\t\t\t\tif (zoomControl) {\n\t\t\t\t\tzoomControl.setPrivate(\"chart\", this);\n\t\t\t\t\tthis.children.push(zoomControl);\n\t\t\t\t}\n\n\t\t\t\tthis.setRaw(\"zoomControl\", zoomControl);\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDirty(\"zoomLevel\")) {\n\t\t\tprojection.scale(this.getPrivate(\"mapScale\") * this.get(\"zoomLevel\", 1));\n\t\t\tthis.markDirtyProjection();\n\n\t\t\tthis.series.each((series) => {\n\t\t\t\tif (series.isType<MapPointSeries>(\"MapPointSeries\")) {\n\t\t\t\t\tif (series.get(\"autoScale\")) {\n\t\t\t\t\t\t$array.each(series.dataItems, (dataItem) => {\n\t\t\t\t\t\t\tconst bullets = dataItem.bullets;\n\t\t\t\t\t\t\tif (bullets) {\n\t\t\t\t\t\t\t\t$array.each(bullets, (bullet) => {\n\t\t\t\t\t\t\t\t\tconst sprite = bullet.get(\"sprite\");\n\t\t\t\t\t\t\t\t\tif (sprite) {\n\t\t\t\t\t\t\t\t\t\tsprite.set(\"scale\", this.get(\"zoomLevel\"));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tif (this.isDirty(\"translateX\") || this.isDirty(\"translateY\")) {\n\t\t\tprojection.translate([this.get(\"translateX\", this.width() / 2), this.get(\"translateY\", this.height() / 2)])\n\t\t\tthis.markDirtyProjection();\n\t\t}\n\n\t\tif (projection.rotate) {\n\t\t\tif (this.isDirty(\"rotationX\") || this.isDirty(\"rotationY\") || this.isDirty(\"rotationZ\")) {\n\t\t\t\tprojection.rotate([this.get(\"rotationX\", 0), this.get(\"rotationY\", 0), this.get(\"rotationZ\", 0)])\n\t\t\t\tthis.markDirtyProjection();\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDirty(\"pinchZoom\") || this.get(\"panX\") || this.get(\"panY\")) {\n\t\t\tthis._setUpTouch();\n\t\t}\n\t}\n\n\n\tprotected _fitMap() {\n\t\tconst projection = this.get(\"projection\")!;\n\n\t\tlet w = this.innerWidth();\n\t\tlet h = this.innerHeight();\n\n\t\tif (w > 0 && h > 0) {\n\t\t\tprojection.fitSize([w, h], this._geometryColection);\n\t\t\tthis.setPrivateRaw(\"mapScale\", projection.scale());\n\n\t\t\tconst translate = projection.translate();\n\n\t\t\tthis.setRaw(\"translateX\", translate[0]);\n\t\t\tthis.setRaw(\"translateY\", translate[1]);\n\n\t\t\tthis._centerX = translate[0];\n\t\t\tthis._centerY = translate[1];\n\n\t\t\tconst geoPath = this.getPrivate(\"geoPath\");\n\t\t\tthis._mapBounds = geoPath.bounds(this._geometryColection);\n\n\t\t\tthis._geoCentroid = $mapUtils.getGeoCentroid(this._geometryColection);\n\n\t\t\tconst bounds = $mapUtils.getGeoBounds(this._geometryColection);\n\t\t\tthis._geoBounds = bounds;\n\n\t\t\tif (this._geometryColection.geometries.length > 0) {\n\n\t\t\t\tbounds.left = $math.round(this._geoBounds.left, 3);\n\t\t\t\tbounds.right = $math.round(this._geoBounds.right, 3);\n\t\t\t\tbounds.top = $math.round(this._geoBounds.top, 3);\n\t\t\t\tbounds.bottom = $math.round(this._geoBounds.bottom, 3);\n\n\t\t\t\tconst prevGeoBounds = this._prevGeoBounds;\n\n\t\t\t\tif (prevGeoBounds && !$utils.sameBounds(bounds, prevGeoBounds)) {\n\t\t\t\t\tthis._dispatchBounds = true;\n\t\t\t\t\tthis._prevGeoBounds = bounds;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._mapFitted = true;\n\t\t}\n\t}\n\n\t/**\n\t * Returns geographical coordinates for calculated or manual center of the\n\t * map.\n\t */\n\tpublic homeGeoPoint(): IGeoPoint {\n\t\tlet homeGeoPoint = this.get(\"homeGeoPoint\");\n\t\tif (!homeGeoPoint) {\n\t\t\tconst geoPath = this.getPrivate(\"geoPath\");\n\t\t\tconst bounds = geoPath.bounds(this._geometryColection);\n\n\t\t\tconst left = bounds[0][0];\n\t\t\tconst top = bounds[0][1];\n\n\t\t\tconst right = bounds[1][0];\n\t\t\tconst bottom = bounds[1][1];\n\n\t\t\thomeGeoPoint = this.invert({ x: left + (right - left) / 2, y: top + (bottom - top) / 2 });\n\t\t}\n\t\treturn homeGeoPoint;\n\t}\n\n\t/**\n\t * Repositions the map to the \"home\" zoom level and center coordinates.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/map-chart/map-pan-zoom/#Resetting_position_level} for more info\n\t * @param  duration  Animation duration in milliseconds\n\t */\n\tpublic goHome(duration?: number) {\n\t\tthis.zoomToGeoPoint(this.homeGeoPoint(), this.get(\"homeZoomLevel\", 1), true, duration);\n\t}\n\n\tpublic _updateChildren() {\n\t\tconst projection = this.get(\"projection\")!;\n\t\tif (projection.invert) {\n\t\t\tlet w = this.innerWidth();\n\t\t\tlet h = this.innerHeight();\n\t\t\tif (w > 0 && h > 0) {\n\t\t\t\tthis._centerLocation = projection.invert([this.innerWidth() / 2, this.innerHeight() / 2]);\n\t\t\t}\n\t\t}\n\t\tsuper._updateChildren();\n\t}\n\n\tpublic _afterChanged() {\n\t\tsuper._afterChanged();\n\t\tif (this._dispatchBounds) {\n\t\t\tthis._dispatchBounds = false;\n\t\t\tconst type = \"geoboundschanged\";\n\t\t\tif (this.events.isEnabled(type)) {\n\t\t\t\tthis.events.dispatch(type, { type: type, target: this });\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _setUpTouch(): void {\n\t\tif (!this.chartContainer._display.cancelTouch) {\n\t\t\tthis.chartContainer._display.cancelTouch = (this.get(\"pinchZoom\") || this.get(\"panX\") || this.get(\"panY\")) ? true : false;\n\t\t}\n\t}\n\n\n\t/**\n\t * @ignore\n\t */\n\tpublic markDirtyGeometries() {\n\t\tthis._dirtyGeometries = true;\n\t\tthis.markDirty();\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic markDirtyProjection() {\n\t\tthis.series.each((series) => {\n\t\t\tseries.markDirtyProjection();\n\t\t})\n\t}\n\n\tprotected _afterNew() {\n\t\tthis._defaultThemes.push(MapChartDefaultTheme.new(this._root));\n\t\tthis._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"map\"]);\n\n\t\tthis.children.push(this.bulletsContainer);\n\n\t\tsuper._afterNew();\n\n\t\tthis._makeGeoPath();\n\n\t\tthis.chartContainer.children.push(this.seriesContainer);\n\n\t\tif (this.get(\"translateX\") == null) {\n\t\t\tthis.set(\"translateX\", this.width() / 2);\n\t\t}\n\t\tif (this.get(\"translateY\") == null) {\n\t\t\tthis.set(\"translateY\", this.height() / 2);\n\t\t}\n\n\t\t// Setting trasnparent background so that full body of the plot container\n\t\t// is interactive\n\t\tthis.chartContainer.set(\"interactive\", true);\n\t\tthis.chartContainer.set(\"interactiveChildren\", false);\n\t\tthis.chartContainer.set(\"background\", Rectangle.new(this._root, {\n\t\t\tthemeTags: [\"map\", \"background\"],\n\t\t\tfill: Color.fromHex(0x000000),\n\t\t\tfillOpacity: 0\n\t\t}));\n\n\t\tthis._disposers.push(this.chartContainer.events.on(\"pointerdown\", (event) => {\n\t\t\tthis._handleChartDown(event);\n\t\t}));\n\n\t\tthis._disposers.push(this.chartContainer.events.on(\"globalpointerup\", (event) => {\n\t\t\tthis._handleChartUp(event);\n\t\t}));\n\n\t\tthis._disposers.push(this.chartContainer.events.on(\"globalpointermove\", (event) => {\n\t\t\tthis._handleChartMove(event);\n\t\t}));\n\n\t\tlet license = false;\n\t\tfor (let i = 0; i < registry.licenses.length; i++) {\n\t\t\tif (registry.licenses[i].match(/^AM5M.{5,}/i)) {\n\t\t\t\tlicense = true;\n\t\t\t}\n\t\t}\n\t\tif (!license) {\n\t\t\tthis._root._showBranding();\n\t\t}\n\n\t\tthis._setUpTouch();\n\n\t}\n\n\tprotected _handleChartDown(event: ISpritePointerEvent) {\n\n\t\tthis._downZoomLevel = this.get(\"zoomLevel\", 1);\n\n\t\tlet count = $object.keys(this.chartContainer._downPoints).length;\n\t\tif(count == 1){\n\t\t\t// workaround to solve a problem when events are added to some children of chart container (rotation stops working)\n\t\t\tconst downPoint = this.chartContainer._downPoints[1];\n\n\t\t\tif(downPoint && (downPoint.x == event.point.x && downPoint.y == event.point.y)){\n\t\t\t\tcount = 0;\n\t\t\t}\n\t\t}\n\n\t\tif (count > 0) {\n\t\t\tthis._downTranslateX = this.get(\"translateX\");\n\t\t\tthis._downTranslateY = this.get(\"translateY\");\n\t\t\tthis._downRotationX = this.get(\"rotationX\");\n\t\t\tthis._downRotationY = this.get(\"rotationY\");\n\t\t\tthis._downRotationZ = this.get(\"rotationZ\");\n\n\t\t\tconst downId = this.chartContainer._getDownPointId();\n\t\t\tif (downId) {\n\t\t\t\tlet movePoint = this._movePoints[downId];\n\t\t\t\tif (movePoint) {\n\t\t\t\t\tthis.chartContainer._downPoints[downId] = movePoint;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (count == 0) {\n\t\t\tlet bg = this.chartContainer.get(\"background\");\n\t\t\tif (bg) {\n\t\t\t\tbg.events.enableType(\"click\");\n\t\t\t}\n\n\t\t\tif (this.get(\"panX\") || this.get(\"panY\")) {\n\n\t\t\t\tif (this._za) {\n\t\t\t\t\tthis._za.stop();\n\t\t\t\t}\n\t\t\t\tif (this._txa) {\n\t\t\t\t\tthis._txa.stop();\n\t\t\t\t}\n\t\t\t\tif (this._tya) {\n\t\t\t\t\tthis._tya.stop();\n\t\t\t\t}\n\t\t\t\tif (this._rxa) {\n\t\t\t\t\tthis._rxa.stop();\n\t\t\t\t}\n\t\t\t\tif (this._rya) {\n\t\t\t\t\tthis._rya.stop();\n\t\t\t\t}\n\n\t\t\t\tconst downPoint = this.chartContainer._display.toLocal(event.point);\n\t\t\t\tthis._downTranslateX = this.get(\"translateX\");\n\t\t\t\tthis._downTranslateY = this.get(\"translateY\");\n\t\t\t\tthis._downRotationX = this.get(\"rotationX\");\n\t\t\t\tthis._downRotationY = this.get(\"rotationY\");\n\t\t\t\tthis._downRotationZ = this.get(\"rotationZ\");\n\n\t\t\t\tlet projection = this.get(\"projection\")!;\n\n\t\t\t\tif (projection.invert) {\n\t\t\t\t\tlet l0 = projection.invert([downPoint.x, downPoint.y]);\n\t\t\t\t\tlet l1 = projection.invert([downPoint.x + 1, downPoint.y + 1]);\n\t\t\t\t\tif (l0 && l1) {\n\t\t\t\t\t\tthis._pLon = Math.abs(l1[0] - l0[0]);\n\t\t\t\t\t\tthis._pLat = Math.abs(l1[1] - l0[1]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Converts screen coordinates (X and Y) within chart to latitude and\n\t * longitude.\n\t * \n\t * @param  point  Screen coordinates\n\t * @return        Geographical coordinates\n\t */\n\tpublic invert(point: IPoint): IGeoPoint {\n\t\tlet projection = this.get(\"projection\")!;\n\n\t\tif (projection.invert) {\n\t\t\tconst ll = projection.invert([point.x, point.y]);\n\t\t\tif (ll) {\n\t\t\t\treturn { longitude: ll[0], latitude: ll[1] };\n\t\t\t}\n\t\t}\n\n\t\treturn { longitude: 0, latitude: 0 };\n\t}\n\n\t/**\n\t * Converts latitude/longitude to screen coordinates (X and Y).\n\t * \n\t * @param  point  Geographical coordinates\n\t * @return        Screen coordinates\n\t */\n\tpublic convert(point: IGeoPoint): IPoint {\n\t\tlet projection = this.get(\"projection\")!;\n\n\t\tconst xy = projection([point.longitude, point.latitude]);\n\n\t\tif (xy) {\n\t\t\treturn { x: xy[0], y: xy[1] };\n\t\t}\n\n\t\treturn { x: 0, y: 0 };\n\t}\n\n\tprotected _handleChartUp(_event: ISpritePointerEvent) {\n\t\tthis.chartContainer._downPoints = {}\n\t}\n\n\tprotected _handlePinch() {\n\t\tconst chartContainer = this.chartContainer;\n\t\tlet i = 0;\n\t\tlet downPoints: Array<IPoint> = [];\n\t\tlet movePoints: Array<IPoint> = [];\n\n\t\t$object.each(chartContainer._downPoints, (k, point) => {\n\t\t\tdownPoints[i] = point;\n\t\t\tlet movePoint = this._movePoints[k];\n\t\t\tif (movePoint) {\n\t\t\t\tmovePoints[i] = movePoint;\n\t\t\t}\n\t\t\ti++;\n\t\t});\n\n\t\tif (downPoints.length > 1 && movePoints.length > 1) {\n\t\t\tconst display = chartContainer._display;\n\n\t\t\tlet downPoint0 = downPoints[0];\n\t\t\tlet downPoint1 = downPoints[1];\n\n\t\t\tlet movePoint0 = movePoints[0];\n\t\t\tlet movePoint1 = movePoints[1];\n\n\t\t\tif (downPoint0 && downPoint1 && movePoint0 && movePoint1) {\n\n\t\t\t\tdownPoint0 = display.toLocal(downPoint0);\n\t\t\t\tdownPoint1 = display.toLocal(downPoint1);\n\n\t\t\t\tmovePoint0 = display.toLocal(movePoint0);\n\t\t\t\tmovePoint1 = display.toLocal(movePoint1);\n\n\t\t\t\tlet initialDistance = Math.hypot(downPoint1.x - downPoint0.x, downPoint1.y - downPoint0.y);\n\t\t\t\tlet currentDistance = Math.hypot(movePoint1.x - movePoint0.x, movePoint1.y - movePoint0.y);\n\n\t\t\t\tlet level = currentDistance / initialDistance * this._downZoomLevel;\n\t\t\t\tlevel = $math.fitToRange(level, this.get(\"minZoomLevel\", 1), this.get(\"maxZoomLevel\", 32));\n\n\t\t\t\tlet moveCenter = { x: movePoint0.x + (movePoint1.x - movePoint0.x) / 2, y: movePoint0.y + (movePoint1.y - movePoint0.y) / 2 };\n\t\t\t\tlet downCenter = { x: downPoint0.x + (downPoint1.x - downPoint0.x) / 2, y: downPoint0.y + (downPoint1.y - downPoint0.y) / 2 };\n\n\t\t\t\tlet tx = this._downTranslateX || 0;\n\t\t\t\tlet ty = this._downTranslateY || 0;\n\n\t\t\t\tlet zoomLevel = this._downZoomLevel;\n\n\t\t\t\tlet xx = moveCenter.x - (- tx + downCenter.x) / zoomLevel * level;\n\t\t\t\tlet yy = moveCenter.y - (- ty + downCenter.y) / zoomLevel * level;\n\n\t\t\t\tthis.set(\"zoomLevel\", level);\n\t\t\t\tthis.set(\"translateX\", xx);\n\t\t\t\tthis.set(\"translateY\", yy);\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _handleChartMove(event: ISpritePointerEvent) {\n\t\tconst chartContainer = this.chartContainer;\n\t\tlet downPoint = chartContainer._getDownPoint();\n\t\tconst downPointId = chartContainer._getDownPointId();\n\t\tconst originalEvent = event.originalEvent as any;\n\n\t\tconst pointerId = originalEvent.pointerId;\n\n\t\tif (this.get(\"pinchZoom\")) {\n\t\t\tif (pointerId) {\n\t\t\t\tthis._movePoints[pointerId] = event.point;\n\n\t\t\t\tif ($object.keys(chartContainer._downPoints).length > 1) {\n\t\t\t\t\tthis._handlePinch();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (downPointId && pointerId && pointerId != downPointId) {\n\t\t\treturn;\n\t\t}\n\t\telse {\n\t\t\tif (downPoint) {\n\t\t\t\tconst panX = this.get(\"panX\");\n\t\t\t\tconst panY = this.get(\"panY\");\n\t\t\t\tif (panX != \"none\" || panY != \"none\") {\n\t\t\t\t\tconst display = chartContainer._display;\n\t\t\t\t\tlet local = display.toLocal(event.point);\n\t\t\t\t\tdownPoint = display.toLocal(downPoint);\n\n\t\t\t\t\tlet x = this._downTranslateX;\n\t\t\t\t\tlet y = this._downTranslateY;\n\n\t\t\t\t\tif (Math.hypot(downPoint.x - local.x, downPoint.y - local.y) > 5) {\n\t\t\t\t\t\tlet bg = chartContainer.get(\"background\");\n\t\t\t\t\t\tif (bg) {\n\t\t\t\t\t\t\tbg.events.disableType(\"click\");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ($type.isNumber(x) && $type.isNumber(y)) {\n\t\t\t\t\t\t\tlet projection = this.get(\"projection\")!;\n\t\t\t\t\t\t\tconst zoomLevel = this.get(\"zoomLevel\", 1);\n\n\t\t\t\t\t\t\tconst maxPanOut = this.get(\"maxPanOut\", 0.4);\n\t\t\t\t\t\t\tconst bounds = this._mapBounds;\n\n\t\t\t\t\t\t\tconst w = this.width();\n\t\t\t\t\t\t\tconst h = this.height();\n\n\t\t\t\t\t\t\tconst ww = bounds[1][0] - bounds[0][0];\n\t\t\t\t\t\t\tconst hh = bounds[1][1] - bounds[0][1];\n\n\t\t\t\t\t\t\tif (panX == \"translateX\") {\n\t\t\t\t\t\t\t\tx += local.x - downPoint.x;\n\n\t\t\t\t\t\t\t\tconst cx = w / 2 - (w / 2 - this._centerX) * zoomLevel;\n\t\t\t\t\t\t\t\tx = Math.min(x, cx + ww * maxPanOut * zoomLevel);\n\t\t\t\t\t\t\t\tx = Math.max(x, cx - ww * maxPanOut * zoomLevel);\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (panY == \"translateY\") {\n\t\t\t\t\t\t\t\ty += local.y - downPoint.y;\n\t\t\t\t\t\t\t\tconst cy = h / 2 - (h / 2 - this._centerY) * zoomLevel;\n\t\t\t\t\t\t\t\ty = Math.min(y, cy + hh * maxPanOut * zoomLevel);\n\t\t\t\t\t\t\t\ty = Math.max(y, cy - hh * maxPanOut * zoomLevel);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.set(\"translateX\", x);\n\t\t\t\t\t\t\tthis.set(\"translateY\", y);\n\n\t\t\t\t\t\t\tif (projection.invert) {\n\t\t\t\t\t\t\t\tlet downLocation = projection.invert([downPoint.x, downPoint.y]);\n\t\t\t\t\t\t\t\tif (location && downLocation) {\n\t\t\t\t\t\t\t\t\tif (panX == \"rotateX\") {\n\t\t\t\t\t\t\t\t\t\tthis.set(\"rotationX\", this._downRotationX! - (downPoint.x - local.x) * this._pLon);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (panY == \"rotateY\") {\n\t\t\t\t\t\t\t\t\t\tthis.set(\"rotationY\", this._downRotationY! + (downPoint.y - local.y) * this._pLat);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _handleWheelRotateY(delta: number, duration: number, easing: (t: Time) => Time) {\n\t\tthis._rya = this.animate({ key: \"rotationY\", to: this.get(\"rotationY\", 0) - delta, duration: duration, easing: easing });\n\t}\n\n\tprotected _handleWheelRotateX(delta: number, duration: number, easing: (t: Time) => Time) {\n\t\tthis._rxa = this.animate({ key: \"rotationX\", to: this.get(\"rotationX\", 0) - delta, duration: duration, easing: easing });\n\t}\n\n\tprotected _handleWheelZoom(delta: number, point: IPoint) {\n\t\tlet step = this.get(\"zoomStep\", 2);\n\t\tlet zoomLevel = this.get(\"zoomLevel\", 1);\n\t\tlet newZoomLevel = zoomLevel;\n\t\tif (delta > 0) {\n\t\t\tnewZoomLevel = zoomLevel / step;\n\t\t}\n\t\telse if (delta < 0) {\n\t\t\tnewZoomLevel = zoomLevel * step;\n\t\t}\n\n\t\tif (newZoomLevel != zoomLevel) {\n\t\t\tthis.zoomToPoint(point, newZoomLevel)\n\t\t}\n\t}\n\n\t/**\n\t * Zoom the map to geographical bounds.\n\t *\n\t * @param  geoBounds  Bounds\n\t * @param  duration   Animation duration in milliseconds\n\t */\n\tpublic zoomToGeoBounds(geoBounds: { left: number, right: number, top: number, bottom: number }, duration?: number): Animation<this[\"_settings\"][\"zoomLevel\"]> | undefined {\n\t\tif (geoBounds.right < geoBounds.left) {\n\t\t\tgeoBounds.right = 180;\n\t\t\tgeoBounds.left = -180;\n\t\t}\n\n\t\tconst geoPath = this.getPrivate(\"geoPath\");\n\t\tconst mapBounds = geoPath.bounds(this._geometryColection);\n\n\t\tlet p0 = this.convert({ longitude: geoBounds.left, latitude: geoBounds.top });\n\t\tlet p1 = this.convert({ longitude: geoBounds.right, latitude: geoBounds.bottom });\n\n\t\tif (p0.y < mapBounds[0][1]) {\n\t\t\tp0.y = mapBounds[0][1];\n\t\t}\n\n\t\tif (p1.y > mapBounds[1][1]) {\n\t\t\tp1.y = mapBounds[1][1];\n\t\t}\n\n\t\tlet zl = this.get(\"zoomLevel\", 1);\n\n\t\tlet bounds = { left: p0.x, right: p1.x, top: p0.y, bottom: p1.y };\n\n\t\tlet seriesContainer = this.seriesContainer;\n\n\t\tlet zoomLevel = .9 * Math.min(seriesContainer.innerWidth() / (bounds.right - bounds.left) * zl, seriesContainer.innerHeight() / (bounds.bottom - bounds.top) * zl);\n\t\tlet x = bounds.left + (bounds.right - bounds.left) / 2;\n\t\tlet y = bounds.top + (bounds.bottom - bounds.top) / 2;\n\n\t\tlet geoPoint = this.invert({ x, y });\n\n\t\treturn this.zoomToGeoPoint(geoPoint, zoomLevel, true, duration);\n\t}\n\n\t/**\n\t * Zooms the map to specific screen point.\n\t *\n\t * @param  point    Point\n\t * @param  level    Zoom level\n\t * @param  center   Center the map\n\t * @param  duration Duration of the animation in milliseconds\n\t */\n\tpublic zoomToPoint(point: IPoint, level: number, center?: boolean, duration?: number): Animation<this[\"_settings\"][\"zoomLevel\"]> | undefined {\n\t\tif (level) {\n\t\t\tlevel = $math.fitToRange(level, this.get(\"minZoomLevel\", 1), this.get(\"maxZoomLevel\", 32));\n\t\t}\n\n\t\tif (!$type.isNumber(duration)) {\n\t\t\tduration = this.get(\"animationDuration\", 0);\n\t\t}\n\t\tconst easing = this.get(\"animationEasing\");\n\t\tconst zoomLevel = this.get(\"zoomLevel\", 1);\n\n\t\tif (this.get(\"centerMapOnZoomOut\") && level == this.get(\"homeZoomLevel\", 1)) {\n\t\t\tpoint = this.convert(this.homeGeoPoint());\n\t\t\tcenter = true;\n\t\t}\n\n\t\tlet x = point.x;\n\t\tlet y = point.y;\n\n\t\tlet tx = this.get(\"translateX\", 0);\n\t\tlet ty = this.get(\"translateY\", 0);\n\n\t\tlet cx = x;\n\t\tlet cy = y;\n\n\t\tif (center) {\n\t\t\tcx = this.width() / 2;\n\t\t\tcy = this.height() / 2;\n\t\t}\n\n\t\tlet xx = cx - ((x - tx) / zoomLevel * level);\n\t\tlet yy = cy - ((y - ty) / zoomLevel * level);\n\n\n\t\tthis._txa = this.animate({ key: \"translateX\", to: xx, duration: duration, easing: easing });\n\t\tthis._tya = this.animate({ key: \"translateY\", to: yy, duration: duration, easing: easing });\n\t\tthis._za = this.animate({ key: \"zoomLevel\", to: level, duration: duration, easing: easing });\n\n\t\tif (zoomLevel != level) {\n\t\t\tthis._root.readerAlert(this._t(\"Zoom level changed to %1\", this._root.locale, $type.numberToString(level)));\n\t\t}\n\n\t\treturn this._za;\n\t}\n\n\t/**\n\t * Zooms the map to specific geographical point.\n\t *\n\t * @param  geoPoint  Point\n\t * @param  level     Zoom level\n\t * @param  center    Center the map\n\t * @param  duration  Duration of the animation in milliseconds\n\t */\n\tpublic zoomToGeoPoint(geoPoint: IGeoPoint, level: number, center?: boolean, duration?: number): Animation<this[\"_settings\"][\"zoomLevel\"]> | undefined {\n\t\tlet xy = this.convert(geoPoint);\n\n\t\tif (xy) {\n\t\t\treturn this.zoomToPoint(xy, level, center, duration);\n\t\t}\n\t}\n\n\t/**\n\t * Zooms the map in.\n\t */\n\tpublic zoomIn(): Animation<this[\"_settings\"][\"zoomLevel\"]> | undefined {\n\t\treturn this.zoomToPoint({ x: this.width() / 2, y: this.height() / 2 }, this.get(\"zoomLevel\", 1) * this.get(\"zoomStep\", 2));\n\t}\n\n\t/**\n\t * Zooms the map out.\n\t */\n\tpublic zoomOut(): Animation<this[\"_settings\"][\"zoomLevel\"]> | undefined {\n\t\treturn this.zoomToPoint({ x: this.width() / 2, y: this.height() / 2 }, this.get(\"zoomLevel\", 1) / this.get(\"zoomStep\", 2));\n\t}\n\n\tpublic _clearDirty() {\n\t\tsuper._clearDirty();\n\t\tthis._dirtyGeometries = false;\n\t\tthis._mapFitted = false;\n\t}\n\n\t/**\n\t * Returns area of a mapPolygon in square pixels.\n\t */\n\tpublic getArea(dataItem: DataItem<IMapPolygonSeriesDataItem>): number {\n\t\tconst geoPath = this.getPrivate(\"geoPath\");\n\t\tconst geometry = dataItem.get(\"geometry\");\n\t\tif (geometry) {\n\t\t\treturn geoPath.area(geometry);\n\t\t}\n\t\treturn 0;\n\t}\n}\n","import identity from \"../identity.js\";\nimport stream from \"../stream.js\";\nimport pathArea from \"./area.js\";\nimport pathBounds from \"./bounds.js\";\nimport pathCentroid from \"./centroid.js\";\nimport PathContext from \"./context.js\";\nimport pathMeasure from \"./measure.js\";\nimport PathString from \"./string.js\";\n\nexport default function(projection, context) {\n  let digits = 3,\n      pointRadius = 4.5,\n      projectionStream,\n      contextStream;\n\n  function path(object) {\n    if (object) {\n      if (typeof pointRadius === \"function\") contextStream.pointRadius(+pointRadius.apply(this, arguments));\n      stream(object, projectionStream(contextStream));\n    }\n    return contextStream.result();\n  }\n\n  path.area = function(object) {\n    stream(object, projectionStream(pathArea));\n    return pathArea.result();\n  };\n\n  path.measure = function(object) {\n    stream(object, projectionStream(pathMeasure));\n    return pathMeasure.result();\n  };\n\n  path.bounds = function(object) {\n    stream(object, projectionStream(pathBounds));\n    return pathBounds.result();\n  };\n\n  path.centroid = function(object) {\n    stream(object, projectionStream(pathCentroid));\n    return pathCentroid.result();\n  };\n\n  path.projection = function(_) {\n    if (!arguments.length) return projection;\n    projectionStream = _ == null ? (projection = null, identity) : (projection = _).stream;\n    return path;\n  };\n\n  path.context = function(_) {\n    if (!arguments.length) return context;\n    contextStream = _ == null ? (context = null, new PathString(digits)) : new PathContext(context = _);\n    if (typeof pointRadius !== \"function\") contextStream.pointRadius(pointRadius);\n    return path;\n  };\n\n  path.pointRadius = function(_) {\n    if (!arguments.length) return pointRadius;\n    pointRadius = typeof _ === \"function\" ? _ : (contextStream.pointRadius(+_), +_);\n    return path;\n  };\n\n  path.digits = function(_) {\n    if (!arguments.length) return digits;\n    if (_ == null) digits = null;\n    else {\n      const d = Math.floor(_);\n      if (!(d >= 0)) throw new RangeError(`invalid digits: ${_}`);\n      digits = d;\n    }\n    if (context === null) contextStream = new PathString(digits);\n    return path;\n  };\n\n  return path.projection(projection).digits(digits).context(context);\n}\n","import type { MapChart } from \"./MapChart\";\nimport type { GeoProjection, GeoPath } from \"d3-geo\";\nimport type { DataItem } from \"../../core/render/Component\";\n\nimport { Series, ISeriesSettings, ISeriesDataItem, ISeriesPrivate, ISeriesEvents } from \"../../core/render/Series\";\n\nimport * as $array from \"../../core/util/Array\";\nimport * as $object from \"../../core/util/Object\";\n\nexport interface IMapSeriesDataItem extends ISeriesDataItem {\n\tgeometry?: GeoJSON.Geometry;\n\tgeometryType?: GeoJSON.GeoJsonGeometryTypes;\n\tvalue?: number;\n}\n\nexport interface IMapSeriesSettings extends ISeriesSettings {\n\n\t/**\n\t * All map series will determine the actual bounds shown in the [[MapChart]].\n\t *\n\t * If we need a series to be ignored while calculating the bounds, we can set\n\t * this to `false`.\n\t *\n\t * Especially useful for background series.\n\t *\n\t * @default true\n\t * @since 5.2.36\n\t */\n\taffectsBounds?: boolean;\n\n\t/**\n\t * Map data in GeoJSON format.\n\t */\n\tgeoJSON?: GeoJSON.GeoJSON;\n\n\t/**\n\t * An array of map object ids from geodata to include in the map.\n\t *\n\t * If set, only those objects listed in `include` will be shown.\n\t */\n\tinclude?: Array<string>;\n\n\t/**\n\t * An array of map object ids from geodata to omit when showing the map.\n\t */\n\texclude?: Array<string>;\n\n\t/**\n\t * A field in series `data` that will hold map object's numeric value.\n\t *\n\t * It can be used in a number of places, e.g. tooltips, heat rules, etc.\n\t */\n\tvalueField?: string;\n\n\t/**\n\t * @ignore\n\t */\n\tgeometryField?: string;\n\n\t/**\n\t * @ignore\n\t */\n\tgeometryTypeField?: string;\n\n\t/**\n\t * Names of geodata items, such as countries, to replace by from loaded\n\t * geodata.\n\t *\n\t * Can be used to override built-in English names for countries.\n\t *\n\t * ```TypeScript\n\t * import am5geodata_lang_ES from '@amcharts5-geodata/lang/es';\n\t * // ...\n\t * map.geodataNames = am5geodata_lang_ES;\n\t * ```\n\t * ```JavaScript\n\t * map.geodataNames = am5geodata_lang_ES;\n\t * ```\n\t *\n\t * @since 5.1.13\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/map-chart/map-translations/} for more info\n\t */\n\tgeodataNames?: { [index: string]: string };\n\n}\n\nexport interface IMapSeriesPrivate extends ISeriesPrivate {\n}\n\nexport interface IMapSeriesEvents extends ISeriesEvents {\n\n\t/**\n\t * Invoked when geodata is finished loading and processed.\n\t */\n\tgeodataprocessed: {};\n\n}\n\n/**\n * Base class for map series.\n */\nexport abstract class MapSeries extends Series {\n\tpublic static className: string = \"MapSeries\";\n\tpublic static classNames: Array<string> = Series.classNames.concat([MapSeries.className]);\n\n\tdeclare public chart: MapChart | undefined;\n\tdeclare public _settings: IMapSeriesSettings;\n\tdeclare public _privateSettings: IMapSeriesPrivate;\n\tdeclare public _dataItemSettings: IMapSeriesDataItem;\n\tdeclare public _events: IMapSeriesEvents;\n\n\tprotected _types: Array<GeoJSON.GeoJsonGeometryTypes> = [];\n\n\tpublic _geometries: Array<GeoJSON.Geometry> = [];\n\tprotected _geoJSONparsed: boolean = false;\n\n\tprotected _excluded: Array<DataItem<IMapSeriesDataItem>> = [];\n\tprotected _notIncluded: Array<DataItem<IMapSeriesDataItem>> = [];\n\n\tprotected _afterNew() {\n\t\tthis.fields.push(\"geometry\", \"geometryType\");\n\t\tthis._setRawDefault(\"geometryField\", \"geometry\");\n\t\tthis._setRawDefault(\"geometryTypeField\", \"geometryType\");\n\t\tthis._setRawDefault(\"idField\", \"id\");\n\n\t\tthis.on(\"geoJSON\", (geoJSON) => {\n\t\t\tlet previous = this._prevSettings.geoJSON;\n\t\t\tif (previous && previous != geoJSON) {\n\t\t\t\tthis.data.clear();\n\t\t\t}\n\t\t})\n\n\t\tsuper._afterNew();\n\t}\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\n\t\tif (this._valuesDirty || this.isDirty(\"geoJSON\") || this.isDirty(\"include\") || this.isDirty(\"exclude\")) {\n\t\t\tconst geoJSON = this.get(\"geoJSON\");\n\t\t\tlet previous = this._prevSettings.geoJSON;\n\n\t\t\tif (previous && previous != geoJSON) {\n\t\t\t\tthis._prevSettings.geoJSON = undefined;\n\t\t\t\tthis._geoJSONparsed = false;\n\t\t\t}\n\n\t\t\tif (!this._geoJSONparsed) {\n\t\t\t\tthis._parseGeoJSON();\n\t\t\t\tthis._geoJSONparsed = true;\n\t\t\t}\n\n\t\t\tconst chart = this.chart;\n\t\t\tconst exclude = this.get(\"exclude\");\n\n\t\t\tif (exclude) {\n\t\t\t\tif (chart) {\n\t\t\t\t\tchart._centerLocation = null;\n\t\t\t\t}\n\t\t\t\t$array.each(exclude, (id) => {\n\t\t\t\t\tconst dataItem = this.getDataItemById(id);\n\t\t\t\t\tif (dataItem) {\n\t\t\t\t\t\tthis._excludeDataItem(dataItem)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tif (!exclude || exclude.length == 0) {\n\t\t\t\t$array.each(this._excluded, (dataItem) => {\n\t\t\t\t\tthis._unexcludeDataItem(dataItem)\n\t\t\t\t})\n\t\t\t\tthis._excluded = [];\n\t\t\t}\n\n\t\t\tconst include = this.get(\"include\");\n\t\t\tif (include) {\n\t\t\t\tif (chart) {\n\t\t\t\t\tchart._centerLocation = null;\n\t\t\t\t}\n\t\t\t\t$array.each(this.dataItems, (dataItem) => {\n\t\t\t\t\tconst id = dataItem.get(\"id\");\n\t\t\t\t\tif (id && include.indexOf(id) == -1) {\n\t\t\t\t\t\tthis._notIncludeDataItem(dataItem);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis._unNotIncludeDataItem(dataItem);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tif (!include) {\n\t\t\t\t$array.each(this._notIncluded, (dataItem) => {\n\t\t\t\t\tthis._unNotIncludeDataItem(dataItem);\n\t\t\t\t})\n\t\t\t\tthis._notIncluded = [];\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _excludeDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tthis._removeGeometry(dataItem.get(\"geometry\"));\n\t\t$array.move(this._excluded, dataItem);\n\t}\n\n\tprotected _unexcludeDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tthis._addGeometry(dataItem.get(\"geometry\"), this);\n\t}\n\n\tprotected _notIncludeDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tthis._removeGeometry(dataItem.get(\"geometry\"));\n\t\t$array.move(this._notIncluded, dataItem);\n\t}\n\n\tprotected _unNotIncludeDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tthis._addGeometry(dataItem.get(\"geometry\"), this);\n\t}\n\n\tprotected checkInclude(id: string, includes: string[] | undefined, excludes?: string[] | undefined): boolean {\n\t\tif (includes) {\n\t\t\tif (includes.length == 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (includes.indexOf(id) == -1) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (excludes && excludes.length > 0) {\n\t\t\tif (excludes.indexOf(id) != -1) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tprotected _parseGeoJSON() {\n\n\t\tconst geoJSON = this.get(\"geoJSON\");\n\t\tif (geoJSON) {\n\n\t\t\tlet features!: any[];\n\n\t\t\tif (geoJSON.type == \"FeatureCollection\") {\n\t\t\t\tfeatures = geoJSON.features;\n\t\t\t}\n\t\t\telse if (geoJSON.type == \"Feature\") {\n\t\t\t\tfeatures = [geoJSON];\n\t\t\t}\n\t\t\telse if ([\"Point\", \"LineString\", \"Polygon\", \"MultiPoint\", \"MultiLineString\", \"MultiPolygon\"].indexOf(geoJSON.type) != -1) {\n\t\t\t\tfeatures = [{ geometry: geoJSON }];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconsole.log(\"nothing found in geoJSON\");\n\t\t\t}\n\n\t\t\tconst geodataNames = this.get(\"geodataNames\");\n\t\t\tif (features) {\n\n\t\t\t\tconst idField = this.get(\"idField\", \"id\");\n\n\t\t\t\tfor (let i = 0, len = features.length; i < len; i++) {\n\t\t\t\t\tlet feature: any = features[i];\n\t\t\t\t\tlet geometry: any = feature.geometry;\n\n\t\t\t\t\tif (geometry) {\n\t\t\t\t\t\tlet type = geometry.type;\n\t\t\t\t\t\tlet id: string = feature[idField];\n\n\t\t\t\t\t\tif (geodataNames && geodataNames[id]) {\n\t\t\t\t\t\t\tfeature.properties.name = geodataNames[id];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this._types.indexOf(type) != -1) {\n\t\t\t\t\t\t\t//if (!this.checkInclude(id, this.get(\"include\"), this.get(\"exclude\"))) {\n\t\t\t\t\t\t\t//\tcontinue;\n\t\t\t\t\t\t\t//}\n\n\t\t\t\t\t\t\tlet dataItem: any;\n\n\t\t\t\t\t\t\tif (id != null) {\n\t\t\t\t\t\t\t\t// find data object in user-provided data\n\t\t\t\t\t\t\t\tdataItem = $array.find(this.dataItems, (value: any) => {\n\t\t\t\t\t\t\t\t\treturn value.get(\"id\") == id;\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet dataObject: any;\n\n\t\t\t\t\t\t\tif (dataItem) {\n\t\t\t\t\t\t\t\tdataObject = dataItem.dataContext;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// create one if not found\n\t\t\t\t\t\t\tif (!dataItem) {\n\t\t\t\t\t\t\t\tdataObject = { geometry: geometry, geometryType: type, madeFromGeoData: true };\n\t\t\t\t\t\t\t\tdataObject[idField] = id;\n\t\t\t\t\t\t\t\tthis.data.push(dataObject);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// in case found\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t// if user-provided object doesn't have points data provided in any way:\n\t\t\t\t\t\t\t\tif (!dataObject.geometry) {\n\t\t\t\t\t\t\t\t\tdataObject.geometry = geometry;\n\t\t\t\t\t\t\t\t\tdataObject.geometryType = type;\n\t\t\t\t\t\t\t\t\tdataItem.set(\"geometry\", geometry);\n\t\t\t\t\t\t\t\t\tdataItem.set(\"geometryType\", type);\n\t\t\t\t\t\t\t\t\tthis.processDataItem(dataItem);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// copy properties data to datacontext\n\t\t\t\t\t\t\t$object.softCopyProperties(feature.properties, dataObject);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst type = \"geodataprocessed\";\n\t\t\tif (this.events.isEnabled(type)) {\n\t\t\t\tthis.events.dispatch(type, { type: type, target: this });\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic abstract markDirtyProjection(): void\n\n\tpublic _placeBulletsContainer(_chart: MapChart) {\n\t\tthis.children.moveValue(this.bulletsContainer);\n\t}\n\n\tpublic _removeBulletsContainer() {\n\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic projection(): GeoProjection | undefined {\n\t\tconst chart = this.chart;\n\t\tif (chart) {\n\t\t\treturn chart.get(\"projection\");\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic geoPath(): GeoPath | undefined {\n\t\tconst chart = this.chart;\n\t\tif (chart) {\n\t\t\treturn chart.getPrivate(\"geoPath\");\n\t\t}\n\t}\n\n\tprotected _addGeometry(geometry: any, series: MapSeries) {\n\t\tif (geometry && series.get(\"affectsBounds\", true)) {\n\t\t\tthis._geometries.push(geometry);\n\n\t\t\tconst chart = this.chart;\n\t\t\tif (chart) {\n\t\t\t\tchart.markDirtyGeometries();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _removeGeometry(geometry: any) {\n\t\tif (geometry) {\n\t\t\t$array.remove(this._geometries, geometry);\n\n\t\t\tconst chart = this.chart;\n\t\t\tif (chart) {\n\t\t\t\tchart.markDirtyGeometries();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _dispose() {\n\t\tsuper._dispose();\n\n\t\tconst chart = this.chart;\n\t\tif (chart) {\n\t\t\tchart.series.removeValue(this);\n\t\t}\n\t}\n\n\tprotected _onDataClear() {\n\t\tsuper._onDataClear();\n\t\tthis._geoJSONparsed = false;\n\t}\n}\n","import { Graphics, IGraphicsSettings, IGraphicsPrivate } from \"../../core/render/Graphics\";\nimport type { MapPolygonSeries } from \"./MapPolygonSeries\";\nimport type { IGeoPoint } from \"../../core/util/IGeoPoint\";\nimport type { IPoint } from \"../../core/util/IPoint\";\nimport * as $mapUtils from \"./MapUtils\";\nimport $polylabel from \"polylabel\";\nimport { geoArea } from \"d3-geo\";\n\nexport interface IMapPolygonSettings extends IGraphicsSettings {\n\n\t/**\n\t * A GeoJSON representation of the polygons geometry.\n\t */\n\tgeometry?: GeoJSON.MultiPolygon | GeoJSON.Polygon;\n\n\t/**\n\t * @todo needs description\n\t * @default 0.5\n\t */\n\tprecision?: number;\n\n}\n\nexport interface IMapPolygonPrivate extends IGraphicsPrivate {\n}\n\n/**\n * A polygon in a [[MapPolygonSeries]].\n */\nexport class MapPolygon extends Graphics {\n\n\tdeclare public _settings: IMapPolygonSettings;\n\tdeclare public _privateSettings: IMapPolygonPrivate;\n\n\tpublic static className: string = \"MapPolygon\";\n\tpublic static classNames: Array<string> = Graphics.classNames.concat([MapPolygon.className]);\n\tprotected _projectionDirty: boolean = false;\n\n\t/**\n\t * A [[MapPolygonSeries]] polygon belongs to.\n\t */\n\tpublic series: MapPolygonSeries | undefined;\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tif (this._projectionDirty || this.isDirty(\"geometry\") || this.isDirty(\"precision\")) {\n\t\t\tconst geometry = this.get(\"geometry\")!;\n\n\t\t\tif (geometry) {\n\t\t\t\tconst series = this.series;\n\t\t\t\tif (series) {\n\t\t\t\t\tconst projection = series.projection();\n\t\t\t\t\tif (projection) {\n\t\t\t\t\t\tprojection.precision(this.get(\"precision\", 0.5));\n\t\t\t\t\t}\n\n\t\t\t\t\tconst geoPath = series.geoPath();\n\n\t\t\t\t\tif (geoPath) {\n\t\t\t\t\t\tthis._clear = true;\n\n\t\t\t\t\t\tthis.set(\"draw\", (_display) => {\n\t\t\t\t\t\t\tgeoPath.context(this._display as any);\n\t\t\t\t\t\t\tgeoPath(geometry);\n\t\t\t\t\t\t\tgeoPath.context(null);\n\t\t\t\t\t\t})\n\n\t\t\t\t\t\tif (this.isHover()) {\n\t\t\t\t\t\t\tthis.showTooltip();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic markDirtyProjection() {\n\t\tthis.markDirty();\n\t\tthis._projectionDirty = true;\n\t}\n\n\tpublic _clearDirty() {\n\t\tsuper._clearDirty();\n\t\tthis._projectionDirty = false;\n\t}\n\n\t/**\n\t * Returns latitude/longitude of the geometrical center of the polygon.\n\t *\n\t * @return Center\n\t */\n\tpublic geoCentroid(): IGeoPoint {\n\t\tconst geometry = this.get(\"geometry\")!;\n\t\tif (geometry) {\n\t\t\treturn $mapUtils.getGeoCentroid(geometry);\n\t\t}\n\t\telse {\n\t\t\treturn { latitude: 0, longitude: 0 };\n\t\t}\n\t}\n\n\t/**\n\t * Returns latitude/longitude of the visual center of the polygon.\n\t *\n\t * @return Center\n\t */\n\tpublic visualCentroid(): IGeoPoint {\n\n\t\tlet biggestArea = 0;\n\t\tlet coordinates: number[][][] = [];\n\t\tconst geometry = this.get(\"geometry\")!;\n\n\t\tif (geometry) {\n\t\t\tif (geometry.type == \"Polygon\") {\n\t\t\t\tcoordinates = geometry.coordinates as number[][][];\n\t\t\t}\n\t\t\telse if (geometry.type == \"MultiPolygon\") {\n\t\t\t\tfor (let i = 0; i < geometry.coordinates.length; i++) {\n\t\t\t\t\tlet coords = geometry.coordinates[i] as number[][][];\n\t\t\t\t\tlet area = geoArea({ type: \"Polygon\", coordinates: coords });\n\t\t\t\t\tif (area > biggestArea) {\n\t\t\t\t\t\tcoordinates = coords;\n\t\t\t\t\t\tbiggestArea = area;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet center = $polylabel(coordinates as number[][][]);\n\t\t\treturn { longitude: center[0], latitude: center[1] };\n\n\t\t}\n\t\treturn { longitude: 0, latitude: 0 };\n\t}\n\n\n\tpublic _getTooltipPoint(): IPoint {\n\t\tconst series = this.series;\n\n\t\tif (series) {\n\t\t\tconst projection = series.projection();\n\t\t\tif (projection) {\n\t\t\t\tconst geoPoint = this.visualCentroid();\n\t\t\t\tconst xy = projection([geoPoint.longitude, geoPoint.latitude]);\n\n\t\t\t\tif (xy) {\n\t\t\t\t\treturn { x: xy[0], y: xy[1] }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn { x: 0, y: 0 };\n\t}\n}\n","import type { DataItem } from \"../../core/render/Component\";\n\nimport { MapSeries, IMapSeriesSettings, IMapSeriesDataItem, IMapSeriesPrivate } from \"./MapSeries\";\nimport { MapPolygon } from \"./MapPolygon\";\nimport { Template } from \"../../core/util/Template\";\nimport { ListTemplate } from \"../../core/util/List\";\n\nimport * as $array from \"../../core/util/Array\";\nimport * as $mapUtils from \"./MapUtils\";\nimport type { Animation } from \"../../core/util/Entity\";\n\nexport interface IMapPolygonSeriesPrivate extends IMapSeriesPrivate {\n}\n\nexport interface IMapPolygonSeriesDataItem extends IMapSeriesDataItem {\n\n\t/**\n\t * Related [[MapPolygon]] object.\n\t */\n\tmapPolygon: MapPolygon;\n\n\t/**\n\t * GeoJSON geometry of the polygon.\n\t */\n\tgeometry?: GeoJSON.Polygon | GeoJSON.MultiPolygon;\n}\n\nexport interface IMapPolygonSeriesSettings extends IMapSeriesSettings {\n\n\t/**\n\t * If set to `true`, the order of coordinates in GeoJSON will be flipped.\n\t *\n\t * Some GeoJSON software produces those in reverse order, so if your custom\n\t * map appears garbled, try this setting.\n\t * \n\t * @default false\n\t * @since 5.2.42\n\t */\n\treverseGeodata?: boolean;\n\n}\n\n/**\n * Creates a map series for displaying polygons.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/map-chart/map-polygon-series/} for more info\n * @important\n */\nexport class MapPolygonSeries extends MapSeries {\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeMapPolygon(dataItem: DataItem<this[\"_dataItemSettings\"]>): MapPolygon {\n\t\tconst mapPolygon = this.children.push(this.mapPolygons.make());\n\t\tmapPolygon._setDataItem(dataItem);\n\t\tthis.mapPolygons.push(mapPolygon);\n\t\treturn mapPolygon;\n\t}\n\n\t/**\n\t * A [[ListTemplate]] of all polygons in series.\n\t *\n\t * `mapPolygons.template` can also be used to configure polygons.\n\t *\n\t * @default new ListTemplate<MapPolygon>\n\t */\n\tpublic readonly mapPolygons: ListTemplate<MapPolygon> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => MapPolygon._new(this._root, {}, [this.mapPolygons.template])\n\t);\n\n\tpublic static className: string = \"MapPolygonSeries\";\n\tpublic static classNames: Array<string> = MapSeries.classNames.concat([MapPolygonSeries.className]);\n\n\tdeclare public _settings: IMapPolygonSeriesSettings;\n\tdeclare public _privateSettings: IMapPolygonSeriesPrivate;\n\tdeclare public _dataItemSettings: IMapPolygonSeriesDataItem;\n\n\tprotected _types: Array<GeoJSON.GeoJsonGeometryTypes> = [\"Polygon\", \"MultiPolygon\"];\n\n\t/**\n\t * @ignore\n\t */\n\tpublic markDirtyProjection() {\n\t\t$array.each(this.dataItems, (dataItem) => {\n\t\t\tlet mapPolygon = dataItem.get(\"mapPolygon\");\n\t\t\tif (mapPolygon) {\n\t\t\t\tmapPolygon.markDirtyProjection();\n\t\t\t}\n\t\t})\n\t}\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\n\t\tif (this.isDirty(\"fill\")) {\n\t\t\tthis.mapPolygons.template.set(\"fill\", this.get(\"fill\"));\n\t\t}\n\t\tif (this.isDirty(\"stroke\")) {\n\t\t\tthis.mapPolygons.template.set(\"stroke\", this.get(\"stroke\"));\n\t\t}\n\t}\n\n\tprotected processDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper.processDataItem(dataItem);\n\n\t\tlet mapPolygon = dataItem.get(\"mapPolygon\");\n\t\tif (!mapPolygon) {\n\t\t\tmapPolygon = this.makeMapPolygon(dataItem);\n\t\t}\n\n\t\tdataItem.set(\"mapPolygon\", mapPolygon);\n\t\tlet geometry = dataItem.get(\"geometry\")!;\n\n\t\tif (geometry) {\n\t\t\tif (this.get(\"reverseGeodata\")) {\n\t\t\t\tconst coordinates = geometry.coordinates;\n\t\t\t\tif (coordinates) {\n\t\t\t\t\tfor (let x = 0; x < geometry.coordinates.length; x++) {\n\t\t\t\t\t\tif (geometry.type == \"MultiPolygon\") {\n\t\t\t\t\t\t\tfor (let y = 0; y < geometry.coordinates[x].length; y++) {\n\t\t\t\t\t\t\t\tgeometry.coordinates[x][y].reverse()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tgeometry.coordinates[x].reverse()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tmapPolygon.set(\"geometry\", geometry);\n\t\t}\n\n\t\tmapPolygon.series = this;\n\n\t\tthis._addGeometry(dataItem.get(\"geometry\"), this);\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic disposeDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper.disposeDataItem(dataItem);\n\t\tconst mapPolygon = dataItem.get(\"mapPolygon\");\n\t\tif (mapPolygon) {\n\t\t\tthis.mapPolygons.removeValue(mapPolygon);\n\t\t\tmapPolygon.dispose();\n\t\t}\n\t\tthis._removeGeometry(dataItem.get(\"geometry\"));\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tprotected _excludeDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper._excludeDataItem(dataItem);\n\t\tconst mapPolygon = dataItem.get(\"mapPolygon\");\n\t\tif (mapPolygon) {\n\t\t\tmapPolygon.setPrivate(\"visible\", false);\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tprotected _unexcludeDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper._unexcludeDataItem(dataItem);\n\t\tconst mapPolygon = dataItem.get(\"mapPolygon\");\n\t\tif (mapPolygon) {\n\t\t\tmapPolygon.setPrivate(\"visible\", true);\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tprotected _notIncludeDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper._notIncludeDataItem(dataItem);\n\t\tconst mapPolygon = dataItem.get(\"mapPolygon\");\n\t\tif (mapPolygon) {\n\t\t\tmapPolygon.setPrivate(\"visible\", false);\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tprotected _unNotIncludeDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper._unNotIncludeDataItem(dataItem);\n\t\tconst mapPolygon = dataItem.get(\"mapPolygon\");\n\t\tif (mapPolygon) {\n\t\t\tmapPolygon.setPrivate(\"visible\", true);\n\t\t}\n\t}\n\n\t/**\n\t * Forces a repaint of the element which relies on data.\n\t *\n\t * @since 5.0.21\n\t */\n\tpublic markDirtyValues(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper.markDirtyValues();\n\t\tif (dataItem) {\n\t\t\tconst mapPolygon = dataItem.get(\"mapPolygon\");\n\t\t\tif (mapPolygon) {\n\t\t\t\tmapPolygon.set(\"geometry\", dataItem.get(\"geometry\"));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Centers and zooms in on the specific polygon.\n\t *\n\t * @param  dataItem  Target data item\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/map-chart/map-pan-zoom/#Zooming_to_clicked_object} for more info\n\t */\n\tpublic zoomToDataItem(dataItem: DataItem<IMapPolygonSeriesDataItem>): Animation<any> | undefined {\n\t\tconst polygon = dataItem.get(\"mapPolygon\");\n\t\tif (polygon) {\n\t\t\tconst geometry = polygon.get(\"geometry\");\n\t\t\tconst chart = this.chart;\n\t\t\tif (geometry && chart) {\n\t\t\t\treturn chart.zoomToGeoBounds($mapUtils.getGeoBounds(geometry));\n\t\t\t}\n\t\t}\n\t}\n}\n","import {Adder} from \"d3-array\";\nimport {asin, atan2, cos, degrees, epsilon, epsilon2, hypot, radians, sin, sqrt} from \"./math.js\";\nimport noop from \"./noop.js\";\nimport stream from \"./stream.js\";\n\nvar W0, W1,\n    X0, Y0, Z0,\n    X1, Y1, Z1,\n    X2, Y2, Z2,\n    lambda00, phi00, // first point\n    x0, y0, z0; // previous point\n\nvar centroidStream = {\n  sphere: noop,\n  point: centroidPoint,\n  lineStart: centroidLineStart,\n  lineEnd: centroidLineEnd,\n  polygonStart: function() {\n    centroidStream.lineStart = centroidRingStart;\n    centroidStream.lineEnd = centroidRingEnd;\n  },\n  polygonEnd: function() {\n    centroidStream.lineStart = centroidLineStart;\n    centroidStream.lineEnd = centroidLineEnd;\n  }\n};\n\n// Arithmetic mean of Cartesian vectors.\nfunction centroidPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var cosPhi = cos(phi);\n  centroidPointCartesian(cosPhi * cos(lambda), cosPhi * sin(lambda), sin(phi));\n}\n\nfunction centroidPointCartesian(x, y, z) {\n  ++W0;\n  X0 += (x - X0) / W0;\n  Y0 += (y - Y0) / W0;\n  Z0 += (z - Z0) / W0;\n}\n\nfunction centroidLineStart() {\n  centroidStream.point = centroidLinePointFirst;\n}\n\nfunction centroidLinePointFirst(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var cosPhi = cos(phi);\n  x0 = cosPhi * cos(lambda);\n  y0 = cosPhi * sin(lambda);\n  z0 = sin(phi);\n  centroidStream.point = centroidLinePoint;\n  centroidPointCartesian(x0, y0, z0);\n}\n\nfunction centroidLinePoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var cosPhi = cos(phi),\n      x = cosPhi * cos(lambda),\n      y = cosPhi * sin(lambda),\n      z = sin(phi),\n      w = atan2(sqrt((w = y0 * z - z0 * y) * w + (w = z0 * x - x0 * z) * w + (w = x0 * y - y0 * x) * w), x0 * x + y0 * y + z0 * z);\n  W1 += w;\n  X1 += w * (x0 + (x0 = x));\n  Y1 += w * (y0 + (y0 = y));\n  Z1 += w * (z0 + (z0 = z));\n  centroidPointCartesian(x0, y0, z0);\n}\n\nfunction centroidLineEnd() {\n  centroidStream.point = centroidPoint;\n}\n\n// See J. E. Brock, The Inertia Tensor for a Spherical Triangle,\n// J. Applied Mechanics 42, 239 (1975).\nfunction centroidRingStart() {\n  centroidStream.point = centroidRingPointFirst;\n}\n\nfunction centroidRingEnd() {\n  centroidRingPoint(lambda00, phi00);\n  centroidStream.point = centroidPoint;\n}\n\nfunction centroidRingPointFirst(lambda, phi) {\n  lambda00 = lambda, phi00 = phi;\n  lambda *= radians, phi *= radians;\n  centroidStream.point = centroidRingPoint;\n  var cosPhi = cos(phi);\n  x0 = cosPhi * cos(lambda);\n  y0 = cosPhi * sin(lambda);\n  z0 = sin(phi);\n  centroidPointCartesian(x0, y0, z0);\n}\n\nfunction centroidRingPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var cosPhi = cos(phi),\n      x = cosPhi * cos(lambda),\n      y = cosPhi * sin(lambda),\n      z = sin(phi),\n      cx = y0 * z - z0 * y,\n      cy = z0 * x - x0 * z,\n      cz = x0 * y - y0 * x,\n      m = hypot(cx, cy, cz),\n      w = asin(m), // line weight = angle\n      v = m && -w / m; // area weight multiplier\n  X2.add(v * cx);\n  Y2.add(v * cy);\n  Z2.add(v * cz);\n  W1 += w;\n  X1 += w * (x0 + (x0 = x));\n  Y1 += w * (y0 + (y0 = y));\n  Z1 += w * (z0 + (z0 = z));\n  centroidPointCartesian(x0, y0, z0);\n}\n\nexport default function(object) {\n  W0 = W1 =\n  X0 = Y0 = Z0 =\n  X1 = Y1 = Z1 = 0;\n  X2 = new Adder();\n  Y2 = new Adder();\n  Z2 = new Adder();\n  stream(object, centroidStream);\n\n  var x = +X2,\n      y = +Y2,\n      z = +Z2,\n      m = hypot(x, y, z);\n\n  // If the area-weighted ccentroid is undefined, fall back to length-weighted ccentroid.\n  if (m < epsilon2) {\n    x = X1, y = Y1, z = Z1;\n    // If the feature has zero length, fall back to arithmetic mean of point vectors.\n    if (W1 < epsilon) x = X0, y = Y0, z = Z0;\n    m = hypot(x, y, z);\n    // If the feature still has an undefined ccentroid, then return.\n    if (m < epsilon2) return [NaN, NaN];\n  }\n\n  return [atan2(y, x) * degrees, asin(z / m) * degrees];\n}\n","import {Adder} from \"d3-array\";\nimport {areaStream, areaRingSum} from \"./area.js\";\nimport {cartesian, cartesianCross, cartesianNormalizeInPlace, spherical} from \"./cartesian.js\";\nimport {abs, degrees, epsilon, radians} from \"./math.js\";\nimport stream from \"./stream.js\";\n\nvar lambda0, phi0, lambda1, phi1, // bounds\n    lambda2, // previous lambda-coordinate\n    lambda00, phi00, // first point\n    p0, // previous 3D point\n    deltaSum,\n    ranges,\n    range;\n\nvar boundsStream = {\n  point: boundsPoint,\n  lineStart: boundsLineStart,\n  lineEnd: boundsLineEnd,\n  polygonStart: function() {\n    boundsStream.point = boundsRingPoint;\n    boundsStream.lineStart = boundsRingStart;\n    boundsStream.lineEnd = boundsRingEnd;\n    deltaSum = new Adder();\n    areaStream.polygonStart();\n  },\n  polygonEnd: function() {\n    areaStream.polygonEnd();\n    boundsStream.point = boundsPoint;\n    boundsStream.lineStart = boundsLineStart;\n    boundsStream.lineEnd = boundsLineEnd;\n    if (areaRingSum < 0) lambda0 = -(lambda1 = 180), phi0 = -(phi1 = 90);\n    else if (deltaSum > epsilon) phi1 = 90;\n    else if (deltaSum < -epsilon) phi0 = -90;\n    range[0] = lambda0, range[1] = lambda1;\n  },\n  sphere: function() {\n    lambda0 = -(lambda1 = 180), phi0 = -(phi1 = 90);\n  }\n};\n\nfunction boundsPoint(lambda, phi) {\n  ranges.push(range = [lambda0 = lambda, lambda1 = lambda]);\n  if (phi < phi0) phi0 = phi;\n  if (phi > phi1) phi1 = phi;\n}\n\nfunction linePoint(lambda, phi) {\n  var p = cartesian([lambda * radians, phi * radians]);\n  if (p0) {\n    var normal = cartesianCross(p0, p),\n        equatorial = [normal[1], -normal[0], 0],\n        inflection = cartesianCross(equatorial, normal);\n    cartesianNormalizeInPlace(inflection);\n    inflection = spherical(inflection);\n    var delta = lambda - lambda2,\n        sign = delta > 0 ? 1 : -1,\n        lambdai = inflection[0] * degrees * sign,\n        phii,\n        antimeridian = abs(delta) > 180;\n    if (antimeridian ^ (sign * lambda2 < lambdai && lambdai < sign * lambda)) {\n      phii = inflection[1] * degrees;\n      if (phii > phi1) phi1 = phii;\n    } else if (lambdai = (lambdai + 360) % 360 - 180, antimeridian ^ (sign * lambda2 < lambdai && lambdai < sign * lambda)) {\n      phii = -inflection[1] * degrees;\n      if (phii < phi0) phi0 = phii;\n    } else {\n      if (phi < phi0) phi0 = phi;\n      if (phi > phi1) phi1 = phi;\n    }\n    if (antimeridian) {\n      if (lambda < lambda2) {\n        if (angle(lambda0, lambda) > angle(lambda0, lambda1)) lambda1 = lambda;\n      } else {\n        if (angle(lambda, lambda1) > angle(lambda0, lambda1)) lambda0 = lambda;\n      }\n    } else {\n      if (lambda1 >= lambda0) {\n        if (lambda < lambda0) lambda0 = lambda;\n        if (lambda > lambda1) lambda1 = lambda;\n      } else {\n        if (lambda > lambda2) {\n          if (angle(lambda0, lambda) > angle(lambda0, lambda1)) lambda1 = lambda;\n        } else {\n          if (angle(lambda, lambda1) > angle(lambda0, lambda1)) lambda0 = lambda;\n        }\n      }\n    }\n  } else {\n    ranges.push(range = [lambda0 = lambda, lambda1 = lambda]);\n  }\n  if (phi < phi0) phi0 = phi;\n  if (phi > phi1) phi1 = phi;\n  p0 = p, lambda2 = lambda;\n}\n\nfunction boundsLineStart() {\n  boundsStream.point = linePoint;\n}\n\nfunction boundsLineEnd() {\n  range[0] = lambda0, range[1] = lambda1;\n  boundsStream.point = boundsPoint;\n  p0 = null;\n}\n\nfunction boundsRingPoint(lambda, phi) {\n  if (p0) {\n    var delta = lambda - lambda2;\n    deltaSum.add(abs(delta) > 180 ? delta + (delta > 0 ? 360 : -360) : delta);\n  } else {\n    lambda00 = lambda, phi00 = phi;\n  }\n  areaStream.point(lambda, phi);\n  linePoint(lambda, phi);\n}\n\nfunction boundsRingStart() {\n  areaStream.lineStart();\n}\n\nfunction boundsRingEnd() {\n  boundsRingPoint(lambda00, phi00);\n  areaStream.lineEnd();\n  if (abs(deltaSum) > epsilon) lambda0 = -(lambda1 = 180);\n  range[0] = lambda0, range[1] = lambda1;\n  p0 = null;\n}\n\n// Finds the left-right distance between two longitudes.\n// This is almost the same as (lambda1 - lambda0 + 360°) % 360°, except that we want\n// the distance between ±180° to be 360°.\nfunction angle(lambda0, lambda1) {\n  return (lambda1 -= lambda0) < 0 ? lambda1 + 360 : lambda1;\n}\n\nfunction rangeCompare(a, b) {\n  return a[0] - b[0];\n}\n\nfunction rangeContains(range, x) {\n  return range[0] <= range[1] ? range[0] <= x && x <= range[1] : x < range[0] || range[1] < x;\n}\n\nexport default function(feature) {\n  var i, n, a, b, merged, deltaMax, delta;\n\n  phi1 = lambda1 = -(lambda0 = phi0 = Infinity);\n  ranges = [];\n  stream(feature, boundsStream);\n\n  // First, sort ranges by their minimum longitudes.\n  if (n = ranges.length) {\n    ranges.sort(rangeCompare);\n\n    // Then, merge any ranges that overlap.\n    for (i = 1, a = ranges[0], merged = [a]; i < n; ++i) {\n      b = ranges[i];\n      if (rangeContains(a, b[0]) || rangeContains(a, b[1])) {\n        if (angle(a[0], b[1]) > angle(a[0], a[1])) a[1] = b[1];\n        if (angle(b[0], a[1]) > angle(a[0], a[1])) a[0] = b[0];\n      } else {\n        merged.push(a = b);\n      }\n    }\n\n    // Finally, find the largest gap between the merged ranges.\n    // The final bounding box will be the inverse of this gap.\n    for (deltaMax = -Infinity, n = merged.length - 1, i = 0, a = merged[n]; i <= n; a = b, ++i) {\n      b = merged[i];\n      if ((delta = angle(a[1], b[0])) > deltaMax) deltaMax = delta, lambda0 = b[0], lambda1 = a[1];\n    }\n  }\n\n  ranges = range = null;\n\n  return lambda0 === Infinity || phi0 === Infinity\n      ? [[NaN, NaN], [NaN, NaN]]\n      : [[lambda0, phi0], [lambda1, phi1]];\n}\n","import type { IGeoPoint } from \"../../core/util/IGeoPoint\";\nimport * as $math from \"../../core/util/Math\";\nimport { geoCircle, geoCentroid, geoBounds } from \"d3-geo\";\n\n/**\n * Returns a GeoJSON representation of a circle, suitable for use as `geometry` value\n * in a [[MapPolygon]] in a [[MapPolygonSeries]].\n * \n * @param   geoPoint  Coordinates\n * @param   radius    Circle radius in degrees\n * @return            Polygon geometry\n */\nexport function getGeoCircle(geoPoint: IGeoPoint, radius: number): GeoJSON.Polygon {\n\treturn geoCircle().center([geoPoint.longitude, geoPoint.latitude]).radius(radius)();\n}\n\n/**\n * @ignore\n */\nexport function getGeoCentroid(geometry: GeoJSON.GeometryObject): IGeoPoint {\n\tconst centroid = geoCentroid(geometry);\n\treturn { longitude: centroid[0], latitude: centroid[1] };\n}\n\n/**\n * @ignore\n */\nexport function getGeoBounds(geometry: GeoJSON.GeometryObject): { left: number, right: number, top: number, bottom: number } {\n\tconst bounds = geoBounds(geometry);\n\n\tif (bounds) {\n\t\tconst geoBounds = { left: bounds[0][0], right: bounds[1][0], top: bounds[1][1], bottom: bounds[0][1] };\n\t\tif(geoBounds.right < geoBounds.left){\n\t\t\tgeoBounds.right = 180;\n\t\t\tgeoBounds.left = -180;\n\t\t}\n\t\treturn geoBounds;\n\t}\n\treturn { left: 0, right: 0, top: 0, bottom: 0 };\n}\n\n/**\n * Returns a GeoJSON representation of a rectangle, suitable for use\n * as `geometry` value in a [[MapPolygon]] in a [[MapPolygonSeries]].\n * \n * @param   north  North latitude\n * @param   east   East longitude\n * @param   south  South latitude\n * @param   west   West longitude\n * @return         polygon geometry\n */\nexport function getGeoRectangle(north: number, east: number, south: number, west: number): GeoJSON.MultiPolygon {\n\n\tlet multiPolygon: Array<Array<Array<[number, number]>>> = [];\n\n\tif (west <= -180) {\n\t\twest = -179.9999;\n\t}\n\tif (south <= -90) {\n\t\tsouth = -89.9999;\n\t}\n\tif (north >= 90) {\n\t\tnorth = 89.9999;\n\t}\n\tif (east >= 180) {\n\t\teast = 179.9999;\n\t}\n\n\n\tlet stepLong = Math.min(90, (east - west) / Math.ceil((east - west) / 90));\n\tlet stepLat = (north - south) / Math.ceil((north - south) / 90);\n\n\tfor (let ln = west; ln < east; ln = ln + stepLong) {\n\t\tlet surface: Array<[number, number]> = [];\n\t\tmultiPolygon.push([surface]);\n\n\t\tif (ln + stepLong > east) {\n\t\t\tstepLong = east - ln;\n\t\t}\n\n\t\tfor (let ll = ln; ll <= ln + stepLong; ll = ll + 5) {\n\t\t\tsurface.push([ll, north]);\n\t\t}\n\n\t\tfor (let lt = north; lt >= south; lt = lt - stepLat) {\n\t\t\tsurface.push([ln + stepLong, lt]);\n\t\t}\n\n\t\tfor (let ll = ln + stepLong; ll >= ln; ll = ll - 5) {\n\t\t\tsurface.push([ll, south]);\n\t\t}\n\n\t\tfor (let lt = south; lt <= north; lt = lt + stepLat) {\n\t\t\tsurface.push([ln, lt]);\n\t\t}\n\t}\n\n\treturn { type: \"MultiPolygon\", coordinates: multiPolygon };\n}\n\n/**\n * Update longitudes and latitudes that wrap around -180/180 and -90/90 values.\n * \n * @param   geoPoint  Input coordinates\n * @return            Updated coordinates\n */\nexport function normalizeGeoPoint(geoPoint: IGeoPoint): IGeoPoint {\n\tlet longitude = wrapAngleTo180(geoPoint.longitude);\n\tlet latitude = Math.asin(Math.sin((geoPoint.latitude * $math.RADIANS))) * $math.DEGREES;\n\n\tlet latitude180 = wrapAngleTo180(geoPoint.latitude);\n\n\tif (Math.abs(latitude180) > 90) {\n\t\tlongitude = wrapAngleTo180(longitude + 180);\n\t}\n\n\tgeoPoint.longitude = longitude;\n\tgeoPoint.latitude = latitude;\n\n\treturn geoPoint;\n}\n\n/**\n * @ignore\n */\nexport function wrapAngleTo180(angle: number): number {\n\tangle = angle % 360;\n\n\tif (angle > 180) {\n\t\tangle -= 360;\n\t}\n\tif (angle < -180) {\n\t\tangle += 360;\n\t}\n\n\treturn angle;\n}","import type { MapChart } from \"./MapChart\";\n\nimport { Container, IContainerPrivate, IContainerSettings } from \"../../core/render/Container\";\nimport { Button } from \"../../core/render/Button\";\nimport { Graphics } from \"../../core/render/Graphics\";\nimport { MultiDisposer } from \"../../core/util/Disposer\";\n\nexport interface IZoomControlSettings extends IContainerSettings {\n\n}\n\nexport interface IZoomControlPrivate extends IContainerPrivate {\n\n\t/**\n\t * @ignore\n\t */\n\tchart?: MapChart;\n\n}\n\n/**\n * A control that displays button for zooming [[MapChart]] in and out.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/map-chart/map-pan-zoom/#Zoom_control} for more information\n * @important\n */\nexport class ZoomControl extends Container {\n\n\t/**\n\t * A [[Button]] for zoom in.\n\t *\n\t * @default Button.new()\n\t */\n\tpublic readonly plusButton: Button = this.children.push(Button.new(this._root, { width: 36, height: 36, themeTags: [\"plus\"] }));\n\n\t/**\n\t * A [[Button]] for zoom out.\n\t *\n\t * @default Button.new()\n\t */\n\tpublic readonly minusButton: Button = this.children.push(Button.new(this._root, { width: 36, height: 36, themeTags: [\"minus\"] }));\n\n\tdeclare public _settings: IZoomControlSettings;\n\tdeclare public _privateSettings: IZoomControlPrivate;\n\n\tpublic static className: string = \"ZoomControl\";\n\tpublic static classNames: Array<string> = Container.classNames.concat([ZoomControl.className]);\n\n\tprotected _disposer: MultiDisposer | undefined;\n\n\tprotected _afterNew() {\n\t\tsuper._afterNew();\n\n\t\tthis.set(\"position\", \"absolute\");\n\n\t\tthis.set(\"layout\", this._root.verticalLayout);\n\n\t\tthis.plusButton.setAll({\n\t\t\ticon: Graphics.new(this._root, { themeTags: [\"icon\"] }),\n\t\t\tlayout: undefined\n\t\t});\n\n\t\tthis.minusButton.setAll({\n\t\t\ticon: Graphics.new(this._root, { themeTags: [\"icon\"] }),\n\t\t\tlayout: undefined\n\t\t});\n\n\t}\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\n\t\tif (this.isPrivateDirty(\"chart\")) {\n\t\t\tconst chart = this.getPrivate(\"chart\");\n\t\t\tconst previous = this._prevPrivateSettings.chart;\n\t\t\tif (chart) {\n\t\t\t\tthis._disposer = new MultiDisposer([\n\t\t\t\t\tthis.plusButton.events.on(\"click\", () => {\n\t\t\t\t\t\tchart.zoomIn()\n\t\t\t\t\t}),\n\t\t\t\t\tthis.minusButton.events.on(\"click\", () => {\n\t\t\t\t\t\tchart.zoomOut()\n\t\t\t\t\t})])\n\t\t\t}\n\n\t\t\tif (previous && this._disposer) {\n\t\t\t\tthis._disposer.dispose();\n\t\t\t}\n\t\t}\n\t}\n}\n","'use strict';\n\nvar Queue = require('tinyqueue');\n\nif (Queue.default) Queue = Queue.default; // temporary webpack fix\n\nmodule.exports = polylabel;\nmodule.exports.default = polylabel;\n\nfunction polylabel(polygon, precision, debug) {\n    precision = precision || 1.0;\n\n    // find the bounding box of the outer ring\n    var minX, minY, maxX, maxY;\n    for (var i = 0; i < polygon[0].length; i++) {\n        var p = polygon[0][i];\n        if (!i || p[0] < minX) minX = p[0];\n        if (!i || p[1] < minY) minY = p[1];\n        if (!i || p[0] > maxX) maxX = p[0];\n        if (!i || p[1] > maxY) maxY = p[1];\n    }\n\n    var width = maxX - minX;\n    var height = maxY - minY;\n    var cellSize = Math.min(width, height);\n    var h = cellSize / 2;\n\n    if (cellSize === 0) {\n        var degeneratePoleOfInaccessibility = [minX, minY];\n        degeneratePoleOfInaccessibility.distance = 0;\n        return degeneratePoleOfInaccessibility;\n    }\n\n    // a priority queue of cells in order of their \"potential\" (max distance to polygon)\n    var cellQueue = new Queue(undefined, compareMax);\n\n    // cover polygon with initial cells\n    for (var x = minX; x < maxX; x += cellSize) {\n        for (var y = minY; y < maxY; y += cellSize) {\n            cellQueue.push(new Cell(x + h, y + h, h, polygon));\n        }\n    }\n\n    // take centroid as the first best guess\n    var bestCell = getCentroidCell(polygon);\n\n    // special case for rectangular polygons\n    var bboxCell = new Cell(minX + width / 2, minY + height / 2, 0, polygon);\n    if (bboxCell.d > bestCell.d) bestCell = bboxCell;\n\n    var numProbes = cellQueue.length;\n\n    while (cellQueue.length) {\n        // pick the most promising cell from the queue\n        var cell = cellQueue.pop();\n\n        // update the best cell if we found a better one\n        if (cell.d > bestCell.d) {\n            bestCell = cell;\n            if (debug) console.log('found best %d after %d probes', Math.round(1e4 * cell.d) / 1e4, numProbes);\n        }\n\n        // do not drill down further if there's no chance of a better solution\n        if (cell.max - bestCell.d <= precision) continue;\n\n        // split the cell into four cells\n        h = cell.h / 2;\n        cellQueue.push(new Cell(cell.x - h, cell.y - h, h, polygon));\n        cellQueue.push(new Cell(cell.x + h, cell.y - h, h, polygon));\n        cellQueue.push(new Cell(cell.x - h, cell.y + h, h, polygon));\n        cellQueue.push(new Cell(cell.x + h, cell.y + h, h, polygon));\n        numProbes += 4;\n    }\n\n    if (debug) {\n        console.log('num probes: ' + numProbes);\n        console.log('best distance: ' + bestCell.d);\n    }\n\n    var poleOfInaccessibility = [bestCell.x, bestCell.y];\n    poleOfInaccessibility.distance = bestCell.d;\n    return poleOfInaccessibility;\n}\n\nfunction compareMax(a, b) {\n    return b.max - a.max;\n}\n\nfunction Cell(x, y, h, polygon) {\n    this.x = x; // cell center x\n    this.y = y; // cell center y\n    this.h = h; // half the cell size\n    this.d = pointToPolygonDist(x, y, polygon); // distance from cell center to polygon\n    this.max = this.d + this.h * Math.SQRT2; // max distance to polygon within a cell\n}\n\n// signed distance from point to polygon outline (negative if point is outside)\nfunction pointToPolygonDist(x, y, polygon) {\n    var inside = false;\n    var minDistSq = Infinity;\n\n    for (var k = 0; k < polygon.length; k++) {\n        var ring = polygon[k];\n\n        for (var i = 0, len = ring.length, j = len - 1; i < len; j = i++) {\n            var a = ring[i];\n            var b = ring[j];\n\n            if ((a[1] > y !== b[1] > y) &&\n                (x < (b[0] - a[0]) * (y - a[1]) / (b[1] - a[1]) + a[0])) inside = !inside;\n\n            minDistSq = Math.min(minDistSq, getSegDistSq(x, y, a, b));\n        }\n    }\n\n    return minDistSq === 0 ? 0 : (inside ? 1 : -1) * Math.sqrt(minDistSq);\n}\n\n// get polygon centroid\nfunction getCentroidCell(polygon) {\n    var area = 0;\n    var x = 0;\n    var y = 0;\n    var points = polygon[0];\n\n    for (var i = 0, len = points.length, j = len - 1; i < len; j = i++) {\n        var a = points[i];\n        var b = points[j];\n        var f = a[0] * b[1] - b[0] * a[1];\n        x += (a[0] + b[0]) * f;\n        y += (a[1] + b[1]) * f;\n        area += f * 3;\n    }\n    if (area === 0) return new Cell(points[0][0], points[0][1], 0, polygon);\n    return new Cell(x / area, y / area, 0, polygon);\n}\n\n// get squared distance from a point to a segment\nfunction getSegDistSq(px, py, a, b) {\n\n    var x = a[0];\n    var y = a[1];\n    var dx = b[0] - x;\n    var dy = b[1] - y;\n\n    if (dx !== 0 || dy !== 0) {\n\n        var t = ((px - x) * dx + (py - y) * dy) / (dx * dx + dy * dy);\n\n        if (t > 1) {\n            x = b[0];\n            y = b[1];\n\n        } else if (t > 0) {\n            x += dx * t;\n            y += dy * t;\n        }\n    }\n\n    dx = px - x;\n    dy = py - y;\n\n    return dx * dx + dy * dy;\n}\n","\nexport default class TinyQueue {\n    constructor(data = [], compare = defaultCompare) {\n        this.data = data;\n        this.length = this.data.length;\n        this.compare = compare;\n\n        if (this.length > 0) {\n            for (let i = (this.length >> 1) - 1; i >= 0; i--) this._down(i);\n        }\n    }\n\n    push(item) {\n        this.data.push(item);\n        this.length++;\n        this._up(this.length - 1);\n    }\n\n    pop() {\n        if (this.length === 0) return undefined;\n\n        const top = this.data[0];\n        const bottom = this.data.pop();\n        this.length--;\n\n        if (this.length > 0) {\n            this.data[0] = bottom;\n            this._down(0);\n        }\n\n        return top;\n    }\n\n    peek() {\n        return this.data[0];\n    }\n\n    _up(pos) {\n        const {data, compare} = this;\n        const item = data[pos];\n\n        while (pos > 0) {\n            const parent = (pos - 1) >> 1;\n            const current = data[parent];\n            if (compare(item, current) >= 0) break;\n            data[pos] = current;\n            pos = parent;\n        }\n\n        data[pos] = item;\n    }\n\n    _down(pos) {\n        const {data, compare} = this;\n        const halfLength = this.length >> 1;\n        const item = data[pos];\n\n        while (pos < halfLength) {\n            let left = (pos << 1) + 1;\n            let best = data[left];\n            const right = left + 1;\n\n            if (right < this.length && compare(data[right], best) < 0) {\n                left = right;\n                best = data[right];\n            }\n            if (compare(best, item) >= 0) break;\n\n            data[pos] = best;\n            pos = left;\n        }\n\n        data[pos] = item;\n    }\n}\n\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}","/*!\n * @kurkle/color v0.3.2\n * https://github.com/kurkle/color#readme\n * (c) 2023 Jukka Kurkela\n * Released under the MIT License\n */\nfunction round(v) {\n  return v + 0.5 | 0;\n}\nconst lim = (v, l, h) => Math.max(Math.min(v, h), l);\nfunction p2b(v) {\n  return lim(round(v * 2.55), 0, 255);\n}\nfunction b2p(v) {\n  return lim(round(v / 2.55), 0, 100);\n}\nfunction n2b(v) {\n  return lim(round(v * 255), 0, 255);\n}\nfunction b2n(v) {\n  return lim(round(v / 2.55) / 100, 0, 1);\n}\nfunction n2p(v) {\n  return lim(round(v * 100), 0, 100);\n}\n\nconst map$1 = {0: 0, 1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6, 7: 7, 8: 8, 9: 9, A: 10, B: 11, C: 12, D: 13, E: 14, F: 15, a: 10, b: 11, c: 12, d: 13, e: 14, f: 15};\nconst hex = [...'0123456789ABCDEF'];\nconst h1 = b => hex[b & 0xF];\nconst h2 = b => hex[(b & 0xF0) >> 4] + hex[b & 0xF];\nconst eq = b => ((b & 0xF0) >> 4) === (b & 0xF);\nconst isShort = v => eq(v.r) && eq(v.g) && eq(v.b) && eq(v.a);\nfunction hexParse(str) {\n  var len = str.length;\n  var ret;\n  if (str[0] === '#') {\n    if (len === 4 || len === 5) {\n      ret = {\n        r: 255 & map$1[str[1]] * 17,\n        g: 255 & map$1[str[2]] * 17,\n        b: 255 & map$1[str[3]] * 17,\n        a: len === 5 ? map$1[str[4]] * 17 : 255\n      };\n    } else if (len === 7 || len === 9) {\n      ret = {\n        r: map$1[str[1]] << 4 | map$1[str[2]],\n        g: map$1[str[3]] << 4 | map$1[str[4]],\n        b: map$1[str[5]] << 4 | map$1[str[6]],\n        a: len === 9 ? (map$1[str[7]] << 4 | map$1[str[8]]) : 255\n      };\n    }\n  }\n  return ret;\n}\nconst alpha = (a, f) => a < 255 ? f(a) : '';\nfunction hexString(v) {\n  var f = isShort(v) ? h1 : h2;\n  return v\n    ? '#' + f(v.r) + f(v.g) + f(v.b) + alpha(v.a, f)\n    : undefined;\n}\n\nconst HUE_RE = /^(hsla?|hwb|hsv)\\(\\s*([-+.e\\d]+)(?:deg)?[\\s,]+([-+.e\\d]+)%[\\s,]+([-+.e\\d]+)%(?:[\\s,]+([-+.e\\d]+)(%)?)?\\s*\\)$/;\nfunction hsl2rgbn(h, s, l) {\n  const a = s * Math.min(l, 1 - l);\n  const f = (n, k = (n + h / 30) % 12) => l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);\n  return [f(0), f(8), f(4)];\n}\nfunction hsv2rgbn(h, s, v) {\n  const f = (n, k = (n + h / 60) % 6) => v - v * s * Math.max(Math.min(k, 4 - k, 1), 0);\n  return [f(5), f(3), f(1)];\n}\nfunction hwb2rgbn(h, w, b) {\n  const rgb = hsl2rgbn(h, 1, 0.5);\n  let i;\n  if (w + b > 1) {\n    i = 1 / (w + b);\n    w *= i;\n    b *= i;\n  }\n  for (i = 0; i < 3; i++) {\n    rgb[i] *= 1 - w - b;\n    rgb[i] += w;\n  }\n  return rgb;\n}\nfunction hueValue(r, g, b, d, max) {\n  if (r === max) {\n    return ((g - b) / d) + (g < b ? 6 : 0);\n  }\n  if (g === max) {\n    return (b - r) / d + 2;\n  }\n  return (r - g) / d + 4;\n}\nfunction rgb2hsl(v) {\n  const range = 255;\n  const r = v.r / range;\n  const g = v.g / range;\n  const b = v.b / range;\n  const max = Math.max(r, g, b);\n  const min = Math.min(r, g, b);\n  const l = (max + min) / 2;\n  let h, s, d;\n  if (max !== min) {\n    d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n    h = hueValue(r, g, b, d, max);\n    h = h * 60 + 0.5;\n  }\n  return [h | 0, s || 0, l];\n}\nfunction calln(f, a, b, c) {\n  return (\n    Array.isArray(a)\n      ? f(a[0], a[1], a[2])\n      : f(a, b, c)\n  ).map(n2b);\n}\nfunction hsl2rgb(h, s, l) {\n  return calln(hsl2rgbn, h, s, l);\n}\nfunction hwb2rgb(h, w, b) {\n  return calln(hwb2rgbn, h, w, b);\n}\nfunction hsv2rgb(h, s, v) {\n  return calln(hsv2rgbn, h, s, v);\n}\nfunction hue(h) {\n  return (h % 360 + 360) % 360;\n}\nfunction hueParse(str) {\n  const m = HUE_RE.exec(str);\n  let a = 255;\n  let v;\n  if (!m) {\n    return;\n  }\n  if (m[5] !== v) {\n    a = m[6] ? p2b(+m[5]) : n2b(+m[5]);\n  }\n  const h = hue(+m[2]);\n  const p1 = +m[3] / 100;\n  const p2 = +m[4] / 100;\n  if (m[1] === 'hwb') {\n    v = hwb2rgb(h, p1, p2);\n  } else if (m[1] === 'hsv') {\n    v = hsv2rgb(h, p1, p2);\n  } else {\n    v = hsl2rgb(h, p1, p2);\n  }\n  return {\n    r: v[0],\n    g: v[1],\n    b: v[2],\n    a: a\n  };\n}\nfunction rotate(v, deg) {\n  var h = rgb2hsl(v);\n  h[0] = hue(h[0] + deg);\n  h = hsl2rgb(h);\n  v.r = h[0];\n  v.g = h[1];\n  v.b = h[2];\n}\nfunction hslString(v) {\n  if (!v) {\n    return;\n  }\n  const a = rgb2hsl(v);\n  const h = a[0];\n  const s = n2p(a[1]);\n  const l = n2p(a[2]);\n  return v.a < 255\n    ? `hsla(${h}, ${s}%, ${l}%, ${b2n(v.a)})`\n    : `hsl(${h}, ${s}%, ${l}%)`;\n}\n\nconst map = {\n  x: 'dark',\n  Z: 'light',\n  Y: 're',\n  X: 'blu',\n  W: 'gr',\n  V: 'medium',\n  U: 'slate',\n  A: 'ee',\n  T: 'ol',\n  S: 'or',\n  B: 'ra',\n  C: 'lateg',\n  D: 'ights',\n  R: 'in',\n  Q: 'turquois',\n  E: 'hi',\n  P: 'ro',\n  O: 'al',\n  N: 'le',\n  M: 'de',\n  L: 'yello',\n  F: 'en',\n  K: 'ch',\n  G: 'arks',\n  H: 'ea',\n  I: 'ightg',\n  J: 'wh'\n};\nconst names$1 = {\n  OiceXe: 'f0f8ff',\n  antiquewEte: 'faebd7',\n  aqua: 'ffff',\n  aquamarRe: '7fffd4',\n  azuY: 'f0ffff',\n  beige: 'f5f5dc',\n  bisque: 'ffe4c4',\n  black: '0',\n  blanKedOmond: 'ffebcd',\n  Xe: 'ff',\n  XeviTet: '8a2be2',\n  bPwn: 'a52a2a',\n  burlywood: 'deb887',\n  caMtXe: '5f9ea0',\n  KartYuse: '7fff00',\n  KocTate: 'd2691e',\n  cSO: 'ff7f50',\n  cSnflowerXe: '6495ed',\n  cSnsilk: 'fff8dc',\n  crimson: 'dc143c',\n  cyan: 'ffff',\n  xXe: '8b',\n  xcyan: '8b8b',\n  xgTMnPd: 'b8860b',\n  xWay: 'a9a9a9',\n  xgYF: '6400',\n  xgYy: 'a9a9a9',\n  xkhaki: 'bdb76b',\n  xmagFta: '8b008b',\n  xTivegYF: '556b2f',\n  xSange: 'ff8c00',\n  xScEd: '9932cc',\n  xYd: '8b0000',\n  xsOmon: 'e9967a',\n  xsHgYF: '8fbc8f',\n  xUXe: '483d8b',\n  xUWay: '2f4f4f',\n  xUgYy: '2f4f4f',\n  xQe: 'ced1',\n  xviTet: '9400d3',\n  dAppRk: 'ff1493',\n  dApskyXe: 'bfff',\n  dimWay: '696969',\n  dimgYy: '696969',\n  dodgerXe: '1e90ff',\n  fiYbrick: 'b22222',\n  flSOwEte: 'fffaf0',\n  foYstWAn: '228b22',\n  fuKsia: 'ff00ff',\n  gaRsbSo: 'dcdcdc',\n  ghostwEte: 'f8f8ff',\n  gTd: 'ffd700',\n  gTMnPd: 'daa520',\n  Way: '808080',\n  gYF: '8000',\n  gYFLw: 'adff2f',\n  gYy: '808080',\n  honeyMw: 'f0fff0',\n  hotpRk: 'ff69b4',\n  RdianYd: 'cd5c5c',\n  Rdigo: '4b0082',\n  ivSy: 'fffff0',\n  khaki: 'f0e68c',\n  lavFMr: 'e6e6fa',\n  lavFMrXsh: 'fff0f5',\n  lawngYF: '7cfc00',\n  NmoncEffon: 'fffacd',\n  ZXe: 'add8e6',\n  ZcSO: 'f08080',\n  Zcyan: 'e0ffff',\n  ZgTMnPdLw: 'fafad2',\n  ZWay: 'd3d3d3',\n  ZgYF: '90ee90',\n  ZgYy: 'd3d3d3',\n  ZpRk: 'ffb6c1',\n  ZsOmon: 'ffa07a',\n  ZsHgYF: '20b2aa',\n  ZskyXe: '87cefa',\n  ZUWay: '778899',\n  ZUgYy: '778899',\n  ZstAlXe: 'b0c4de',\n  ZLw: 'ffffe0',\n  lime: 'ff00',\n  limegYF: '32cd32',\n  lRF: 'faf0e6',\n  magFta: 'ff00ff',\n  maPon: '800000',\n  VaquamarRe: '66cdaa',\n  VXe: 'cd',\n  VScEd: 'ba55d3',\n  VpurpN: '9370db',\n  VsHgYF: '3cb371',\n  VUXe: '7b68ee',\n  VsprRggYF: 'fa9a',\n  VQe: '48d1cc',\n  VviTetYd: 'c71585',\n  midnightXe: '191970',\n  mRtcYam: 'f5fffa',\n  mistyPse: 'ffe4e1',\n  moccasR: 'ffe4b5',\n  navajowEte: 'ffdead',\n  navy: '80',\n  Tdlace: 'fdf5e6',\n  Tive: '808000',\n  TivedBb: '6b8e23',\n  Sange: 'ffa500',\n  SangeYd: 'ff4500',\n  ScEd: 'da70d6',\n  pOegTMnPd: 'eee8aa',\n  pOegYF: '98fb98',\n  pOeQe: 'afeeee',\n  pOeviTetYd: 'db7093',\n  papayawEp: 'ffefd5',\n  pHKpuff: 'ffdab9',\n  peru: 'cd853f',\n  pRk: 'ffc0cb',\n  plum: 'dda0dd',\n  powMrXe: 'b0e0e6',\n  purpN: '800080',\n  YbeccapurpN: '663399',\n  Yd: 'ff0000',\n  Psybrown: 'bc8f8f',\n  PyOXe: '4169e1',\n  saddNbPwn: '8b4513',\n  sOmon: 'fa8072',\n  sandybPwn: 'f4a460',\n  sHgYF: '2e8b57',\n  sHshell: 'fff5ee',\n  siFna: 'a0522d',\n  silver: 'c0c0c0',\n  skyXe: '87ceeb',\n  UXe: '6a5acd',\n  UWay: '708090',\n  UgYy: '708090',\n  snow: 'fffafa',\n  sprRggYF: 'ff7f',\n  stAlXe: '4682b4',\n  tan: 'd2b48c',\n  teO: '8080',\n  tEstN: 'd8bfd8',\n  tomato: 'ff6347',\n  Qe: '40e0d0',\n  viTet: 'ee82ee',\n  JHt: 'f5deb3',\n  wEte: 'ffffff',\n  wEtesmoke: 'f5f5f5',\n  Lw: 'ffff00',\n  LwgYF: '9acd32'\n};\nfunction unpack() {\n  const unpacked = {};\n  const keys = Object.keys(names$1);\n  const tkeys = Object.keys(map);\n  let i, j, k, ok, nk;\n  for (i = 0; i < keys.length; i++) {\n    ok = nk = keys[i];\n    for (j = 0; j < tkeys.length; j++) {\n      k = tkeys[j];\n      nk = nk.replace(k, map[k]);\n    }\n    k = parseInt(names$1[ok], 16);\n    unpacked[nk] = [k >> 16 & 0xFF, k >> 8 & 0xFF, k & 0xFF];\n  }\n  return unpacked;\n}\n\nlet names;\nfunction nameParse(str) {\n  if (!names) {\n    names = unpack();\n    names.transparent = [0, 0, 0, 0];\n  }\n  const a = names[str.toLowerCase()];\n  return a && {\n    r: a[0],\n    g: a[1],\n    b: a[2],\n    a: a.length === 4 ? a[3] : 255\n  };\n}\n\nconst RGB_RE = /^rgba?\\(\\s*([-+.\\d]+)(%)?[\\s,]+([-+.e\\d]+)(%)?[\\s,]+([-+.e\\d]+)(%)?(?:[\\s,/]+([-+.e\\d]+)(%)?)?\\s*\\)$/;\nfunction rgbParse(str) {\n  const m = RGB_RE.exec(str);\n  let a = 255;\n  let r, g, b;\n  if (!m) {\n    return;\n  }\n  if (m[7] !== r) {\n    const v = +m[7];\n    a = m[8] ? p2b(v) : lim(v * 255, 0, 255);\n  }\n  r = +m[1];\n  g = +m[3];\n  b = +m[5];\n  r = 255 & (m[2] ? p2b(r) : lim(r, 0, 255));\n  g = 255 & (m[4] ? p2b(g) : lim(g, 0, 255));\n  b = 255 & (m[6] ? p2b(b) : lim(b, 0, 255));\n  return {\n    r: r,\n    g: g,\n    b: b,\n    a: a\n  };\n}\nfunction rgbString(v) {\n  return v && (\n    v.a < 255\n      ? `rgba(${v.r}, ${v.g}, ${v.b}, ${b2n(v.a)})`\n      : `rgb(${v.r}, ${v.g}, ${v.b})`\n  );\n}\n\nconst to = v => v <= 0.0031308 ? v * 12.92 : Math.pow(v, 1.0 / 2.4) * 1.055 - 0.055;\nconst from = v => v <= 0.04045 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);\nfunction interpolate(rgb1, rgb2, t) {\n  const r = from(b2n(rgb1.r));\n  const g = from(b2n(rgb1.g));\n  const b = from(b2n(rgb1.b));\n  return {\n    r: n2b(to(r + t * (from(b2n(rgb2.r)) - r))),\n    g: n2b(to(g + t * (from(b2n(rgb2.g)) - g))),\n    b: n2b(to(b + t * (from(b2n(rgb2.b)) - b))),\n    a: rgb1.a + t * (rgb2.a - rgb1.a)\n  };\n}\n\nfunction modHSL(v, i, ratio) {\n  if (v) {\n    let tmp = rgb2hsl(v);\n    tmp[i] = Math.max(0, Math.min(tmp[i] + tmp[i] * ratio, i === 0 ? 360 : 1));\n    tmp = hsl2rgb(tmp);\n    v.r = tmp[0];\n    v.g = tmp[1];\n    v.b = tmp[2];\n  }\n}\nfunction clone(v, proto) {\n  return v ? Object.assign(proto || {}, v) : v;\n}\nfunction fromObject(input) {\n  var v = {r: 0, g: 0, b: 0, a: 255};\n  if (Array.isArray(input)) {\n    if (input.length >= 3) {\n      v = {r: input[0], g: input[1], b: input[2], a: 255};\n      if (input.length > 3) {\n        v.a = n2b(input[3]);\n      }\n    }\n  } else {\n    v = clone(input, {r: 0, g: 0, b: 0, a: 1});\n    v.a = n2b(v.a);\n  }\n  return v;\n}\nfunction functionParse(str) {\n  if (str.charAt(0) === 'r') {\n    return rgbParse(str);\n  }\n  return hueParse(str);\n}\nclass Color {\n  constructor(input) {\n    if (input instanceof Color) {\n      return input;\n    }\n    const type = typeof input;\n    let v;\n    if (type === 'object') {\n      v = fromObject(input);\n    } else if (type === 'string') {\n      v = hexParse(input) || nameParse(input) || functionParse(input);\n    }\n    this._rgb = v;\n    this._valid = !!v;\n  }\n  get valid() {\n    return this._valid;\n  }\n  get rgb() {\n    var v = clone(this._rgb);\n    if (v) {\n      v.a = b2n(v.a);\n    }\n    return v;\n  }\n  set rgb(obj) {\n    this._rgb = fromObject(obj);\n  }\n  rgbString() {\n    return this._valid ? rgbString(this._rgb) : undefined;\n  }\n  hexString() {\n    return this._valid ? hexString(this._rgb) : undefined;\n  }\n  hslString() {\n    return this._valid ? hslString(this._rgb) : undefined;\n  }\n  mix(color, weight) {\n    if (color) {\n      const c1 = this.rgb;\n      const c2 = color.rgb;\n      let w2;\n      const p = weight === w2 ? 0.5 : weight;\n      const w = 2 * p - 1;\n      const a = c1.a - c2.a;\n      const w1 = ((w * a === -1 ? w : (w + a) / (1 + w * a)) + 1) / 2.0;\n      w2 = 1 - w1;\n      c1.r = 0xFF & w1 * c1.r + w2 * c2.r + 0.5;\n      c1.g = 0xFF & w1 * c1.g + w2 * c2.g + 0.5;\n      c1.b = 0xFF & w1 * c1.b + w2 * c2.b + 0.5;\n      c1.a = p * c1.a + (1 - p) * c2.a;\n      this.rgb = c1;\n    }\n    return this;\n  }\n  interpolate(color, t) {\n    if (color) {\n      this._rgb = interpolate(this._rgb, color._rgb, t);\n    }\n    return this;\n  }\n  clone() {\n    return new Color(this.rgb);\n  }\n  alpha(a) {\n    this._rgb.a = n2b(a);\n    return this;\n  }\n  clearer(ratio) {\n    const rgb = this._rgb;\n    rgb.a *= 1 - ratio;\n    return this;\n  }\n  greyscale() {\n    const rgb = this._rgb;\n    const val = round(rgb.r * 0.3 + rgb.g * 0.59 + rgb.b * 0.11);\n    rgb.r = rgb.g = rgb.b = val;\n    return this;\n  }\n  opaquer(ratio) {\n    const rgb = this._rgb;\n    rgb.a *= 1 + ratio;\n    return this;\n  }\n  negate() {\n    const v = this._rgb;\n    v.r = 255 - v.r;\n    v.g = 255 - v.g;\n    v.b = 255 - v.b;\n    return this;\n  }\n  lighten(ratio) {\n    modHSL(this._rgb, 2, ratio);\n    return this;\n  }\n  darken(ratio) {\n    modHSL(this._rgb, 2, -ratio);\n    return this;\n  }\n  saturate(ratio) {\n    modHSL(this._rgb, 1, ratio);\n    return this;\n  }\n  desaturate(ratio) {\n    modHSL(this._rgb, 1, -ratio);\n    return this;\n  }\n  rotate(deg) {\n    rotate(this._rgb, deg);\n    return this;\n  }\n}\n\nfunction index_esm(input) {\n  return new Color(input);\n}\n\nexport { Color, b2n, b2p, index_esm as default, hexParse, hexString, hsl2rgb, hslString, hsv2rgb, hueParse, hwb2rgb, lim, n2b, n2p, nameParse, p2b, rgb2hsl, rgbParse, rgbString, rotate, round };\n","/**\n * @namespace Chart.helpers\n */\n\nimport type {AnyObject} from '../types/basic.js';\nimport type {ActiveDataPoint, ChartEvent} from '../types/index.js';\n\n/**\n * An empty function that can be used, for example, for optional callback.\n */\nexport function noop() {\n  /* noop */\n}\n\n/**\n * Returns a unique id, sequentially generated from a global variable.\n */\nexport const uid = (() => {\n  let id = 0;\n  return () => id++;\n})();\n\n/**\n * Returns true if `value` is neither null nor undefined, else returns false.\n * @param value - The value to test.\n * @since 2.7.0\n */\nexport function isNullOrUndef(value: unknown): value is null | undefined {\n  return value === null || typeof value === 'undefined';\n}\n\n/**\n * Returns true if `value` is an array (including typed arrays), else returns false.\n * @param value - The value to test.\n * @function\n */\nexport function isArray<T = unknown>(value: unknown): value is T[] {\n  if (Array.isArray && Array.isArray(value)) {\n    return true;\n  }\n  const type = Object.prototype.toString.call(value);\n  if (type.slice(0, 7) === '[object' && type.slice(-6) === 'Array]') {\n    return true;\n  }\n  return false;\n}\n\n/**\n * Returns true if `value` is an object (excluding null), else returns false.\n * @param value - The value to test.\n * @since 2.7.0\n */\nexport function isObject(value: unknown): value is AnyObject {\n  return value !== null && Object.prototype.toString.call(value) === '[object Object]';\n}\n\n/**\n * Returns true if `value` is a finite number, else returns false\n * @param value  - The value to test.\n */\nfunction isNumberFinite(value: unknown): value is number {\n  return (typeof value === 'number' || value instanceof Number) && isFinite(+value);\n}\nexport {\n  isNumberFinite as isFinite,\n};\n\n/**\n * Returns `value` if finite, else returns `defaultValue`.\n * @param value - The value to return if defined.\n * @param defaultValue - The value to return if `value` is not finite.\n */\nexport function finiteOrDefault(value: unknown, defaultValue: number) {\n  return isNumberFinite(value) ? value : defaultValue;\n}\n\n/**\n * Returns `value` if defined, else returns `defaultValue`.\n * @param value - The value to return if defined.\n * @param defaultValue - The value to return if `value` is undefined.\n */\nexport function valueOrDefault<T>(value: T | undefined, defaultValue: T) {\n  return typeof value === 'undefined' ? defaultValue : value;\n}\n\nexport const toPercentage = (value: number | string, dimension: number) =>\n  typeof value === 'string' && value.endsWith('%') ?\n    parseFloat(value) / 100\n    : +value / dimension;\n\nexport const toDimension = (value: number | string, dimension: number) =>\n  typeof value === 'string' && value.endsWith('%') ?\n    parseFloat(value) / 100 * dimension\n    : +value;\n\n/**\n * Calls `fn` with the given `args` in the scope defined by `thisArg` and returns the\n * value returned by `fn`. If `fn` is not a function, this method returns undefined.\n * @param fn - The function to call.\n * @param args - The arguments with which `fn` should be called.\n * @param [thisArg] - The value of `this` provided for the call to `fn`.\n */\nexport function callback<T extends (this: TA, ...restArgs: unknown[]) => R, TA, R>(\n  fn: T | undefined,\n  args: unknown[],\n  thisArg?: TA\n): R | undefined {\n  if (fn && typeof fn.call === 'function') {\n    return fn.apply(thisArg, args);\n  }\n}\n\n/**\n * Note(SB) for performance sake, this method should only be used when loopable type\n * is unknown or in none intensive code (not called often and small loopable). Else\n * it's preferable to use a regular for() loop and save extra function calls.\n * @param loopable - The object or array to be iterated.\n * @param fn - The function to call for each item.\n * @param [thisArg] - The value of `this` provided for the call to `fn`.\n * @param [reverse] - If true, iterates backward on the loopable.\n */\nexport function each<T, TA>(\n  loopable: Record<string, T>,\n  fn: (this: TA, v: T, i: string) => void,\n  thisArg?: TA,\n  reverse?: boolean\n): void;\nexport function each<T, TA>(\n  loopable: T[],\n  fn: (this: TA, v: T, i: number) => void,\n  thisArg?: TA,\n  reverse?: boolean\n): void;\nexport function each<T, TA>(\n  loopable: T[] | Record<string, T>,\n  fn: (this: TA, v: T, i: any) => void,\n  thisArg?: TA,\n  reverse?: boolean\n) {\n  let i: number, len: number, keys: string[];\n  if (isArray(loopable)) {\n    len = loopable.length;\n    if (reverse) {\n      for (i = len - 1; i >= 0; i--) {\n        fn.call(thisArg, loopable[i], i);\n      }\n    } else {\n      for (i = 0; i < len; i++) {\n        fn.call(thisArg, loopable[i], i);\n      }\n    }\n  } else if (isObject(loopable)) {\n    keys = Object.keys(loopable);\n    len = keys.length;\n    for (i = 0; i < len; i++) {\n      fn.call(thisArg, loopable[keys[i]], keys[i]);\n    }\n  }\n}\n\n/**\n * Returns true if the `a0` and `a1` arrays have the same content, else returns false.\n * @param a0 - The array to compare\n * @param a1 - The array to compare\n * @private\n */\nexport function _elementsEqual(a0: ActiveDataPoint[], a1: ActiveDataPoint[]) {\n  let i: number, ilen: number, v0: ActiveDataPoint, v1: ActiveDataPoint;\n\n  if (!a0 || !a1 || a0.length !== a1.length) {\n    return false;\n  }\n\n  for (i = 0, ilen = a0.length; i < ilen; ++i) {\n    v0 = a0[i];\n    v1 = a1[i];\n\n    if (v0.datasetIndex !== v1.datasetIndex || v0.index !== v1.index) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Returns a deep copy of `source` without keeping references on objects and arrays.\n * @param source - The value to clone.\n */\nexport function clone<T>(source: T): T {\n  if (isArray(source)) {\n    return source.map(clone) as unknown as T;\n  }\n\n  if (isObject(source)) {\n    const target = Object.create(null);\n    const keys = Object.keys(source);\n    const klen = keys.length;\n    let k = 0;\n\n    for (; k < klen; ++k) {\n      target[keys[k]] = clone(source[keys[k]]);\n    }\n\n    return target;\n  }\n\n  return source;\n}\n\nfunction isValidKey(key: string) {\n  return ['__proto__', 'prototype', 'constructor'].indexOf(key) === -1;\n}\n\n/**\n * The default merger when Chart.helpers.merge is called without merger option.\n * Note(SB): also used by mergeConfig and mergeScaleConfig as fallback.\n * @private\n */\nexport function _merger(key: string, target: AnyObject, source: AnyObject, options: AnyObject) {\n  if (!isValidKey(key)) {\n    return;\n  }\n\n  const tval = target[key];\n  const sval = source[key];\n\n  if (isObject(tval) && isObject(sval)) {\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    merge(tval, sval, options);\n  } else {\n    target[key] = clone(sval);\n  }\n}\n\nexport interface MergeOptions {\n  merger?: (key: string, target: AnyObject, source: AnyObject, options?: AnyObject) => void;\n}\n\n/**\n * Recursively deep copies `source` properties into `target` with the given `options`.\n * IMPORTANT: `target` is not cloned and will be updated with `source` properties.\n * @param target - The target object in which all sources are merged into.\n * @param source - Object(s) to merge into `target`.\n * @param [options] - Merging options:\n * @param [options.merger] - The merge method (key, target, source, options)\n * @returns The `target` object.\n */\nexport function merge<T>(target: T, source: [], options?: MergeOptions): T;\nexport function merge<T, S1>(target: T, source: S1, options?: MergeOptions): T & S1;\nexport function merge<T, S1>(target: T, source: [S1], options?: MergeOptions): T & S1;\nexport function merge<T, S1, S2>(target: T, source: [S1, S2], options?: MergeOptions): T & S1 & S2;\nexport function merge<T, S1, S2, S3>(target: T, source: [S1, S2, S3], options?: MergeOptions): T & S1 & S2 & S3;\nexport function merge<T, S1, S2, S3, S4>(\n  target: T,\n  source: [S1, S2, S3, S4],\n  options?: MergeOptions\n): T & S1 & S2 & S3 & S4;\nexport function merge<T>(target: T, source: AnyObject[], options?: MergeOptions): AnyObject;\nexport function merge<T>(target: T, source: AnyObject[], options?: MergeOptions): AnyObject {\n  const sources = isArray(source) ? source : [source];\n  const ilen = sources.length;\n\n  if (!isObject(target)) {\n    return target as AnyObject;\n  }\n\n  options = options || {};\n  const merger = options.merger || _merger;\n  let current: AnyObject;\n\n  for (let i = 0; i < ilen; ++i) {\n    current = sources[i];\n    if (!isObject(current)) {\n      continue;\n    }\n\n    const keys = Object.keys(current);\n    for (let k = 0, klen = keys.length; k < klen; ++k) {\n      merger(keys[k], target, current, options as AnyObject);\n    }\n  }\n\n  return target;\n}\n\n/**\n * Recursively deep copies `source` properties into `target` *only* if not defined in target.\n * IMPORTANT: `target` is not cloned and will be updated with `source` properties.\n * @param target - The target object in which all sources are merged into.\n * @param source - Object(s) to merge into `target`.\n * @returns The `target` object.\n */\nexport function mergeIf<T>(target: T, source: []): T;\nexport function mergeIf<T, S1>(target: T, source: S1): T & S1;\nexport function mergeIf<T, S1>(target: T, source: [S1]): T & S1;\nexport function mergeIf<T, S1, S2>(target: T, source: [S1, S2]): T & S1 & S2;\nexport function mergeIf<T, S1, S2, S3>(target: T, source: [S1, S2, S3]): T & S1 & S2 & S3;\nexport function mergeIf<T, S1, S2, S3, S4>(target: T, source: [S1, S2, S3, S4]): T & S1 & S2 & S3 & S4;\nexport function mergeIf<T>(target: T, source: AnyObject[]): AnyObject;\nexport function mergeIf<T>(target: T, source: AnyObject[]): AnyObject {\n  // eslint-disable-next-line @typescript-eslint/no-use-before-define\n  return merge<T>(target, source, {merger: _mergerIf});\n}\n\n/**\n * Merges source[key] in target[key] only if target[key] is undefined.\n * @private\n */\nexport function _mergerIf(key: string, target: AnyObject, source: AnyObject) {\n  if (!isValidKey(key)) {\n    return;\n  }\n\n  const tval = target[key];\n  const sval = source[key];\n\n  if (isObject(tval) && isObject(sval)) {\n    mergeIf(tval, sval);\n  } else if (!Object.prototype.hasOwnProperty.call(target, key)) {\n    target[key] = clone(sval);\n  }\n}\n\n/**\n * @private\n */\nexport function _deprecated(scope: string, value: unknown, previous: string, current: string) {\n  if (value !== undefined) {\n    console.warn(scope + ': \"' + previous +\n      '\" is deprecated. Please use \"' + current + '\" instead');\n  }\n}\n\n// resolveObjectKey resolver cache\nconst keyResolvers = {\n  // Chart.helpers.core resolveObjectKey should resolve empty key to root object\n  '': v => v,\n  // default resolvers\n  x: o => o.x,\n  y: o => o.y\n};\n\n/**\n * @private\n */\nexport function _splitKey(key: string) {\n  const parts = key.split('.');\n  const keys: string[] = [];\n  let tmp = '';\n  for (const part of parts) {\n    tmp += part;\n    if (tmp.endsWith('\\\\')) {\n      tmp = tmp.slice(0, -1) + '.';\n    } else {\n      keys.push(tmp);\n      tmp = '';\n    }\n  }\n  return keys;\n}\n\nfunction _getKeyResolver(key: string) {\n  const keys = _splitKey(key);\n  return obj => {\n    for (const k of keys) {\n      if (k === '') {\n        // For backward compatibility:\n        // Chart.helpers.core resolveObjectKey should break at empty key\n        break;\n      }\n      obj = obj && obj[k];\n    }\n    return obj;\n  };\n}\n\nexport function resolveObjectKey(obj: AnyObject, key: string): AnyObject {\n  const resolver = keyResolvers[key] || (keyResolvers[key] = _getKeyResolver(key));\n  return resolver(obj);\n}\n\n/**\n * @private\n */\nexport function _capitalize(str: string) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n\nexport const defined = (value: unknown) => typeof value !== 'undefined';\n\nexport const isFunction = (value: unknown): value is (...args: any[]) => any => typeof value === 'function';\n\n// Adapted from https://stackoverflow.com/questions/31128855/comparing-ecma6-sets-for-equality#31129384\nexport const setsEqual = <T>(a: Set<T>, b: Set<T>) => {\n  if (a.size !== b.size) {\n    return false;\n  }\n\n  for (const item of a) {\n    if (!b.has(item)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\n/**\n * @param e - The event\n * @private\n */\nexport function _isClickEvent(e: ChartEvent) {\n  return e.type === 'mouseup' || e.type === 'click' || e.type === 'contextmenu';\n}\n","import type {Point} from '../types/geometric.js';\nimport {isFinite as isFiniteNumber} from './helpers.core.js';\n\n/**\n * @alias Chart.helpers.math\n * @namespace\n */\n\nexport const PI = Math.PI;\nexport const TAU = 2 * PI;\nexport const PITAU = TAU + PI;\nexport const INFINITY = Number.POSITIVE_INFINITY;\nexport const RAD_PER_DEG = PI / 180;\nexport const HALF_PI = PI / 2;\nexport const QUARTER_PI = PI / 4;\nexport const TWO_THIRDS_PI = PI * 2 / 3;\n\nexport const log10 = Math.log10;\nexport const sign = Math.sign;\n\nexport function almostEquals(x: number, y: number, epsilon: number) {\n  return Math.abs(x - y) < epsilon;\n}\n\n/**\n * Implementation of the nice number algorithm used in determining where axis labels will go\n */\nexport function niceNum(range: number) {\n  const roundedRange = Math.round(range);\n  range = almostEquals(range, roundedRange, range / 1000) ? roundedRange : range;\n  const niceRange = Math.pow(10, Math.floor(log10(range)));\n  const fraction = range / niceRange;\n  const niceFraction = fraction <= 1 ? 1 : fraction <= 2 ? 2 : fraction <= 5 ? 5 : 10;\n  return niceFraction * niceRange;\n}\n\n/**\n * Returns an array of factors sorted from 1 to sqrt(value)\n * @private\n */\nexport function _factorize(value: number) {\n  const result: number[] = [];\n  const sqrt = Math.sqrt(value);\n  let i: number;\n\n  for (i = 1; i < sqrt; i++) {\n    if (value % i === 0) {\n      result.push(i);\n      result.push(value / i);\n    }\n  }\n  if (sqrt === (sqrt | 0)) { // if value is a square number\n    result.push(sqrt);\n  }\n\n  result.sort((a, b) => a - b).pop();\n  return result;\n}\n\nexport function isNumber(n: unknown): n is number {\n  return !isNaN(parseFloat(n as string)) && isFinite(n as number);\n}\n\nexport function almostWhole(x: number, epsilon: number) {\n  const rounded = Math.round(x);\n  return ((rounded - epsilon) <= x) && ((rounded + epsilon) >= x);\n}\n\n/**\n * @private\n */\nexport function _setMinAndMaxByKey(\n  array: Record<string, number>[],\n  target: { min: number, max: number },\n  property: string\n) {\n  let i: number, ilen: number, value: number;\n\n  for (i = 0, ilen = array.length; i < ilen; i++) {\n    value = array[i][property];\n    if (!isNaN(value)) {\n      target.min = Math.min(target.min, value);\n      target.max = Math.max(target.max, value);\n    }\n  }\n}\n\nexport function toRadians(degrees: number) {\n  return degrees * (PI / 180);\n}\n\nexport function toDegrees(radians: number) {\n  return radians * (180 / PI);\n}\n\n/**\n * Returns the number of decimal places\n * i.e. the number of digits after the decimal point, of the value of this Number.\n * @param x - A number.\n * @returns The number of decimal places.\n * @private\n */\nexport function _decimalPlaces(x: number) {\n  if (!isFiniteNumber(x)) {\n    return;\n  }\n  let e = 1;\n  let p = 0;\n  while (Math.round(x * e) / e !== x) {\n    e *= 10;\n    p++;\n  }\n  return p;\n}\n\n// Gets the angle from vertical upright to the point about a centre.\nexport function getAngleFromPoint(\n  centrePoint: Point,\n  anglePoint: Point\n) {\n  const distanceFromXCenter = anglePoint.x - centrePoint.x;\n  const distanceFromYCenter = anglePoint.y - centrePoint.y;\n  const radialDistanceFromCenter = Math.sqrt(distanceFromXCenter * distanceFromXCenter + distanceFromYCenter * distanceFromYCenter);\n\n  let angle = Math.atan2(distanceFromYCenter, distanceFromXCenter);\n\n  if (angle < (-0.5 * PI)) {\n    angle += TAU; // make sure the returned angle is in the range of (-PI/2, 3PI/2]\n  }\n\n  return {\n    angle,\n    distance: radialDistanceFromCenter\n  };\n}\n\nexport function distanceBetweenPoints(pt1: Point, pt2: Point) {\n  return Math.sqrt(Math.pow(pt2.x - pt1.x, 2) + Math.pow(pt2.y - pt1.y, 2));\n}\n\n/**\n * Shortest distance between angles, in either direction.\n * @private\n */\nexport function _angleDiff(a: number, b: number) {\n  return (a - b + PITAU) % TAU - PI;\n}\n\n/**\n * Normalize angle to be between 0 and 2*PI\n * @private\n */\nexport function _normalizeAngle(a: number) {\n  return (a % TAU + TAU) % TAU;\n}\n\n/**\n * @private\n */\nexport function _angleBetween(angle: number, start: number, end: number, sameAngleIsFullCircle?: boolean) {\n  const a = _normalizeAngle(angle);\n  const s = _normalizeAngle(start);\n  const e = _normalizeAngle(end);\n  const angleToStart = _normalizeAngle(s - a);\n  const angleToEnd = _normalizeAngle(e - a);\n  const startToAngle = _normalizeAngle(a - s);\n  const endToAngle = _normalizeAngle(a - e);\n  return a === s || a === e || (sameAngleIsFullCircle && s === e)\n    || (angleToStart > angleToEnd && startToAngle < endToAngle);\n}\n\n/**\n * Limit `value` between `min` and `max`\n * @param value\n * @param min\n * @param max\n * @private\n */\nexport function _limitValue(value: number, min: number, max: number) {\n  return Math.max(min, Math.min(max, value));\n}\n\n/**\n * @param {number} value\n * @private\n */\nexport function _int16Range(value: number) {\n  return _limitValue(value, -32768, 32767);\n}\n\n/**\n * @param value\n * @param start\n * @param end\n * @param [epsilon]\n * @private\n */\nexport function _isBetween(value: number, start: number, end: number, epsilon = 1e-6) {\n  return value >= Math.min(start, end) - epsilon && value <= Math.max(start, end) + epsilon;\n}\n","import {_capitalize} from './helpers.core.js';\n\n/**\n * Binary search\n * @param table - the table search. must be sorted!\n * @param value - value to find\n * @param cmp\n * @private\n */\nexport function _lookup(\n  table: number[],\n  value: number,\n  cmp?: (value: number) => boolean\n): {lo: number, hi: number};\nexport function _lookup<T>(\n  table: T[],\n  value: number,\n  cmp: (value: number) => boolean\n): {lo: number, hi: number};\nexport function _lookup(\n  table: unknown[],\n  value: number,\n  cmp?: (value: number) => boolean\n) {\n  cmp = cmp || ((index) => table[index] < value);\n  let hi = table.length - 1;\n  let lo = 0;\n  let mid: number;\n\n  while (hi - lo > 1) {\n    mid = (lo + hi) >> 1;\n    if (cmp(mid)) {\n      lo = mid;\n    } else {\n      hi = mid;\n    }\n  }\n\n  return {lo, hi};\n}\n\n/**\n * Binary search\n * @param table - the table search. must be sorted!\n * @param key - property name for the value in each entry\n * @param value - value to find\n * @param last - lookup last index\n * @private\n */\nexport const _lookupByKey = (\n  table: Record<string, number>[],\n  key: string,\n  value: number,\n  last?: boolean\n) =>\n  _lookup(table, value, last\n    ? index => {\n      const ti = table[index][key];\n      return ti < value || ti === value && table[index + 1][key] === value;\n    }\n    : index => table[index][key] < value);\n\n/**\n * Reverse binary search\n * @param table - the table search. must be sorted!\n * @param key - property name for the value in each entry\n * @param value - value to find\n * @private\n */\nexport const _rlookupByKey = (\n  table: Record<string, number>[],\n  key: string,\n  value: number\n) =>\n  _lookup(table, value, index => table[index][key] >= value);\n\n/**\n * Return subset of `values` between `min` and `max` inclusive.\n * Values are assumed to be in sorted order.\n * @param values - sorted array of values\n * @param min - min value\n * @param max - max value\n */\nexport function _filterBetween(values: number[], min: number, max: number) {\n  let start = 0;\n  let end = values.length;\n\n  while (start < end && values[start] < min) {\n    start++;\n  }\n  while (end > start && values[end - 1] > max) {\n    end--;\n  }\n\n  return start > 0 || end < values.length\n    ? values.slice(start, end)\n    : values;\n}\n\nconst arrayEvents = ['push', 'pop', 'shift', 'splice', 'unshift'] as const;\n\nexport interface ArrayListener<T> {\n  _onDataPush?(...item: T[]): void;\n  _onDataPop?(): void;\n  _onDataShift?(): void;\n  _onDataSplice?(index: number, deleteCount: number, ...items: T[]): void;\n  _onDataUnshift?(...item: T[]): void;\n}\n\n/**\n * Hooks the array methods that add or remove values ('push', pop', 'shift', 'splice',\n * 'unshift') and notify the listener AFTER the array has been altered. Listeners are\n * called on the '_onData*' callbacks (e.g. _onDataPush, etc.) with same arguments.\n */\nexport function listenArrayEvents<T>(array: T[], listener: ArrayListener<T>): void;\nexport function listenArrayEvents(array, listener) {\n  if (array._chartjs) {\n    array._chartjs.listeners.push(listener);\n    return;\n  }\n\n  Object.defineProperty(array, '_chartjs', {\n    configurable: true,\n    enumerable: false,\n    value: {\n      listeners: [listener]\n    }\n  });\n\n  arrayEvents.forEach((key) => {\n    const method = '_onData' + _capitalize(key);\n    const base = array[key];\n\n    Object.defineProperty(array, key, {\n      configurable: true,\n      enumerable: false,\n      value(...args) {\n        const res = base.apply(this, args);\n\n        array._chartjs.listeners.forEach((object) => {\n          if (typeof object[method] === 'function') {\n            object[method](...args);\n          }\n        });\n\n        return res;\n      }\n    });\n  });\n}\n\n\n/**\n * Removes the given array event listener and cleanup extra attached properties (such as\n * the _chartjs stub and overridden methods) if array doesn't have any more listeners.\n */\nexport function unlistenArrayEvents<T>(array: T[], listener: ArrayListener<T>): void;\nexport function unlistenArrayEvents(array, listener) {\n  const stub = array._chartjs;\n  if (!stub) {\n    return;\n  }\n\n  const listeners = stub.listeners;\n  const index = listeners.indexOf(listener);\n  if (index !== -1) {\n    listeners.splice(index, 1);\n  }\n\n  if (listeners.length > 0) {\n    return;\n  }\n\n  arrayEvents.forEach((key) => {\n    delete array[key];\n  });\n\n  delete array._chartjs;\n}\n\n/**\n * @param items\n */\nexport function _arrayUnique<T>(items: T[]) {\n  const set = new Set<T>();\n  let i: number, ilen: number;\n\n  for (i = 0, ilen = items.length; i < ilen; ++i) {\n    set.add(items[i]);\n  }\n\n  if (set.size === ilen) {\n    return items;\n  }\n\n  return Array.from(set);\n}\n","import type {ChartMeta, PointElement} from '../types/index.js';\n\nimport {_limitValue} from './helpers.math.js';\nimport {_lookupByKey} from './helpers.collection.js';\n\nexport function fontString(pixelSize: number, fontStyle: string, fontFamily: string) {\n  return fontStyle + ' ' + pixelSize + 'px ' + fontFamily;\n}\n\n/**\n* Request animation polyfill\n*/\nexport const requestAnimFrame = (function() {\n  if (typeof window === 'undefined') {\n    return function(callback) {\n      return callback();\n    };\n  }\n  return window.requestAnimationFrame;\n}());\n\n/**\n * Throttles calling `fn` once per animation frame\n * Latest arguments are used on the actual call\n */\nexport function throttled<TArgs extends Array<any>>(\n  fn: (...args: TArgs) => void,\n  thisArg: any,\n) {\n  let argsToUse = [] as TArgs;\n  let ticking = false;\n\n  return function(...args: TArgs) {\n    // Save the args for use later\n    argsToUse = args;\n    if (!ticking) {\n      ticking = true;\n      requestAnimFrame.call(window, () => {\n        ticking = false;\n        fn.apply(thisArg, argsToUse);\n      });\n    }\n  };\n}\n\n/**\n * Debounces calling `fn` for `delay` ms\n */\nexport function debounce<TArgs extends Array<any>>(fn: (...args: TArgs) => void, delay: number) {\n  let timeout;\n  return function(...args: TArgs) {\n    if (delay) {\n      clearTimeout(timeout);\n      timeout = setTimeout(fn, delay, args);\n    } else {\n      fn.apply(this, args);\n    }\n    return delay;\n  };\n}\n\n/**\n * Converts 'start' to 'left', 'end' to 'right' and others to 'center'\n * @private\n */\nexport const _toLeftRightCenter = (align: 'start' | 'end' | 'center') => align === 'start' ? 'left' : align === 'end' ? 'right' : 'center';\n\n/**\n * Returns `start`, `end` or `(start + end) / 2` depending on `align`. Defaults to `center`\n * @private\n */\nexport const _alignStartEnd = (align: 'start' | 'end' | 'center', start: number, end: number) => align === 'start' ? start : align === 'end' ? end : (start + end) / 2;\n\n/**\n * Returns `left`, `right` or `(left + right) / 2` depending on `align`. Defaults to `left`\n * @private\n */\nexport const _textX = (align: 'left' | 'right' | 'center', left: number, right: number, rtl: boolean) => {\n  const check = rtl ? 'left' : 'right';\n  return align === check ? right : align === 'center' ? (left + right) / 2 : left;\n};\n\n/**\n * Return start and count of visible points.\n * @private\n */\nexport function _getStartAndCountOfVisiblePoints(meta: ChartMeta<'line' | 'scatter'>, points: PointElement[], animationsDisabled: boolean) {\n  const pointCount = points.length;\n\n  let start = 0;\n  let count = pointCount;\n\n  if (meta._sorted) {\n    const {iScale, _parsed} = meta;\n    const axis = iScale.axis;\n    const {min, max, minDefined, maxDefined} = iScale.getUserBounds();\n\n    if (minDefined) {\n      start = _limitValue(Math.min(\n        // @ts-expect-error Need to type _parsed\n        _lookupByKey(_parsed, iScale.axis, min).lo,\n        // @ts-expect-error Need to fix types on _lookupByKey\n        animationsDisabled ? pointCount : _lookupByKey(points, axis, iScale.getPixelForValue(min)).lo),\n      0, pointCount - 1);\n    }\n    if (maxDefined) {\n      count = _limitValue(Math.max(\n        // @ts-expect-error Need to type _parsed\n        _lookupByKey(_parsed, iScale.axis, max, true).hi + 1,\n        // @ts-expect-error Need to fix types on _lookupByKey\n        animationsDisabled ? 0 : _lookupByKey(points, axis, iScale.getPixelForValue(max), true).hi + 1),\n      start, pointCount) - start;\n    } else {\n      count = pointCount - start;\n    }\n  }\n\n  return {start, count};\n}\n\n/**\n * Checks if the scale ranges have changed.\n * @param {object} meta - dataset meta.\n * @returns {boolean}\n * @private\n */\nexport function _scaleRangesChanged(meta) {\n  const {xScale, yScale, _scaleRanges} = meta;\n  const newRanges = {\n    xmin: xScale.min,\n    xmax: xScale.max,\n    ymin: yScale.min,\n    ymax: yScale.max\n  };\n  if (!_scaleRanges) {\n    meta._scaleRanges = newRanges;\n    return true;\n  }\n  const changed = _scaleRanges.xmin !== xScale.min\n\t\t|| _scaleRanges.xmax !== xScale.max\n\t\t|| _scaleRanges.ymin !== yScale.min\n\t\t|| _scaleRanges.ymax !== yScale.max;\n\n  Object.assign(_scaleRanges, newRanges);\n  return changed;\n}\n","import {PI, TAU, HALF_PI} from './helpers.math.js';\n\nconst atEdge = (t: number) => t === 0 || t === 1;\nconst elasticIn = (t: number, s: number, p: number) => -(Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * TAU / p));\nconst elasticOut = (t: number, s: number, p: number) => Math.pow(2, -10 * t) * Math.sin((t - s) * TAU / p) + 1;\n\n/**\n * Easing functions adapted from Robert Penner's easing equations.\n * @namespace Chart.helpers.easing.effects\n * @see http://www.robertpenner.com/easing/\n */\nconst effects = {\n  linear: (t: number) => t,\n\n  easeInQuad: (t: number) => t * t,\n\n  easeOutQuad: (t: number) => -t * (t - 2),\n\n  easeInOutQuad: (t: number) => ((t /= 0.5) < 1)\n    ? 0.5 * t * t\n    : -0.5 * ((--t) * (t - 2) - 1),\n\n  easeInCubic: (t: number) => t * t * t,\n\n  easeOutCubic: (t: number) => (t -= 1) * t * t + 1,\n\n  easeInOutCubic: (t: number) => ((t /= 0.5) < 1)\n    ? 0.5 * t * t * t\n    : 0.5 * ((t -= 2) * t * t + 2),\n\n  easeInQuart: (t: number) => t * t * t * t,\n\n  easeOutQuart: (t: number) => -((t -= 1) * t * t * t - 1),\n\n  easeInOutQuart: (t: number) => ((t /= 0.5) < 1)\n    ? 0.5 * t * t * t * t\n    : -0.5 * ((t -= 2) * t * t * t - 2),\n\n  easeInQuint: (t: number) => t * t * t * t * t,\n\n  easeOutQuint: (t: number) => (t -= 1) * t * t * t * t + 1,\n\n  easeInOutQuint: (t: number) => ((t /= 0.5) < 1)\n    ? 0.5 * t * t * t * t * t\n    : 0.5 * ((t -= 2) * t * t * t * t + 2),\n\n  easeInSine: (t: number) => -Math.cos(t * HALF_PI) + 1,\n\n  easeOutSine: (t: number) => Math.sin(t * HALF_PI),\n\n  easeInOutSine: (t: number) => -0.5 * (Math.cos(PI * t) - 1),\n\n  easeInExpo: (t: number) => (t === 0) ? 0 : Math.pow(2, 10 * (t - 1)),\n\n  easeOutExpo: (t: number) => (t === 1) ? 1 : -Math.pow(2, -10 * t) + 1,\n\n  easeInOutExpo: (t: number) => atEdge(t) ? t : t < 0.5\n    ? 0.5 * Math.pow(2, 10 * (t * 2 - 1))\n    : 0.5 * (-Math.pow(2, -10 * (t * 2 - 1)) + 2),\n\n  easeInCirc: (t: number) => (t >= 1) ? t : -(Math.sqrt(1 - t * t) - 1),\n\n  easeOutCirc: (t: number) => Math.sqrt(1 - (t -= 1) * t),\n\n  easeInOutCirc: (t: number) => ((t /= 0.5) < 1)\n    ? -0.5 * (Math.sqrt(1 - t * t) - 1)\n    : 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1),\n\n  easeInElastic: (t: number) => atEdge(t) ? t : elasticIn(t, 0.075, 0.3),\n\n  easeOutElastic: (t: number) => atEdge(t) ? t : elasticOut(t, 0.075, 0.3),\n\n  easeInOutElastic(t: number) {\n    const s = 0.1125;\n    const p = 0.45;\n    return atEdge(t) ? t :\n      t < 0.5\n        ? 0.5 * elasticIn(t * 2, s, p)\n        : 0.5 + 0.5 * elasticOut(t * 2 - 1, s, p);\n  },\n\n  easeInBack(t: number) {\n    const s = 1.70158;\n    return t * t * ((s + 1) * t - s);\n  },\n\n  easeOutBack(t: number) {\n    const s = 1.70158;\n    return (t -= 1) * t * ((s + 1) * t + s) + 1;\n  },\n\n  easeInOutBack(t: number) {\n    let s = 1.70158;\n    if ((t /= 0.5) < 1) {\n      return 0.5 * (t * t * (((s *= (1.525)) + 1) * t - s));\n    }\n    return 0.5 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2);\n  },\n\n  easeInBounce: (t: number) => 1 - effects.easeOutBounce(1 - t),\n\n  easeOutBounce(t: number) {\n    const m = 7.5625;\n    const d = 2.75;\n    if (t < (1 / d)) {\n      return m * t * t;\n    }\n    if (t < (2 / d)) {\n      return m * (t -= (1.5 / d)) * t + 0.75;\n    }\n    if (t < (2.5 / d)) {\n      return m * (t -= (2.25 / d)) * t + 0.9375;\n    }\n    return m * (t -= (2.625 / d)) * t + 0.984375;\n  },\n\n  easeInOutBounce: (t: number) => (t < 0.5)\n    ? effects.easeInBounce(t * 2) * 0.5\n    : effects.easeOutBounce(t * 2 - 1) * 0.5 + 0.5,\n} as const;\n\nexport type EasingFunction = keyof typeof effects\n\nexport default effects;\n","import {Color} from '@kurkle/color';\n\nexport function isPatternOrGradient(value: unknown): value is CanvasPattern | CanvasGradient {\n  if (value && typeof value === 'object') {\n    const type = value.toString();\n    return type === '[object CanvasPattern]' || type === '[object CanvasGradient]';\n  }\n\n  return false;\n}\n\nexport function color(value: CanvasGradient): CanvasGradient;\nexport function color(value: CanvasPattern): CanvasPattern;\nexport function color(\n  value:\n  | string\n  | { r: number; g: number; b: number; a: number }\n  | [number, number, number]\n  | [number, number, number, number]\n): Color;\nexport function color(value) {\n  return isPatternOrGradient(value) ? value : new Color(value);\n}\n\nexport function getHoverColor(value: CanvasGradient): CanvasGradient;\nexport function getHoverColor(value: CanvasPattern): CanvasPattern;\nexport function getHoverColor(value: string): string;\nexport function getHoverColor(value) {\n  return isPatternOrGradient(value)\n    ? value\n    : new Color(value).saturate(0.5).darken(0.1).hexString();\n}\n","const numbers = ['x', 'y', 'borderWidth', 'radius', 'tension'];\nconst colors = ['color', 'borderColor', 'backgroundColor'];\n\nexport function applyAnimationsDefaults(defaults) {\n  defaults.set('animation', {\n    delay: undefined,\n    duration: 1000,\n    easing: 'easeOutQuart',\n    fn: undefined,\n    from: undefined,\n    loop: undefined,\n    to: undefined,\n    type: undefined,\n  });\n\n  defaults.describe('animation', {\n    _fallback: false,\n    _indexable: false,\n    _scriptable: (name) => name !== 'onProgress' && name !== 'onComplete' && name !== 'fn',\n  });\n\n  defaults.set('animations', {\n    colors: {\n      type: 'color',\n      properties: colors\n    },\n    numbers: {\n      type: 'number',\n      properties: numbers\n    },\n  });\n\n  defaults.describe('animations', {\n    _fallback: 'animation',\n  });\n\n  defaults.set('transitions', {\n    active: {\n      animation: {\n        duration: 400\n      }\n    },\n    resize: {\n      animation: {\n        duration: 0\n      }\n    },\n    show: {\n      animations: {\n        colors: {\n          from: 'transparent'\n        },\n        visible: {\n          type: 'boolean',\n          duration: 0 // show immediately\n        },\n      }\n    },\n    hide: {\n      animations: {\n        colors: {\n          to: 'transparent'\n        },\n        visible: {\n          type: 'boolean',\n          easing: 'linear',\n          fn: v => v | 0 // for keeping the dataset visible all the way through the animation\n        },\n      }\n    }\n  });\n}\n","\nconst intlCache = new Map<string, Intl.NumberFormat>();\n\nfunction getNumberFormat(locale: string, options?: Intl.NumberFormatOptions) {\n  options = options || {};\n  const cacheKey = locale + JSON.stringify(options);\n  let formatter = intlCache.get(cacheKey);\n  if (!formatter) {\n    formatter = new Intl.NumberFormat(locale, options);\n    intlCache.set(cacheKey, formatter);\n  }\n  return formatter;\n}\n\nexport function formatNumber(num: number, locale: string, options?: Intl.NumberFormatOptions) {\n  return getNumberFormat(locale, options).format(num);\n}\n","import {isArray} from '../helpers/helpers.core.js';\nimport {formatNumber} from '../helpers/helpers.intl.js';\nimport {log10} from '../helpers/helpers.math.js';\n\n/**\n * Namespace to hold formatters for different types of ticks\n * @namespace Chart.Ticks.formatters\n */\nconst formatters = {\n  /**\n   * Formatter for value labels\n   * @method Chart.Ticks.formatters.values\n   * @param value the value to display\n   * @return {string|string[]} the label to display\n   */\n  values(value) {\n    return isArray(value) ? /** @type {string[]} */ (value) : '' + value;\n  },\n\n  /**\n   * Formatter for numeric ticks\n   * @method Chart.Ticks.formatters.numeric\n   * @param tickValue {number} the value to be formatted\n   * @param index {number} the position of the tickValue parameter in the ticks array\n   * @param ticks {object[]} the list of ticks being converted\n   * @return {string} string representation of the tickValue parameter\n   */\n  numeric(tickValue, index, ticks) {\n    if (tickValue === 0) {\n      return '0'; // never show decimal places for 0\n    }\n\n    const locale = this.chart.options.locale;\n    let notation;\n    let delta = tickValue; // This is used when there are less than 2 ticks as the tick interval.\n\n    if (ticks.length > 1) {\n      // all ticks are small or there huge numbers; use scientific notation\n      const maxTick = Math.max(Math.abs(ticks[0].value), Math.abs(ticks[ticks.length - 1].value));\n      if (maxTick < 1e-4 || maxTick > 1e+15) {\n        notation = 'scientific';\n      }\n\n      delta = calculateDelta(tickValue, ticks);\n    }\n\n    const logDelta = log10(Math.abs(delta));\n    const numDecimal = Math.max(Math.min(-1 * Math.floor(logDelta), 20), 0); // toFixed has a max of 20 decimal places\n\n    const options = {notation, minimumFractionDigits: numDecimal, maximumFractionDigits: numDecimal};\n    Object.assign(options, this.options.ticks.format);\n\n    return formatNumber(tickValue, locale, options);\n  },\n\n\n  /**\n   * Formatter for logarithmic ticks\n   * @method Chart.Ticks.formatters.logarithmic\n   * @param tickValue {number} the value to be formatted\n   * @param index {number} the position of the tickValue parameter in the ticks array\n   * @param ticks {object[]} the list of ticks being converted\n   * @return {string} string representation of the tickValue parameter\n   */\n  logarithmic(tickValue, index, ticks) {\n    if (tickValue === 0) {\n      return '0';\n    }\n    const remain = ticks[index].significand || (tickValue / (Math.pow(10, Math.floor(log10(tickValue)))));\n    if ([1, 2, 3, 5, 10, 15].includes(remain) || index > 0.8 * ticks.length) {\n      return formatters.numeric.call(this, tickValue, index, ticks);\n    }\n    return '';\n  }\n\n};\n\n\nfunction calculateDelta(tickValue, ticks) {\n  // Figure out how many digits to show\n  // The space between the first two ticks might be smaller than normal spacing\n  let delta = ticks.length > 3 ? ticks[2].value - ticks[1].value : ticks[1].value - ticks[0].value;\n\n  // If we have a number like 2.5 as the delta, figure out how many decimal places we need\n  if (Math.abs(delta) >= 1 && tickValue !== Math.floor(tickValue)) {\n    // not an integer\n    delta = tickValue - Math.floor(tickValue);\n  }\n  return delta;\n}\n\n/**\n * Namespace to hold static tick generation functions\n * @namespace Chart.Ticks\n */\nexport default {formatters};\n","import {getHoverColor} from '../helpers/helpers.color.js';\nimport {isObject, merge, valueOrDefault} from '../helpers/helpers.core.js';\nimport {applyAnimationsDefaults} from './core.animations.defaults.js';\nimport {applyLayoutsDefaults} from './core.layouts.defaults.js';\nimport {applyScaleDefaults} from './core.scale.defaults.js';\n\nexport const overrides = Object.create(null);\nexport const descriptors = Object.create(null);\n\n/**\n * @param {object} node\n * @param {string} key\n * @return {object}\n */\nfunction getScope(node, key) {\n  if (!key) {\n    return node;\n  }\n  const keys = key.split('.');\n  for (let i = 0, n = keys.length; i < n; ++i) {\n    const k = keys[i];\n    node = node[k] || (node[k] = Object.create(null));\n  }\n  return node;\n}\n\nfunction set(root, scope, values) {\n  if (typeof scope === 'string') {\n    return merge(getScope(root, scope), values);\n  }\n  return merge(getScope(root, ''), scope);\n}\n\n/**\n * Please use the module's default export which provides a singleton instance\n * Note: class is exported for typedoc\n */\nexport class Defaults {\n  constructor(_descriptors, _appliers) {\n    this.animation = undefined;\n    this.backgroundColor = 'rgba(0,0,0,0.1)';\n    this.borderColor = 'rgba(0,0,0,0.1)';\n    this.color = '#666';\n    this.datasets = {};\n    this.devicePixelRatio = (context) => context.chart.platform.getDevicePixelRatio();\n    this.elements = {};\n    this.events = [\n      'mousemove',\n      'mouseout',\n      'click',\n      'touchstart',\n      'touchmove'\n    ];\n    this.font = {\n      family: \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\n      size: 12,\n      style: 'normal',\n      lineHeight: 1.2,\n      weight: null\n    };\n    this.hover = {};\n    this.hoverBackgroundColor = (ctx, options) => getHoverColor(options.backgroundColor);\n    this.hoverBorderColor = (ctx, options) => getHoverColor(options.borderColor);\n    this.hoverColor = (ctx, options) => getHoverColor(options.color);\n    this.indexAxis = 'x';\n    this.interaction = {\n      mode: 'nearest',\n      intersect: true,\n      includeInvisible: false\n    };\n    this.maintainAspectRatio = true;\n    this.onHover = null;\n    this.onClick = null;\n    this.parsing = true;\n    this.plugins = {};\n    this.responsive = true;\n    this.scale = undefined;\n    this.scales = {};\n    this.showLine = true;\n    this.drawActiveElementsOnTop = true;\n\n    this.describe(_descriptors);\n    this.apply(_appliers);\n  }\n\n  /**\n\t * @param {string|object} scope\n\t * @param {object} [values]\n\t */\n  set(scope, values) {\n    return set(this, scope, values);\n  }\n\n  /**\n\t * @param {string} scope\n\t */\n  get(scope) {\n    return getScope(this, scope);\n  }\n\n  /**\n\t * @param {string|object} scope\n\t * @param {object} [values]\n\t */\n  describe(scope, values) {\n    return set(descriptors, scope, values);\n  }\n\n  override(scope, values) {\n    return set(overrides, scope, values);\n  }\n\n  /**\n\t * Routes the named defaults to fallback to another scope/name.\n\t * This routing is useful when those target values, like defaults.color, are changed runtime.\n\t * If the values would be copied, the runtime change would not take effect. By routing, the\n\t * fallback is evaluated at each access, so its always up to date.\n\t *\n\t * Example:\n\t *\n\t * \tdefaults.route('elements.arc', 'backgroundColor', '', 'color')\n\t *   - reads the backgroundColor from defaults.color when undefined locally\n\t *\n\t * @param {string} scope Scope this route applies to.\n\t * @param {string} name Property name that should be routed to different namespace when not defined here.\n\t * @param {string} targetScope The namespace where those properties should be routed to.\n\t * Empty string ('') is the root of defaults.\n\t * @param {string} targetName The target name in the target scope the property should be routed to.\n\t */\n  route(scope, name, targetScope, targetName) {\n    const scopeObject = getScope(this, scope);\n    const targetScopeObject = getScope(this, targetScope);\n    const privateName = '_' + name;\n\n    Object.defineProperties(scopeObject, {\n      // A private property is defined to hold the actual value, when this property is set in its scope (set in the setter)\n      [privateName]: {\n        value: scopeObject[name],\n        writable: true\n      },\n      // The actual property is defined as getter/setter so we can do the routing when value is not locally set.\n      [name]: {\n        enumerable: true,\n        get() {\n          const local = this[privateName];\n          const target = targetScopeObject[targetName];\n          if (isObject(local)) {\n            return Object.assign({}, target, local);\n          }\n          return valueOrDefault(local, target);\n        },\n        set(value) {\n          this[privateName] = value;\n        }\n      }\n    });\n  }\n\n  apply(appliers) {\n    appliers.forEach((apply) => apply(this));\n  }\n}\n\n// singleton instance\nexport default /* #__PURE__ */ new Defaults({\n  _scriptable: (name) => !name.startsWith('on'),\n  _indexable: (name) => name !== 'events',\n  hover: {\n    _fallback: 'interaction'\n  },\n  interaction: {\n    _scriptable: false,\n    _indexable: false,\n  }\n}, [applyAnimationsDefaults, applyLayoutsDefaults, applyScaleDefaults]);\n","export function applyLayoutsDefaults(defaults) {\n  defaults.set('layout', {\n    autoPadding: true,\n    padding: {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    }\n  });\n}\n","import Ticks from './core.ticks.js';\n\nexport function applyScaleDefaults(defaults) {\n  defaults.set('scale', {\n    display: true,\n    offset: false,\n    reverse: false,\n    beginAtZero: false,\n\n    /**\n     * Scale boundary strategy (bypassed by min/max time options)\n     * - `data`: make sure data are fully visible, ticks outside are removed\n     * - `ticks`: make sure ticks are fully visible, data outside are truncated\n     * @see https://github.com/chartjs/Chart.js/pull/4556\n     * @since 3.0.0\n     */\n    bounds: 'ticks',\n\n    /**\n     * Addition grace added to max and reduced from min data value.\n     * @since 3.0.0\n     */\n    grace: 0,\n\n    // grid line settings\n    grid: {\n      display: true,\n      lineWidth: 1,\n      drawOnChartArea: true,\n      drawTicks: true,\n      tickLength: 8,\n      tickWidth: (_ctx, options) => options.lineWidth,\n      tickColor: (_ctx, options) => options.color,\n      offset: false,\n    },\n\n    border: {\n      display: true,\n      dash: [],\n      dashOffset: 0.0,\n      width: 1\n    },\n\n    // scale title\n    title: {\n      // display property\n      display: false,\n\n      // actual label\n      text: '',\n\n      // top/bottom padding\n      padding: {\n        top: 4,\n        bottom: 4\n      }\n    },\n\n    // label settings\n    ticks: {\n      minRotation: 0,\n      maxRotation: 50,\n      mirror: false,\n      textStrokeWidth: 0,\n      textStrokeColor: '',\n      padding: 3,\n      display: true,\n      autoSkip: true,\n      autoSkipPadding: 3,\n      labelOffset: 0,\n      // We pass through arrays to be rendered as multiline labels, we convert Others to strings here.\n      callback: Ticks.formatters.values,\n      minor: {},\n      major: {},\n      align: 'center',\n      crossAlign: 'near',\n\n      showLabelBackdrop: false,\n      backdropColor: 'rgba(255, 255, 255, 0.75)',\n      backdropPadding: 2,\n    }\n  });\n\n  defaults.route('scale.ticks', 'color', '', 'color');\n  defaults.route('scale.grid', 'color', '', 'borderColor');\n  defaults.route('scale.border', 'color', '', 'borderColor');\n  defaults.route('scale.title', 'color', '', 'color');\n\n  defaults.describe('scale', {\n    _fallback: false,\n    _scriptable: (name) => !name.startsWith('before') && !name.startsWith('after') && name !== 'callback' && name !== 'parser',\n    _indexable: (name) => name !== 'borderDash' && name !== 'tickBorderDash' && name !== 'dash',\n  });\n\n  defaults.describe('scales', {\n    _fallback: 'scale',\n  });\n\n  defaults.describe('scale.ticks', {\n    _scriptable: (name) => name !== 'backdropPadding' && name !== 'callback',\n    _indexable: (name) => name !== 'backdropPadding',\n  });\n}\n","import {isArray, isNullOrUndef} from './helpers.core.js';\nimport {PI, TAU, HALF_PI, QUARTER_PI, TWO_THIRDS_PI, RAD_PER_DEG} from './helpers.math.js';\n\n/**\n * Note: typedefs are auto-exported, so use a made-up `canvas` namespace where\n * necessary to avoid duplicates with `export * from './helpers`; see\n * https://github.com/microsoft/TypeScript/issues/46011\n * @typedef { import('../core/core.controller.js').default } canvas.Chart\n * @typedef { import('../types/index.js').Point } Point\n */\n\n/**\n * @namespace Chart.helpers.canvas\n */\n\n/**\n * Converts the given font object into a CSS font string.\n * @param {object} font - A font object.\n * @return {string|null} The CSS font string. See https://developer.mozilla.org/en-US/docs/Web/CSS/font\n * @private\n */\nexport function toFontString(font) {\n  if (!font || isNullOrUndef(font.size) || isNullOrUndef(font.family)) {\n    return null;\n  }\n\n  return (font.style ? font.style + ' ' : '')\n\t\t+ (font.weight ? font.weight + ' ' : '')\n\t\t+ font.size + 'px '\n\t\t+ font.family;\n}\n\n/**\n * @private\n */\nexport function _measureText(ctx, data, gc, longest, string) {\n  let textWidth = data[string];\n  if (!textWidth) {\n    textWidth = data[string] = ctx.measureText(string).width;\n    gc.push(string);\n  }\n  if (textWidth > longest) {\n    longest = textWidth;\n  }\n  return longest;\n}\n\n/**\n * @private\n */\nexport function _longestText(ctx, font, arrayOfThings, cache) {\n  cache = cache || {};\n  let data = cache.data = cache.data || {};\n  let gc = cache.garbageCollect = cache.garbageCollect || [];\n\n  if (cache.font !== font) {\n    data = cache.data = {};\n    gc = cache.garbageCollect = [];\n    cache.font = font;\n  }\n\n  ctx.save();\n\n  ctx.font = font;\n  let longest = 0;\n  const ilen = arrayOfThings.length;\n  let i, j, jlen, thing, nestedThing;\n  for (i = 0; i < ilen; i++) {\n    thing = arrayOfThings[i];\n\n    // Undefined strings and arrays should not be measured\n    if (thing !== undefined && thing !== null && isArray(thing) !== true) {\n      longest = _measureText(ctx, data, gc, longest, thing);\n    } else if (isArray(thing)) {\n      // if it is an array lets measure each element\n      // to do maybe simplify this function a bit so we can do this more recursively?\n      for (j = 0, jlen = thing.length; j < jlen; j++) {\n        nestedThing = thing[j];\n        // Undefined strings and arrays should not be measured\n        if (nestedThing !== undefined && nestedThing !== null && !isArray(nestedThing)) {\n          longest = _measureText(ctx, data, gc, longest, nestedThing);\n        }\n      }\n    }\n  }\n\n  ctx.restore();\n\n  const gcLen = gc.length / 2;\n  if (gcLen > arrayOfThings.length) {\n    for (i = 0; i < gcLen; i++) {\n      delete data[gc[i]];\n    }\n    gc.splice(0, gcLen);\n  }\n  return longest;\n}\n\n/**\n * Returns the aligned pixel value to avoid anti-aliasing blur\n * @param {canvas.Chart} chart - The chart instance.\n * @param {number} pixel - A pixel value.\n * @param {number} width - The width of the element.\n * @returns {number} The aligned pixel value.\n * @private\n */\nexport function _alignPixel(chart, pixel, width) {\n  const devicePixelRatio = chart.currentDevicePixelRatio;\n  const halfWidth = width !== 0 ? Math.max(width / 2, 0.5) : 0;\n  return Math.round((pixel - halfWidth) * devicePixelRatio) / devicePixelRatio + halfWidth;\n}\n\n/**\n * Clears the entire canvas.\n * @param {HTMLCanvasElement} canvas\n * @param {CanvasRenderingContext2D} [ctx]\n */\nexport function clearCanvas(canvas, ctx) {\n  ctx = ctx || canvas.getContext('2d');\n\n  ctx.save();\n  // canvas.width and canvas.height do not consider the canvas transform,\n  // while clearRect does\n  ctx.resetTransform();\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  ctx.restore();\n}\n\nexport function drawPoint(ctx, options, x, y) {\n  drawPointLegend(ctx, options, x, y, null);\n}\n\nexport function drawPointLegend(ctx, options, x, y, w) {\n  let type, xOffset, yOffset, size, cornerRadius, width, xOffsetW, yOffsetW;\n  const style = options.pointStyle;\n  const rotation = options.rotation;\n  const radius = options.radius;\n  let rad = (rotation || 0) * RAD_PER_DEG;\n\n  if (style && typeof style === 'object') {\n    type = style.toString();\n    if (type === '[object HTMLImageElement]' || type === '[object HTMLCanvasElement]') {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.rotate(rad);\n      ctx.drawImage(style, -style.width / 2, -style.height / 2, style.width, style.height);\n      ctx.restore();\n      return;\n    }\n  }\n\n  if (isNaN(radius) || radius <= 0) {\n    return;\n  }\n\n  ctx.beginPath();\n\n  switch (style) {\n  // Default includes circle\n  default:\n    if (w) {\n      ctx.ellipse(x, y, w / 2, radius, 0, 0, TAU);\n    } else {\n      ctx.arc(x, y, radius, 0, TAU);\n    }\n    ctx.closePath();\n    break;\n  case 'triangle':\n    width = w ? w / 2 : radius;\n    ctx.moveTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);\n    rad += TWO_THIRDS_PI;\n    ctx.lineTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);\n    rad += TWO_THIRDS_PI;\n    ctx.lineTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);\n    ctx.closePath();\n    break;\n  case 'rectRounded':\n    // NOTE: the rounded rect implementation changed to use `arc` instead of\n    // `quadraticCurveTo` since it generates better results when rect is\n    // almost a circle. 0.516 (instead of 0.5) produces results with visually\n    // closer proportion to the previous impl and it is inscribed in the\n    // circle with `radius`. For more details, see the following PRs:\n    // https://github.com/chartjs/Chart.js/issues/5597\n    // https://github.com/chartjs/Chart.js/issues/5858\n    cornerRadius = radius * 0.516;\n    size = radius - cornerRadius;\n    xOffset = Math.cos(rad + QUARTER_PI) * size;\n    xOffsetW = Math.cos(rad + QUARTER_PI) * (w ? w / 2 - cornerRadius : size);\n    yOffset = Math.sin(rad + QUARTER_PI) * size;\n    yOffsetW = Math.sin(rad + QUARTER_PI) * (w ? w / 2 - cornerRadius : size);\n    ctx.arc(x - xOffsetW, y - yOffset, cornerRadius, rad - PI, rad - HALF_PI);\n    ctx.arc(x + yOffsetW, y - xOffset, cornerRadius, rad - HALF_PI, rad);\n    ctx.arc(x + xOffsetW, y + yOffset, cornerRadius, rad, rad + HALF_PI);\n    ctx.arc(x - yOffsetW, y + xOffset, cornerRadius, rad + HALF_PI, rad + PI);\n    ctx.closePath();\n    break;\n  case 'rect':\n    if (!rotation) {\n      size = Math.SQRT1_2 * radius;\n      width = w ? w / 2 : size;\n      ctx.rect(x - width, y - size, 2 * width, 2 * size);\n      break;\n    }\n    rad += QUARTER_PI;\n    /* falls through */\n  case 'rectRot':\n    xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n    xOffset = Math.cos(rad) * radius;\n    yOffset = Math.sin(rad) * radius;\n    yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n    ctx.moveTo(x - xOffsetW, y - yOffset);\n    ctx.lineTo(x + yOffsetW, y - xOffset);\n    ctx.lineTo(x + xOffsetW, y + yOffset);\n    ctx.lineTo(x - yOffsetW, y + xOffset);\n    ctx.closePath();\n    break;\n  case 'crossRot':\n    rad += QUARTER_PI;\n    /* falls through */\n  case 'cross':\n    xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n    xOffset = Math.cos(rad) * radius;\n    yOffset = Math.sin(rad) * radius;\n    yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n    ctx.moveTo(x - xOffsetW, y - yOffset);\n    ctx.lineTo(x + xOffsetW, y + yOffset);\n    ctx.moveTo(x + yOffsetW, y - xOffset);\n    ctx.lineTo(x - yOffsetW, y + xOffset);\n    break;\n  case 'star':\n    xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n    xOffset = Math.cos(rad) * radius;\n    yOffset = Math.sin(rad) * radius;\n    yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n    ctx.moveTo(x - xOffsetW, y - yOffset);\n    ctx.lineTo(x + xOffsetW, y + yOffset);\n    ctx.moveTo(x + yOffsetW, y - xOffset);\n    ctx.lineTo(x - yOffsetW, y + xOffset);\n    rad += QUARTER_PI;\n    xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n    xOffset = Math.cos(rad) * radius;\n    yOffset = Math.sin(rad) * radius;\n    yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n    ctx.moveTo(x - xOffsetW, y - yOffset);\n    ctx.lineTo(x + xOffsetW, y + yOffset);\n    ctx.moveTo(x + yOffsetW, y - xOffset);\n    ctx.lineTo(x - yOffsetW, y + xOffset);\n    break;\n  case 'line':\n    xOffset = w ? w / 2 : Math.cos(rad) * radius;\n    yOffset = Math.sin(rad) * radius;\n    ctx.moveTo(x - xOffset, y - yOffset);\n    ctx.lineTo(x + xOffset, y + yOffset);\n    break;\n  case 'dash':\n    ctx.moveTo(x, y);\n    ctx.lineTo(x + Math.cos(rad) * (w ? w / 2 : radius), y + Math.sin(rad) * radius);\n    break;\n  case false:\n    ctx.closePath();\n    break;\n  }\n\n  ctx.fill();\n  if (options.borderWidth > 0) {\n    ctx.stroke();\n  }\n}\n\n/**\n * Returns true if the point is inside the rectangle\n * @param {Point} point - The point to test\n * @param {object} area - The rectangle\n * @param {number} [margin] - allowed margin\n * @returns {boolean}\n * @private\n */\nexport function _isPointInArea(point, area, margin) {\n  margin = margin || 0.5; // margin - default is to match rounded decimals\n\n  return !area || (point && point.x > area.left - margin && point.x < area.right + margin &&\n\t\tpoint.y > area.top - margin && point.y < area.bottom + margin);\n}\n\nexport function clipArea(ctx, area) {\n  ctx.save();\n  ctx.beginPath();\n  ctx.rect(area.left, area.top, area.right - area.left, area.bottom - area.top);\n  ctx.clip();\n}\n\nexport function unclipArea(ctx) {\n  ctx.restore();\n}\n\n/**\n * @private\n */\nexport function _steppedLineTo(ctx, previous, target, flip, mode) {\n  if (!previous) {\n    return ctx.lineTo(target.x, target.y);\n  }\n  if (mode === 'middle') {\n    const midpoint = (previous.x + target.x) / 2.0;\n    ctx.lineTo(midpoint, previous.y);\n    ctx.lineTo(midpoint, target.y);\n  } else if (mode === 'after' !== !!flip) {\n    ctx.lineTo(previous.x, target.y);\n  } else {\n    ctx.lineTo(target.x, previous.y);\n  }\n  ctx.lineTo(target.x, target.y);\n}\n\n/**\n * @private\n */\nexport function _bezierCurveTo(ctx, previous, target, flip) {\n  if (!previous) {\n    return ctx.lineTo(target.x, target.y);\n  }\n  ctx.bezierCurveTo(\n    flip ? previous.cp1x : previous.cp2x,\n    flip ? previous.cp1y : previous.cp2y,\n    flip ? target.cp2x : target.cp1x,\n    flip ? target.cp2y : target.cp1y,\n    target.x,\n    target.y);\n}\n\n/**\n * Render text onto the canvas\n */\nexport function renderText(ctx, text, x, y, font, opts = {}) {\n  const lines = isArray(text) ? text : [text];\n  const stroke = opts.strokeWidth > 0 && opts.strokeColor !== '';\n  let i, line;\n\n  ctx.save();\n  ctx.font = font.string;\n  setRenderOpts(ctx, opts);\n\n  for (i = 0; i < lines.length; ++i) {\n    line = lines[i];\n\n    if (opts.backdrop) {\n      drawBackdrop(ctx, opts.backdrop);\n    }\n\n    if (stroke) {\n      if (opts.strokeColor) {\n        ctx.strokeStyle = opts.strokeColor;\n      }\n\n      if (!isNullOrUndef(opts.strokeWidth)) {\n        ctx.lineWidth = opts.strokeWidth;\n      }\n\n      ctx.strokeText(line, x, y, opts.maxWidth);\n    }\n\n    ctx.fillText(line, x, y, opts.maxWidth);\n    decorateText(ctx, x, y, line, opts);\n\n    y += font.lineHeight;\n  }\n\n  ctx.restore();\n}\n\nfunction setRenderOpts(ctx, opts) {\n  if (opts.translation) {\n    ctx.translate(opts.translation[0], opts.translation[1]);\n  }\n\n  if (!isNullOrUndef(opts.rotation)) {\n    ctx.rotate(opts.rotation);\n  }\n\n  if (opts.color) {\n    ctx.fillStyle = opts.color;\n  }\n\n  if (opts.textAlign) {\n    ctx.textAlign = opts.textAlign;\n  }\n\n  if (opts.textBaseline) {\n    ctx.textBaseline = opts.textBaseline;\n  }\n}\n\nfunction decorateText(ctx, x, y, line, opts) {\n  if (opts.strikethrough || opts.underline) {\n    /**\n     * Now that IE11 support has been dropped, we can use more\n     * of the TextMetrics object. The actual bounding boxes\n     * are unflagged in Chrome, Firefox, Edge, and Safari so they\n     * can be safely used.\n     * See https://developer.mozilla.org/en-US/docs/Web/API/TextMetrics#Browser_compatibility\n     */\n    const metrics = ctx.measureText(line);\n    const left = x - metrics.actualBoundingBoxLeft;\n    const right = x + metrics.actualBoundingBoxRight;\n    const top = y - metrics.actualBoundingBoxAscent;\n    const bottom = y + metrics.actualBoundingBoxDescent;\n    const yDecoration = opts.strikethrough ? (top + bottom) / 2 : bottom;\n\n    ctx.strokeStyle = ctx.fillStyle;\n    ctx.beginPath();\n    ctx.lineWidth = opts.decorationWidth || 2;\n    ctx.moveTo(left, yDecoration);\n    ctx.lineTo(right, yDecoration);\n    ctx.stroke();\n  }\n}\n\nfunction drawBackdrop(ctx, opts) {\n  const oldColor = ctx.fillStyle;\n\n  ctx.fillStyle = opts.color;\n  ctx.fillRect(opts.left, opts.top, opts.width, opts.height);\n  ctx.fillStyle = oldColor;\n}\n\n/**\n * Add a path of a rectangle with rounded corners to the current sub-path\n * @param {CanvasRenderingContext2D} ctx Context\n * @param {*} rect Bounding rect\n */\nexport function addRoundedRectPath(ctx, rect) {\n  const {x, y, w, h, radius} = rect;\n\n  // top left arc\n  ctx.arc(x + radius.topLeft, y + radius.topLeft, radius.topLeft, -HALF_PI, PI, true);\n\n  // line from top left to bottom left\n  ctx.lineTo(x, y + h - radius.bottomLeft);\n\n  // bottom left arc\n  ctx.arc(x + radius.bottomLeft, y + h - radius.bottomLeft, radius.bottomLeft, PI, HALF_PI, true);\n\n  // line from bottom left to bottom right\n  ctx.lineTo(x + w - radius.bottomRight, y + h);\n\n  // bottom right arc\n  ctx.arc(x + w - radius.bottomRight, y + h - radius.bottomRight, radius.bottomRight, HALF_PI, 0, true);\n\n  // line from bottom right to top right\n  ctx.lineTo(x + w, y + radius.topRight);\n\n  // top right arc\n  ctx.arc(x + w - radius.topRight, y + radius.topRight, radius.topRight, 0, -HALF_PI, true);\n\n  // line from top right to top left\n  ctx.lineTo(x + radius.topLeft, y);\n}\n","import defaults from '../core/core.defaults.js';\nimport {isArray, isObject, toDimension, valueOrDefault} from './helpers.core.js';\nimport {Point, toFontString} from './helpers.canvas.js';\nimport type {ChartArea, FontSpec} from '../types/index.js';\nimport type {TRBL, TRBLCorners} from '../types/geometric.js';\n\nconst LINE_HEIGHT = /^(normal|(\\d+(?:\\.\\d+)?)(px|em|%)?)$/;\nconst FONT_STYLE = /^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;\n\n/**\n * @alias Chart.helpers.options\n * @namespace\n */\n/**\n * Converts the given line height `value` in pixels for a specific font `size`.\n * @param value - The lineHeight to parse (eg. 1.6, '14px', '75%', '1.6em').\n * @param size - The font size (in pixels) used to resolve relative `value`.\n * @returns The effective line height in pixels (size * 1.2 if value is invalid).\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/line-height\n * @since 2.7.0\n */\nexport function toLineHeight(value: number | string, size: number): number {\n  const matches = ('' + value).match(LINE_HEIGHT);\n  if (!matches || matches[1] === 'normal') {\n    return size * 1.2;\n  }\n\n  value = +matches[2];\n\n  switch (matches[3]) {\n    case 'px':\n      return value;\n    case '%':\n      value /= 100;\n      break;\n    default:\n      break;\n  }\n\n  return size * value;\n}\n\nconst numberOrZero = (v: unknown) => +v || 0;\n\n/**\n * @param value\n * @param props\n */\nexport function _readValueToProps<K extends string>(value: number | Record<K, number>, props: K[]): Record<K, number>;\nexport function _readValueToProps<K extends string, T extends string>(value: number | Record<K & T, number>, props: Record<T, K>): Record<T, number>;\nexport function _readValueToProps(value: number | Record<string, number>, props: string[] | Record<string, string>) {\n  const ret = {};\n  const objProps = isObject(props);\n  const keys = objProps ? Object.keys(props) : props;\n  const read = isObject(value)\n    ? objProps\n      ? prop => valueOrDefault(value[prop], value[props[prop]])\n      : prop => value[prop]\n    : () => value;\n\n  for (const prop of keys) {\n    ret[prop] = numberOrZero(read(prop));\n  }\n  return ret;\n}\n\n/**\n * Converts the given value into a TRBL object.\n * @param value - If a number, set the value to all TRBL component,\n *  else, if an object, use defined properties and sets undefined ones to 0.\n *  x / y are shorthands for same value for left/right and top/bottom.\n * @returns The padding values (top, right, bottom, left)\n * @since 3.0.0\n */\nexport function toTRBL(value: number | TRBL | Point) {\n  return _readValueToProps(value, {top: 'y', right: 'x', bottom: 'y', left: 'x'});\n}\n\n/**\n * Converts the given value into a TRBL corners object (similar with css border-radius).\n * @param value - If a number, set the value to all TRBL corner components,\n *  else, if an object, use defined properties and sets undefined ones to 0.\n * @returns The TRBL corner values (topLeft, topRight, bottomLeft, bottomRight)\n * @since 3.0.0\n */\nexport function toTRBLCorners(value: number | TRBLCorners) {\n  return _readValueToProps(value, ['topLeft', 'topRight', 'bottomLeft', 'bottomRight']);\n}\n\n/**\n * Converts the given value into a padding object with pre-computed width/height.\n * @param value - If a number, set the value to all TRBL component,\n *  else, if an object, use defined properties and sets undefined ones to 0.\n *  x / y are shorthands for same value for left/right and top/bottom.\n * @returns The padding values (top, right, bottom, left, width, height)\n * @since 2.7.0\n */\nexport function toPadding(value?: number | TRBL): ChartArea {\n  const obj = toTRBL(value) as ChartArea;\n\n  obj.width = obj.left + obj.right;\n  obj.height = obj.top + obj.bottom;\n\n  return obj;\n}\n\nexport interface CanvasFontSpec extends FontSpec {\n  string: string;\n}\n\n/**\n * Parses font options and returns the font object.\n * @param options - A object that contains font options to be parsed.\n * @param fallback - A object that contains fallback font options.\n * @return The font object.\n * @private\n */\n\nexport function toFont(options: Partial<FontSpec>, fallback?: Partial<FontSpec>) {\n  options = options || {};\n  fallback = fallback || defaults.font as FontSpec;\n\n  let size = valueOrDefault(options.size, fallback.size);\n\n  if (typeof size === 'string') {\n    size = parseInt(size, 10);\n  }\n  let style = valueOrDefault(options.style, fallback.style);\n  if (style && !('' + style).match(FONT_STYLE)) {\n    console.warn('Invalid font style specified: \"' + style + '\"');\n    style = undefined;\n  }\n\n  const font = {\n    family: valueOrDefault(options.family, fallback.family),\n    lineHeight: toLineHeight(valueOrDefault(options.lineHeight, fallback.lineHeight), size),\n    size,\n    style,\n    weight: valueOrDefault(options.weight, fallback.weight),\n    string: ''\n  };\n\n  font.string = toFontString(font);\n  return font;\n}\n\n/**\n * Evaluates the given `inputs` sequentially and returns the first defined value.\n * @param inputs - An array of values, falling back to the last value.\n * @param context - If defined and the current value is a function, the value\n * is called with `context` as first argument and the result becomes the new input.\n * @param index - If defined and the current value is an array, the value\n * at `index` become the new input.\n * @param info - object to return information about resolution in\n * @param info.cacheable - Will be set to `false` if option is not cacheable.\n * @since 2.7.0\n */\nexport function resolve(inputs: Array<unknown>, context?: object, index?: number, info?: { cacheable: boolean }) {\n  let cacheable = true;\n  let i: number, ilen: number, value: unknown;\n\n  for (i = 0, ilen = inputs.length; i < ilen; ++i) {\n    value = inputs[i];\n    if (value === undefined) {\n      continue;\n    }\n    if (context !== undefined && typeof value === 'function') {\n      value = value(context);\n      cacheable = false;\n    }\n    if (index !== undefined && isArray(value)) {\n      value = value[index % value.length];\n      cacheable = false;\n    }\n    if (value !== undefined) {\n      if (info && !cacheable) {\n        info.cacheable = false;\n      }\n      return value;\n    }\n  }\n}\n\n/**\n * @param minmax\n * @param grace\n * @param beginAtZero\n * @private\n */\nexport function _addGrace(minmax: { min: number; max: number; }, grace: number | string, beginAtZero: boolean) {\n  const {min, max} = minmax;\n  const change = toDimension(grace, (max - min) / 2);\n  const keepZero = (value: number, add: number) => beginAtZero && value === 0 ? 0 : value + add;\n  return {\n    min: keepZero(min, -Math.abs(change)),\n    max: keepZero(max, change)\n  };\n}\n\n/**\n * Create a context inheriting parentContext\n * @param parentContext\n * @param context\n * @returns\n */\nexport function createContext<T extends object>(parentContext: null, context: T): T;\nexport function createContext<T extends object, P extends T>(parentContext: P, context: T): P & T;\nexport function createContext(parentContext: object, context: object) {\n  return Object.assign(Object.create(parentContext), context);\n}\n","import {defined, isArray, isFunction, isObject, resolveObjectKey, _capitalize} from './helpers.core.js';\n\n/**\n * Creates a Proxy for resolving raw values for options.\n * @param {object[]} scopes - The option scopes to look for values, in resolution order\n * @param {string[]} [prefixes] - The prefixes for values, in resolution order.\n * @param {object[]} [rootScopes] - The root option scopes\n * @param {string|boolean} [fallback] - Parent scopes fallback\n * @param {function} [getTarget] - callback for getting the target for changed values\n * @returns Proxy\n * @private\n */\nexport function _createResolver(scopes, prefixes = [''], rootScopes = scopes, fallback, getTarget = () => scopes[0]) {\n  if (!defined(fallback)) {\n    fallback = _resolve('_fallback', scopes);\n  }\n  const cache = {\n    [Symbol.toStringTag]: 'Object',\n    _cacheable: true,\n    _scopes: scopes,\n    _rootScopes: rootScopes,\n    _fallback: fallback,\n    _getTarget: getTarget,\n    override: (scope) => _createResolver([scope, ...scopes], prefixes, rootScopes, fallback),\n  };\n  return new Proxy(cache, {\n    /**\n     * A trap for the delete operator.\n     */\n    deleteProperty(target, prop) {\n      delete target[prop]; // remove from cache\n      delete target._keys; // remove cached keys\n      delete scopes[0][prop]; // remove from top level scope\n      return true;\n    },\n\n    /**\n     * A trap for getting property values.\n     */\n    get(target, prop) {\n      return _cached(target, prop,\n        () => _resolveWithPrefixes(prop, prefixes, scopes, target));\n    },\n\n    /**\n     * A trap for Object.getOwnPropertyDescriptor.\n     * Also used by Object.hasOwnProperty.\n     */\n    getOwnPropertyDescriptor(target, prop) {\n      return Reflect.getOwnPropertyDescriptor(target._scopes[0], prop);\n    },\n\n    /**\n     * A trap for Object.getPrototypeOf.\n     */\n    getPrototypeOf() {\n      return Reflect.getPrototypeOf(scopes[0]);\n    },\n\n    /**\n     * A trap for the in operator.\n     */\n    has(target, prop) {\n      return getKeysFromAllScopes(target).includes(prop);\n    },\n\n    /**\n     * A trap for Object.getOwnPropertyNames and Object.getOwnPropertySymbols.\n     */\n    ownKeys(target) {\n      return getKeysFromAllScopes(target);\n    },\n\n    /**\n     * A trap for setting property values.\n     */\n    set(target, prop, value) {\n      const storage = target._storage || (target._storage = getTarget());\n      target[prop] = storage[prop] = value; // set to top level scope + cache\n      delete target._keys; // remove cached keys\n      return true;\n    }\n  });\n}\n\n/**\n * Returns an Proxy for resolving option values with context.\n * @param {object} proxy - The Proxy returned by `_createResolver`\n * @param {object} context - Context object for scriptable/indexable options\n * @param {object} [subProxy] - The proxy provided for scriptable options\n * @param {{scriptable: boolean, indexable: boolean, allKeys?: boolean}} [descriptorDefaults] - Defaults for descriptors\n * @private\n */\nexport function _attachContext(proxy, context, subProxy, descriptorDefaults) {\n  const cache = {\n    _cacheable: false,\n    _proxy: proxy,\n    _context: context,\n    _subProxy: subProxy,\n    _stack: new Set(),\n    _descriptors: _descriptors(proxy, descriptorDefaults),\n    setContext: (ctx) => _attachContext(proxy, ctx, subProxy, descriptorDefaults),\n    override: (scope) => _attachContext(proxy.override(scope), context, subProxy, descriptorDefaults)\n  };\n  return new Proxy(cache, {\n    /**\n     * A trap for the delete operator.\n     */\n    deleteProperty(target, prop) {\n      delete target[prop]; // remove from cache\n      delete proxy[prop]; // remove from proxy\n      return true;\n    },\n\n    /**\n     * A trap for getting property values.\n     */\n    get(target, prop, receiver) {\n      return _cached(target, prop,\n        () => _resolveWithContext(target, prop, receiver));\n    },\n\n    /**\n     * A trap for Object.getOwnPropertyDescriptor.\n     * Also used by Object.hasOwnProperty.\n     */\n    getOwnPropertyDescriptor(target, prop) {\n      return target._descriptors.allKeys\n        ? Reflect.has(proxy, prop) ? {enumerable: true, configurable: true} : undefined\n        : Reflect.getOwnPropertyDescriptor(proxy, prop);\n    },\n\n    /**\n     * A trap for Object.getPrototypeOf.\n     */\n    getPrototypeOf() {\n      return Reflect.getPrototypeOf(proxy);\n    },\n\n    /**\n     * A trap for the in operator.\n     */\n    has(target, prop) {\n      return Reflect.has(proxy, prop);\n    },\n\n    /**\n     * A trap for Object.getOwnPropertyNames and Object.getOwnPropertySymbols.\n     */\n    ownKeys() {\n      return Reflect.ownKeys(proxy);\n    },\n\n    /**\n     * A trap for setting property values.\n     */\n    set(target, prop, value) {\n      proxy[prop] = value; // set to proxy\n      delete target[prop]; // remove from cache\n      return true;\n    }\n  });\n}\n\n/**\n * @private\n */\nexport function _descriptors(proxy, defaults = {scriptable: true, indexable: true}) {\n  const {_scriptable = defaults.scriptable, _indexable = defaults.indexable, _allKeys = defaults.allKeys} = proxy;\n  return {\n    allKeys: _allKeys,\n    scriptable: _scriptable,\n    indexable: _indexable,\n    isScriptable: isFunction(_scriptable) ? _scriptable : () => _scriptable,\n    isIndexable: isFunction(_indexable) ? _indexable : () => _indexable\n  };\n}\n\nconst readKey = (prefix, name) => prefix ? prefix + _capitalize(name) : name;\nconst needsSubResolver = (prop, value) => isObject(value) && prop !== 'adapters' &&\n  (Object.getPrototypeOf(value) === null || value.constructor === Object);\n\nfunction _cached(target, prop, resolve) {\n  if (Object.prototype.hasOwnProperty.call(target, prop)) {\n    return target[prop];\n  }\n\n  const value = resolve();\n  // cache the resolved value\n  target[prop] = value;\n  return value;\n}\n\nfunction _resolveWithContext(target, prop, receiver) {\n  const {_proxy, _context, _subProxy, _descriptors: descriptors} = target;\n  let value = _proxy[prop]; // resolve from proxy\n\n  // resolve with context\n  if (isFunction(value) && descriptors.isScriptable(prop)) {\n    value = _resolveScriptable(prop, value, target, receiver);\n  }\n  if (isArray(value) && value.length) {\n    value = _resolveArray(prop, value, target, descriptors.isIndexable);\n  }\n  if (needsSubResolver(prop, value)) {\n    // if the resolved value is an object, create a sub resolver for it\n    value = _attachContext(value, _context, _subProxy && _subProxy[prop], descriptors);\n  }\n  return value;\n}\n\nfunction _resolveScriptable(prop, value, target, receiver) {\n  const {_proxy, _context, _subProxy, _stack} = target;\n  if (_stack.has(prop)) {\n    // @ts-ignore\n    throw new Error('Recursion detected: ' + Array.from(_stack).join('->') + '->' + prop);\n  }\n  _stack.add(prop);\n  value = value(_context, _subProxy || receiver);\n  _stack.delete(prop);\n  if (needsSubResolver(prop, value)) {\n    // When scriptable option returns an object, create a resolver on that.\n    value = createSubResolver(_proxy._scopes, _proxy, prop, value);\n  }\n  return value;\n}\n\nfunction _resolveArray(prop, value, target, isIndexable) {\n  const {_proxy, _context, _subProxy, _descriptors: descriptors} = target;\n\n  if (defined(_context.index) && isIndexable(prop)) {\n    value = value[_context.index % value.length];\n  } else if (isObject(value[0])) {\n    // Array of objects, return array or resolvers\n    const arr = value;\n    const scopes = _proxy._scopes.filter(s => s !== arr);\n    value = [];\n    for (const item of arr) {\n      const resolver = createSubResolver(scopes, _proxy, prop, item);\n      value.push(_attachContext(resolver, _context, _subProxy && _subProxy[prop], descriptors));\n    }\n  }\n  return value;\n}\n\nfunction resolveFallback(fallback, prop, value) {\n  return isFunction(fallback) ? fallback(prop, value) : fallback;\n}\n\nconst getScope = (key, parent) => key === true ? parent\n  : typeof key === 'string' ? resolveObjectKey(parent, key) : undefined;\n\nfunction addScopes(set, parentScopes, key, parentFallback, value) {\n  for (const parent of parentScopes) {\n    const scope = getScope(key, parent);\n    if (scope) {\n      set.add(scope);\n      const fallback = resolveFallback(scope._fallback, key, value);\n      if (defined(fallback) && fallback !== key && fallback !== parentFallback) {\n        // When we reach the descriptor that defines a new _fallback, return that.\n        // The fallback will resume to that new scope.\n        return fallback;\n      }\n    } else if (scope === false && defined(parentFallback) && key !== parentFallback) {\n      // Fallback to `false` results to `false`, when falling back to different key.\n      // For example `interaction` from `hover` or `plugins.tooltip` and `animation` from `animations`\n      return null;\n    }\n  }\n  return false;\n}\n\nfunction createSubResolver(parentScopes, resolver, prop, value) {\n  const rootScopes = resolver._rootScopes;\n  const fallback = resolveFallback(resolver._fallback, prop, value);\n  const allScopes = [...parentScopes, ...rootScopes];\n  const set = new Set();\n  set.add(value);\n  let key = addScopesFromKey(set, allScopes, prop, fallback || prop, value);\n  if (key === null) {\n    return false;\n  }\n  if (defined(fallback) && fallback !== prop) {\n    key = addScopesFromKey(set, allScopes, fallback, key, value);\n    if (key === null) {\n      return false;\n    }\n  }\n  return _createResolver(Array.from(set), [''], rootScopes, fallback,\n    () => subGetTarget(resolver, prop, value));\n}\n\nfunction addScopesFromKey(set, allScopes, key, fallback, item) {\n  while (key) {\n    key = addScopes(set, allScopes, key, fallback, item);\n  }\n  return key;\n}\n\nfunction subGetTarget(resolver, prop, value) {\n  const parent = resolver._getTarget();\n  if (!(prop in parent)) {\n    parent[prop] = {};\n  }\n  const target = parent[prop];\n  if (isArray(target) && isObject(value)) {\n    // For array of objects, the object is used to store updated values\n    return value;\n  }\n  return target || {};\n}\n\nfunction _resolveWithPrefixes(prop, prefixes, scopes, proxy) {\n  let value;\n  for (const prefix of prefixes) {\n    value = _resolve(readKey(prefix, prop), scopes);\n    if (defined(value)) {\n      return needsSubResolver(prop, value)\n        ? createSubResolver(scopes, proxy, prop, value)\n        : value;\n    }\n  }\n}\n\nfunction _resolve(key, scopes) {\n  for (const scope of scopes) {\n    if (!scope) {\n      continue;\n    }\n    const value = scope[key];\n    if (defined(value)) {\n      return value;\n    }\n  }\n}\n\nfunction getKeysFromAllScopes(target) {\n  let keys = target._keys;\n  if (!keys) {\n    keys = target._keys = resolveKeysFromAllScopes(target._scopes);\n  }\n  return keys;\n}\n\nfunction resolveKeysFromAllScopes(scopes) {\n  const set = new Set();\n  for (const scope of scopes) {\n    for (const key of Object.keys(scope).filter(k => !k.startsWith('_'))) {\n      set.add(key);\n    }\n  }\n  return Array.from(set);\n}\n\nexport function _parseObjectDataRadialScale(meta, data, start, count) {\n  const {iScale} = meta;\n  const {key = 'r'} = this._parsing;\n  const parsed = new Array(count);\n  let i, ilen, index, item;\n\n  for (i = 0, ilen = count; i < ilen; ++i) {\n    index = i + start;\n    item = data[index];\n    parsed[i] = {\n      r: iScale.parse(resolveObjectKey(item, key), index)\n    };\n  }\n  return parsed;\n}\n","import {almostEquals, distanceBetweenPoints, sign} from './helpers.math.js';\nimport {_isPointInArea} from './helpers.canvas.js';\nimport type {ChartArea} from '../types/index.js';\n\nexport interface SplinePoint {\n  x: number;\n  y: number;\n  skip?: boolean;\n\n  // Both Bezier and monotone interpolations have these fields\n  // but they are added in different spots\n  cp1x?: number;\n  cp1y?: number;\n  cp2x?: number;\n  cp2y?: number;\n}\n\nconst EPSILON = Number.EPSILON || 1e-14;\n\ntype OptionalSplinePoint = SplinePoint | false\nconst getPoint = (points: SplinePoint[], i: number): OptionalSplinePoint => i < points.length && !points[i].skip && points[i];\nconst getValueAxis = (indexAxis: 'x' | 'y') => indexAxis === 'x' ? 'y' : 'x';\n\nexport function splineCurve(\n  firstPoint: SplinePoint,\n  middlePoint: SplinePoint,\n  afterPoint: SplinePoint,\n  t: number\n): {\n    previous: SplinePoint\n    next: SplinePoint\n  } {\n  // Props to Rob Spencer at scaled innovation for his post on splining between points\n  // http://scaledinnovation.com/analytics/splines/aboutSplines.html\n\n  // This function must also respect \"skipped\" points\n\n  const previous = firstPoint.skip ? middlePoint : firstPoint;\n  const current = middlePoint;\n  const next = afterPoint.skip ? middlePoint : afterPoint;\n  const d01 = distanceBetweenPoints(current, previous);\n  const d12 = distanceBetweenPoints(next, current);\n\n  let s01 = d01 / (d01 + d12);\n  let s12 = d12 / (d01 + d12);\n\n  // If all points are the same, s01 & s02 will be inf\n  s01 = isNaN(s01) ? 0 : s01;\n  s12 = isNaN(s12) ? 0 : s12;\n\n  const fa = t * s01; // scaling factor for triangle Ta\n  const fb = t * s12;\n\n  return {\n    previous: {\n      x: current.x - fa * (next.x - previous.x),\n      y: current.y - fa * (next.y - previous.y)\n    },\n    next: {\n      x: current.x + fb * (next.x - previous.x),\n      y: current.y + fb * (next.y - previous.y)\n    }\n  };\n}\n\n/**\n * Adjust tangents to ensure monotonic properties\n */\nfunction monotoneAdjust(points: SplinePoint[], deltaK: number[], mK: number[]) {\n  const pointsLen = points.length;\n\n  let alphaK: number, betaK: number, tauK: number, squaredMagnitude: number, pointCurrent: OptionalSplinePoint;\n  let pointAfter = getPoint(points, 0);\n  for (let i = 0; i < pointsLen - 1; ++i) {\n    pointCurrent = pointAfter;\n    pointAfter = getPoint(points, i + 1);\n    if (!pointCurrent || !pointAfter) {\n      continue;\n    }\n\n    if (almostEquals(deltaK[i], 0, EPSILON)) {\n      mK[i] = mK[i + 1] = 0;\n      continue;\n    }\n\n    alphaK = mK[i] / deltaK[i];\n    betaK = mK[i + 1] / deltaK[i];\n    squaredMagnitude = Math.pow(alphaK, 2) + Math.pow(betaK, 2);\n    if (squaredMagnitude <= 9) {\n      continue;\n    }\n\n    tauK = 3 / Math.sqrt(squaredMagnitude);\n    mK[i] = alphaK * tauK * deltaK[i];\n    mK[i + 1] = betaK * tauK * deltaK[i];\n  }\n}\n\nfunction monotoneCompute(points: SplinePoint[], mK: number[], indexAxis: 'x' | 'y' = 'x') {\n  const valueAxis = getValueAxis(indexAxis);\n  const pointsLen = points.length;\n  let delta: number, pointBefore: OptionalSplinePoint, pointCurrent: OptionalSplinePoint;\n  let pointAfter = getPoint(points, 0);\n\n  for (let i = 0; i < pointsLen; ++i) {\n    pointBefore = pointCurrent;\n    pointCurrent = pointAfter;\n    pointAfter = getPoint(points, i + 1);\n    if (!pointCurrent) {\n      continue;\n    }\n\n    const iPixel = pointCurrent[indexAxis];\n    const vPixel = pointCurrent[valueAxis];\n    if (pointBefore) {\n      delta = (iPixel - pointBefore[indexAxis]) / 3;\n      pointCurrent[`cp1${indexAxis}`] = iPixel - delta;\n      pointCurrent[`cp1${valueAxis}`] = vPixel - delta * mK[i];\n    }\n    if (pointAfter) {\n      delta = (pointAfter[indexAxis] - iPixel) / 3;\n      pointCurrent[`cp2${indexAxis}`] = iPixel + delta;\n      pointCurrent[`cp2${valueAxis}`] = vPixel + delta * mK[i];\n    }\n  }\n}\n\n/**\n * This function calculates Bézier control points in a similar way than |splineCurve|,\n * but preserves monotonicity of the provided data and ensures no local extremums are added\n * between the dataset discrete points due to the interpolation.\n * See : https://en.wikipedia.org/wiki/Monotone_cubic_interpolation\n */\nexport function splineCurveMonotone(points: SplinePoint[], indexAxis: 'x' | 'y' = 'x') {\n  const valueAxis = getValueAxis(indexAxis);\n  const pointsLen = points.length;\n  const deltaK: number[] = Array(pointsLen).fill(0);\n  const mK: number[] = Array(pointsLen);\n\n  // Calculate slopes (deltaK) and initialize tangents (mK)\n  let i, pointBefore: OptionalSplinePoint, pointCurrent: OptionalSplinePoint;\n  let pointAfter = getPoint(points, 0);\n\n  for (i = 0; i < pointsLen; ++i) {\n    pointBefore = pointCurrent;\n    pointCurrent = pointAfter;\n    pointAfter = getPoint(points, i + 1);\n    if (!pointCurrent) {\n      continue;\n    }\n\n    if (pointAfter) {\n      const slopeDelta = pointAfter[indexAxis] - pointCurrent[indexAxis];\n\n      // In the case of two points that appear at the same x pixel, slopeDeltaX is 0\n      deltaK[i] = slopeDelta !== 0 ? (pointAfter[valueAxis] - pointCurrent[valueAxis]) / slopeDelta : 0;\n    }\n    mK[i] = !pointBefore ? deltaK[i]\n      : !pointAfter ? deltaK[i - 1]\n        : (sign(deltaK[i - 1]) !== sign(deltaK[i])) ? 0\n          : (deltaK[i - 1] + deltaK[i]) / 2;\n  }\n\n  monotoneAdjust(points, deltaK, mK);\n\n  monotoneCompute(points, mK, indexAxis);\n}\n\nfunction capControlPoint(pt: number, min: number, max: number) {\n  return Math.max(Math.min(pt, max), min);\n}\n\nfunction capBezierPoints(points: SplinePoint[], area: ChartArea) {\n  let i, ilen, point, inArea, inAreaPrev;\n  let inAreaNext = _isPointInArea(points[0], area);\n  for (i = 0, ilen = points.length; i < ilen; ++i) {\n    inAreaPrev = inArea;\n    inArea = inAreaNext;\n    inAreaNext = i < ilen - 1 && _isPointInArea(points[i + 1], area);\n    if (!inArea) {\n      continue;\n    }\n    point = points[i];\n    if (inAreaPrev) {\n      point.cp1x = capControlPoint(point.cp1x, area.left, area.right);\n      point.cp1y = capControlPoint(point.cp1y, area.top, area.bottom);\n    }\n    if (inAreaNext) {\n      point.cp2x = capControlPoint(point.cp2x, area.left, area.right);\n      point.cp2y = capControlPoint(point.cp2y, area.top, area.bottom);\n    }\n  }\n}\n\n/**\n * @private\n */\nexport function _updateBezierControlPoints(\n  points: SplinePoint[],\n  options,\n  area: ChartArea,\n  loop: boolean,\n  indexAxis: 'x' | 'y'\n) {\n  let i: number, ilen: number, point: SplinePoint, controlPoints: ReturnType<typeof splineCurve>;\n\n  // Only consider points that are drawn in case the spanGaps option is used\n  if (options.spanGaps) {\n    points = points.filter((pt) => !pt.skip);\n  }\n\n  if (options.cubicInterpolationMode === 'monotone') {\n    splineCurveMonotone(points, indexAxis);\n  } else {\n    let prev = loop ? points[points.length - 1] : points[0];\n    for (i = 0, ilen = points.length; i < ilen; ++i) {\n      point = points[i];\n      controlPoints = splineCurve(\n        prev,\n        point,\n        points[Math.min(i + 1, ilen - (loop ? 0 : 1)) % ilen],\n        options.tension\n      );\n      point.cp1x = controlPoints.previous.x;\n      point.cp1y = controlPoints.previous.y;\n      point.cp2x = controlPoints.next.x;\n      point.cp2y = controlPoints.next.y;\n      prev = point;\n    }\n  }\n\n  if (options.capBezierPoints) {\n    capBezierPoints(points, area);\n  }\n}\n","import type {ChartArea, Scale} from '../types/index.js';\nimport type Chart from '../core/core.controller.js';\nimport type {ChartEvent} from '../types.js';\nimport {INFINITY} from './helpers.math.js';\n\n/**\n * Note: typedefs are auto-exported, so use a made-up `dom` namespace where\n * necessary to avoid duplicates with `export * from './helpers`; see\n * https://github.com/microsoft/TypeScript/issues/46011\n * @typedef { import('../core/core.controller.js').default } dom.Chart\n * @typedef { import('../../types').ChartEvent } ChartEvent\n */\n\n/**\n * @private\n */\nexport function _isDomSupported(): boolean {\n  return typeof window !== 'undefined' && typeof document !== 'undefined';\n}\n\n/**\n * @private\n */\nexport function _getParentNode(domNode: HTMLCanvasElement): HTMLCanvasElement {\n  let parent = domNode.parentNode;\n  if (parent && parent.toString() === '[object ShadowRoot]') {\n    parent = (parent as ShadowRoot).host;\n  }\n  return parent as HTMLCanvasElement;\n}\n\n/**\n * convert max-width/max-height values that may be percentages into a number\n * @private\n */\n\nfunction parseMaxStyle(styleValue: string | number, node: HTMLElement, parentProperty: string) {\n  let valueInPixels: number;\n  if (typeof styleValue === 'string') {\n    valueInPixels = parseInt(styleValue, 10);\n\n    if (styleValue.indexOf('%') !== -1) {\n      // percentage * size in dimension\n      valueInPixels = (valueInPixels / 100) * node.parentNode[parentProperty];\n    }\n  } else {\n    valueInPixels = styleValue;\n  }\n\n  return valueInPixels;\n}\n\nconst getComputedStyle = (element: HTMLElement): CSSStyleDeclaration =>\n  element.ownerDocument.defaultView.getComputedStyle(element, null);\n\nexport function getStyle(el: HTMLElement, property: string): string {\n  return getComputedStyle(el).getPropertyValue(property);\n}\n\nconst positions = ['top', 'right', 'bottom', 'left'];\nfunction getPositionedStyle(styles: CSSStyleDeclaration, style: string, suffix?: string): ChartArea {\n  const result = {} as ChartArea;\n  suffix = suffix ? '-' + suffix : '';\n  for (let i = 0; i < 4; i++) {\n    const pos = positions[i];\n    result[pos] = parseFloat(styles[style + '-' + pos + suffix]) || 0;\n  }\n  result.width = result.left + result.right;\n  result.height = result.top + result.bottom;\n  return result;\n}\n\nconst useOffsetPos = (x: number, y: number, target: HTMLElement | EventTarget) =>\n  (x > 0 || y > 0) && (!target || !(target as HTMLElement).shadowRoot);\n\n/**\n * @param e\n * @param canvas\n * @returns Canvas position\n */\nfunction getCanvasPosition(\n  e: Event | TouchEvent | MouseEvent,\n  canvas: HTMLCanvasElement\n): {\n    x: number;\n    y: number;\n    box: boolean;\n  } {\n  const touches = (e as TouchEvent).touches;\n  const source = (touches && touches.length ? touches[0] : e) as MouseEvent;\n  const {offsetX, offsetY} = source as MouseEvent;\n  let box = false;\n  let x, y;\n  if (useOffsetPos(offsetX, offsetY, e.target)) {\n    x = offsetX;\n    y = offsetY;\n  } else {\n    const rect = canvas.getBoundingClientRect();\n    x = source.clientX - rect.left;\n    y = source.clientY - rect.top;\n    box = true;\n  }\n  return {x, y, box};\n}\n\n/**\n * Gets an event's x, y coordinates, relative to the chart area\n * @param event\n * @param chart\n * @returns x and y coordinates of the event\n */\n\nexport function getRelativePosition(\n  event: Event | ChartEvent | TouchEvent | MouseEvent,\n  chart: Chart\n): { x: number; y: number } {\n  if ('native' in event) {\n    return event;\n  }\n\n  const {canvas, currentDevicePixelRatio} = chart;\n  const style = getComputedStyle(canvas);\n  const borderBox = style.boxSizing === 'border-box';\n  const paddings = getPositionedStyle(style, 'padding');\n  const borders = getPositionedStyle(style, 'border', 'width');\n  const {x, y, box} = getCanvasPosition(event, canvas);\n  const xOffset = paddings.left + (box && borders.left);\n  const yOffset = paddings.top + (box && borders.top);\n\n  let {width, height} = chart;\n  if (borderBox) {\n    width -= paddings.width + borders.width;\n    height -= paddings.height + borders.height;\n  }\n  return {\n    x: Math.round((x - xOffset) / width * canvas.width / currentDevicePixelRatio),\n    y: Math.round((y - yOffset) / height * canvas.height / currentDevicePixelRatio)\n  };\n}\n\nfunction getContainerSize(canvas: HTMLCanvasElement, width: number, height: number): Partial<Scale> {\n  let maxWidth: number, maxHeight: number;\n\n  if (width === undefined || height === undefined) {\n    const container = _getParentNode(canvas);\n    if (!container) {\n      width = canvas.clientWidth;\n      height = canvas.clientHeight;\n    } else {\n      const rect = container.getBoundingClientRect(); // this is the border box of the container\n      const containerStyle = getComputedStyle(container);\n      const containerBorder = getPositionedStyle(containerStyle, 'border', 'width');\n      const containerPadding = getPositionedStyle(containerStyle, 'padding');\n      width = rect.width - containerPadding.width - containerBorder.width;\n      height = rect.height - containerPadding.height - containerBorder.height;\n      maxWidth = parseMaxStyle(containerStyle.maxWidth, container, 'clientWidth');\n      maxHeight = parseMaxStyle(containerStyle.maxHeight, container, 'clientHeight');\n    }\n  }\n  return {\n    width,\n    height,\n    maxWidth: maxWidth || INFINITY,\n    maxHeight: maxHeight || INFINITY\n  };\n}\n\nconst round1 = (v: number) => Math.round(v * 10) / 10;\n\n// eslint-disable-next-line complexity\nexport function getMaximumSize(\n  canvas: HTMLCanvasElement,\n  bbWidth?: number,\n  bbHeight?: number,\n  aspectRatio?: number\n): { width: number; height: number } {\n  const style = getComputedStyle(canvas);\n  const margins = getPositionedStyle(style, 'margin');\n  const maxWidth = parseMaxStyle(style.maxWidth, canvas, 'clientWidth') || INFINITY;\n  const maxHeight = parseMaxStyle(style.maxHeight, canvas, 'clientHeight') || INFINITY;\n  const containerSize = getContainerSize(canvas, bbWidth, bbHeight);\n  let {width, height} = containerSize;\n\n  if (style.boxSizing === 'content-box') {\n    const borders = getPositionedStyle(style, 'border', 'width');\n    const paddings = getPositionedStyle(style, 'padding');\n    width -= paddings.width + borders.width;\n    height -= paddings.height + borders.height;\n  }\n  width = Math.max(0, width - margins.width);\n  height = Math.max(0, aspectRatio ? width / aspectRatio : height - margins.height);\n  width = round1(Math.min(width, maxWidth, containerSize.maxWidth));\n  height = round1(Math.min(height, maxHeight, containerSize.maxHeight));\n  if (width && !height) {\n    // https://github.com/chartjs/Chart.js/issues/4659\n    // If the canvas has width, but no height, default to aspectRatio of 2 (canvas default)\n    height = round1(width / 2);\n  }\n\n  const maintainHeight = bbWidth !== undefined || bbHeight !== undefined;\n\n  if (maintainHeight && aspectRatio && containerSize.height && height > containerSize.height) {\n    height = containerSize.height;\n    width = round1(Math.floor(height * aspectRatio));\n  }\n\n  return {width, height};\n}\n\n/**\n * @param chart\n * @param forceRatio\n * @param forceStyle\n * @returns True if the canvas context size or transformation has changed.\n */\nexport function retinaScale(\n  chart: Chart,\n  forceRatio: number,\n  forceStyle?: boolean\n): boolean | void {\n  const pixelRatio = forceRatio || 1;\n  const deviceHeight = Math.floor(chart.height * pixelRatio);\n  const deviceWidth = Math.floor(chart.width * pixelRatio);\n\n  chart.height = Math.floor(chart.height);\n  chart.width = Math.floor(chart.width);\n\n  const canvas = chart.canvas;\n\n  // If no style has been set on the canvas, the render size is used as display size,\n  // making the chart visually bigger, so let's enforce it to the \"correct\" values.\n  // See https://github.com/chartjs/Chart.js/issues/3575\n  if (canvas.style && (forceStyle || (!canvas.style.height && !canvas.style.width))) {\n    canvas.style.height = `${chart.height}px`;\n    canvas.style.width = `${chart.width}px`;\n  }\n\n  if (chart.currentDevicePixelRatio !== pixelRatio\n      || canvas.height !== deviceHeight\n      || canvas.width !== deviceWidth) {\n    chart.currentDevicePixelRatio = pixelRatio;\n    canvas.height = deviceHeight;\n    canvas.width = deviceWidth;\n    chart.ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n    return true;\n  }\n  return false;\n}\n\n/**\n * Detects support for options object argument in addEventListener.\n * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Safely_detecting_option_support\n * @private\n */\nexport const supportsEventListenerOptions = (function() {\n  let passiveSupported = false;\n  try {\n    const options = {\n      get passive() { // This function will be called when the browser attempts to access the passive property.\n        passiveSupported = true;\n        return false;\n      }\n    } as EventListenerOptions;\n\n    window.addEventListener('test', null, options);\n    window.removeEventListener('test', null, options);\n  } catch (e) {\n    // continue regardless of error\n  }\n  return passiveSupported;\n}());\n\n/**\n * The \"used\" size is the final value of a dimension property after all calculations have\n * been performed. This method uses the computed style of `element` but returns undefined\n * if the computed style is not expressed in pixels. That can happen in some cases where\n * `element` has a size relative to its parent and this last one is not yet displayed,\n * for example because of `display: none` on a parent node.\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/used_value\n * @returns Size in pixels or undefined if unknown.\n */\n\nexport function readUsedSize(\n  element: HTMLElement,\n  property: 'width' | 'height'\n): number | undefined {\n  const value = getStyle(element, property);\n  const matches = value && value.match(/^(\\d+)(\\.\\d+)?px$/);\n  return matches ? +matches[1] : undefined;\n}\n","import type {Point} from '../types/geometric.js';\nimport type {SplinePoint} from './helpers.curve.js';\n\n/**\n * @private\n */\nexport function _pointInLine(p1: Point, p2: Point, t: number, mode?) { // eslint-disable-line @typescript-eslint/no-unused-vars\n  return {\n    x: p1.x + t * (p2.x - p1.x),\n    y: p1.y + t * (p2.y - p1.y)\n  };\n}\n\n/**\n * @private\n */\nexport function _steppedInterpolation(\n  p1: Point,\n  p2: Point,\n  t: number, mode: 'middle' | 'after' | unknown\n) {\n  return {\n    x: p1.x + t * (p2.x - p1.x),\n    y: mode === 'middle' ? t < 0.5 ? p1.y : p2.y\n      : mode === 'after' ? t < 1 ? p1.y : p2.y\n        : t > 0 ? p2.y : p1.y\n  };\n}\n\n/**\n * @private\n */\nexport function _bezierInterpolation(p1: SplinePoint, p2: SplinePoint, t: number, mode?) { // eslint-disable-line @typescript-eslint/no-unused-vars\n  const cp1 = {x: p1.cp2x, y: p1.cp2y};\n  const cp2 = {x: p2.cp1x, y: p2.cp1y};\n  const a = _pointInLine(p1, cp1, t);\n  const b = _pointInLine(cp1, cp2, t);\n  const c = _pointInLine(cp2, p2, t);\n  const d = _pointInLine(a, b, t);\n  const e = _pointInLine(b, c, t);\n  return _pointInLine(d, e, t);\n}\n","export interface RTLAdapter {\n  x(x: number): number;\n  setWidth(w: number): void;\n  textAlign(align: 'center' | 'left' | 'right'): 'center' | 'left' | 'right';\n  xPlus(x: number, value: number): number;\n  leftForLtr(x: number, itemWidth: number): number;\n}\n\nconst getRightToLeftAdapter = function(rectX: number, width: number): RTLAdapter {\n  return {\n    x(x) {\n      return rectX + rectX + width - x;\n    },\n    setWidth(w) {\n      width = w;\n    },\n    textAlign(align) {\n      if (align === 'center') {\n        return align;\n      }\n      return align === 'right' ? 'left' : 'right';\n    },\n    xPlus(x, value) {\n      return x - value;\n    },\n    leftForLtr(x, itemWidth) {\n      return x - itemWidth;\n    },\n  };\n};\n\nconst getLeftToRightAdapter = function(): RTLAdapter {\n  return {\n    x(x) {\n      return x;\n    },\n    setWidth(w) { // eslint-disable-line no-unused-vars\n    },\n    textAlign(align) {\n      return align;\n    },\n    xPlus(x, value) {\n      return x + value;\n    },\n    leftForLtr(x, _itemWidth) { // eslint-disable-line @typescript-eslint/no-unused-vars\n      return x;\n    },\n  };\n};\n\nexport function getRtlAdapter(rtl: boolean, rectX: number, width: number) {\n  return rtl ? getRightToLeftAdapter(rectX, width) : getLeftToRightAdapter();\n}\n\nexport function overrideTextDirection(ctx: CanvasRenderingContext2D, direction: 'ltr' | 'rtl') {\n  let style: CSSStyleDeclaration, original: [string, string];\n  if (direction === 'ltr' || direction === 'rtl') {\n    style = ctx.canvas.style;\n    original = [\n      style.getPropertyValue('direction'),\n      style.getPropertyPriority('direction'),\n    ];\n\n    style.setProperty('direction', direction, 'important');\n    (ctx as { prevTextDirection?: [string, string] }).prevTextDirection = original;\n  }\n}\n\nexport function restoreTextDirection(ctx: CanvasRenderingContext2D, original?: [string, string]) {\n  if (original !== undefined) {\n    delete (ctx as { prevTextDirection?: [string, string] }).prevTextDirection;\n    ctx.canvas.style.setProperty('direction', original[0], original[1]);\n  }\n}\n","import {_angleBetween, _angleDiff, _isBetween, _normalizeAngle} from './helpers.math.js';\nimport {createContext} from './helpers.options.js';\n\n/**\n * @typedef { import('../elements/element.line.js').default } LineElement\n * @typedef { import('../elements/element.point.js').default } PointElement\n * @typedef {{start: number, end: number, loop: boolean, style?: any}} Segment\n */\n\nfunction propertyFn(property) {\n  if (property === 'angle') {\n    return {\n      between: _angleBetween,\n      compare: _angleDiff,\n      normalize: _normalizeAngle,\n    };\n  }\n  return {\n    between: _isBetween,\n    compare: (a, b) => a - b,\n    normalize: x => x\n  };\n}\n\nfunction normalizeSegment({start, end, count, loop, style}) {\n  return {\n    start: start % count,\n    end: end % count,\n    loop: loop && (end - start + 1) % count === 0,\n    style\n  };\n}\n\nfunction getSegment(segment, points, bounds) {\n  const {property, start: startBound, end: endBound} = bounds;\n  const {between, normalize} = propertyFn(property);\n  const count = points.length;\n  // eslint-disable-next-line prefer-const\n  let {start, end, loop} = segment;\n  let i, ilen;\n\n  if (loop) {\n    start += count;\n    end += count;\n    for (i = 0, ilen = count; i < ilen; ++i) {\n      if (!between(normalize(points[start % count][property]), startBound, endBound)) {\n        break;\n      }\n      start--;\n      end--;\n    }\n    start %= count;\n    end %= count;\n  }\n\n  if (end < start) {\n    end += count;\n  }\n  return {start, end, loop, style: segment.style};\n}\n\n/**\n * Returns the sub-segment(s) of a line segment that fall in the given bounds\n * @param {object} segment\n * @param {number} segment.start - start index of the segment, referring the points array\n * @param {number} segment.end - end index of the segment, referring the points array\n * @param {boolean} segment.loop - indicates that the segment is a loop\n * @param {object} [segment.style] - segment style\n * @param {PointElement[]} points - the points that this segment refers to\n * @param {object} [bounds]\n * @param {string} bounds.property - the property of a `PointElement` we are bounding. `x`, `y` or `angle`.\n * @param {number} bounds.start - start value of the property\n * @param {number} bounds.end - end value of the property\n * @private\n **/\nexport function _boundSegment(segment, points, bounds) {\n  if (!bounds) {\n    return [segment];\n  }\n\n  const {property, start: startBound, end: endBound} = bounds;\n  const count = points.length;\n  const {compare, between, normalize} = propertyFn(property);\n  const {start, end, loop, style} = getSegment(segment, points, bounds);\n\n  const result = [];\n  let inside = false;\n  let subStart = null;\n  let value, point, prevValue;\n\n  const startIsBefore = () => between(startBound, prevValue, value) && compare(startBound, prevValue) !== 0;\n  const endIsBefore = () => compare(endBound, value) === 0 || between(endBound, prevValue, value);\n  const shouldStart = () => inside || startIsBefore();\n  const shouldStop = () => !inside || endIsBefore();\n\n  for (let i = start, prev = start; i <= end; ++i) {\n    point = points[i % count];\n\n    if (point.skip) {\n      continue;\n    }\n\n    value = normalize(point[property]);\n\n    if (value === prevValue) {\n      continue;\n    }\n\n    inside = between(value, startBound, endBound);\n\n    if (subStart === null && shouldStart()) {\n      subStart = compare(value, startBound) === 0 ? i : prev;\n    }\n\n    if (subStart !== null && shouldStop()) {\n      result.push(normalizeSegment({start: subStart, end: i, loop, count, style}));\n      subStart = null;\n    }\n    prev = i;\n    prevValue = value;\n  }\n\n  if (subStart !== null) {\n    result.push(normalizeSegment({start: subStart, end, loop, count, style}));\n  }\n\n  return result;\n}\n\n\n/**\n * Returns the segments of the line that are inside given bounds\n * @param {LineElement} line\n * @param {object} [bounds]\n * @param {string} bounds.property - the property we are bounding with. `x`, `y` or `angle`.\n * @param {number} bounds.start - start value of the `property`\n * @param {number} bounds.end - end value of the `property`\n * @private\n */\nexport function _boundSegments(line, bounds) {\n  const result = [];\n  const segments = line.segments;\n\n  for (let i = 0; i < segments.length; i++) {\n    const sub = _boundSegment(segments[i], line.points, bounds);\n    if (sub.length) {\n      result.push(...sub);\n    }\n  }\n  return result;\n}\n\n/**\n * Find start and end index of a line.\n */\nfunction findStartAndEnd(points, count, loop, spanGaps) {\n  let start = 0;\n  let end = count - 1;\n\n  if (loop && !spanGaps) {\n    // loop and not spanning gaps, first find a gap to start from\n    while (start < count && !points[start].skip) {\n      start++;\n    }\n  }\n\n  // find first non skipped point (after the first gap possibly)\n  while (start < count && points[start].skip) {\n    start++;\n  }\n\n  // if we looped to count, start needs to be 0\n  start %= count;\n\n  if (loop) {\n    // loop will go past count, if start > 0\n    end += start;\n  }\n\n  while (end > start && points[end % count].skip) {\n    end--;\n  }\n\n  // end could be more than count, normalize\n  end %= count;\n\n  return {start, end};\n}\n\n/**\n * Compute solid segments from Points, when spanGaps === false\n * @param {PointElement[]} points - the points\n * @param {number} start - start index\n * @param {number} max - max index (can go past count on a loop)\n * @param {boolean} loop - boolean indicating that this would be a loop if no gaps are found\n */\nfunction solidSegments(points, start, max, loop) {\n  const count = points.length;\n  const result = [];\n  let last = start;\n  let prev = points[start];\n  let end;\n\n  for (end = start + 1; end <= max; ++end) {\n    const cur = points[end % count];\n    if (cur.skip || cur.stop) {\n      if (!prev.skip) {\n        loop = false;\n        result.push({start: start % count, end: (end - 1) % count, loop});\n        // @ts-ignore\n        start = last = cur.stop ? end : null;\n      }\n    } else {\n      last = end;\n      if (prev.skip) {\n        start = end;\n      }\n    }\n    prev = cur;\n  }\n\n  if (last !== null) {\n    result.push({start: start % count, end: last % count, loop});\n  }\n\n  return result;\n}\n\n/**\n * Compute the continuous segments that define the whole line\n * There can be skipped points within a segment, if spanGaps is true.\n * @param {LineElement} line\n * @param {object} [segmentOptions]\n * @return {Segment[]}\n * @private\n */\nexport function _computeSegments(line, segmentOptions) {\n  const points = line.points;\n  const spanGaps = line.options.spanGaps;\n  const count = points.length;\n\n  if (!count) {\n    return [];\n  }\n\n  const loop = !!line._loop;\n  const {start, end} = findStartAndEnd(points, count, loop, spanGaps);\n\n  if (spanGaps === true) {\n    return splitByStyles(line, [{start, end, loop}], points, segmentOptions);\n  }\n\n  const max = end < start ? end + count : end;\n  const completeLoop = !!line._fullLoop && start === 0 && end === count - 1;\n  return splitByStyles(line, solidSegments(points, start, max, completeLoop), points, segmentOptions);\n}\n\n/**\n * @param {Segment[]} segments\n * @param {PointElement[]} points\n * @param {object} [segmentOptions]\n * @return {Segment[]}\n */\nfunction splitByStyles(line, segments, points, segmentOptions) {\n  if (!segmentOptions || !segmentOptions.setContext || !points) {\n    return segments;\n  }\n  return doSplitByStyles(line, segments, points, segmentOptions);\n}\n\n/**\n * @param {LineElement} line\n * @param {Segment[]} segments\n * @param {PointElement[]} points\n * @param {object} [segmentOptions]\n * @return {Segment[]}\n */\nfunction doSplitByStyles(line, segments, points, segmentOptions) {\n  const chartContext = line._chart.getContext();\n  const baseStyle = readStyle(line.options);\n  const {_datasetIndex: datasetIndex, options: {spanGaps}} = line;\n  const count = points.length;\n  const result = [];\n  let prevStyle = baseStyle;\n  let start = segments[0].start;\n  let i = start;\n\n  function addStyle(s, e, l, st) {\n    const dir = spanGaps ? -1 : 1;\n    if (s === e) {\n      return;\n    }\n    // Style can not start/end on a skipped point, adjust indices accordingly\n    s += count;\n    while (points[s % count].skip) {\n      s -= dir;\n    }\n    while (points[e % count].skip) {\n      e += dir;\n    }\n    if (s % count !== e % count) {\n      result.push({start: s % count, end: e % count, loop: l, style: st});\n      prevStyle = st;\n      start = e % count;\n    }\n  }\n\n  for (const segment of segments) {\n    start = spanGaps ? start : segment.start;\n    let prev = points[start % count];\n    let style;\n    for (i = start + 1; i <= segment.end; i++) {\n      const pt = points[i % count];\n      style = readStyle(segmentOptions.setContext(createContext(chartContext, {\n        type: 'segment',\n        p0: prev,\n        p1: pt,\n        p0DataIndex: (i - 1) % count,\n        p1DataIndex: i % count,\n        datasetIndex\n      })));\n      if (styleChanged(style, prevStyle)) {\n        addStyle(start, i - 1, segment.loop, prevStyle);\n      }\n      prev = pt;\n      prevStyle = style;\n    }\n    if (start < i - 1) {\n      addStyle(start, i - 1, segment.loop, prevStyle);\n    }\n  }\n\n  return result;\n}\n\nfunction readStyle(options) {\n  return {\n    backgroundColor: options.backgroundColor,\n    borderCapStyle: options.borderCapStyle,\n    borderDash: options.borderDash,\n    borderDashOffset: options.borderDashOffset,\n    borderJoinStyle: options.borderJoinStyle,\n    borderWidth: options.borderWidth,\n    borderColor: options.borderColor\n  };\n}\n\nfunction styleChanged(style, prevStyle) {\n  return prevStyle && JSON.stringify(style) !== JSON.stringify(prevStyle);\n}\n","import {requestAnimFrame} from '../helpers/helpers.extras.js';\n\n/**\n * @typedef { import('./core.animation.js').default } Animation\n * @typedef { import('./core.controller.js').default } Chart\n */\n\n/**\n * Please use the module's default export which provides a singleton instance\n * Note: class is export for typedoc\n */\nexport class Animator {\n  constructor() {\n    this._request = null;\n    this._charts = new Map();\n    this._running = false;\n    this._lastDate = undefined;\n  }\n\n  /**\n\t * @private\n\t */\n  _notify(chart, anims, date, type) {\n    const callbacks = anims.listeners[type];\n    const numSteps = anims.duration;\n\n    callbacks.forEach(fn => fn({\n      chart,\n      initial: anims.initial,\n      numSteps,\n      currentStep: Math.min(date - anims.start, numSteps)\n    }));\n  }\n\n  /**\n\t * @private\n\t */\n  _refresh() {\n    if (this._request) {\n      return;\n    }\n    this._running = true;\n\n    this._request = requestAnimFrame.call(window, () => {\n      this._update();\n      this._request = null;\n\n      if (this._running) {\n        this._refresh();\n      }\n    });\n  }\n\n  /**\n\t * @private\n\t */\n  _update(date = Date.now()) {\n    let remaining = 0;\n\n    this._charts.forEach((anims, chart) => {\n      if (!anims.running || !anims.items.length) {\n        return;\n      }\n      const items = anims.items;\n      let i = items.length - 1;\n      let draw = false;\n      let item;\n\n      for (; i >= 0; --i) {\n        item = items[i];\n\n        if (item._active) {\n          if (item._total > anims.duration) {\n            // if the animation has been updated and its duration prolonged,\n            // update to total duration of current animations run (for progress event)\n            anims.duration = item._total;\n          }\n          item.tick(date);\n          draw = true;\n        } else {\n          // Remove the item by replacing it with last item and removing the last\n          // A lot faster than splice.\n          items[i] = items[items.length - 1];\n          items.pop();\n        }\n      }\n\n      if (draw) {\n        chart.draw();\n        this._notify(chart, anims, date, 'progress');\n      }\n\n      if (!items.length) {\n        anims.running = false;\n        this._notify(chart, anims, date, 'complete');\n        anims.initial = false;\n      }\n\n      remaining += items.length;\n    });\n\n    this._lastDate = date;\n\n    if (remaining === 0) {\n      this._running = false;\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _getAnims(chart) {\n    const charts = this._charts;\n    let anims = charts.get(chart);\n    if (!anims) {\n      anims = {\n        running: false,\n        initial: true,\n        items: [],\n        listeners: {\n          complete: [],\n          progress: []\n        }\n      };\n      charts.set(chart, anims);\n    }\n    return anims;\n  }\n\n  /**\n\t * @param {Chart} chart\n\t * @param {string} event - event name\n\t * @param {Function} cb - callback\n\t */\n  listen(chart, event, cb) {\n    this._getAnims(chart).listeners[event].push(cb);\n  }\n\n  /**\n\t * Add animations\n\t * @param {Chart} chart\n\t * @param {Animation[]} items - animations\n\t */\n  add(chart, items) {\n    if (!items || !items.length) {\n      return;\n    }\n    this._getAnims(chart).items.push(...items);\n  }\n\n  /**\n\t * Counts number of active animations for the chart\n\t * @param {Chart} chart\n\t */\n  has(chart) {\n    return this._getAnims(chart).items.length > 0;\n  }\n\n  /**\n\t * Start animating (all charts)\n\t * @param {Chart} chart\n\t */\n  start(chart) {\n    const anims = this._charts.get(chart);\n    if (!anims) {\n      return;\n    }\n    anims.running = true;\n    anims.start = Date.now();\n    anims.duration = anims.items.reduce((acc, cur) => Math.max(acc, cur._duration), 0);\n    this._refresh();\n  }\n\n  running(chart) {\n    if (!this._running) {\n      return false;\n    }\n    const anims = this._charts.get(chart);\n    if (!anims || !anims.running || !anims.items.length) {\n      return false;\n    }\n    return true;\n  }\n\n  /**\n\t * Stop all animations for the chart\n\t * @param {Chart} chart\n\t */\n  stop(chart) {\n    const anims = this._charts.get(chart);\n    if (!anims || !anims.items.length) {\n      return;\n    }\n    const items = anims.items;\n    let i = items.length - 1;\n\n    for (; i >= 0; --i) {\n      items[i].cancel();\n    }\n    anims.items = [];\n    this._notify(chart, anims, Date.now(), 'complete');\n  }\n\n  /**\n\t * Remove chart from Animator\n\t * @param {Chart} chart\n\t */\n  remove(chart) {\n    return this._charts.delete(chart);\n  }\n}\n\n// singleton instance\nexport default /* #__PURE__ */ new Animator();\n","import effects from '../helpers/helpers.easing.js';\nimport {resolve} from '../helpers/helpers.options.js';\nimport {color as helpersColor} from '../helpers/helpers.color.js';\n\nconst transparent = 'transparent';\nconst interpolators = {\n  boolean(from, to, factor) {\n    return factor > 0.5 ? to : from;\n  },\n  /**\n   * @param {string} from\n   * @param {string} to\n   * @param {number} factor\n   */\n  color(from, to, factor) {\n    const c0 = helpersColor(from || transparent);\n    const c1 = c0.valid && helpersColor(to || transparent);\n    return c1 && c1.valid\n      ? c1.mix(c0, factor).hexString()\n      : to;\n  },\n  number(from, to, factor) {\n    return from + (to - from) * factor;\n  }\n};\n\nexport default class Animation {\n  constructor(cfg, target, prop, to) {\n    const currentValue = target[prop];\n\n    to = resolve([cfg.to, to, currentValue, cfg.from]);\n    const from = resolve([cfg.from, currentValue, to]);\n\n    this._active = true;\n    this._fn = cfg.fn || interpolators[cfg.type || typeof from];\n    this._easing = effects[cfg.easing] || effects.linear;\n    this._start = Math.floor(Date.now() + (cfg.delay || 0));\n    this._duration = this._total = Math.floor(cfg.duration);\n    this._loop = !!cfg.loop;\n    this._target = target;\n    this._prop = prop;\n    this._from = from;\n    this._to = to;\n    this._promises = undefined;\n  }\n\n  active() {\n    return this._active;\n  }\n\n  update(cfg, to, date) {\n    if (this._active) {\n      this._notify(false);\n\n      const currentValue = this._target[this._prop];\n      const elapsed = date - this._start;\n      const remain = this._duration - elapsed;\n      this._start = date;\n      this._duration = Math.floor(Math.max(remain, cfg.duration));\n      this._total += elapsed;\n      this._loop = !!cfg.loop;\n      this._to = resolve([cfg.to, to, currentValue, cfg.from]);\n      this._from = resolve([cfg.from, currentValue, to]);\n    }\n  }\n\n  cancel() {\n    if (this._active) {\n      // update current evaluated value, for smoother animations\n      this.tick(Date.now());\n      this._active = false;\n      this._notify(false);\n    }\n  }\n\n  tick(date) {\n    const elapsed = date - this._start;\n    const duration = this._duration;\n    const prop = this._prop;\n    const from = this._from;\n    const loop = this._loop;\n    const to = this._to;\n    let factor;\n\n    this._active = from !== to && (loop || (elapsed < duration));\n\n    if (!this._active) {\n      this._target[prop] = to;\n      this._notify(true);\n      return;\n    }\n\n    if (elapsed < 0) {\n      this._target[prop] = from;\n      return;\n    }\n\n    factor = (elapsed / duration) % 2;\n    factor = loop && factor > 1 ? 2 - factor : factor;\n    factor = this._easing(Math.min(1, Math.max(0, factor)));\n\n    this._target[prop] = this._fn(from, to, factor);\n  }\n\n  wait() {\n    const promises = this._promises || (this._promises = []);\n    return new Promise((res, rej) => {\n      promises.push({res, rej});\n    });\n  }\n\n  _notify(resolved) {\n    const method = resolved ? 'res' : 'rej';\n    const promises = this._promises || [];\n    for (let i = 0; i < promises.length; i++) {\n      promises[i][method]();\n    }\n  }\n}\n","import animator from './core.animator.js';\nimport Animation from './core.animation.js';\nimport defaults from './core.defaults.js';\nimport {isArray, isObject} from '../helpers/helpers.core.js';\n\nexport default class Animations {\n  constructor(chart, config) {\n    this._chart = chart;\n    this._properties = new Map();\n    this.configure(config);\n  }\n\n  configure(config) {\n    if (!isObject(config)) {\n      return;\n    }\n\n    const animationOptions = Object.keys(defaults.animation);\n    const animatedProps = this._properties;\n\n    Object.getOwnPropertyNames(config).forEach(key => {\n      const cfg = config[key];\n      if (!isObject(cfg)) {\n        return;\n      }\n      const resolved = {};\n      for (const option of animationOptions) {\n        resolved[option] = cfg[option];\n      }\n\n      (isArray(cfg.properties) && cfg.properties || [key]).forEach((prop) => {\n        if (prop === key || !animatedProps.has(prop)) {\n          animatedProps.set(prop, resolved);\n        }\n      });\n    });\n  }\n\n  /**\n\t * Utility to handle animation of `options`.\n\t * @private\n\t */\n  _animateOptions(target, values) {\n    const newOptions = values.options;\n    const options = resolveTargetOptions(target, newOptions);\n    if (!options) {\n      return [];\n    }\n\n    const animations = this._createAnimations(options, newOptions);\n    if (newOptions.$shared) {\n      // Going to shared options:\n      // After all animations are done, assign the shared options object to the element\n      // So any new updates to the shared options are observed\n      awaitAll(target.options.$animations, newOptions).then(() => {\n        target.options = newOptions;\n      }, () => {\n        // rejected, noop\n      });\n    }\n\n    return animations;\n  }\n\n  /**\n\t * @private\n\t */\n  _createAnimations(target, values) {\n    const animatedProps = this._properties;\n    const animations = [];\n    const running = target.$animations || (target.$animations = {});\n    const props = Object.keys(values);\n    const date = Date.now();\n    let i;\n\n    for (i = props.length - 1; i >= 0; --i) {\n      const prop = props[i];\n      if (prop.charAt(0) === '$') {\n        continue;\n      }\n\n      if (prop === 'options') {\n        animations.push(...this._animateOptions(target, values));\n        continue;\n      }\n      const value = values[prop];\n      let animation = running[prop];\n      const cfg = animatedProps.get(prop);\n\n      if (animation) {\n        if (cfg && animation.active()) {\n          // There is an existing active animation, let's update that\n          animation.update(cfg, value, date);\n          continue;\n        } else {\n          animation.cancel();\n        }\n      }\n      if (!cfg || !cfg.duration) {\n        // not animated, set directly to new value\n        target[prop] = value;\n        continue;\n      }\n\n      running[prop] = animation = new Animation(cfg, target, prop, value);\n      animations.push(animation);\n    }\n    return animations;\n  }\n\n\n  /**\n\t * Update `target` properties to new values, using configured animations\n\t * @param {object} target - object to update\n\t * @param {object} values - new target properties\n\t * @returns {boolean|undefined} - `true` if animations were started\n\t **/\n  update(target, values) {\n    if (this._properties.size === 0) {\n      // Nothing is animated, just apply the new values.\n      Object.assign(target, values);\n      return;\n    }\n\n    const animations = this._createAnimations(target, values);\n\n    if (animations.length) {\n      animator.add(this._chart, animations);\n      return true;\n    }\n  }\n}\n\nfunction awaitAll(animations, properties) {\n  const running = [];\n  const keys = Object.keys(properties);\n  for (let i = 0; i < keys.length; i++) {\n    const anim = animations[keys[i]];\n    if (anim && anim.active()) {\n      running.push(anim.wait());\n    }\n  }\n  // @ts-ignore\n  return Promise.all(running);\n}\n\nfunction resolveTargetOptions(target, newOptions) {\n  if (!newOptions) {\n    return;\n  }\n  let options = target.options;\n  if (!options) {\n    target.options = newOptions;\n    return;\n  }\n  if (options.$shared) {\n    // Going from shared options to distinct one:\n    // Create new options object containing the old shared values and start updating that.\n    target.options = options = Object.assign({}, options, {$shared: false, $animations: {}});\n  }\n  return options;\n}\n","import Animations from './core.animations.js';\nimport defaults from './core.defaults.js';\nimport {isArray, isFinite, isObject, valueOrDefault, resolveObjectKey, defined} from '../helpers/helpers.core.js';\nimport {listenArrayEvents, unlistenArrayEvents} from '../helpers/helpers.collection.js';\nimport {createContext, sign} from '../helpers/index.js';\n\n/**\n * @typedef { import('./core.controller.js').default } Chart\n * @typedef { import('./core.scale.js').default } Scale\n */\n\nfunction scaleClip(scale, allowedOverflow) {\n  const opts = scale && scale.options || {};\n  const reverse = opts.reverse;\n  const min = opts.min === undefined ? allowedOverflow : 0;\n  const max = opts.max === undefined ? allowedOverflow : 0;\n  return {\n    start: reverse ? max : min,\n    end: reverse ? min : max\n  };\n}\n\nfunction defaultClip(xScale, yScale, allowedOverflow) {\n  if (allowedOverflow === false) {\n    return false;\n  }\n  const x = scaleClip(xScale, allowedOverflow);\n  const y = scaleClip(yScale, allowedOverflow);\n\n  return {\n    top: y.end,\n    right: x.end,\n    bottom: y.start,\n    left: x.start\n  };\n}\n\nfunction toClip(value) {\n  let t, r, b, l;\n\n  if (isObject(value)) {\n    t = value.top;\n    r = value.right;\n    b = value.bottom;\n    l = value.left;\n  } else {\n    t = r = b = l = value;\n  }\n\n  return {\n    top: t,\n    right: r,\n    bottom: b,\n    left: l,\n    disabled: value === false\n  };\n}\n\nfunction getSortedDatasetIndices(chart, filterVisible) {\n  const keys = [];\n  const metasets = chart._getSortedDatasetMetas(filterVisible);\n  let i, ilen;\n\n  for (i = 0, ilen = metasets.length; i < ilen; ++i) {\n    keys.push(metasets[i].index);\n  }\n  return keys;\n}\n\nfunction applyStack(stack, value, dsIndex, options = {}) {\n  const keys = stack.keys;\n  const singleMode = options.mode === 'single';\n  let i, ilen, datasetIndex, otherValue;\n\n  if (value === null) {\n    return;\n  }\n\n  for (i = 0, ilen = keys.length; i < ilen; ++i) {\n    datasetIndex = +keys[i];\n    if (datasetIndex === dsIndex) {\n      if (options.all) {\n        continue;\n      }\n      break;\n    }\n    otherValue = stack.values[datasetIndex];\n    if (isFinite(otherValue) && (singleMode || (value === 0 || sign(value) === sign(otherValue)))) {\n      value += otherValue;\n    }\n  }\n  return value;\n}\n\nfunction convertObjectDataToArray(data) {\n  const keys = Object.keys(data);\n  const adata = new Array(keys.length);\n  let i, ilen, key;\n  for (i = 0, ilen = keys.length; i < ilen; ++i) {\n    key = keys[i];\n    adata[i] = {\n      x: key,\n      y: data[key]\n    };\n  }\n  return adata;\n}\n\nfunction isStacked(scale, meta) {\n  const stacked = scale && scale.options.stacked;\n  return stacked || (stacked === undefined && meta.stack !== undefined);\n}\n\nfunction getStackKey(indexScale, valueScale, meta) {\n  return `${indexScale.id}.${valueScale.id}.${meta.stack || meta.type}`;\n}\n\nfunction getUserBounds(scale) {\n  const {min, max, minDefined, maxDefined} = scale.getUserBounds();\n  return {\n    min: minDefined ? min : Number.NEGATIVE_INFINITY,\n    max: maxDefined ? max : Number.POSITIVE_INFINITY\n  };\n}\n\nfunction getOrCreateStack(stacks, stackKey, indexValue) {\n  const subStack = stacks[stackKey] || (stacks[stackKey] = {});\n  return subStack[indexValue] || (subStack[indexValue] = {});\n}\n\nfunction getLastIndexInStack(stack, vScale, positive, type) {\n  for (const meta of vScale.getMatchingVisibleMetas(type).reverse()) {\n    const value = stack[meta.index];\n    if ((positive && value > 0) || (!positive && value < 0)) {\n      return meta.index;\n    }\n  }\n\n  return null;\n}\n\nfunction updateStacks(controller, parsed) {\n  const {chart, _cachedMeta: meta} = controller;\n  const stacks = chart._stacks || (chart._stacks = {}); // map structure is {stackKey: {datasetIndex: value}}\n  const {iScale, vScale, index: datasetIndex} = meta;\n  const iAxis = iScale.axis;\n  const vAxis = vScale.axis;\n  const key = getStackKey(iScale, vScale, meta);\n  const ilen = parsed.length;\n  let stack;\n\n  for (let i = 0; i < ilen; ++i) {\n    const item = parsed[i];\n    const {[iAxis]: index, [vAxis]: value} = item;\n    const itemStacks = item._stacks || (item._stacks = {});\n    stack = itemStacks[vAxis] = getOrCreateStack(stacks, key, index);\n    stack[datasetIndex] = value;\n\n    stack._top = getLastIndexInStack(stack, vScale, true, meta.type);\n    stack._bottom = getLastIndexInStack(stack, vScale, false, meta.type);\n\n    const visualValues = stack._visualValues || (stack._visualValues = {});\n    visualValues[datasetIndex] = value;\n  }\n}\n\nfunction getFirstScaleId(chart, axis) {\n  const scales = chart.scales;\n  return Object.keys(scales).filter(key => scales[key].axis === axis).shift();\n}\n\nfunction createDatasetContext(parent, index) {\n  return createContext(parent,\n    {\n      active: false,\n      dataset: undefined,\n      datasetIndex: index,\n      index,\n      mode: 'default',\n      type: 'dataset'\n    }\n  );\n}\n\nfunction createDataContext(parent, index, element) {\n  return createContext(parent, {\n    active: false,\n    dataIndex: index,\n    parsed: undefined,\n    raw: undefined,\n    element,\n    index,\n    mode: 'default',\n    type: 'data'\n  });\n}\n\nfunction clearStacks(meta, items) {\n  // Not using meta.index here, because it might be already updated if the dataset changed location\n  const datasetIndex = meta.controller.index;\n  const axis = meta.vScale && meta.vScale.axis;\n  if (!axis) {\n    return;\n  }\n\n  items = items || meta._parsed;\n  for (const parsed of items) {\n    const stacks = parsed._stacks;\n    if (!stacks || stacks[axis] === undefined || stacks[axis][datasetIndex] === undefined) {\n      return;\n    }\n    delete stacks[axis][datasetIndex];\n    if (stacks[axis]._visualValues !== undefined && stacks[axis]._visualValues[datasetIndex] !== undefined) {\n      delete stacks[axis]._visualValues[datasetIndex];\n    }\n  }\n}\n\nconst isDirectUpdateMode = (mode) => mode === 'reset' || mode === 'none';\nconst cloneIfNotShared = (cached, shared) => shared ? cached : Object.assign({}, cached);\nconst createStack = (canStack, meta, chart) => canStack && !meta.hidden && meta._stacked\n  && {keys: getSortedDatasetIndices(chart, true), values: null};\n\nexport default class DatasetController {\n\n  /**\n   * @type {any}\n   */\n  static defaults = {};\n\n  /**\n   * Element type used to generate a meta dataset (e.g. Chart.element.LineElement).\n   */\n  static datasetElementType = null;\n\n  /**\n   * Element type used to generate a meta data (e.g. Chart.element.PointElement).\n   */\n  static dataElementType = null;\n\n  /**\n\t * @param {Chart} chart\n\t * @param {number} datasetIndex\n\t */\n  constructor(chart, datasetIndex) {\n    this.chart = chart;\n    this._ctx = chart.ctx;\n    this.index = datasetIndex;\n    this._cachedDataOpts = {};\n    this._cachedMeta = this.getMeta();\n    this._type = this._cachedMeta.type;\n    this.options = undefined;\n    /** @type {boolean | object} */\n    this._parsing = false;\n    this._data = undefined;\n    this._objectData = undefined;\n    this._sharedOptions = undefined;\n    this._drawStart = undefined;\n    this._drawCount = undefined;\n    this.enableOptionSharing = false;\n    this.supportsDecimation = false;\n    this.$context = undefined;\n    this._syncList = [];\n    this.datasetElementType = new.target.datasetElementType;\n    this.dataElementType = new.target.dataElementType;\n\n    this.initialize();\n  }\n\n  initialize() {\n    const meta = this._cachedMeta;\n    this.configure();\n    this.linkScales();\n    meta._stacked = isStacked(meta.vScale, meta);\n    this.addElements();\n\n    if (this.options.fill && !this.chart.isPluginEnabled('filler')) {\n      console.warn(\"Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options\");\n    }\n  }\n\n  updateIndex(datasetIndex) {\n    if (this.index !== datasetIndex) {\n      clearStacks(this._cachedMeta);\n    }\n    this.index = datasetIndex;\n  }\n\n  linkScales() {\n    const chart = this.chart;\n    const meta = this._cachedMeta;\n    const dataset = this.getDataset();\n\n    const chooseId = (axis, x, y, r) => axis === 'x' ? x : axis === 'r' ? r : y;\n\n    const xid = meta.xAxisID = valueOrDefault(dataset.xAxisID, getFirstScaleId(chart, 'x'));\n    const yid = meta.yAxisID = valueOrDefault(dataset.yAxisID, getFirstScaleId(chart, 'y'));\n    const rid = meta.rAxisID = valueOrDefault(dataset.rAxisID, getFirstScaleId(chart, 'r'));\n    const indexAxis = meta.indexAxis;\n    const iid = meta.iAxisID = chooseId(indexAxis, xid, yid, rid);\n    const vid = meta.vAxisID = chooseId(indexAxis, yid, xid, rid);\n    meta.xScale = this.getScaleForId(xid);\n    meta.yScale = this.getScaleForId(yid);\n    meta.rScale = this.getScaleForId(rid);\n    meta.iScale = this.getScaleForId(iid);\n    meta.vScale = this.getScaleForId(vid);\n  }\n\n  getDataset() {\n    return this.chart.data.datasets[this.index];\n  }\n\n  getMeta() {\n    return this.chart.getDatasetMeta(this.index);\n  }\n\n  /**\n\t * @param {string} scaleID\n\t * @return {Scale}\n\t */\n  getScaleForId(scaleID) {\n    return this.chart.scales[scaleID];\n  }\n\n  /**\n\t * @private\n\t */\n  _getOtherScale(scale) {\n    const meta = this._cachedMeta;\n    return scale === meta.iScale\n      ? meta.vScale\n      : meta.iScale;\n  }\n\n  reset() {\n    this._update('reset');\n  }\n\n  /**\n\t * @private\n\t */\n  _destroy() {\n    const meta = this._cachedMeta;\n    if (this._data) {\n      unlistenArrayEvents(this._data, this);\n    }\n    if (meta._stacked) {\n      clearStacks(meta);\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _dataCheck() {\n    const dataset = this.getDataset();\n    const data = dataset.data || (dataset.data = []);\n    const _data = this._data;\n\n    // In order to correctly handle data addition/deletion animation (an thus simulate\n    // real-time charts), we need to monitor these data modifications and synchronize\n    // the internal meta data accordingly.\n\n    if (isObject(data)) {\n      this._data = convertObjectDataToArray(data);\n    } else if (_data !== data) {\n      if (_data) {\n        // This case happens when the user replaced the data array instance.\n        unlistenArrayEvents(_data, this);\n        // Discard old parsed data and stacks\n        const meta = this._cachedMeta;\n        clearStacks(meta);\n        meta._parsed = [];\n      }\n      if (data && Object.isExtensible(data)) {\n        listenArrayEvents(data, this);\n      }\n      this._syncList = [];\n      this._data = data;\n    }\n  }\n\n  addElements() {\n    const meta = this._cachedMeta;\n\n    this._dataCheck();\n\n    if (this.datasetElementType) {\n      meta.dataset = new this.datasetElementType();\n    }\n  }\n\n  buildOrUpdateElements(resetNewElements) {\n    const meta = this._cachedMeta;\n    const dataset = this.getDataset();\n    let stackChanged = false;\n\n    this._dataCheck();\n\n    // make sure cached _stacked status is current\n    const oldStacked = meta._stacked;\n    meta._stacked = isStacked(meta.vScale, meta);\n\n    // detect change in stack option\n    if (meta.stack !== dataset.stack) {\n      stackChanged = true;\n      // remove values from old stack\n      clearStacks(meta);\n      meta.stack = dataset.stack;\n    }\n\n    // Re-sync meta data in case the user replaced the data array or if we missed\n    // any updates and so make sure that we handle number of datapoints changing.\n    this._resyncElements(resetNewElements);\n\n    // if stack changed, update stack values for the whole dataset\n    if (stackChanged || oldStacked !== meta._stacked) {\n      updateStacks(this, meta._parsed);\n    }\n  }\n\n  /**\n\t * Merges user-supplied and default dataset-level options\n\t * @private\n\t */\n  configure() {\n    const config = this.chart.config;\n    const scopeKeys = config.datasetScopeKeys(this._type);\n    const scopes = config.getOptionScopes(this.getDataset(), scopeKeys, true);\n    this.options = config.createResolver(scopes, this.getContext());\n    this._parsing = this.options.parsing;\n    this._cachedDataOpts = {};\n  }\n\n  /**\n\t * @param {number} start\n\t * @param {number} count\n\t */\n  parse(start, count) {\n    const {_cachedMeta: meta, _data: data} = this;\n    const {iScale, _stacked} = meta;\n    const iAxis = iScale.axis;\n\n    let sorted = start === 0 && count === data.length ? true : meta._sorted;\n    let prev = start > 0 && meta._parsed[start - 1];\n    let i, cur, parsed;\n\n    if (this._parsing === false) {\n      meta._parsed = data;\n      meta._sorted = true;\n      parsed = data;\n    } else {\n      if (isArray(data[start])) {\n        parsed = this.parseArrayData(meta, data, start, count);\n      } else if (isObject(data[start])) {\n        parsed = this.parseObjectData(meta, data, start, count);\n      } else {\n        parsed = this.parsePrimitiveData(meta, data, start, count);\n      }\n\n      const isNotInOrderComparedToPrev = () => cur[iAxis] === null || (prev && cur[iAxis] < prev[iAxis]);\n      for (i = 0; i < count; ++i) {\n        meta._parsed[i + start] = cur = parsed[i];\n        if (sorted) {\n          if (isNotInOrderComparedToPrev()) {\n            sorted = false;\n          }\n          prev = cur;\n        }\n      }\n      meta._sorted = sorted;\n    }\n\n    if (_stacked) {\n      updateStacks(this, parsed);\n    }\n  }\n\n  /**\n\t * Parse array of primitive values\n\t * @param {object} meta - dataset meta\n\t * @param {array} data - data array. Example [1,3,4]\n\t * @param {number} start - start index\n\t * @param {number} count - number of items to parse\n\t * @returns {object} parsed item - item containing index and a parsed value\n\t * for each scale id.\n\t * Example: {xScale0: 0, yScale0: 1}\n\t * @protected\n\t */\n  parsePrimitiveData(meta, data, start, count) {\n    const {iScale, vScale} = meta;\n    const iAxis = iScale.axis;\n    const vAxis = vScale.axis;\n    const labels = iScale.getLabels();\n    const singleScale = iScale === vScale;\n    const parsed = new Array(count);\n    let i, ilen, index;\n\n    for (i = 0, ilen = count; i < ilen; ++i) {\n      index = i + start;\n      parsed[i] = {\n        [iAxis]: singleScale || iScale.parse(labels[index], index),\n        [vAxis]: vScale.parse(data[index], index)\n      };\n    }\n    return parsed;\n  }\n\n  /**\n\t * Parse array of arrays\n\t * @param {object} meta - dataset meta\n\t * @param {array} data - data array. Example [[1,2],[3,4]]\n\t * @param {number} start - start index\n\t * @param {number} count - number of items to parse\n\t * @returns {object} parsed item - item containing index and a parsed value\n\t * for each scale id.\n\t * Example: {x: 0, y: 1}\n\t * @protected\n\t */\n  parseArrayData(meta, data, start, count) {\n    const {xScale, yScale} = meta;\n    const parsed = new Array(count);\n    let i, ilen, index, item;\n\n    for (i = 0, ilen = count; i < ilen; ++i) {\n      index = i + start;\n      item = data[index];\n      parsed[i] = {\n        x: xScale.parse(item[0], index),\n        y: yScale.parse(item[1], index)\n      };\n    }\n    return parsed;\n  }\n\n  /**\n\t * Parse array of objects\n\t * @param {object} meta - dataset meta\n\t * @param {array} data - data array. Example [{x:1, y:5}, {x:2, y:10}]\n\t * @param {number} start - start index\n\t * @param {number} count - number of items to parse\n\t * @returns {object} parsed item - item containing index and a parsed value\n\t * for each scale id. _custom is optional\n\t * Example: {xScale0: 0, yScale0: 1, _custom: {r: 10, foo: 'bar'}}\n\t * @protected\n\t */\n  parseObjectData(meta, data, start, count) {\n    const {xScale, yScale} = meta;\n    const {xAxisKey = 'x', yAxisKey = 'y'} = this._parsing;\n    const parsed = new Array(count);\n    let i, ilen, index, item;\n\n    for (i = 0, ilen = count; i < ilen; ++i) {\n      index = i + start;\n      item = data[index];\n      parsed[i] = {\n        x: xScale.parse(resolveObjectKey(item, xAxisKey), index),\n        y: yScale.parse(resolveObjectKey(item, yAxisKey), index)\n      };\n    }\n    return parsed;\n  }\n\n  /**\n\t * @protected\n\t */\n  getParsed(index) {\n    return this._cachedMeta._parsed[index];\n  }\n\n  /**\n\t * @protected\n\t */\n  getDataElement(index) {\n    return this._cachedMeta.data[index];\n  }\n\n  /**\n\t * @protected\n\t */\n  applyStack(scale, parsed, mode) {\n    const chart = this.chart;\n    const meta = this._cachedMeta;\n    const value = parsed[scale.axis];\n    const stack = {\n      keys: getSortedDatasetIndices(chart, true),\n      values: parsed._stacks[scale.axis]._visualValues\n    };\n    return applyStack(stack, value, meta.index, {mode});\n  }\n\n  /**\n\t * @protected\n\t */\n  updateRangeFromParsed(range, scale, parsed, stack) {\n    const parsedValue = parsed[scale.axis];\n    let value = parsedValue === null ? NaN : parsedValue;\n    const values = stack && parsed._stacks[scale.axis];\n    if (stack && values) {\n      stack.values = values;\n      value = applyStack(stack, parsedValue, this._cachedMeta.index);\n    }\n    range.min = Math.min(range.min, value);\n    range.max = Math.max(range.max, value);\n  }\n\n  /**\n\t * @protected\n\t */\n  getMinMax(scale, canStack) {\n    const meta = this._cachedMeta;\n    const _parsed = meta._parsed;\n    const sorted = meta._sorted && scale === meta.iScale;\n    const ilen = _parsed.length;\n    const otherScale = this._getOtherScale(scale);\n    const stack = createStack(canStack, meta, this.chart);\n    const range = {min: Number.POSITIVE_INFINITY, max: Number.NEGATIVE_INFINITY};\n    const {min: otherMin, max: otherMax} = getUserBounds(otherScale);\n    let i, parsed;\n\n    function _skip() {\n      parsed = _parsed[i];\n      const otherValue = parsed[otherScale.axis];\n      return !isFinite(parsed[scale.axis]) || otherMin > otherValue || otherMax < otherValue;\n    }\n\n    for (i = 0; i < ilen; ++i) {\n      if (_skip()) {\n        continue;\n      }\n      this.updateRangeFromParsed(range, scale, parsed, stack);\n      if (sorted) {\n        // if the data is sorted, we don't need to check further from this end of array\n        break;\n      }\n    }\n    if (sorted) {\n      // in the sorted case, find first non-skipped value from other end of array\n      for (i = ilen - 1; i >= 0; --i) {\n        if (_skip()) {\n          continue;\n        }\n        this.updateRangeFromParsed(range, scale, parsed, stack);\n        break;\n      }\n    }\n    return range;\n  }\n\n  getAllParsedValues(scale) {\n    const parsed = this._cachedMeta._parsed;\n    const values = [];\n    let i, ilen, value;\n\n    for (i = 0, ilen = parsed.length; i < ilen; ++i) {\n      value = parsed[i][scale.axis];\n      if (isFinite(value)) {\n        values.push(value);\n      }\n    }\n    return values;\n  }\n\n  /**\n\t * @return {number|boolean}\n\t * @protected\n\t */\n  getMaxOverflow() {\n    return false;\n  }\n\n  /**\n\t * @protected\n\t */\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const iScale = meta.iScale;\n    const vScale = meta.vScale;\n    const parsed = this.getParsed(index);\n    return {\n      label: iScale ? '' + iScale.getLabelForValue(parsed[iScale.axis]) : '',\n      value: vScale ? '' + vScale.getLabelForValue(parsed[vScale.axis]) : ''\n    };\n  }\n\n  /**\n\t * @private\n\t */\n  _update(mode) {\n    const meta = this._cachedMeta;\n    this.update(mode || 'default');\n    meta._clip = toClip(valueOrDefault(this.options.clip, defaultClip(meta.xScale, meta.yScale, this.getMaxOverflow())));\n  }\n\n  /**\n\t * @param {string} mode\n\t */\n  update(mode) {} // eslint-disable-line no-unused-vars\n\n  draw() {\n    const ctx = this._ctx;\n    const chart = this.chart;\n    const meta = this._cachedMeta;\n    const elements = meta.data || [];\n    const area = chart.chartArea;\n    const active = [];\n    const start = this._drawStart || 0;\n    const count = this._drawCount || (elements.length - start);\n    const drawActiveElementsOnTop = this.options.drawActiveElementsOnTop;\n    let i;\n\n    if (meta.dataset) {\n      meta.dataset.draw(ctx, area, start, count);\n    }\n\n    for (i = start; i < start + count; ++i) {\n      const element = elements[i];\n      if (element.hidden) {\n        continue;\n      }\n      if (element.active && drawActiveElementsOnTop) {\n        active.push(element);\n      } else {\n        element.draw(ctx, area);\n      }\n    }\n\n    for (i = 0; i < active.length; ++i) {\n      active[i].draw(ctx, area);\n    }\n  }\n\n  /**\n\t * Returns a set of predefined style properties that should be used to represent the dataset\n\t * or the data if the index is specified\n\t * @param {number} index - data index\n\t * @param {boolean} [active] - true if hover\n\t * @return {object} style object\n\t */\n  getStyle(index, active) {\n    const mode = active ? 'active' : 'default';\n    return index === undefined && this._cachedMeta.dataset\n      ? this.resolveDatasetElementOptions(mode)\n      : this.resolveDataElementOptions(index || 0, mode);\n  }\n\n  /**\n\t * @protected\n\t */\n  getContext(index, active, mode) {\n    const dataset = this.getDataset();\n    let context;\n    if (index >= 0 && index < this._cachedMeta.data.length) {\n      const element = this._cachedMeta.data[index];\n      context = element.$context ||\n        (element.$context = createDataContext(this.getContext(), index, element));\n      context.parsed = this.getParsed(index);\n      context.raw = dataset.data[index];\n      context.index = context.dataIndex = index;\n    } else {\n      context = this.$context ||\n        (this.$context = createDatasetContext(this.chart.getContext(), this.index));\n      context.dataset = dataset;\n      context.index = context.datasetIndex = this.index;\n    }\n\n    context.active = !!active;\n    context.mode = mode;\n    return context;\n  }\n\n  /**\n\t * @param {string} [mode]\n\t * @protected\n\t */\n  resolveDatasetElementOptions(mode) {\n    return this._resolveElementOptions(this.datasetElementType.id, mode);\n  }\n\n  /**\n\t * @param {number} index\n\t * @param {string} [mode]\n\t * @protected\n\t */\n  resolveDataElementOptions(index, mode) {\n    return this._resolveElementOptions(this.dataElementType.id, mode, index);\n  }\n\n  /**\n\t * @private\n\t */\n  _resolveElementOptions(elementType, mode = 'default', index) {\n    const active = mode === 'active';\n    const cache = this._cachedDataOpts;\n    const cacheKey = elementType + '-' + mode;\n    const cached = cache[cacheKey];\n    const sharing = this.enableOptionSharing && defined(index);\n    if (cached) {\n      return cloneIfNotShared(cached, sharing);\n    }\n    const config = this.chart.config;\n    const scopeKeys = config.datasetElementScopeKeys(this._type, elementType);\n    const prefixes = active ? [`${elementType}Hover`, 'hover', elementType, ''] : [elementType, ''];\n    const scopes = config.getOptionScopes(this.getDataset(), scopeKeys);\n    const names = Object.keys(defaults.elements[elementType]);\n    // context is provided as a function, and is called only if needed,\n    // so we don't create a context for each element if not needed.\n    const context = () => this.getContext(index, active, mode);\n    const values = config.resolveNamedOptions(scopes, names, context, prefixes);\n\n    if (values.$shared) {\n      // `$shared` indicates this set of options can be shared between multiple elements.\n      // Sharing is used to reduce number of properties to change during animation.\n      values.$shared = sharing;\n\n      // We cache options by `mode`, which can be 'active' for example. This enables us\n      // to have the 'active' element options and 'default' options to switch between\n      // when interacting.\n      cache[cacheKey] = Object.freeze(cloneIfNotShared(values, sharing));\n    }\n\n    return values;\n  }\n\n\n  /**\n\t * @private\n\t */\n  _resolveAnimations(index, transition, active) {\n    const chart = this.chart;\n    const cache = this._cachedDataOpts;\n    const cacheKey = `animation-${transition}`;\n    const cached = cache[cacheKey];\n    if (cached) {\n      return cached;\n    }\n    let options;\n    if (chart.options.animation !== false) {\n      const config = this.chart.config;\n      const scopeKeys = config.datasetAnimationScopeKeys(this._type, transition);\n      const scopes = config.getOptionScopes(this.getDataset(), scopeKeys);\n      options = config.createResolver(scopes, this.getContext(index, active, transition));\n    }\n    const animations = new Animations(chart, options && options.animations);\n    if (options && options._cacheable) {\n      cache[cacheKey] = Object.freeze(animations);\n    }\n    return animations;\n  }\n\n  /**\n\t * Utility for getting the options object shared between elements\n\t * @protected\n\t */\n  getSharedOptions(options) {\n    if (!options.$shared) {\n      return;\n    }\n    return this._sharedOptions || (this._sharedOptions = Object.assign({}, options));\n  }\n\n  /**\n\t * Utility for determining if `options` should be included in the updated properties\n\t * @protected\n\t */\n  includeOptions(mode, sharedOptions) {\n    return !sharedOptions || isDirectUpdateMode(mode) || this.chart._animationsDisabled;\n  }\n\n  /**\n   * @todo v4, rename to getSharedOptions and remove excess functions\n   */\n  _getSharedOptions(start, mode) {\n    const firstOpts = this.resolveDataElementOptions(start, mode);\n    const previouslySharedOptions = this._sharedOptions;\n    const sharedOptions = this.getSharedOptions(firstOpts);\n    const includeOptions = this.includeOptions(mode, sharedOptions) || (sharedOptions !== previouslySharedOptions);\n    this.updateSharedOptions(sharedOptions, mode, firstOpts);\n    return {sharedOptions, includeOptions};\n  }\n\n  /**\n\t * Utility for updating an element with new properties, using animations when appropriate.\n\t * @protected\n\t */\n  updateElement(element, index, properties, mode) {\n    if (isDirectUpdateMode(mode)) {\n      Object.assign(element, properties);\n    } else {\n      this._resolveAnimations(index, mode).update(element, properties);\n    }\n  }\n\n  /**\n\t * Utility to animate the shared options, that are potentially affecting multiple elements.\n\t * @protected\n\t */\n  updateSharedOptions(sharedOptions, mode, newOptions) {\n    if (sharedOptions && !isDirectUpdateMode(mode)) {\n      this._resolveAnimations(undefined, mode).update(sharedOptions, newOptions);\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _setStyle(element, index, mode, active) {\n    element.active = active;\n    const options = this.getStyle(index, active);\n    this._resolveAnimations(index, mode, active).update(element, {\n      // When going from active to inactive, we need to update to the shared options.\n      // This way the once hovered element will end up with the same original shared options instance, after animation.\n      options: (!active && this.getSharedOptions(options)) || options\n    });\n  }\n\n  removeHoverStyle(element, datasetIndex, index) {\n    this._setStyle(element, index, 'active', false);\n  }\n\n  setHoverStyle(element, datasetIndex, index) {\n    this._setStyle(element, index, 'active', true);\n  }\n\n  /**\n\t * @private\n\t */\n  _removeDatasetHoverStyle() {\n    const element = this._cachedMeta.dataset;\n\n    if (element) {\n      this._setStyle(element, undefined, 'active', false);\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _setDatasetHoverStyle() {\n    const element = this._cachedMeta.dataset;\n\n    if (element) {\n      this._setStyle(element, undefined, 'active', true);\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _resyncElements(resetNewElements) {\n    const data = this._data;\n    const elements = this._cachedMeta.data;\n\n    // Apply changes detected through array listeners\n    for (const [method, arg1, arg2] of this._syncList) {\n      this[method](arg1, arg2);\n    }\n    this._syncList = [];\n\n    const numMeta = elements.length;\n    const numData = data.length;\n    const count = Math.min(numData, numMeta);\n\n    if (count) {\n      // TODO: It is not optimal to always parse the old data\n      // This is done because we are not detecting direct assignments:\n      // chart.data.datasets[0].data[5] = 10;\n      // chart.data.datasets[0].data[5].y = 10;\n      this.parse(0, count);\n    }\n\n    if (numData > numMeta) {\n      this._insertElements(numMeta, numData - numMeta, resetNewElements);\n    } else if (numData < numMeta) {\n      this._removeElements(numData, numMeta - numData);\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _insertElements(start, count, resetNewElements = true) {\n    const meta = this._cachedMeta;\n    const data = meta.data;\n    const end = start + count;\n    let i;\n\n    const move = (arr) => {\n      arr.length += count;\n      for (i = arr.length - 1; i >= end; i--) {\n        arr[i] = arr[i - count];\n      }\n    };\n    move(data);\n\n    for (i = start; i < end; ++i) {\n      data[i] = new this.dataElementType();\n    }\n\n    if (this._parsing) {\n      move(meta._parsed);\n    }\n    this.parse(start, count);\n\n    if (resetNewElements) {\n      this.updateElements(data, start, count, 'reset');\n    }\n  }\n\n  updateElements(element, start, count, mode) {} // eslint-disable-line no-unused-vars\n\n  /**\n\t * @private\n\t */\n  _removeElements(start, count) {\n    const meta = this._cachedMeta;\n    if (this._parsing) {\n      const removed = meta._parsed.splice(start, count);\n      if (meta._stacked) {\n        clearStacks(meta, removed);\n      }\n    }\n    meta.data.splice(start, count);\n  }\n\n  /**\n\t * @private\n   */\n  _sync(args) {\n    if (this._parsing) {\n      this._syncList.push(args);\n    } else {\n      const [method, arg1, arg2] = args;\n      this[method](arg1, arg2);\n    }\n    this.chart._dataChanges.push([this.index, ...args]);\n  }\n\n  _onDataPush() {\n    const count = arguments.length;\n    this._sync(['_insertElements', this.getDataset().data.length - count, count]);\n  }\n\n  _onDataPop() {\n    this._sync(['_removeElements', this._cachedMeta.data.length - 1, 1]);\n  }\n\n  _onDataShift() {\n    this._sync(['_removeElements', 0, 1]);\n  }\n\n  _onDataSplice(start, count) {\n    if (count) {\n      this._sync(['_removeElements', start, count]);\n    }\n    const newCount = arguments.length - 2;\n    if (newCount) {\n      this._sync(['_insertElements', start, newCount]);\n    }\n  }\n\n  _onDataUnshift() {\n    this._sync(['_insertElements', 0, arguments.length]);\n  }\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {\n  _arrayUnique, isArray, isNullOrUndef,\n  valueOrDefault, resolveObjectKey, sign, defined\n} from '../helpers/index.js';\n\nfunction getAllScaleValues(scale, type) {\n  if (!scale._cache.$bar) {\n    const visibleMetas = scale.getMatchingVisibleMetas(type);\n    let values = [];\n\n    for (let i = 0, ilen = visibleMetas.length; i < ilen; i++) {\n      values = values.concat(visibleMetas[i].controller.getAllParsedValues(scale));\n    }\n    scale._cache.$bar = _arrayUnique(values.sort((a, b) => a - b));\n  }\n  return scale._cache.$bar;\n}\n\n/**\n * Computes the \"optimal\" sample size to maintain bars equally sized while preventing overlap.\n * @private\n */\nfunction computeMinSampleSize(meta) {\n  const scale = meta.iScale;\n  const values = getAllScaleValues(scale, meta.type);\n  let min = scale._length;\n  let i, ilen, curr, prev;\n  const updateMinAndPrev = () => {\n    if (curr === 32767 || curr === -32768) {\n      // Ignore truncated pixels\n      return;\n    }\n    if (defined(prev)) {\n      // curr - prev === 0 is ignored\n      min = Math.min(min, Math.abs(curr - prev) || min);\n    }\n    prev = curr;\n  };\n\n  for (i = 0, ilen = values.length; i < ilen; ++i) {\n    curr = scale.getPixelForValue(values[i]);\n    updateMinAndPrev();\n  }\n\n  prev = undefined;\n  for (i = 0, ilen = scale.ticks.length; i < ilen; ++i) {\n    curr = scale.getPixelForTick(i);\n    updateMinAndPrev();\n  }\n\n  return min;\n}\n\n/**\n * Computes an \"ideal\" category based on the absolute bar thickness or, if undefined or null,\n * uses the smallest interval (see computeMinSampleSize) that prevents bar overlapping. This\n * mode currently always generates bars equally sized (until we introduce scriptable options?).\n * @private\n */\nfunction computeFitCategoryTraits(index, ruler, options, stackCount) {\n  const thickness = options.barThickness;\n  let size, ratio;\n\n  if (isNullOrUndef(thickness)) {\n    size = ruler.min * options.categoryPercentage;\n    ratio = options.barPercentage;\n  } else {\n    // When bar thickness is enforced, category and bar percentages are ignored.\n    // Note(SB): we could add support for relative bar thickness (e.g. barThickness: '50%')\n    // and deprecate barPercentage since this value is ignored when thickness is absolute.\n    size = thickness * stackCount;\n    ratio = 1;\n  }\n\n  return {\n    chunk: size / stackCount,\n    ratio,\n    start: ruler.pixels[index] - (size / 2)\n  };\n}\n\n/**\n * Computes an \"optimal\" category that globally arranges bars side by side (no gap when\n * percentage options are 1), based on the previous and following categories. This mode\n * generates bars with different widths when data are not evenly spaced.\n * @private\n */\nfunction computeFlexCategoryTraits(index, ruler, options, stackCount) {\n  const pixels = ruler.pixels;\n  const curr = pixels[index];\n  let prev = index > 0 ? pixels[index - 1] : null;\n  let next = index < pixels.length - 1 ? pixels[index + 1] : null;\n  const percent = options.categoryPercentage;\n\n  if (prev === null) {\n    // first data: its size is double based on the next point or,\n    // if it's also the last data, we use the scale size.\n    prev = curr - (next === null ? ruler.end - ruler.start : next - curr);\n  }\n\n  if (next === null) {\n    // last data: its size is also double based on the previous point.\n    next = curr + curr - prev;\n  }\n\n  const start = curr - (curr - Math.min(prev, next)) / 2 * percent;\n  const size = Math.abs(next - prev) / 2 * percent;\n\n  return {\n    chunk: size / stackCount,\n    ratio: options.barPercentage,\n    start\n  };\n}\n\nfunction parseFloatBar(entry, item, vScale, i) {\n  const startValue = vScale.parse(entry[0], i);\n  const endValue = vScale.parse(entry[1], i);\n  const min = Math.min(startValue, endValue);\n  const max = Math.max(startValue, endValue);\n  let barStart = min;\n  let barEnd = max;\n\n  if (Math.abs(min) > Math.abs(max)) {\n    barStart = max;\n    barEnd = min;\n  }\n\n  // Store `barEnd` (furthest away from origin) as parsed value,\n  // to make stacking straight forward\n  item[vScale.axis] = barEnd;\n\n  item._custom = {\n    barStart,\n    barEnd,\n    start: startValue,\n    end: endValue,\n    min,\n    max\n  };\n}\n\nfunction parseValue(entry, item, vScale, i) {\n  if (isArray(entry)) {\n    parseFloatBar(entry, item, vScale, i);\n  } else {\n    item[vScale.axis] = vScale.parse(entry, i);\n  }\n  return item;\n}\n\nfunction parseArrayOrPrimitive(meta, data, start, count) {\n  const iScale = meta.iScale;\n  const vScale = meta.vScale;\n  const labels = iScale.getLabels();\n  const singleScale = iScale === vScale;\n  const parsed = [];\n  let i, ilen, item, entry;\n\n  for (i = start, ilen = start + count; i < ilen; ++i) {\n    entry = data[i];\n    item = {};\n    item[iScale.axis] = singleScale || iScale.parse(labels[i], i);\n    parsed.push(parseValue(entry, item, vScale, i));\n  }\n  return parsed;\n}\n\nfunction isFloatBar(custom) {\n  return custom && custom.barStart !== undefined && custom.barEnd !== undefined;\n}\n\nfunction barSign(size, vScale, actualBase) {\n  if (size !== 0) {\n    return sign(size);\n  }\n  return (vScale.isHorizontal() ? 1 : -1) * (vScale.min >= actualBase ? 1 : -1);\n}\n\nfunction borderProps(properties) {\n  let reverse, start, end, top, bottom;\n  if (properties.horizontal) {\n    reverse = properties.base > properties.x;\n    start = 'left';\n    end = 'right';\n  } else {\n    reverse = properties.base < properties.y;\n    start = 'bottom';\n    end = 'top';\n  }\n  if (reverse) {\n    top = 'end';\n    bottom = 'start';\n  } else {\n    top = 'start';\n    bottom = 'end';\n  }\n  return {start, end, reverse, top, bottom};\n}\n\nfunction setBorderSkipped(properties, options, stack, index) {\n  let edge = options.borderSkipped;\n  const res = {};\n\n  if (!edge) {\n    properties.borderSkipped = res;\n    return;\n  }\n\n  if (edge === true) {\n    properties.borderSkipped = {top: true, right: true, bottom: true, left: true};\n    return;\n  }\n\n  const {start, end, reverse, top, bottom} = borderProps(properties);\n\n  if (edge === 'middle' && stack) {\n    properties.enableBorderRadius = true;\n    if ((stack._top || 0) === index) {\n      edge = top;\n    } else if ((stack._bottom || 0) === index) {\n      edge = bottom;\n    } else {\n      res[parseEdge(bottom, start, end, reverse)] = true;\n      edge = top;\n    }\n  }\n\n  res[parseEdge(edge, start, end, reverse)] = true;\n  properties.borderSkipped = res;\n}\n\nfunction parseEdge(edge, a, b, reverse) {\n  if (reverse) {\n    edge = swap(edge, a, b);\n    edge = startEnd(edge, b, a);\n  } else {\n    edge = startEnd(edge, a, b);\n  }\n  return edge;\n}\n\nfunction swap(orig, v1, v2) {\n  return orig === v1 ? v2 : orig === v2 ? v1 : orig;\n}\n\nfunction startEnd(v, start, end) {\n  return v === 'start' ? start : v === 'end' ? end : v;\n}\n\nfunction setInflateAmount(properties, {inflateAmount}, ratio) {\n  properties.inflateAmount = inflateAmount === 'auto'\n    ? ratio === 1 ? 0.33 : 0\n    : inflateAmount;\n}\n\nexport default class BarController extends DatasetController {\n\n  static id = 'bar';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    datasetElementType: false,\n    dataElementType: 'bar',\n\n    categoryPercentage: 0.8,\n    barPercentage: 0.9,\n    grouped: true,\n\n    animations: {\n      numbers: {\n        type: 'number',\n        properties: ['x', 'y', 'base', 'width', 'height']\n      }\n    }\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n    scales: {\n      _index_: {\n        type: 'category',\n        offset: true,\n        grid: {\n          offset: true\n        }\n      },\n      _value_: {\n        type: 'linear',\n        beginAtZero: true,\n      }\n    }\n  };\n\n\n  /**\n\t * Overriding primitive data parsing since we support mixed primitive/array\n\t * data for float bars\n\t * @protected\n\t */\n  parsePrimitiveData(meta, data, start, count) {\n    return parseArrayOrPrimitive(meta, data, start, count);\n  }\n\n  /**\n\t * Overriding array data parsing since we support mixed primitive/array\n\t * data for float bars\n\t * @protected\n\t */\n  parseArrayData(meta, data, start, count) {\n    return parseArrayOrPrimitive(meta, data, start, count);\n  }\n\n  /**\n\t * Overriding object data parsing since we support mixed primitive/array\n\t * value-scale data for float bars\n\t * @protected\n\t */\n  parseObjectData(meta, data, start, count) {\n    const {iScale, vScale} = meta;\n    const {xAxisKey = 'x', yAxisKey = 'y'} = this._parsing;\n    const iAxisKey = iScale.axis === 'x' ? xAxisKey : yAxisKey;\n    const vAxisKey = vScale.axis === 'x' ? xAxisKey : yAxisKey;\n    const parsed = [];\n    let i, ilen, item, obj;\n    for (i = start, ilen = start + count; i < ilen; ++i) {\n      obj = data[i];\n      item = {};\n      item[iScale.axis] = iScale.parse(resolveObjectKey(obj, iAxisKey), i);\n      parsed.push(parseValue(resolveObjectKey(obj, vAxisKey), item, vScale, i));\n    }\n    return parsed;\n  }\n\n  /**\n\t * @protected\n\t */\n  updateRangeFromParsed(range, scale, parsed, stack) {\n    super.updateRangeFromParsed(range, scale, parsed, stack);\n    const custom = parsed._custom;\n    if (custom && scale === this._cachedMeta.vScale) {\n      // float bar: only one end of the bar is considered by `super`\n      range.min = Math.min(range.min, custom.min);\n      range.max = Math.max(range.max, custom.max);\n    }\n  }\n\n  /**\n\t * @return {number|boolean}\n\t * @protected\n\t */\n  getMaxOverflow() {\n    return 0;\n  }\n\n  /**\n\t * @protected\n\t */\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const {iScale, vScale} = meta;\n    const parsed = this.getParsed(index);\n    const custom = parsed._custom;\n    const value = isFloatBar(custom)\n      ? '[' + custom.start + ', ' + custom.end + ']'\n      : '' + vScale.getLabelForValue(parsed[vScale.axis]);\n\n    return {\n      label: '' + iScale.getLabelForValue(parsed[iScale.axis]),\n      value\n    };\n  }\n\n  initialize() {\n    this.enableOptionSharing = true;\n\n    super.initialize();\n\n    const meta = this._cachedMeta;\n    meta.stack = this.getDataset().stack;\n  }\n\n  update(mode) {\n    const meta = this._cachedMeta;\n    this.updateElements(meta.data, 0, meta.data.length, mode);\n  }\n\n  updateElements(bars, start, count, mode) {\n    const reset = mode === 'reset';\n    const {index, _cachedMeta: {vScale}} = this;\n    const base = vScale.getBasePixel();\n    const horizontal = vScale.isHorizontal();\n    const ruler = this._getRuler();\n    const {sharedOptions, includeOptions} = this._getSharedOptions(start, mode);\n\n    for (let i = start; i < start + count; i++) {\n      const parsed = this.getParsed(i);\n      const vpixels = reset || isNullOrUndef(parsed[vScale.axis]) ? {base, head: base} : this._calculateBarValuePixels(i);\n      const ipixels = this._calculateBarIndexPixels(i, ruler);\n      const stack = (parsed._stacks || {})[vScale.axis];\n\n      const properties = {\n        horizontal,\n        base: vpixels.base,\n        enableBorderRadius: !stack || isFloatBar(parsed._custom) || (index === stack._top || index === stack._bottom),\n        x: horizontal ? vpixels.head : ipixels.center,\n        y: horizontal ? ipixels.center : vpixels.head,\n        height: horizontal ? ipixels.size : Math.abs(vpixels.size),\n        width: horizontal ? Math.abs(vpixels.size) : ipixels.size\n      };\n\n      if (includeOptions) {\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, bars[i].active ? 'active' : mode);\n      }\n      const options = properties.options || bars[i].options;\n      setBorderSkipped(properties, options, stack, index);\n      setInflateAmount(properties, options, ruler.ratio);\n      this.updateElement(bars[i], i, properties, mode);\n    }\n  }\n\n  /**\n\t * Returns the stacks based on groups and bar visibility.\n\t * @param {number} [last] - The dataset index\n\t * @param {number} [dataIndex] - The data index of the ruler\n\t * @returns {string[]} The list of stack IDs\n\t * @private\n\t */\n  _getStacks(last, dataIndex) {\n    const {iScale} = this._cachedMeta;\n    const metasets = iScale.getMatchingVisibleMetas(this._type)\n      .filter(meta => meta.controller.options.grouped);\n    const stacked = iScale.options.stacked;\n    const stacks = [];\n\n    const skipNull = (meta) => {\n      const parsed = meta.controller.getParsed(dataIndex);\n      const val = parsed && parsed[meta.vScale.axis];\n\n      if (isNullOrUndef(val) || isNaN(val)) {\n        return true;\n      }\n    };\n\n    for (const meta of metasets) {\n      if (dataIndex !== undefined && skipNull(meta)) {\n        continue;\n      }\n\n      // stacked   | meta.stack\n      //           | found | not found | undefined\n      // false     |   x   |     x     |     x\n      // true      |       |     x     |\n      // undefined |       |     x     |     x\n      if (stacked === false || stacks.indexOf(meta.stack) === -1 ||\n\t\t\t\t(stacked === undefined && meta.stack === undefined)) {\n        stacks.push(meta.stack);\n      }\n      if (meta.index === last) {\n        break;\n      }\n    }\n\n    // No stacks? that means there is no visible data. Let's still initialize an `undefined`\n    // stack where possible invisible bars will be located.\n    // https://github.com/chartjs/Chart.js/issues/6368\n    if (!stacks.length) {\n      stacks.push(undefined);\n    }\n\n    return stacks;\n  }\n\n  /**\n\t * Returns the effective number of stacks based on groups and bar visibility.\n\t * @private\n\t */\n  _getStackCount(index) {\n    return this._getStacks(undefined, index).length;\n  }\n\n  /**\n\t * Returns the stack index for the given dataset based on groups and bar visibility.\n\t * @param {number} [datasetIndex] - The dataset index\n\t * @param {string} [name] - The stack name to find\n   * @param {number} [dataIndex]\n\t * @returns {number} The stack index\n\t * @private\n\t */\n  _getStackIndex(datasetIndex, name, dataIndex) {\n    const stacks = this._getStacks(datasetIndex, dataIndex);\n    const index = (name !== undefined)\n      ? stacks.indexOf(name)\n      : -1; // indexOf returns -1 if element is not present\n\n    return (index === -1)\n      ? stacks.length - 1\n      : index;\n  }\n\n  /**\n\t * @private\n\t */\n  _getRuler() {\n    const opts = this.options;\n    const meta = this._cachedMeta;\n    const iScale = meta.iScale;\n    const pixels = [];\n    let i, ilen;\n\n    for (i = 0, ilen = meta.data.length; i < ilen; ++i) {\n      pixels.push(iScale.getPixelForValue(this.getParsed(i)[iScale.axis], i));\n    }\n\n    const barThickness = opts.barThickness;\n    const min = barThickness || computeMinSampleSize(meta);\n\n    return {\n      min,\n      pixels,\n      start: iScale._startPixel,\n      end: iScale._endPixel,\n      stackCount: this._getStackCount(),\n      scale: iScale,\n      grouped: opts.grouped,\n      // bar thickness ratio used for non-grouped bars\n      ratio: barThickness ? 1 : opts.categoryPercentage * opts.barPercentage\n    };\n  }\n\n  /**\n\t * Note: pixel values are not clamped to the scale area.\n\t * @private\n\t */\n  _calculateBarValuePixels(index) {\n    const {_cachedMeta: {vScale, _stacked, index: datasetIndex}, options: {base: baseValue, minBarLength}} = this;\n    const actualBase = baseValue || 0;\n    const parsed = this.getParsed(index);\n    const custom = parsed._custom;\n    const floating = isFloatBar(custom);\n    let value = parsed[vScale.axis];\n    let start = 0;\n    let length = _stacked ? this.applyStack(vScale, parsed, _stacked) : value;\n    let head, size;\n\n    if (length !== value) {\n      start = length - value;\n      length = value;\n    }\n\n    if (floating) {\n      value = custom.barStart;\n      length = custom.barEnd - custom.barStart;\n      // bars crossing origin are not stacked\n      if (value !== 0 && sign(value) !== sign(custom.barEnd)) {\n        start = 0;\n      }\n      start += value;\n    }\n\n    const startValue = !isNullOrUndef(baseValue) && !floating ? baseValue : start;\n    let base = vScale.getPixelForValue(startValue);\n\n    if (this.chart.getDataVisibility(index)) {\n      head = vScale.getPixelForValue(start + length);\n    } else {\n      // When not visible, no height\n      head = base;\n    }\n\n    size = head - base;\n\n    if (Math.abs(size) < minBarLength) {\n      size = barSign(size, vScale, actualBase) * minBarLength;\n      if (value === actualBase) {\n        base -= size / 2;\n      }\n      const startPixel = vScale.getPixelForDecimal(0);\n      const endPixel = vScale.getPixelForDecimal(1);\n      const min = Math.min(startPixel, endPixel);\n      const max = Math.max(startPixel, endPixel);\n      base = Math.max(Math.min(base, max), min);\n      head = base + size;\n\n      if (_stacked && !floating) {\n        // visual data coordinates after applying minBarLength\n        parsed._stacks[vScale.axis]._visualValues[datasetIndex] = vScale.getValueForPixel(head) - vScale.getValueForPixel(base);\n      }\n    }\n\n    if (base === vScale.getPixelForValue(actualBase)) {\n      const halfGrid = sign(size) * vScale.getLineWidthForValue(actualBase) / 2;\n      base += halfGrid;\n      size -= halfGrid;\n    }\n\n    return {\n      size,\n      base,\n      head,\n      center: head + size / 2\n    };\n  }\n\n  /**\n\t * @private\n\t */\n  _calculateBarIndexPixels(index, ruler) {\n    const scale = ruler.scale;\n    const options = this.options;\n    const skipNull = options.skipNull;\n    const maxBarThickness = valueOrDefault(options.maxBarThickness, Infinity);\n    let center, size;\n    if (ruler.grouped) {\n      const stackCount = skipNull ? this._getStackCount(index) : ruler.stackCount;\n      const range = options.barThickness === 'flex'\n        ? computeFlexCategoryTraits(index, ruler, options, stackCount)\n        : computeFitCategoryTraits(index, ruler, options, stackCount);\n\n      const stackIndex = this._getStackIndex(this.index, this._cachedMeta.stack, skipNull ? index : undefined);\n      center = range.start + (range.chunk * stackIndex) + (range.chunk / 2);\n      size = Math.min(maxBarThickness, range.chunk * range.ratio);\n    } else {\n      // For non-grouped bar charts, exact pixel values are used\n      center = scale.getPixelForValue(this.getParsed(index)[scale.axis], index);\n      size = Math.min(maxBarThickness, ruler.min * ruler.ratio);\n    }\n\n    return {\n      base: center - size / 2,\n      head: center + size / 2,\n      center,\n      size\n    };\n  }\n\n  draw() {\n    const meta = this._cachedMeta;\n    const vScale = meta.vScale;\n    const rects = meta.data;\n    const ilen = rects.length;\n    let i = 0;\n\n    for (; i < ilen; ++i) {\n      if (this.getParsed(i)[vScale.axis] !== null) {\n        rects[i].draw(this._ctx);\n      }\n    }\n  }\n\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {valueOrDefault} from '../helpers/helpers.core.js';\n\nexport default class BubbleController extends DatasetController {\n\n  static id = 'bubble';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    datasetElementType: false,\n    dataElementType: 'point',\n\n    animations: {\n      numbers: {\n        type: 'number',\n        properties: ['x', 'y', 'borderWidth', 'radius']\n      }\n    }\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n    scales: {\n      x: {\n        type: 'linear'\n      },\n      y: {\n        type: 'linear'\n      }\n    }\n  };\n\n  initialize() {\n    this.enableOptionSharing = true;\n    super.initialize();\n  }\n\n  /**\n\t * Parse array of primitive values\n\t * @protected\n\t */\n  parsePrimitiveData(meta, data, start, count) {\n    const parsed = super.parsePrimitiveData(meta, data, start, count);\n    for (let i = 0; i < parsed.length; i++) {\n      parsed[i]._custom = this.resolveDataElementOptions(i + start).radius;\n    }\n    return parsed;\n  }\n\n  /**\n\t * Parse array of arrays\n\t * @protected\n\t */\n  parseArrayData(meta, data, start, count) {\n    const parsed = super.parseArrayData(meta, data, start, count);\n    for (let i = 0; i < parsed.length; i++) {\n      const item = data[start + i];\n      parsed[i]._custom = valueOrDefault(item[2], this.resolveDataElementOptions(i + start).radius);\n    }\n    return parsed;\n  }\n\n  /**\n\t * Parse array of objects\n\t * @protected\n\t */\n  parseObjectData(meta, data, start, count) {\n    const parsed = super.parseObjectData(meta, data, start, count);\n    for (let i = 0; i < parsed.length; i++) {\n      const item = data[start + i];\n      parsed[i]._custom = valueOrDefault(item && item.r && +item.r, this.resolveDataElementOptions(i + start).radius);\n    }\n    return parsed;\n  }\n\n  /**\n\t * @protected\n\t */\n  getMaxOverflow() {\n    const data = this._cachedMeta.data;\n\n    let max = 0;\n    for (let i = data.length - 1; i >= 0; --i) {\n      max = Math.max(max, data[i].size(this.resolveDataElementOptions(i)) / 2);\n    }\n    return max > 0 && max;\n  }\n\n  /**\n\t * @protected\n\t */\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const labels = this.chart.data.labels || [];\n    const {xScale, yScale} = meta;\n    const parsed = this.getParsed(index);\n    const x = xScale.getLabelForValue(parsed.x);\n    const y = yScale.getLabelForValue(parsed.y);\n    const r = parsed._custom;\n\n    return {\n      label: labels[index] || '',\n      value: '(' + x + ', ' + y + (r ? ', ' + r : '') + ')'\n    };\n  }\n\n  update(mode) {\n    const points = this._cachedMeta.data;\n\n    // Update Points\n    this.updateElements(points, 0, points.length, mode);\n  }\n\n  updateElements(points, start, count, mode) {\n    const reset = mode === 'reset';\n    const {iScale, vScale} = this._cachedMeta;\n    const {sharedOptions, includeOptions} = this._getSharedOptions(start, mode);\n    const iAxis = iScale.axis;\n    const vAxis = vScale.axis;\n\n    for (let i = start; i < start + count; i++) {\n      const point = points[i];\n      const parsed = !reset && this.getParsed(i);\n      const properties = {};\n      const iPixel = properties[iAxis] = reset ? iScale.getPixelForDecimal(0.5) : iScale.getPixelForValue(parsed[iAxis]);\n      const vPixel = properties[vAxis] = reset ? vScale.getBasePixel() : vScale.getPixelForValue(parsed[vAxis]);\n\n      properties.skip = isNaN(iPixel) || isNaN(vPixel);\n\n      if (includeOptions) {\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n\n        if (reset) {\n          properties.options.radius = 0;\n        }\n      }\n\n      this.updateElement(point, i, properties, mode);\n    }\n  }\n\n  /**\n\t * @param {number} index\n\t * @param {string} [mode]\n\t * @protected\n\t */\n  resolveDataElementOptions(index, mode) {\n    const parsed = this.getParsed(index);\n    let values = super.resolveDataElementOptions(index, mode);\n\n    // In case values were cached (and thus frozen), we need to clone the values\n    if (values.$shared) {\n      values = Object.assign({}, values, {$shared: false});\n    }\n\n    // Custom radius resolution\n    const radius = values.radius;\n    if (mode !== 'active') {\n      values.radius = 0;\n    }\n    values.radius += valueOrDefault(parsed && parsed._custom, radius);\n\n    return values;\n  }\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {isObject, resolveObjectKey, toPercentage, toDimension, valueOrDefault} from '../helpers/helpers.core.js';\nimport {formatNumber} from '../helpers/helpers.intl.js';\nimport {toRadians, PI, TAU, HALF_PI, _angleBetween} from '../helpers/helpers.math.js';\n\n/**\n * @typedef { import('../core/core.controller.js').default } Chart\n */\n\nfunction getRatioAndOffset(rotation, circumference, cutout) {\n  let ratioX = 1;\n  let ratioY = 1;\n  let offsetX = 0;\n  let offsetY = 0;\n  // If the chart's circumference isn't a full circle, calculate size as a ratio of the width/height of the arc\n  if (circumference < TAU) {\n    const startAngle = rotation;\n    const endAngle = startAngle + circumference;\n    const startX = Math.cos(startAngle);\n    const startY = Math.sin(startAngle);\n    const endX = Math.cos(endAngle);\n    const endY = Math.sin(endAngle);\n    const calcMax = (angle, a, b) => _angleBetween(angle, startAngle, endAngle, true) ? 1 : Math.max(a, a * cutout, b, b * cutout);\n    const calcMin = (angle, a, b) => _angleBetween(angle, startAngle, endAngle, true) ? -1 : Math.min(a, a * cutout, b, b * cutout);\n    const maxX = calcMax(0, startX, endX);\n    const maxY = calcMax(HALF_PI, startY, endY);\n    const minX = calcMin(PI, startX, endX);\n    const minY = calcMin(PI + HALF_PI, startY, endY);\n    ratioX = (maxX - minX) / 2;\n    ratioY = (maxY - minY) / 2;\n    offsetX = -(maxX + minX) / 2;\n    offsetY = -(maxY + minY) / 2;\n  }\n  return {ratioX, ratioY, offsetX, offsetY};\n}\n\nexport default class DoughnutController extends DatasetController {\n\n  static id = 'doughnut';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    datasetElementType: false,\n    dataElementType: 'arc',\n    animation: {\n      // Boolean - Whether we animate the rotation of the Doughnut\n      animateRotate: true,\n      // Boolean - Whether we animate scaling the Doughnut from the centre\n      animateScale: false\n    },\n    animations: {\n      numbers: {\n        type: 'number',\n        properties: ['circumference', 'endAngle', 'innerRadius', 'outerRadius', 'startAngle', 'x', 'y', 'offset', 'borderWidth', 'spacing']\n      },\n    },\n    // The percentage of the chart that we cut out of the middle.\n    cutout: '50%',\n\n    // The rotation of the chart, where the first data arc begins.\n    rotation: 0,\n\n    // The total circumference of the chart.\n    circumference: 360,\n\n    // The outr radius of the chart\n    radius: '100%',\n\n    // Spacing between arcs\n    spacing: 0,\n\n    indexAxis: 'r',\n  };\n\n  static descriptors = {\n    _scriptable: (name) => name !== 'spacing',\n    _indexable: (name) => name !== 'spacing',\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n    aspectRatio: 1,\n\n    // Need to override these to give a nice default\n    plugins: {\n      legend: {\n        labels: {\n          generateLabels(chart) {\n            const data = chart.data;\n            if (data.labels.length && data.datasets.length) {\n              const {labels: {pointStyle, color}} = chart.legend.options;\n\n              return data.labels.map((label, i) => {\n                const meta = chart.getDatasetMeta(0);\n                const style = meta.controller.getStyle(i);\n\n                return {\n                  text: label,\n                  fillStyle: style.backgroundColor,\n                  strokeStyle: style.borderColor,\n                  fontColor: color,\n                  lineWidth: style.borderWidth,\n                  pointStyle: pointStyle,\n                  hidden: !chart.getDataVisibility(i),\n\n                  // Extra data used for toggling the correct item\n                  index: i\n                };\n              });\n            }\n            return [];\n          }\n        },\n\n        onClick(e, legendItem, legend) {\n          legend.chart.toggleDataVisibility(legendItem.index);\n          legend.chart.update();\n        }\n      }\n    }\n  };\n\n  constructor(chart, datasetIndex) {\n    super(chart, datasetIndex);\n\n    this.enableOptionSharing = true;\n    this.innerRadius = undefined;\n    this.outerRadius = undefined;\n    this.offsetX = undefined;\n    this.offsetY = undefined;\n  }\n\n  linkScales() {}\n\n  /**\n\t * Override data parsing, since we are not using scales\n\t */\n  parse(start, count) {\n    const data = this.getDataset().data;\n    const meta = this._cachedMeta;\n\n    if (this._parsing === false) {\n      meta._parsed = data;\n    } else {\n      let getter = (i) => +data[i];\n\n      if (isObject(data[start])) {\n        const {key = 'value'} = this._parsing;\n        getter = (i) => +resolveObjectKey(data[i], key);\n      }\n\n      let i, ilen;\n      for (i = start, ilen = start + count; i < ilen; ++i) {\n        meta._parsed[i] = getter(i);\n      }\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _getRotation() {\n    return toRadians(this.options.rotation - 90);\n  }\n\n  /**\n\t * @private\n\t */\n  _getCircumference() {\n    return toRadians(this.options.circumference);\n  }\n\n  /**\n\t * Get the maximal rotation & circumference extents\n\t * across all visible datasets.\n\t */\n  _getRotationExtents() {\n    let min = TAU;\n    let max = -TAU;\n\n    for (let i = 0; i < this.chart.data.datasets.length; ++i) {\n      if (this.chart.isDatasetVisible(i) && this.chart.getDatasetMeta(i).type === this._type) {\n        const controller = this.chart.getDatasetMeta(i).controller;\n        const rotation = controller._getRotation();\n        const circumference = controller._getCircumference();\n\n        min = Math.min(min, rotation);\n        max = Math.max(max, rotation + circumference);\n      }\n    }\n\n    return {\n      rotation: min,\n      circumference: max - min,\n    };\n  }\n\n  /**\n\t * @param {string} mode\n\t */\n  update(mode) {\n    const chart = this.chart;\n    const {chartArea} = chart;\n    const meta = this._cachedMeta;\n    const arcs = meta.data;\n    const spacing = this.getMaxBorderWidth() + this.getMaxOffset(arcs) + this.options.spacing;\n    const maxSize = Math.max((Math.min(chartArea.width, chartArea.height) - spacing) / 2, 0);\n    const cutout = Math.min(toPercentage(this.options.cutout, maxSize), 1);\n    const chartWeight = this._getRingWeight(this.index);\n\n    // Compute the maximal rotation & circumference limits.\n    // If we only consider our dataset, this can cause problems when two datasets\n    // are both less than a circle with different rotations (starting angles)\n    const {circumference, rotation} = this._getRotationExtents();\n    const {ratioX, ratioY, offsetX, offsetY} = getRatioAndOffset(rotation, circumference, cutout);\n    const maxWidth = (chartArea.width - spacing) / ratioX;\n    const maxHeight = (chartArea.height - spacing) / ratioY;\n    const maxRadius = Math.max(Math.min(maxWidth, maxHeight) / 2, 0);\n    const outerRadius = toDimension(this.options.radius, maxRadius);\n    const innerRadius = Math.max(outerRadius * cutout, 0);\n    const radiusLength = (outerRadius - innerRadius) / this._getVisibleDatasetWeightTotal();\n    this.offsetX = offsetX * outerRadius;\n    this.offsetY = offsetY * outerRadius;\n\n    meta.total = this.calculateTotal();\n\n    this.outerRadius = outerRadius - radiusLength * this._getRingWeightOffset(this.index);\n    this.innerRadius = Math.max(this.outerRadius - radiusLength * chartWeight, 0);\n\n    this.updateElements(arcs, 0, arcs.length, mode);\n  }\n\n  /**\n   * @private\n   */\n  _circumference(i, reset) {\n    const opts = this.options;\n    const meta = this._cachedMeta;\n    const circumference = this._getCircumference();\n    if ((reset && opts.animation.animateRotate) || !this.chart.getDataVisibility(i) || meta._parsed[i] === null || meta.data[i].hidden) {\n      return 0;\n    }\n    return this.calculateCircumference(meta._parsed[i] * circumference / TAU);\n  }\n\n  updateElements(arcs, start, count, mode) {\n    const reset = mode === 'reset';\n    const chart = this.chart;\n    const chartArea = chart.chartArea;\n    const opts = chart.options;\n    const animationOpts = opts.animation;\n    const centerX = (chartArea.left + chartArea.right) / 2;\n    const centerY = (chartArea.top + chartArea.bottom) / 2;\n    const animateScale = reset && animationOpts.animateScale;\n    const innerRadius = animateScale ? 0 : this.innerRadius;\n    const outerRadius = animateScale ? 0 : this.outerRadius;\n    const {sharedOptions, includeOptions} = this._getSharedOptions(start, mode);\n    let startAngle = this._getRotation();\n    let i;\n\n    for (i = 0; i < start; ++i) {\n      startAngle += this._circumference(i, reset);\n    }\n\n    for (i = start; i < start + count; ++i) {\n      const circumference = this._circumference(i, reset);\n      const arc = arcs[i];\n      const properties = {\n        x: centerX + this.offsetX,\n        y: centerY + this.offsetY,\n        startAngle,\n        endAngle: startAngle + circumference,\n        circumference,\n        outerRadius,\n        innerRadius\n      };\n      if (includeOptions) {\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, arc.active ? 'active' : mode);\n      }\n      startAngle += circumference;\n\n      this.updateElement(arc, i, properties, mode);\n    }\n  }\n\n  calculateTotal() {\n    const meta = this._cachedMeta;\n    const metaData = meta.data;\n    let total = 0;\n    let i;\n\n    for (i = 0; i < metaData.length; i++) {\n      const value = meta._parsed[i];\n      if (value !== null && !isNaN(value) && this.chart.getDataVisibility(i) && !metaData[i].hidden) {\n        total += Math.abs(value);\n      }\n    }\n\n    return total;\n  }\n\n  calculateCircumference(value) {\n    const total = this._cachedMeta.total;\n    if (total > 0 && !isNaN(value)) {\n      return TAU * (Math.abs(value) / total);\n    }\n    return 0;\n  }\n\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const chart = this.chart;\n    const labels = chart.data.labels || [];\n    const value = formatNumber(meta._parsed[index], chart.options.locale);\n\n    return {\n      label: labels[index] || '',\n      value,\n    };\n  }\n\n  getMaxBorderWidth(arcs) {\n    let max = 0;\n    const chart = this.chart;\n    let i, ilen, meta, controller, options;\n\n    if (!arcs) {\n      // Find the outmost visible dataset\n      for (i = 0, ilen = chart.data.datasets.length; i < ilen; ++i) {\n        if (chart.isDatasetVisible(i)) {\n          meta = chart.getDatasetMeta(i);\n          arcs = meta.data;\n          controller = meta.controller;\n          break;\n        }\n      }\n    }\n\n    if (!arcs) {\n      return 0;\n    }\n\n    for (i = 0, ilen = arcs.length; i < ilen; ++i) {\n      options = controller.resolveDataElementOptions(i);\n      if (options.borderAlign !== 'inner') {\n        max = Math.max(max, options.borderWidth || 0, options.hoverBorderWidth || 0);\n      }\n    }\n    return max;\n  }\n\n  getMaxOffset(arcs) {\n    let max = 0;\n\n    for (let i = 0, ilen = arcs.length; i < ilen; ++i) {\n      const options = this.resolveDataElementOptions(i);\n      max = Math.max(max, options.offset || 0, options.hoverOffset || 0);\n    }\n    return max;\n  }\n\n  /**\n\t * Get radius length offset of the dataset in relation to the visible datasets weights. This allows determining the inner and outer radius correctly\n\t * @private\n\t */\n  _getRingWeightOffset(datasetIndex) {\n    let ringWeightOffset = 0;\n\n    for (let i = 0; i < datasetIndex; ++i) {\n      if (this.chart.isDatasetVisible(i)) {\n        ringWeightOffset += this._getRingWeight(i);\n      }\n    }\n\n    return ringWeightOffset;\n  }\n\n  /**\n\t * @private\n\t */\n  _getRingWeight(datasetIndex) {\n    return Math.max(valueOrDefault(this.chart.data.datasets[datasetIndex].weight, 1), 0);\n  }\n\n  /**\n\t * Returns the sum of all visible data set weights.\n\t * @private\n\t */\n  _getVisibleDatasetWeightTotal() {\n    return this._getRingWeightOffset(this.chart.data.datasets.length) || 1;\n  }\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {isNullOrUndef} from '../helpers/index.js';\nimport {isNumber} from '../helpers/helpers.math.js';\nimport {_getStartAndCountOfVisiblePoints, _scaleRangesChanged} from '../helpers/helpers.extras.js';\n\nexport default class LineController extends DatasetController {\n\n  static id = 'line';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    datasetElementType: 'line',\n    dataElementType: 'point',\n\n    showLine: true,\n    spanGaps: false,\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n    scales: {\n      _index_: {\n        type: 'category',\n      },\n      _value_: {\n        type: 'linear',\n      },\n    }\n  };\n\n  initialize() {\n    this.enableOptionSharing = true;\n    this.supportsDecimation = true;\n    super.initialize();\n  }\n\n  update(mode) {\n    const meta = this._cachedMeta;\n    const {dataset: line, data: points = [], _dataset} = meta;\n    // @ts-ignore\n    const animationsDisabled = this.chart._animationsDisabled;\n    let {start, count} = _getStartAndCountOfVisiblePoints(meta, points, animationsDisabled);\n\n    this._drawStart = start;\n    this._drawCount = count;\n\n    if (_scaleRangesChanged(meta)) {\n      start = 0;\n      count = points.length;\n    }\n\n    // Update Line\n    line._chart = this.chart;\n    line._datasetIndex = this.index;\n    line._decimated = !!_dataset._decimated;\n    line.points = points;\n\n    const options = this.resolveDatasetElementOptions(mode);\n    if (!this.options.showLine) {\n      options.borderWidth = 0;\n    }\n    options.segment = this.options.segment;\n    this.updateElement(line, undefined, {\n      animated: !animationsDisabled,\n      options\n    }, mode);\n\n    // Update Points\n    this.updateElements(points, start, count, mode);\n  }\n\n  updateElements(points, start, count, mode) {\n    const reset = mode === 'reset';\n    const {iScale, vScale, _stacked, _dataset} = this._cachedMeta;\n    const {sharedOptions, includeOptions} = this._getSharedOptions(start, mode);\n    const iAxis = iScale.axis;\n    const vAxis = vScale.axis;\n    const {spanGaps, segment} = this.options;\n    const maxGapLength = isNumber(spanGaps) ? spanGaps : Number.POSITIVE_INFINITY;\n    const directUpdate = this.chart._animationsDisabled || reset || mode === 'none';\n    const end = start + count;\n    const pointsCount = points.length;\n    let prevParsed = start > 0 && this.getParsed(start - 1);\n\n    for (let i = 0; i < pointsCount; ++i) {\n      const point = points[i];\n      const properties = directUpdate ? point : {};\n\n      if (i < start || i >= end) {\n        properties.skip = true;\n        continue;\n      }\n\n      const parsed = this.getParsed(i);\n      const nullData = isNullOrUndef(parsed[vAxis]);\n      const iPixel = properties[iAxis] = iScale.getPixelForValue(parsed[iAxis], i);\n      const vPixel = properties[vAxis] = reset || nullData ? vScale.getBasePixel() : vScale.getPixelForValue(_stacked ? this.applyStack(vScale, parsed, _stacked) : parsed[vAxis], i);\n\n      properties.skip = isNaN(iPixel) || isNaN(vPixel) || nullData;\n      properties.stop = i > 0 && (Math.abs(parsed[iAxis] - prevParsed[iAxis])) > maxGapLength;\n      if (segment) {\n        properties.parsed = parsed;\n        properties.raw = _dataset.data[i];\n      }\n\n      if (includeOptions) {\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n      }\n\n      if (!directUpdate) {\n        this.updateElement(point, i, properties, mode);\n      }\n\n      prevParsed = parsed;\n    }\n  }\n\n  /**\n\t * @protected\n\t */\n  getMaxOverflow() {\n    const meta = this._cachedMeta;\n    const dataset = meta.dataset;\n    const border = dataset.options && dataset.options.borderWidth || 0;\n    const data = meta.data || [];\n    if (!data.length) {\n      return border;\n    }\n    const firstPoint = data[0].size(this.resolveDataElementOptions(0));\n    const lastPoint = data[data.length - 1].size(this.resolveDataElementOptions(data.length - 1));\n    return Math.max(border, firstPoint, lastPoint) / 2;\n  }\n\n  draw() {\n    const meta = this._cachedMeta;\n    meta.dataset.updateControlPoints(this.chart.chartArea, meta.iScale.axis);\n    super.draw();\n  }\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {toRadians, PI, formatNumber, _parseObjectDataRadialScale} from '../helpers/index.js';\n\nexport default class PolarAreaController extends DatasetController {\n\n  static id = 'polarArea';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    dataElementType: 'arc',\n    animation: {\n      animateRotate: true,\n      animateScale: true\n    },\n    animations: {\n      numbers: {\n        type: 'number',\n        properties: ['x', 'y', 'startAngle', 'endAngle', 'innerRadius', 'outerRadius']\n      },\n    },\n    indexAxis: 'r',\n    startAngle: 0,\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n    aspectRatio: 1,\n\n    plugins: {\n      legend: {\n        labels: {\n          generateLabels(chart) {\n            const data = chart.data;\n            if (data.labels.length && data.datasets.length) {\n              const {labels: {pointStyle, color}} = chart.legend.options;\n\n              return data.labels.map((label, i) => {\n                const meta = chart.getDatasetMeta(0);\n                const style = meta.controller.getStyle(i);\n\n                return {\n                  text: label,\n                  fillStyle: style.backgroundColor,\n                  strokeStyle: style.borderColor,\n                  fontColor: color,\n                  lineWidth: style.borderWidth,\n                  pointStyle: pointStyle,\n                  hidden: !chart.getDataVisibility(i),\n\n                  // Extra data used for toggling the correct item\n                  index: i\n                };\n              });\n            }\n            return [];\n          }\n        },\n\n        onClick(e, legendItem, legend) {\n          legend.chart.toggleDataVisibility(legendItem.index);\n          legend.chart.update();\n        }\n      }\n    },\n\n    scales: {\n      r: {\n        type: 'radialLinear',\n        angleLines: {\n          display: false\n        },\n        beginAtZero: true,\n        grid: {\n          circular: true\n        },\n        pointLabels: {\n          display: false\n        },\n        startAngle: 0\n      }\n    }\n  };\n\n  constructor(chart, datasetIndex) {\n    super(chart, datasetIndex);\n\n    this.innerRadius = undefined;\n    this.outerRadius = undefined;\n  }\n\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const chart = this.chart;\n    const labels = chart.data.labels || [];\n    const value = formatNumber(meta._parsed[index].r, chart.options.locale);\n\n    return {\n      label: labels[index] || '',\n      value,\n    };\n  }\n\n  parseObjectData(meta, data, start, count) {\n    return _parseObjectDataRadialScale.bind(this)(meta, data, start, count);\n  }\n\n  update(mode) {\n    const arcs = this._cachedMeta.data;\n\n    this._updateRadius();\n    this.updateElements(arcs, 0, arcs.length, mode);\n  }\n\n  /**\n   * @protected\n   */\n  getMinMax() {\n    const meta = this._cachedMeta;\n    const range = {min: Number.POSITIVE_INFINITY, max: Number.NEGATIVE_INFINITY};\n\n    meta.data.forEach((element, index) => {\n      const parsed = this.getParsed(index).r;\n\n      if (!isNaN(parsed) && this.chart.getDataVisibility(index)) {\n        if (parsed < range.min) {\n          range.min = parsed;\n        }\n\n        if (parsed > range.max) {\n          range.max = parsed;\n        }\n      }\n    });\n\n    return range;\n  }\n\n  /**\n\t * @private\n\t */\n  _updateRadius() {\n    const chart = this.chart;\n    const chartArea = chart.chartArea;\n    const opts = chart.options;\n    const minSize = Math.min(chartArea.right - chartArea.left, chartArea.bottom - chartArea.top);\n\n    const outerRadius = Math.max(minSize / 2, 0);\n    const innerRadius = Math.max(opts.cutoutPercentage ? (outerRadius / 100) * (opts.cutoutPercentage) : 1, 0);\n    const radiusLength = (outerRadius - innerRadius) / chart.getVisibleDatasetCount();\n\n    this.outerRadius = outerRadius - (radiusLength * this.index);\n    this.innerRadius = this.outerRadius - radiusLength;\n  }\n\n  updateElements(arcs, start, count, mode) {\n    const reset = mode === 'reset';\n    const chart = this.chart;\n    const opts = chart.options;\n    const animationOpts = opts.animation;\n    const scale = this._cachedMeta.rScale;\n    const centerX = scale.xCenter;\n    const centerY = scale.yCenter;\n    const datasetStartAngle = scale.getIndexAngle(0) - 0.5 * PI;\n    let angle = datasetStartAngle;\n    let i;\n\n    const defaultAngle = 360 / this.countVisibleElements();\n\n    for (i = 0; i < start; ++i) {\n      angle += this._computeAngle(i, mode, defaultAngle);\n    }\n    for (i = start; i < start + count; i++) {\n      const arc = arcs[i];\n      let startAngle = angle;\n      let endAngle = angle + this._computeAngle(i, mode, defaultAngle);\n      let outerRadius = chart.getDataVisibility(i) ? scale.getDistanceFromCenterForValue(this.getParsed(i).r) : 0;\n      angle = endAngle;\n\n      if (reset) {\n        if (animationOpts.animateScale) {\n          outerRadius = 0;\n        }\n        if (animationOpts.animateRotate) {\n          startAngle = endAngle = datasetStartAngle;\n        }\n      }\n\n      const properties = {\n        x: centerX,\n        y: centerY,\n        innerRadius: 0,\n        outerRadius,\n        startAngle,\n        endAngle,\n        options: this.resolveDataElementOptions(i, arc.active ? 'active' : mode)\n      };\n\n      this.updateElement(arc, i, properties, mode);\n    }\n  }\n\n  countVisibleElements() {\n    const meta = this._cachedMeta;\n    let count = 0;\n\n    meta.data.forEach((element, index) => {\n      if (!isNaN(this.getParsed(index).r) && this.chart.getDataVisibility(index)) {\n        count++;\n      }\n    });\n\n    return count;\n  }\n\n  /**\n\t * @private\n\t */\n  _computeAngle(index, mode, defaultAngle) {\n    return this.chart.getDataVisibility(index)\n      ? toRadians(this.resolveDataElementOptions(index, mode).angle || defaultAngle)\n      : 0;\n  }\n}\n","import DoughnutController from './controller.doughnut.js';\n\n// Pie charts are Doughnut chart with different defaults\nexport default class PieController extends DoughnutController {\n\n  static id = 'pie';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    // The percentage of the chart that we cut out of the middle.\n    cutout: 0,\n\n    // The rotation of the chart, where the first data arc begins.\n    rotation: 0,\n\n    // The total circumference of the chart.\n    circumference: 360,\n\n    // The outr radius of the chart\n    radius: '100%'\n  };\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {_parseObjectDataRadialScale} from '../helpers/index.js';\n\nexport default class RadarController extends DatasetController {\n\n  static id = 'radar';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    datasetElementType: 'line',\n    dataElementType: 'point',\n    indexAxis: 'r',\n    showLine: true,\n    elements: {\n      line: {\n        fill: 'start'\n      }\n    },\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n    aspectRatio: 1,\n\n    scales: {\n      r: {\n        type: 'radialLinear',\n      }\n    }\n  };\n\n  /**\n\t * @protected\n\t */\n  getLabelAndValue(index) {\n    const vScale = this._cachedMeta.vScale;\n    const parsed = this.getParsed(index);\n\n    return {\n      label: vScale.getLabels()[index],\n      value: '' + vScale.getLabelForValue(parsed[vScale.axis])\n    };\n  }\n\n  parseObjectData(meta, data, start, count) {\n    return _parseObjectDataRadialScale.bind(this)(meta, data, start, count);\n  }\n\n  update(mode) {\n    const meta = this._cachedMeta;\n    const line = meta.dataset;\n    const points = meta.data || [];\n    const labels = meta.iScale.getLabels();\n\n    // Update Line\n    line.points = points;\n    // In resize mode only point locations change, so no need to set the points or options.\n    if (mode !== 'resize') {\n      const options = this.resolveDatasetElementOptions(mode);\n      if (!this.options.showLine) {\n        options.borderWidth = 0;\n      }\n\n      const properties = {\n        _loop: true,\n        _fullLoop: labels.length === points.length,\n        options\n      };\n\n      this.updateElement(line, undefined, properties, mode);\n    }\n\n    // Update Points\n    this.updateElements(points, 0, points.length, mode);\n  }\n\n  updateElements(points, start, count, mode) {\n    const scale = this._cachedMeta.rScale;\n    const reset = mode === 'reset';\n\n    for (let i = start; i < start + count; i++) {\n      const point = points[i];\n      const options = this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n      const pointPosition = scale.getPointPositionForValue(i, this.getParsed(i).r);\n\n      const x = reset ? scale.xCenter : pointPosition.x;\n      const y = reset ? scale.yCenter : pointPosition.y;\n\n      const properties = {\n        x,\n        y,\n        angle: pointPosition.angle,\n        skip: isNaN(x) || isNaN(y),\n        options\n      };\n\n      this.updateElement(point, i, properties, mode);\n    }\n  }\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {isNullOrUndef} from '../helpers/index.js';\nimport {isNumber} from '../helpers/helpers.math.js';\nimport {_getStartAndCountOfVisiblePoints, _scaleRangesChanged} from '../helpers/helpers.extras.js';\n\nexport default class ScatterController extends DatasetController {\n\n  static id = 'scatter';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    datasetElementType: false,\n    dataElementType: 'point',\n    showLine: false,\n    fill: false\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n\n    interaction: {\n      mode: 'point'\n    },\n\n    scales: {\n      x: {\n        type: 'linear'\n      },\n      y: {\n        type: 'linear'\n      }\n    }\n  };\n\n  /**\n\t * @protected\n\t */\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const labels = this.chart.data.labels || [];\n    const {xScale, yScale} = meta;\n    const parsed = this.getParsed(index);\n    const x = xScale.getLabelForValue(parsed.x);\n    const y = yScale.getLabelForValue(parsed.y);\n\n    return {\n      label: labels[index] || '',\n      value: '(' + x + ', ' + y + ')'\n    };\n  }\n\n  update(mode) {\n    const meta = this._cachedMeta;\n    const {data: points = []} = meta;\n    // @ts-ignore\n    const animationsDisabled = this.chart._animationsDisabled;\n    let {start, count} = _getStartAndCountOfVisiblePoints(meta, points, animationsDisabled);\n\n    this._drawStart = start;\n    this._drawCount = count;\n\n    if (_scaleRangesChanged(meta)) {\n      start = 0;\n      count = points.length;\n    }\n\n    if (this.options.showLine) {\n\n      const {dataset: line, _dataset} = meta;\n\n      // Update Line\n      line._chart = this.chart;\n      line._datasetIndex = this.index;\n      line._decimated = !!_dataset._decimated;\n      line.points = points;\n\n      const options = this.resolveDatasetElementOptions(mode);\n      options.segment = this.options.segment;\n      this.updateElement(line, undefined, {\n        animated: !animationsDisabled,\n        options\n      }, mode);\n    }\n\n    // Update Points\n    this.updateElements(points, start, count, mode);\n  }\n\n  addElements() {\n    const {showLine} = this.options;\n\n    if (!this.datasetElementType && showLine) {\n      this.datasetElementType = this.chart.registry.getElement('line');\n    }\n\n    super.addElements();\n  }\n\n  updateElements(points, start, count, mode) {\n    const reset = mode === 'reset';\n    const {iScale, vScale, _stacked, _dataset} = this._cachedMeta;\n    const firstOpts = this.resolveDataElementOptions(start, mode);\n    const sharedOptions = this.getSharedOptions(firstOpts);\n    const includeOptions = this.includeOptions(mode, sharedOptions);\n    const iAxis = iScale.axis;\n    const vAxis = vScale.axis;\n    const {spanGaps, segment} = this.options;\n    const maxGapLength = isNumber(spanGaps) ? spanGaps : Number.POSITIVE_INFINITY;\n    const directUpdate = this.chart._animationsDisabled || reset || mode === 'none';\n    let prevParsed = start > 0 && this.getParsed(start - 1);\n\n    for (let i = start; i < start + count; ++i) {\n      const point = points[i];\n      const parsed = this.getParsed(i);\n      const properties = directUpdate ? point : {};\n      const nullData = isNullOrUndef(parsed[vAxis]);\n      const iPixel = properties[iAxis] = iScale.getPixelForValue(parsed[iAxis], i);\n      const vPixel = properties[vAxis] = reset || nullData ? vScale.getBasePixel() : vScale.getPixelForValue(_stacked ? this.applyStack(vScale, parsed, _stacked) : parsed[vAxis], i);\n\n      properties.skip = isNaN(iPixel) || isNaN(vPixel) || nullData;\n      properties.stop = i > 0 && (Math.abs(parsed[iAxis] - prevParsed[iAxis])) > maxGapLength;\n      if (segment) {\n        properties.parsed = parsed;\n        properties.raw = _dataset.data[i];\n      }\n\n      if (includeOptions) {\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n      }\n\n      if (!directUpdate) {\n        this.updateElement(point, i, properties, mode);\n      }\n\n      prevParsed = parsed;\n    }\n\n    this.updateSharedOptions(sharedOptions, mode, firstOpts);\n  }\n\n  /**\n\t * @protected\n\t */\n  getMaxOverflow() {\n    const meta = this._cachedMeta;\n    const data = meta.data || [];\n\n    if (!this.options.showLine) {\n      let max = 0;\n      for (let i = data.length - 1; i >= 0; --i) {\n        max = Math.max(max, data[i].size(this.resolveDataElementOptions(i)) / 2);\n      }\n      return max > 0 && max;\n    }\n\n    const dataset = meta.dataset;\n    const border = dataset.options && dataset.options.borderWidth || 0;\n\n    if (!data.length) {\n      return border;\n    }\n\n    const firstPoint = data[0].size(this.resolveDataElementOptions(0));\n    const lastPoint = data[data.length - 1].size(this.resolveDataElementOptions(data.length - 1));\n    return Math.max(border, firstPoint, lastPoint) / 2;\n  }\n}\n","/**\n * @namespace Chart._adapters\n * @since 2.8.0\n * @private\n */\n\nimport type {AnyObject} from '../types/basic.js';\nimport type {ChartOptions} from '../types/index.js';\n\nexport type TimeUnit = 'millisecond' | 'second' | 'minute' | 'hour' | 'day' | 'week' | 'month' | 'quarter' | 'year';\n\nexport interface DateAdapter<T extends AnyObject = AnyObject> {\n  readonly options: T;\n  /**\n   * Will called with chart options after adapter creation.\n   */\n  init(this: DateAdapter<T>, chartOptions: ChartOptions): void;\n  /**\n   * Returns a map of time formats for the supported formatting units defined\n   * in Unit as well as 'datetime' representing a detailed date/time string.\n   */\n  formats(this: DateAdapter<T>): Record<string, string>;\n  /**\n   * Parses the given `value` and return the associated timestamp.\n   * @param value - the value to parse (usually comes from the data)\n   * @param [format] - the expected data format\n   */\n  parse(this: DateAdapter<T>, value: unknown, format?: TimeUnit): number | null;\n  /**\n   * Returns the formatted date in the specified `format` for a given `timestamp`.\n   * @param timestamp - the timestamp to format\n   * @param format - the date/time token\n   */\n  format(this: DateAdapter<T>, timestamp: number, format: TimeUnit): string;\n  /**\n   * Adds the specified `amount` of `unit` to the given `timestamp`.\n   * @param timestamp - the input timestamp\n   * @param amount - the amount to add\n   * @param unit - the unit as string\n   */\n  add(this: DateAdapter<T>, timestamp: number, amount: number, unit: TimeUnit): number;\n  /**\n   * Returns the number of `unit` between the given timestamps.\n   * @param a - the input timestamp (reference)\n   * @param b - the timestamp to subtract\n   * @param unit - the unit as string\n   */\n  diff(this: DateAdapter<T>, a: number, b: number, unit: TimeUnit): number;\n  /**\n   * Returns start of `unit` for the given `timestamp`.\n   * @param timestamp - the input timestamp\n   * @param unit - the unit as string\n   * @param [weekday] - the ISO day of the week with 1 being Monday\n   * and 7 being Sunday (only needed if param *unit* is `isoWeek`).\n   */\n  startOf(this: DateAdapter<T>, timestamp: number, unit: TimeUnit | 'isoWeek', weekday?: number): number;\n  /**\n   * Returns end of `unit` for the given `timestamp`.\n   * @param timestamp - the input timestamp\n   * @param unit - the unit as string\n   */\n  endOf(this: DateAdapter<T>, timestamp: number, unit: TimeUnit | 'isoWeek'): number;\n}\n\nfunction abstract<T = void>(): T {\n  throw new Error('This method is not implemented: Check that a complete date adapter is provided.');\n}\n\n/**\n * Date adapter (current used by the time scale)\n * @namespace Chart._adapters._date\n * @memberof Chart._adapters\n * @private\n */\nclass DateAdapterBase implements DateAdapter {\n\n  /**\n   * Override default date adapter methods.\n   * Accepts type parameter to define options type.\n   * @example\n   * Chart._adapters._date.override<{myAdapterOption: string}>({\n   *   init() {\n   *     console.log(this.options.myAdapterOption);\n   *   }\n   * })\n   */\n  static override<T extends AnyObject = AnyObject>(\n    members: Partial<Omit<DateAdapter<T>, 'options'>>\n  ) {\n    Object.assign(DateAdapterBase.prototype, members);\n  }\n\n  readonly options: AnyObject;\n\n  constructor(options: AnyObject) {\n    this.options = options || {};\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  init() {}\n\n  formats(): Record<string, string> {\n    return abstract();\n  }\n\n  parse(): number | null {\n    return abstract();\n  }\n\n  format(): string {\n    return abstract();\n  }\n\n  add(): number {\n    return abstract();\n  }\n\n  diff(): number {\n    return abstract();\n  }\n\n  startOf(): number {\n    return abstract();\n  }\n\n  endOf(): number {\n    return abstract();\n  }\n}\n\nexport default {\n  _date: DateAdapterBase\n};\n","import {_lookupByKey, _rlookupByKey} from '../helpers/helpers.collection.js';\nimport {getRelativePosition} from '../helpers/helpers.dom.js';\nimport {_angleBetween, getAngleFromPoint} from '../helpers/helpers.math.js';\nimport {_isPointInArea} from '../helpers/index.js';\n\n/**\n * @typedef { import('./core.controller.js').default } Chart\n * @typedef { import('../types/index.js').ChartEvent } ChartEvent\n * @typedef {{axis?: string, intersect?: boolean, includeInvisible?: boolean}} InteractionOptions\n * @typedef {{datasetIndex: number, index: number, element: import('./core.element.js').default}} InteractionItem\n * @typedef { import('../types/index.js').Point } Point\n */\n\n/**\n * Helper function to do binary search when possible\n * @param {object} metaset - the dataset meta\n * @param {string} axis - the axis mode. x|y|xy|r\n * @param {number} value - the value to find\n * @param {boolean} [intersect] - should the element intersect\n * @returns {{lo:number, hi:number}} indices to search data array between\n */\nfunction binarySearch(metaset, axis, value, intersect) {\n  const {controller, data, _sorted} = metaset;\n  const iScale = controller._cachedMeta.iScale;\n  if (iScale && axis === iScale.axis && axis !== 'r' && _sorted && data.length) {\n    const lookupMethod = iScale._reversePixels ? _rlookupByKey : _lookupByKey;\n    if (!intersect) {\n      return lookupMethod(data, axis, value);\n    } else if (controller._sharedOptions) {\n      // _sharedOptions indicates that each element has equal options -> equal proportions\n      // So we can do a ranged binary search based on the range of first element and\n      // be confident to get the full range of indices that can intersect with the value.\n      const el = data[0];\n      const range = typeof el.getRange === 'function' && el.getRange(axis);\n      if (range) {\n        const start = lookupMethod(data, axis, value - range);\n        const end = lookupMethod(data, axis, value + range);\n        return {lo: start.lo, hi: end.hi};\n      }\n    }\n  }\n  // Default to all elements, when binary search can not be used.\n  return {lo: 0, hi: data.length - 1};\n}\n\n/**\n * Helper function to select candidate elements for interaction\n * @param {Chart} chart - the chart\n * @param {string} axis - the axis mode. x|y|xy|r\n * @param {Point} position - the point to be nearest to, in relative coordinates\n * @param {function} handler - the callback to execute for each visible item\n * @param {boolean} [intersect] - consider intersecting items\n */\nfunction evaluateInteractionItems(chart, axis, position, handler, intersect) {\n  const metasets = chart.getSortedVisibleDatasetMetas();\n  const value = position[axis];\n  for (let i = 0, ilen = metasets.length; i < ilen; ++i) {\n    const {index, data} = metasets[i];\n    const {lo, hi} = binarySearch(metasets[i], axis, value, intersect);\n    for (let j = lo; j <= hi; ++j) {\n      const element = data[j];\n      if (!element.skip) {\n        handler(element, index, j);\n      }\n    }\n  }\n}\n\n/**\n * Get a distance metric function for two points based on the\n * axis mode setting\n * @param {string} axis - the axis mode. x|y|xy|r\n */\nfunction getDistanceMetricForAxis(axis) {\n  const useX = axis.indexOf('x') !== -1;\n  const useY = axis.indexOf('y') !== -1;\n\n  return function(pt1, pt2) {\n    const deltaX = useX ? Math.abs(pt1.x - pt2.x) : 0;\n    const deltaY = useY ? Math.abs(pt1.y - pt2.y) : 0;\n    return Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2));\n  };\n}\n\n/**\n * Helper function to get the items that intersect the event position\n * @param {Chart} chart - the chart\n * @param {Point} position - the point to be nearest to, in relative coordinates\n * @param {string} axis - the axis mode. x|y|xy|r\n * @param {boolean} [useFinalPosition] - use the element's animation target instead of current position\n * @param {boolean} [includeInvisible] - include invisible points that are outside of the chart area\n * @return {InteractionItem[]} the nearest items\n */\nfunction getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible) {\n  const items = [];\n\n  if (!includeInvisible && !chart.isPointInArea(position)) {\n    return items;\n  }\n\n  const evaluationFunc = function(element, datasetIndex, index) {\n    if (!includeInvisible && !_isPointInArea(element, chart.chartArea, 0)) {\n      return;\n    }\n    if (element.inRange(position.x, position.y, useFinalPosition)) {\n      items.push({element, datasetIndex, index});\n    }\n  };\n\n  evaluateInteractionItems(chart, axis, position, evaluationFunc, true);\n  return items;\n}\n\n/**\n * Helper function to get the items nearest to the event position for a radial chart\n * @param {Chart} chart - the chart to look at elements from\n * @param {Point} position - the point to be nearest to, in relative coordinates\n * @param {string} axis - the axes along which to measure distance\n * @param {boolean} [useFinalPosition] - use the element's animation target instead of current position\n * @return {InteractionItem[]} the nearest items\n */\nfunction getNearestRadialItems(chart, position, axis, useFinalPosition) {\n  let items = [];\n\n  function evaluationFunc(element, datasetIndex, index) {\n    const {startAngle, endAngle} = element.getProps(['startAngle', 'endAngle'], useFinalPosition);\n    const {angle} = getAngleFromPoint(element, {x: position.x, y: position.y});\n\n    if (_angleBetween(angle, startAngle, endAngle)) {\n      items.push({element, datasetIndex, index});\n    }\n  }\n\n  evaluateInteractionItems(chart, axis, position, evaluationFunc);\n  return items;\n}\n\n/**\n * Helper function to get the items nearest to the event position for a cartesian chart\n * @param {Chart} chart - the chart to look at elements from\n * @param {Point} position - the point to be nearest to, in relative coordinates\n * @param {string} axis - the axes along which to measure distance\n * @param {boolean} [intersect] - if true, only consider items that intersect the position\n * @param {boolean} [useFinalPosition] - use the element's animation target instead of current position\n * @param {boolean} [includeInvisible] - include invisible points that are outside of the chart area\n * @return {InteractionItem[]} the nearest items\n */\nfunction getNearestCartesianItems(chart, position, axis, intersect, useFinalPosition, includeInvisible) {\n  let items = [];\n  const distanceMetric = getDistanceMetricForAxis(axis);\n  let minDistance = Number.POSITIVE_INFINITY;\n\n  function evaluationFunc(element, datasetIndex, index) {\n    const inRange = element.inRange(position.x, position.y, useFinalPosition);\n    if (intersect && !inRange) {\n      return;\n    }\n\n    const center = element.getCenterPoint(useFinalPosition);\n    const pointInArea = !!includeInvisible || chart.isPointInArea(center);\n    if (!pointInArea && !inRange) {\n      return;\n    }\n\n    const distance = distanceMetric(position, center);\n    if (distance < minDistance) {\n      items = [{element, datasetIndex, index}];\n      minDistance = distance;\n    } else if (distance === minDistance) {\n      // Can have multiple items at the same distance in which case we sort by size\n      items.push({element, datasetIndex, index});\n    }\n  }\n\n  evaluateInteractionItems(chart, axis, position, evaluationFunc);\n  return items;\n}\n\n/**\n * Helper function to get the items nearest to the event position considering all visible items in the chart\n * @param {Chart} chart - the chart to look at elements from\n * @param {Point} position - the point to be nearest to, in relative coordinates\n * @param {string} axis - the axes along which to measure distance\n * @param {boolean} [intersect] - if true, only consider items that intersect the position\n * @param {boolean} [useFinalPosition] - use the element's animation target instead of current position\n * @param {boolean} [includeInvisible] - include invisible points that are outside of the chart area\n * @return {InteractionItem[]} the nearest items\n */\nfunction getNearestItems(chart, position, axis, intersect, useFinalPosition, includeInvisible) {\n  if (!includeInvisible && !chart.isPointInArea(position)) {\n    return [];\n  }\n\n  return axis === 'r' && !intersect\n    ? getNearestRadialItems(chart, position, axis, useFinalPosition)\n    : getNearestCartesianItems(chart, position, axis, intersect, useFinalPosition, includeInvisible);\n}\n\n/**\n * Helper function to get the items matching along the given X or Y axis\n * @param {Chart} chart - the chart to look at elements from\n * @param {Point} position - the point to be nearest to, in relative coordinates\n * @param {string} axis - the axis to match\n * @param {boolean} [intersect] - if true, only consider items that intersect the position\n * @param {boolean} [useFinalPosition] - use the element's animation target instead of current position\n * @return {InteractionItem[]} the nearest items\n */\nfunction getAxisItems(chart, position, axis, intersect, useFinalPosition) {\n  const items = [];\n  const rangeMethod = axis === 'x' ? 'inXRange' : 'inYRange';\n  let intersectsItem = false;\n\n  evaluateInteractionItems(chart, axis, position, (element, datasetIndex, index) => {\n    if (element[rangeMethod](position[axis], useFinalPosition)) {\n      items.push({element, datasetIndex, index});\n      intersectsItem = intersectsItem || element.inRange(position.x, position.y, useFinalPosition);\n    }\n  });\n\n  // If we want to trigger on an intersect and we don't have any items\n  // that intersect the position, return nothing\n  if (intersect && !intersectsItem) {\n    return [];\n  }\n  return items;\n}\n\n/**\n * Contains interaction related functions\n * @namespace Chart.Interaction\n */\nexport default {\n  // Part of the public API to facilitate developers creating their own modes\n  evaluateInteractionItems,\n\n  // Helper function for different modes\n  modes: {\n    /**\n\t\t * Returns items at the same index. If the options.intersect parameter is true, we only return items if we intersect something\n\t\t * If the options.intersect mode is false, we find the nearest item and return the items at the same index as that item\n\t\t * @function Chart.Interaction.modes.index\n\t\t * @since v2.4.0\n\t\t * @param {Chart} chart - the chart we are returning items from\n\t\t * @param {Event} e - the event we are find things at\n\t\t * @param {InteractionOptions} options - options to use\n\t\t * @param {boolean} [useFinalPosition] - use final element position (animation target)\n\t\t * @return {InteractionItem[]} - items that are found\n\t\t */\n    index(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      // Default axis for index mode is 'x' to match old behaviour\n      const axis = options.axis || 'x';\n      const includeInvisible = options.includeInvisible || false;\n      const items = options.intersect\n        ? getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible)\n        : getNearestItems(chart, position, axis, false, useFinalPosition, includeInvisible);\n      const elements = [];\n\n      if (!items.length) {\n        return [];\n      }\n\n      chart.getSortedVisibleDatasetMetas().forEach((meta) => {\n        const index = items[0].index;\n        const element = meta.data[index];\n\n        // don't count items that are skipped (null data)\n        if (element && !element.skip) {\n          elements.push({element, datasetIndex: meta.index, index});\n        }\n      });\n\n      return elements;\n    },\n\n    /**\n\t\t * Returns items in the same dataset. If the options.intersect parameter is true, we only return items if we intersect something\n\t\t * If the options.intersect is false, we find the nearest item and return the items in that dataset\n\t\t * @function Chart.Interaction.modes.dataset\n\t\t * @param {Chart} chart - the chart we are returning items from\n\t\t * @param {Event} e - the event we are find things at\n\t\t * @param {InteractionOptions} options - options to use\n\t\t * @param {boolean} [useFinalPosition] - use final element position (animation target)\n\t\t * @return {InteractionItem[]} - items that are found\n\t\t */\n    dataset(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      const axis = options.axis || 'xy';\n      const includeInvisible = options.includeInvisible || false;\n      let items = options.intersect\n        ? getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible) :\n        getNearestItems(chart, position, axis, false, useFinalPosition, includeInvisible);\n\n      if (items.length > 0) {\n        const datasetIndex = items[0].datasetIndex;\n        const data = chart.getDatasetMeta(datasetIndex).data;\n        items = [];\n        for (let i = 0; i < data.length; ++i) {\n          items.push({element: data[i], datasetIndex, index: i});\n        }\n      }\n\n      return items;\n    },\n\n    /**\n\t\t * Point mode returns all elements that hit test based on the event position\n\t\t * of the event\n\t\t * @function Chart.Interaction.modes.intersect\n\t\t * @param {Chart} chart - the chart we are returning items from\n\t\t * @param {Event} e - the event we are find things at\n\t\t * @param {InteractionOptions} options - options to use\n\t\t * @param {boolean} [useFinalPosition] - use final element position (animation target)\n\t\t * @return {InteractionItem[]} - items that are found\n\t\t */\n    point(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      const axis = options.axis || 'xy';\n      const includeInvisible = options.includeInvisible || false;\n      return getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible);\n    },\n\n    /**\n\t\t * nearest mode returns the element closest to the point\n\t\t * @function Chart.Interaction.modes.intersect\n\t\t * @param {Chart} chart - the chart we are returning items from\n\t\t * @param {Event} e - the event we are find things at\n\t\t * @param {InteractionOptions} options - options to use\n\t\t * @param {boolean} [useFinalPosition] - use final element position (animation target)\n\t\t * @return {InteractionItem[]} - items that are found\n\t\t */\n    nearest(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      const axis = options.axis || 'xy';\n      const includeInvisible = options.includeInvisible || false;\n      return getNearestItems(chart, position, axis, options.intersect, useFinalPosition, includeInvisible);\n    },\n\n    /**\n\t\t * x mode returns the elements that hit-test at the current x coordinate\n\t\t * @function Chart.Interaction.modes.x\n\t\t * @param {Chart} chart - the chart we are returning items from\n\t\t * @param {Event} e - the event we are find things at\n\t\t * @param {InteractionOptions} options - options to use\n\t\t * @param {boolean} [useFinalPosition] - use final element position (animation target)\n\t\t * @return {InteractionItem[]} - items that are found\n\t\t */\n    x(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      return getAxisItems(chart, position, 'x', options.intersect, useFinalPosition);\n    },\n\n    /**\n\t\t * y mode returns the elements that hit-test at the current y coordinate\n\t\t * @function Chart.Interaction.modes.y\n\t\t * @param {Chart} chart - the chart we are returning items from\n\t\t * @param {Event} e - the event we are find things at\n\t\t * @param {InteractionOptions} options - options to use\n\t\t * @param {boolean} [useFinalPosition] - use final element position (animation target)\n\t\t * @return {InteractionItem[]} - items that are found\n\t\t */\n    y(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      return getAxisItems(chart, position, 'y', options.intersect, useFinalPosition);\n    }\n  }\n};\n","import {defined, each, isObject} from '../helpers/helpers.core.js';\nimport {toPadding} from '../helpers/helpers.options.js';\n\n/**\n * @typedef { import('./core.controller.js').default } Chart\n */\n\nconst STATIC_POSITIONS = ['left', 'top', 'right', 'bottom'];\n\nfunction filterByPosition(array, position) {\n  return array.filter(v => v.pos === position);\n}\n\nfunction filterDynamicPositionByAxis(array, axis) {\n  return array.filter(v => STATIC_POSITIONS.indexOf(v.pos) === -1 && v.box.axis === axis);\n}\n\nfunction sortByWeight(array, reverse) {\n  return array.sort((a, b) => {\n    const v0 = reverse ? b : a;\n    const v1 = reverse ? a : b;\n    return v0.weight === v1.weight ?\n      v0.index - v1.index :\n      v0.weight - v1.weight;\n  });\n}\n\nfunction wrapBoxes(boxes) {\n  const layoutBoxes = [];\n  let i, ilen, box, pos, stack, stackWeight;\n\n  for (i = 0, ilen = (boxes || []).length; i < ilen; ++i) {\n    box = boxes[i];\n    ({position: pos, options: {stack, stackWeight = 1}} = box);\n    layoutBoxes.push({\n      index: i,\n      box,\n      pos,\n      horizontal: box.isHorizontal(),\n      weight: box.weight,\n      stack: stack && (pos + stack),\n      stackWeight\n    });\n  }\n  return layoutBoxes;\n}\n\nfunction buildStacks(layouts) {\n  const stacks = {};\n  for (const wrap of layouts) {\n    const {stack, pos, stackWeight} = wrap;\n    if (!stack || !STATIC_POSITIONS.includes(pos)) {\n      continue;\n    }\n    const _stack = stacks[stack] || (stacks[stack] = {count: 0, placed: 0, weight: 0, size: 0});\n    _stack.count++;\n    _stack.weight += stackWeight;\n  }\n  return stacks;\n}\n\n/**\n * store dimensions used instead of available chartArea in fitBoxes\n **/\nfunction setLayoutDims(layouts, params) {\n  const stacks = buildStacks(layouts);\n  const {vBoxMaxWidth, hBoxMaxHeight} = params;\n  let i, ilen, layout;\n  for (i = 0, ilen = layouts.length; i < ilen; ++i) {\n    layout = layouts[i];\n    const {fullSize} = layout.box;\n    const stack = stacks[layout.stack];\n    const factor = stack && layout.stackWeight / stack.weight;\n    if (layout.horizontal) {\n      layout.width = factor ? factor * vBoxMaxWidth : fullSize && params.availableWidth;\n      layout.height = hBoxMaxHeight;\n    } else {\n      layout.width = vBoxMaxWidth;\n      layout.height = factor ? factor * hBoxMaxHeight : fullSize && params.availableHeight;\n    }\n  }\n  return stacks;\n}\n\nfunction buildLayoutBoxes(boxes) {\n  const layoutBoxes = wrapBoxes(boxes);\n  const fullSize = sortByWeight(layoutBoxes.filter(wrap => wrap.box.fullSize), true);\n  const left = sortByWeight(filterByPosition(layoutBoxes, 'left'), true);\n  const right = sortByWeight(filterByPosition(layoutBoxes, 'right'));\n  const top = sortByWeight(filterByPosition(layoutBoxes, 'top'), true);\n  const bottom = sortByWeight(filterByPosition(layoutBoxes, 'bottom'));\n  const centerHorizontal = filterDynamicPositionByAxis(layoutBoxes, 'x');\n  const centerVertical = filterDynamicPositionByAxis(layoutBoxes, 'y');\n\n  return {\n    fullSize,\n    leftAndTop: left.concat(top),\n    rightAndBottom: right.concat(centerVertical).concat(bottom).concat(centerHorizontal),\n    chartArea: filterByPosition(layoutBoxes, 'chartArea'),\n    vertical: left.concat(right).concat(centerVertical),\n    horizontal: top.concat(bottom).concat(centerHorizontal)\n  };\n}\n\nfunction getCombinedMax(maxPadding, chartArea, a, b) {\n  return Math.max(maxPadding[a], chartArea[a]) + Math.max(maxPadding[b], chartArea[b]);\n}\n\nfunction updateMaxPadding(maxPadding, boxPadding) {\n  maxPadding.top = Math.max(maxPadding.top, boxPadding.top);\n  maxPadding.left = Math.max(maxPadding.left, boxPadding.left);\n  maxPadding.bottom = Math.max(maxPadding.bottom, boxPadding.bottom);\n  maxPadding.right = Math.max(maxPadding.right, boxPadding.right);\n}\n\nfunction updateDims(chartArea, params, layout, stacks) {\n  const {pos, box} = layout;\n  const maxPadding = chartArea.maxPadding;\n\n  // dynamically placed boxes size is not considered\n  if (!isObject(pos)) {\n    if (layout.size) {\n      // this layout was already counted for, lets first reduce old size\n      chartArea[pos] -= layout.size;\n    }\n    const stack = stacks[layout.stack] || {size: 0, count: 1};\n    stack.size = Math.max(stack.size, layout.horizontal ? box.height : box.width);\n    layout.size = stack.size / stack.count;\n    chartArea[pos] += layout.size;\n  }\n\n  if (box.getPadding) {\n    updateMaxPadding(maxPadding, box.getPadding());\n  }\n\n  const newWidth = Math.max(0, params.outerWidth - getCombinedMax(maxPadding, chartArea, 'left', 'right'));\n  const newHeight = Math.max(0, params.outerHeight - getCombinedMax(maxPadding, chartArea, 'top', 'bottom'));\n  const widthChanged = newWidth !== chartArea.w;\n  const heightChanged = newHeight !== chartArea.h;\n  chartArea.w = newWidth;\n  chartArea.h = newHeight;\n\n  // return booleans on the changes per direction\n  return layout.horizontal\n    ? {same: widthChanged, other: heightChanged}\n    : {same: heightChanged, other: widthChanged};\n}\n\nfunction handleMaxPadding(chartArea) {\n  const maxPadding = chartArea.maxPadding;\n\n  function updatePos(pos) {\n    const change = Math.max(maxPadding[pos] - chartArea[pos], 0);\n    chartArea[pos] += change;\n    return change;\n  }\n  chartArea.y += updatePos('top');\n  chartArea.x += updatePos('left');\n  updatePos('right');\n  updatePos('bottom');\n}\n\nfunction getMargins(horizontal, chartArea) {\n  const maxPadding = chartArea.maxPadding;\n\n  function marginForPositions(positions) {\n    const margin = {left: 0, top: 0, right: 0, bottom: 0};\n    positions.forEach((pos) => {\n      margin[pos] = Math.max(chartArea[pos], maxPadding[pos]);\n    });\n    return margin;\n  }\n\n  return horizontal\n    ? marginForPositions(['left', 'right'])\n    : marginForPositions(['top', 'bottom']);\n}\n\nfunction fitBoxes(boxes, chartArea, params, stacks) {\n  const refitBoxes = [];\n  let i, ilen, layout, box, refit, changed;\n\n  for (i = 0, ilen = boxes.length, refit = 0; i < ilen; ++i) {\n    layout = boxes[i];\n    box = layout.box;\n\n    box.update(\n      layout.width || chartArea.w,\n      layout.height || chartArea.h,\n      getMargins(layout.horizontal, chartArea)\n    );\n    const {same, other} = updateDims(chartArea, params, layout, stacks);\n\n    // Dimensions changed and there were non full width boxes before this\n    // -> we have to refit those\n    refit |= same && refitBoxes.length;\n\n    // Chart area changed in the opposite direction\n    changed = changed || other;\n\n    if (!box.fullSize) { // fullSize boxes don't need to be re-fitted in any case\n      refitBoxes.push(layout);\n    }\n  }\n\n  return refit && fitBoxes(refitBoxes, chartArea, params, stacks) || changed;\n}\n\nfunction setBoxDims(box, left, top, width, height) {\n  box.top = top;\n  box.left = left;\n  box.right = left + width;\n  box.bottom = top + height;\n  box.width = width;\n  box.height = height;\n}\n\nfunction placeBoxes(boxes, chartArea, params, stacks) {\n  const userPadding = params.padding;\n  let {x, y} = chartArea;\n\n  for (const layout of boxes) {\n    const box = layout.box;\n    const stack = stacks[layout.stack] || {count: 1, placed: 0, weight: 1};\n    const weight = (layout.stackWeight / stack.weight) || 1;\n    if (layout.horizontal) {\n      const width = chartArea.w * weight;\n      const height = stack.size || box.height;\n      if (defined(stack.start)) {\n        y = stack.start;\n      }\n      if (box.fullSize) {\n        setBoxDims(box, userPadding.left, y, params.outerWidth - userPadding.right - userPadding.left, height);\n      } else {\n        setBoxDims(box, chartArea.left + stack.placed, y, width, height);\n      }\n      stack.start = y;\n      stack.placed += width;\n      y = box.bottom;\n    } else {\n      const height = chartArea.h * weight;\n      const width = stack.size || box.width;\n      if (defined(stack.start)) {\n        x = stack.start;\n      }\n      if (box.fullSize) {\n        setBoxDims(box, x, userPadding.top, width, params.outerHeight - userPadding.bottom - userPadding.top);\n      } else {\n        setBoxDims(box, x, chartArea.top + stack.placed, width, height);\n      }\n      stack.start = x;\n      stack.placed += height;\n      x = box.right;\n    }\n  }\n\n  chartArea.x = x;\n  chartArea.y = y;\n}\n\n/**\n * @interface LayoutItem\n * @typedef {object} LayoutItem\n * @prop {string} position - The position of the item in the chart layout. Possible values are\n * 'left', 'top', 'right', 'bottom', and 'chartArea'\n * @prop {number} weight - The weight used to sort the item. Higher weights are further away from the chart area\n * @prop {boolean} fullSize - if true, and the item is horizontal, then push vertical boxes down\n * @prop {function} isHorizontal - returns true if the layout item is horizontal (ie. top or bottom)\n * @prop {function} update - Takes two parameters: width and height. Returns size of item\n * @prop {function} draw - Draws the element\n * @prop {function} [getPadding] -  Returns an object with padding on the edges\n * @prop {number} width - Width of item. Must be valid after update()\n * @prop {number} height - Height of item. Must be valid after update()\n * @prop {number} left - Left edge of the item. Set by layout system and cannot be used in update\n * @prop {number} top - Top edge of the item. Set by layout system and cannot be used in update\n * @prop {number} right - Right edge of the item. Set by layout system and cannot be used in update\n * @prop {number} bottom - Bottom edge of the item. Set by layout system and cannot be used in update\n */\n\n// The layout service is very self explanatory.  It's responsible for the layout within a chart.\n// Scales, Legends and Plugins all rely on the layout service and can easily register to be placed anywhere they need\n// It is this service's responsibility of carrying out that layout.\nexport default {\n\n  /**\n\t * Register a box to a chart.\n\t * A box is simply a reference to an object that requires layout. eg. Scales, Legend, Title.\n\t * @param {Chart} chart - the chart to use\n\t * @param {LayoutItem} item - the item to add to be laid out\n\t */\n  addBox(chart, item) {\n    if (!chart.boxes) {\n      chart.boxes = [];\n    }\n\n    // initialize item with default values\n    item.fullSize = item.fullSize || false;\n    item.position = item.position || 'top';\n    item.weight = item.weight || 0;\n    // @ts-ignore\n    item._layers = item._layers || function() {\n      return [{\n        z: 0,\n        draw(chartArea) {\n          item.draw(chartArea);\n        }\n      }];\n    };\n\n    chart.boxes.push(item);\n  },\n\n  /**\n\t * Remove a layoutItem from a chart\n\t * @param {Chart} chart - the chart to remove the box from\n\t * @param {LayoutItem} layoutItem - the item to remove from the layout\n\t */\n  removeBox(chart, layoutItem) {\n    const index = chart.boxes ? chart.boxes.indexOf(layoutItem) : -1;\n    if (index !== -1) {\n      chart.boxes.splice(index, 1);\n    }\n  },\n\n  /**\n\t * Sets (or updates) options on the given `item`.\n\t * @param {Chart} chart - the chart in which the item lives (or will be added to)\n\t * @param {LayoutItem} item - the item to configure with the given options\n\t * @param {object} options - the new item options.\n\t */\n  configure(chart, item, options) {\n    item.fullSize = options.fullSize;\n    item.position = options.position;\n    item.weight = options.weight;\n  },\n\n  /**\n\t * Fits boxes of the given chart into the given size by having each box measure itself\n\t * then running a fitting algorithm\n\t * @param {Chart} chart - the chart\n\t * @param {number} width - the width to fit into\n\t * @param {number} height - the height to fit into\n   * @param {number} minPadding - minimum padding required for each side of chart area\n\t */\n  update(chart, width, height, minPadding) {\n    if (!chart) {\n      return;\n    }\n\n    const padding = toPadding(chart.options.layout.padding);\n    const availableWidth = Math.max(width - padding.width, 0);\n    const availableHeight = Math.max(height - padding.height, 0);\n    const boxes = buildLayoutBoxes(chart.boxes);\n    const verticalBoxes = boxes.vertical;\n    const horizontalBoxes = boxes.horizontal;\n\n    // Before any changes are made, notify boxes that an update is about to being\n    // This is used to clear any cached data (e.g. scale limits)\n    each(chart.boxes, box => {\n      if (typeof box.beforeLayout === 'function') {\n        box.beforeLayout();\n      }\n    });\n\n    // Essentially we now have any number of boxes on each of the 4 sides.\n    // Our canvas looks like the following.\n    // The areas L1 and L2 are the left axes. R1 is the right axis, T1 is the top axis and\n    // B1 is the bottom axis\n    // There are also 4 quadrant-like locations (left to right instead of clockwise) reserved for chart overlays\n    // These locations are single-box locations only, when trying to register a chartArea location that is already taken,\n    // an error will be thrown.\n    //\n    // |----------------------------------------------------|\n    // |                  T1 (Full Width)                   |\n    // |----------------------------------------------------|\n    // |    |    |                 T2                  |    |\n    // |    |----|-------------------------------------|----|\n    // |    |    | C1 |                           | C2 |    |\n    // |    |    |----|                           |----|    |\n    // |    |    |                                     |    |\n    // | L1 | L2 |           ChartArea (C0)            | R1 |\n    // |    |    |                                     |    |\n    // |    |    |----|                           |----|    |\n    // |    |    | C3 |                           | C4 |    |\n    // |    |----|-------------------------------------|----|\n    // |    |    |                 B1                  |    |\n    // |----------------------------------------------------|\n    // |                  B2 (Full Width)                   |\n    // |----------------------------------------------------|\n    //\n\n    const visibleVerticalBoxCount = verticalBoxes.reduce((total, wrap) =>\n      wrap.box.options && wrap.box.options.display === false ? total : total + 1, 0) || 1;\n\n    const params = Object.freeze({\n      outerWidth: width,\n      outerHeight: height,\n      padding,\n      availableWidth,\n      availableHeight,\n      vBoxMaxWidth: availableWidth / 2 / visibleVerticalBoxCount,\n      hBoxMaxHeight: availableHeight / 2\n    });\n    const maxPadding = Object.assign({}, padding);\n    updateMaxPadding(maxPadding, toPadding(minPadding));\n    const chartArea = Object.assign({\n      maxPadding,\n      w: availableWidth,\n      h: availableHeight,\n      x: padding.left,\n      y: padding.top\n    }, padding);\n\n    const stacks = setLayoutDims(verticalBoxes.concat(horizontalBoxes), params);\n\n    // First fit the fullSize boxes, to reduce probability of re-fitting.\n    fitBoxes(boxes.fullSize, chartArea, params, stacks);\n\n    // Then fit vertical boxes\n    fitBoxes(verticalBoxes, chartArea, params, stacks);\n\n    // Then fit horizontal boxes\n    if (fitBoxes(horizontalBoxes, chartArea, params, stacks)) {\n      // if the area changed, re-fit vertical boxes\n      fitBoxes(verticalBoxes, chartArea, params, stacks);\n    }\n\n    handleMaxPadding(chartArea);\n\n    // Finally place the boxes to correct coordinates\n    placeBoxes(boxes.leftAndTop, chartArea, params, stacks);\n\n    // Move to opposite side of chart\n    chartArea.x += chartArea.w;\n    chartArea.y += chartArea.h;\n\n    placeBoxes(boxes.rightAndBottom, chartArea, params, stacks);\n\n    chart.chartArea = {\n      left: chartArea.left,\n      top: chartArea.top,\n      right: chartArea.left + chartArea.w,\n      bottom: chartArea.top + chartArea.h,\n      height: chartArea.h,\n      width: chartArea.w,\n    };\n\n    // Finally update boxes in chartArea (radial scale for example)\n    each(boxes.chartArea, (layout) => {\n      const box = layout.box;\n      Object.assign(box, chart.chartArea);\n      box.update(chartArea.w, chartArea.h, {left: 0, top: 0, right: 0, bottom: 0});\n    });\n  }\n};\n","\n/**\n * @typedef { import('../core/core.controller.js').default } Chart\n */\n\n/**\n * Abstract class that allows abstracting platform dependencies away from the chart.\n */\nexport default class BasePlatform {\n  /**\n\t * Called at chart construction time, returns a context2d instance implementing\n\t * the [W3C Canvas 2D Context API standard]{@link https://www.w3.org/TR/2dcontext/}.\n\t * @param {HTMLCanvasElement} canvas - The canvas from which to acquire context (platform specific)\n\t * @param {number} [aspectRatio] - The chart options\n\t */\n  acquireContext(canvas, aspectRatio) {} // eslint-disable-line no-unused-vars\n\n  /**\n\t * Called at chart destruction time, releases any resources associated to the context\n\t * previously returned by the acquireContext() method.\n\t * @param {CanvasRenderingContext2D} context - The context2d instance\n\t * @returns {boolean} true if the method succeeded, else false\n\t */\n  releaseContext(context) { // eslint-disable-line no-unused-vars\n    return false;\n  }\n\n  /**\n\t * Registers the specified listener on the given chart.\n\t * @param {Chart} chart - Chart from which to listen for event\n\t * @param {string} type - The ({@link ChartEvent}) type to listen for\n\t * @param {function} listener - Receives a notification (an object that implements\n\t * the {@link ChartEvent} interface) when an event of the specified type occurs.\n\t */\n  addEventListener(chart, type, listener) {} // eslint-disable-line no-unused-vars\n\n  /**\n\t * Removes the specified listener previously registered with addEventListener.\n\t * @param {Chart} chart - Chart from which to remove the listener\n\t * @param {string} type - The ({@link ChartEvent}) type to remove\n\t * @param {function} listener - The listener function to remove from the event target.\n\t */\n  removeEventListener(chart, type, listener) {} // eslint-disable-line no-unused-vars\n\n  /**\n\t * @returns {number} the current devicePixelRatio of the device this platform is connected to.\n\t */\n  getDevicePixelRatio() {\n    return 1;\n  }\n\n  /**\n\t * Returns the maximum size in pixels of given canvas element.\n\t * @param {HTMLCanvasElement} element\n\t * @param {number} [width] - content width of parent element\n\t * @param {number} [height] - content height of parent element\n\t * @param {number} [aspectRatio] - aspect ratio to maintain\n\t */\n  getMaximumSize(element, width, height, aspectRatio) {\n    width = Math.max(0, width || element.width);\n    height = height || element.height;\n    return {\n      width,\n      height: Math.max(0, aspectRatio ? Math.floor(width / aspectRatio) : height)\n    };\n  }\n\n  /**\n\t * @param {HTMLCanvasElement} canvas\n\t * @returns {boolean} true if the canvas is attached to the platform, false if not.\n\t */\n  isAttached(canvas) { // eslint-disable-line no-unused-vars\n    return true;\n  }\n\n  /**\n   * Updates config with platform specific requirements\n   * @param {import('../core/core.config.js').default} config\n   */\n  updateConfig(config) { // eslint-disable-line no-unused-vars\n    // no-op\n  }\n}\n","/**\n * Platform fallback implementation (minimal).\n * @see https://github.com/chartjs/Chart.js/pull/4591#issuecomment-319575939\n */\n\nimport BasePlatform from './platform.base.js';\n\n/**\n * Platform class for charts without access to the DOM or to many element properties\n * This platform is used by default for any chart passed an OffscreenCanvas.\n * @extends BasePlatform\n */\nexport default class BasicPlatform extends BasePlatform {\n  acquireContext(item) {\n    // To prevent canvas fingerprinting, some add-ons undefine the getContext\n    // method, for example: https://github.com/kkapsner/CanvasBlocker\n    // https://github.com/chartjs/Chart.js/issues/2807\n    return item && item.getContext && item.getContext('2d') || null;\n  }\n  updateConfig(config) {\n    config.options.animation = false;\n  }\n}\n","/**\n * Chart.Platform implementation for targeting a web browser\n */\n\nimport BasePlatform from './platform.base.js';\nimport {_getParentNode, getRelativePosition, supportsEventListenerOptions, readUsedSize, getMaximumSize} from '../helpers/helpers.dom.js';\nimport {throttled} from '../helpers/helpers.extras.js';\nimport {isNullOrUndef} from '../helpers/helpers.core.js';\n\n/**\n * @typedef { import('../core/core.controller.js').default } Chart\n */\n\nconst EXPANDO_KEY = '$chartjs';\n\n/**\n * DOM event types -> Chart.js event types.\n * Note: only events with different types are mapped.\n * @see https://developer.mozilla.org/en-US/docs/Web/Events\n */\nconst EVENT_TYPES = {\n  touchstart: 'mousedown',\n  touchmove: 'mousemove',\n  touchend: 'mouseup',\n  pointerenter: 'mouseenter',\n  pointerdown: 'mousedown',\n  pointermove: 'mousemove',\n  pointerup: 'mouseup',\n  pointerleave: 'mouseout',\n  pointerout: 'mouseout'\n};\n\nconst isNullOrEmpty = value => value === null || value === '';\n/**\n * Initializes the canvas style and render size without modifying the canvas display size,\n * since responsiveness is handled by the controller.resize() method. The config is used\n * to determine the aspect ratio to apply in case no explicit height has been specified.\n * @param {HTMLCanvasElement} canvas\n * @param {number} [aspectRatio]\n */\nfunction initCanvas(canvas, aspectRatio) {\n  const style = canvas.style;\n\n  // NOTE(SB) canvas.getAttribute('width') !== canvas.width: in the first case it\n  // returns null or '' if no explicit value has been set to the canvas attribute.\n  const renderHeight = canvas.getAttribute('height');\n  const renderWidth = canvas.getAttribute('width');\n\n  // Chart.js modifies some canvas values that we want to restore on destroy\n  canvas[EXPANDO_KEY] = {\n    initial: {\n      height: renderHeight,\n      width: renderWidth,\n      style: {\n        display: style.display,\n        height: style.height,\n        width: style.width\n      }\n    }\n  };\n\n  // Force canvas to display as block to avoid extra space caused by inline\n  // elements, which would interfere with the responsive resize process.\n  // https://github.com/chartjs/Chart.js/issues/2538\n  style.display = style.display || 'block';\n  // Include possible borders in the size\n  style.boxSizing = style.boxSizing || 'border-box';\n\n  if (isNullOrEmpty(renderWidth)) {\n    const displayWidth = readUsedSize(canvas, 'width');\n    if (displayWidth !== undefined) {\n      canvas.width = displayWidth;\n    }\n  }\n\n  if (isNullOrEmpty(renderHeight)) {\n    if (canvas.style.height === '') {\n      // If no explicit render height and style height, let's apply the aspect ratio,\n      // which one can be specified by the user but also by charts as default option\n      // (i.e. options.aspectRatio). If not specified, use canvas aspect ratio of 2.\n      canvas.height = canvas.width / (aspectRatio || 2);\n    } else {\n      const displayHeight = readUsedSize(canvas, 'height');\n      if (displayHeight !== undefined) {\n        canvas.height = displayHeight;\n      }\n    }\n  }\n\n  return canvas;\n}\n\n// Default passive to true as expected by Chrome for 'touchstart' and 'touchend' events.\n// https://github.com/chartjs/Chart.js/issues/4287\nconst eventListenerOptions = supportsEventListenerOptions ? {passive: true} : false;\n\nfunction addListener(node, type, listener) {\n  node.addEventListener(type, listener, eventListenerOptions);\n}\n\nfunction removeListener(chart, type, listener) {\n  chart.canvas.removeEventListener(type, listener, eventListenerOptions);\n}\n\nfunction fromNativeEvent(event, chart) {\n  const type = EVENT_TYPES[event.type] || event.type;\n  const {x, y} = getRelativePosition(event, chart);\n  return {\n    type,\n    chart,\n    native: event,\n    x: x !== undefined ? x : null,\n    y: y !== undefined ? y : null,\n  };\n}\n\nfunction nodeListContains(nodeList, canvas) {\n  for (const node of nodeList) {\n    if (node === canvas || node.contains(canvas)) {\n      return true;\n    }\n  }\n}\n\nfunction createAttachObserver(chart, type, listener) {\n  const canvas = chart.canvas;\n  const observer = new MutationObserver(entries => {\n    let trigger = false;\n    for (const entry of entries) {\n      trigger = trigger || nodeListContains(entry.addedNodes, canvas);\n      trigger = trigger && !nodeListContains(entry.removedNodes, canvas);\n    }\n    if (trigger) {\n      listener();\n    }\n  });\n  observer.observe(document, {childList: true, subtree: true});\n  return observer;\n}\n\nfunction createDetachObserver(chart, type, listener) {\n  const canvas = chart.canvas;\n  const observer = new MutationObserver(entries => {\n    let trigger = false;\n    for (const entry of entries) {\n      trigger = trigger || nodeListContains(entry.removedNodes, canvas);\n      trigger = trigger && !nodeListContains(entry.addedNodes, canvas);\n    }\n    if (trigger) {\n      listener();\n    }\n  });\n  observer.observe(document, {childList: true, subtree: true});\n  return observer;\n}\n\nconst drpListeningCharts = new Map();\nlet oldDevicePixelRatio = 0;\n\nfunction onWindowResize() {\n  const dpr = window.devicePixelRatio;\n  if (dpr === oldDevicePixelRatio) {\n    return;\n  }\n  oldDevicePixelRatio = dpr;\n  drpListeningCharts.forEach((resize, chart) => {\n    if (chart.currentDevicePixelRatio !== dpr) {\n      resize();\n    }\n  });\n}\n\nfunction listenDevicePixelRatioChanges(chart, resize) {\n  if (!drpListeningCharts.size) {\n    window.addEventListener('resize', onWindowResize);\n  }\n  drpListeningCharts.set(chart, resize);\n}\n\nfunction unlistenDevicePixelRatioChanges(chart) {\n  drpListeningCharts.delete(chart);\n  if (!drpListeningCharts.size) {\n    window.removeEventListener('resize', onWindowResize);\n  }\n}\n\nfunction createResizeObserver(chart, type, listener) {\n  const canvas = chart.canvas;\n  const container = canvas && _getParentNode(canvas);\n  if (!container) {\n    return;\n  }\n  const resize = throttled((width, height) => {\n    const w = container.clientWidth;\n    listener(width, height);\n    if (w < container.clientWidth) {\n      // If the container size shrank during chart resize, let's assume\n      // scrollbar appeared. So we resize again with the scrollbar visible -\n      // effectively making chart smaller and the scrollbar hidden again.\n      // Because we are inside `throttled`, and currently `ticking`, scroll\n      // events are ignored during this whole 2 resize process.\n      // If we assumed wrong and something else happened, we are resizing\n      // twice in a frame (potential performance issue)\n      listener();\n    }\n  }, window);\n\n  // @ts-ignore until https://github.com/microsoft/TypeScript/issues/37861 implemented\n  const observer = new ResizeObserver(entries => {\n    const entry = entries[0];\n    const width = entry.contentRect.width;\n    const height = entry.contentRect.height;\n    // When its container's display is set to 'none' the callback will be called with a\n    // size of (0, 0), which will cause the chart to lose its original height, so skip\n    // resizing in such case.\n    if (width === 0 && height === 0) {\n      return;\n    }\n    resize(width, height);\n  });\n  observer.observe(container);\n  listenDevicePixelRatioChanges(chart, resize);\n\n  return observer;\n}\n\nfunction releaseObserver(chart, type, observer) {\n  if (observer) {\n    observer.disconnect();\n  }\n  if (type === 'resize') {\n    unlistenDevicePixelRatioChanges(chart);\n  }\n}\n\nfunction createProxyAndListen(chart, type, listener) {\n  const canvas = chart.canvas;\n  const proxy = throttled((event) => {\n    // This case can occur if the chart is destroyed while waiting\n    // for the throttled function to occur. We prevent crashes by checking\n    // for a destroyed chart\n    if (chart.ctx !== null) {\n      listener(fromNativeEvent(event, chart));\n    }\n  }, chart);\n\n  addListener(canvas, type, proxy);\n\n  return proxy;\n}\n\n/**\n * Platform class for charts that can access the DOM and global window/document properties\n * @extends BasePlatform\n */\nexport default class DomPlatform extends BasePlatform {\n\n  /**\n\t * @param {HTMLCanvasElement} canvas\n\t * @param {number} [aspectRatio]\n\t * @return {CanvasRenderingContext2D|null}\n\t */\n  acquireContext(canvas, aspectRatio) {\n    // To prevent canvas fingerprinting, some add-ons undefine the getContext\n    // method, for example: https://github.com/kkapsner/CanvasBlocker\n    // https://github.com/chartjs/Chart.js/issues/2807\n    const context = canvas && canvas.getContext && canvas.getContext('2d');\n\n    // `instanceof HTMLCanvasElement/CanvasRenderingContext2D` fails when the canvas is\n    // inside an iframe or when running in a protected environment. We could guess the\n    // types from their toString() value but let's keep things flexible and assume it's\n    // a sufficient condition if the canvas has a context2D which has canvas as `canvas`.\n    // https://github.com/chartjs/Chart.js/issues/3887\n    // https://github.com/chartjs/Chart.js/issues/4102\n    // https://github.com/chartjs/Chart.js/issues/4152\n    if (context && context.canvas === canvas) {\n      // Load platform resources on first chart creation, to make it possible to\n      // import the library before setting platform options.\n      initCanvas(canvas, aspectRatio);\n      return context;\n    }\n\n    return null;\n  }\n\n  /**\n\t * @param {CanvasRenderingContext2D} context\n\t */\n  releaseContext(context) {\n    const canvas = context.canvas;\n    if (!canvas[EXPANDO_KEY]) {\n      return false;\n    }\n\n    const initial = canvas[EXPANDO_KEY].initial;\n    ['height', 'width'].forEach((prop) => {\n      const value = initial[prop];\n      if (isNullOrUndef(value)) {\n        canvas.removeAttribute(prop);\n      } else {\n        canvas.setAttribute(prop, value);\n      }\n    });\n\n    const style = initial.style || {};\n    Object.keys(style).forEach((key) => {\n      canvas.style[key] = style[key];\n    });\n\n    // The canvas render size might have been changed (and thus the state stack discarded),\n    // we can't use save() and restore() to restore the initial state. So make sure that at\n    // least the canvas context is reset to the default state by setting the canvas width.\n    // https://www.w3.org/TR/2011/WD-html5-20110525/the-canvas-element.html\n    // eslint-disable-next-line no-self-assign\n    canvas.width = canvas.width;\n\n    delete canvas[EXPANDO_KEY];\n    return true;\n  }\n\n  /**\n\t *\n\t * @param {Chart} chart\n\t * @param {string} type\n\t * @param {function} listener\n\t */\n  addEventListener(chart, type, listener) {\n    // Can have only one listener per type, so make sure previous is removed\n    this.removeEventListener(chart, type);\n\n    const proxies = chart.$proxies || (chart.$proxies = {});\n    const handlers = {\n      attach: createAttachObserver,\n      detach: createDetachObserver,\n      resize: createResizeObserver\n    };\n    const handler = handlers[type] || createProxyAndListen;\n    proxies[type] = handler(chart, type, listener);\n  }\n\n\n  /**\n\t * @param {Chart} chart\n\t * @param {string} type\n\t */\n  removeEventListener(chart, type) {\n    const proxies = chart.$proxies || (chart.$proxies = {});\n    const proxy = proxies[type];\n\n    if (!proxy) {\n      return;\n    }\n\n    const handlers = {\n      attach: releaseObserver,\n      detach: releaseObserver,\n      resize: releaseObserver\n    };\n    const handler = handlers[type] || removeListener;\n    handler(chart, type, proxy);\n    proxies[type] = undefined;\n  }\n\n  getDevicePixelRatio() {\n    return window.devicePixelRatio;\n  }\n\n  /**\n\t * @param {HTMLCanvasElement} canvas\n\t * @param {number} [width] - content width of parent element\n\t * @param {number} [height] - content height of parent element\n\t * @param {number} [aspectRatio] - aspect ratio to maintain\n\t */\n  getMaximumSize(canvas, width, height, aspectRatio) {\n    return getMaximumSize(canvas, width, height, aspectRatio);\n  }\n\n  /**\n\t * @param {HTMLCanvasElement} canvas\n\t */\n  isAttached(canvas) {\n    const container = _getParentNode(canvas);\n    return !!(container && container.isConnected);\n  }\n}\n","import {_isDomSupported} from '../helpers/index.js';\nimport BasePlatform from './platform.base.js';\nimport BasicPlatform from './platform.basic.js';\nimport DomPlatform from './platform.dom.js';\n\nexport function _detectPlatform(canvas) {\n  if (!_isDomSupported() || (typeof OffscreenCanvas !== 'undefined' && canvas instanceof OffscreenCanvas)) {\n    return BasicPlatform;\n  }\n  return DomPlatform;\n}\n\nexport {BasePlatform, BasicPlatform, DomPlatform};\n","import type {AnyObject} from '../types/basic.js';\nimport type {Point} from '../types/geometric.js';\nimport type {Animation} from '../types/animation.js';\nimport {isNumber} from '../helpers/helpers.math.js';\n\nexport default class Element<T = AnyObject, O = AnyObject> {\n\n  static defaults = {};\n  static defaultRoutes = undefined;\n\n  x: number;\n  y: number;\n  active = false;\n  options: O;\n  $animations: Record<keyof T, Animation>;\n\n  tooltipPosition(useFinalPosition: boolean): Point {\n    const {x, y} = this.getProps(['x', 'y'], useFinalPosition);\n    return {x, y} as Point;\n  }\n\n  hasValue() {\n    return isNumber(this.x) && isNumber(this.y);\n  }\n\n  /**\n   * Gets the current or final value of each prop. Can return extra properties (whole object).\n   * @param props - properties to get\n   * @param [final] - get the final value (animation target)\n   */\n  getProps<P extends (keyof T)[]>(props: P, final?: boolean): Pick<T, P[number]>;\n  getProps<P extends string>(props: P[], final?: boolean): Partial<Record<P, unknown>>;\n  getProps(props: string[], final?: boolean): Partial<Record<string, unknown>> {\n    const anims = this.$animations;\n    if (!final || !anims) {\n      // let's not create an object, if not needed\n      return this as Record<string, unknown>;\n    }\n    const ret: Record<string, unknown> = {};\n    props.forEach((prop) => {\n      ret[prop] = anims[prop] && anims[prop].active() ? anims[prop]._to : this[prop as string];\n    });\n    return ret;\n  }\n}\n","import {isNullOrUndef, valueOrDefault} from '../helpers/helpers.core.js';\nimport {_factorize} from '../helpers/helpers.math.js';\n\n\n/**\n * @typedef { import('./core.controller.js').default } Chart\n * @typedef {{value:number | string, label?:string, major?:boolean, $context?:any}} Tick\n */\n\n/**\n * Returns a subset of ticks to be plotted to avoid overlapping labels.\n * @param {import('./core.scale.js').default} scale\n * @param {Tick[]} ticks\n * @return {Tick[]}\n * @private\n */\nexport function autoSkip(scale, ticks) {\n  const tickOpts = scale.options.ticks;\n  const determinedMaxTicks = determineMaxTicks(scale);\n  const ticksLimit = Math.min(tickOpts.maxTicksLimit || determinedMaxTicks, determinedMaxTicks);\n  const majorIndices = tickOpts.major.enabled ? getMajorIndices(ticks) : [];\n  const numMajorIndices = majorIndices.length;\n  const first = majorIndices[0];\n  const last = majorIndices[numMajorIndices - 1];\n  const newTicks = [];\n\n  // If there are too many major ticks to display them all\n  if (numMajorIndices > ticksLimit) {\n    skipMajors(ticks, newTicks, majorIndices, numMajorIndices / ticksLimit);\n    return newTicks;\n  }\n\n  const spacing = calculateSpacing(majorIndices, ticks, ticksLimit);\n\n  if (numMajorIndices > 0) {\n    let i, ilen;\n    const avgMajorSpacing = numMajorIndices > 1 ? Math.round((last - first) / (numMajorIndices - 1)) : null;\n    skip(ticks, newTicks, spacing, isNullOrUndef(avgMajorSpacing) ? 0 : first - avgMajorSpacing, first);\n    for (i = 0, ilen = numMajorIndices - 1; i < ilen; i++) {\n      skip(ticks, newTicks, spacing, majorIndices[i], majorIndices[i + 1]);\n    }\n    skip(ticks, newTicks, spacing, last, isNullOrUndef(avgMajorSpacing) ? ticks.length : last + avgMajorSpacing);\n    return newTicks;\n  }\n  skip(ticks, newTicks, spacing);\n  return newTicks;\n}\n\nfunction determineMaxTicks(scale) {\n  const offset = scale.options.offset;\n  const tickLength = scale._tickSize();\n  const maxScale = scale._length / tickLength + (offset ? 0 : 1);\n  const maxChart = scale._maxLength / tickLength;\n  return Math.floor(Math.min(maxScale, maxChart));\n}\n\n/**\n * @param {number[]} majorIndices\n * @param {Tick[]} ticks\n * @param {number} ticksLimit\n */\nfunction calculateSpacing(majorIndices, ticks, ticksLimit) {\n  const evenMajorSpacing = getEvenSpacing(majorIndices);\n  const spacing = ticks.length / ticksLimit;\n\n  // If the major ticks are evenly spaced apart, place the minor ticks\n  // so that they divide the major ticks into even chunks\n  if (!evenMajorSpacing) {\n    return Math.max(spacing, 1);\n  }\n\n  const factors = _factorize(evenMajorSpacing);\n  for (let i = 0, ilen = factors.length - 1; i < ilen; i++) {\n    const factor = factors[i];\n    if (factor > spacing) {\n      return factor;\n    }\n  }\n  return Math.max(spacing, 1);\n}\n\n/**\n * @param {Tick[]} ticks\n */\nfunction getMajorIndices(ticks) {\n  const result = [];\n  let i, ilen;\n  for (i = 0, ilen = ticks.length; i < ilen; i++) {\n    if (ticks[i].major) {\n      result.push(i);\n    }\n  }\n  return result;\n}\n\n/**\n * @param {Tick[]} ticks\n * @param {Tick[]} newTicks\n * @param {number[]} majorIndices\n * @param {number} spacing\n */\nfunction skipMajors(ticks, newTicks, majorIndices, spacing) {\n  let count = 0;\n  let next = majorIndices[0];\n  let i;\n\n  spacing = Math.ceil(spacing);\n  for (i = 0; i < ticks.length; i++) {\n    if (i === next) {\n      newTicks.push(ticks[i]);\n      count++;\n      next = majorIndices[count * spacing];\n    }\n  }\n}\n\n/**\n * @param {Tick[]} ticks\n * @param {Tick[]} newTicks\n * @param {number} spacing\n * @param {number} [majorStart]\n * @param {number} [majorEnd]\n */\nfunction skip(ticks, newTicks, spacing, majorStart, majorEnd) {\n  const start = valueOrDefault(majorStart, 0);\n  const end = Math.min(valueOrDefault(majorEnd, ticks.length), ticks.length);\n  let count = 0;\n  let length, i, next;\n\n  spacing = Math.ceil(spacing);\n  if (majorEnd) {\n    length = majorEnd - majorStart;\n    spacing = length / Math.floor(length / spacing);\n  }\n\n  next = start;\n\n  while (next < 0) {\n    count++;\n    next = Math.round(start + count * spacing);\n  }\n\n  for (i = Math.max(start, 0); i < end; i++) {\n    if (i === next) {\n      newTicks.push(ticks[i]);\n      count++;\n      next = Math.round(start + count * spacing);\n    }\n  }\n}\n\n\n/**\n * @param {number[]} arr\n */\nfunction getEvenSpacing(arr) {\n  const len = arr.length;\n  let i, diff;\n\n  if (len < 2) {\n    return false;\n  }\n\n  for (diff = arr[0], i = 1; i < len; ++i) {\n    if (arr[i] - arr[i - 1] !== diff) {\n      return false;\n    }\n  }\n  return diff;\n}\n","import Element from './core.element.js';\nimport {_alignPixel, _measureText, renderText, clipArea, unclipArea} from '../helpers/helpers.canvas.js';\nimport {callback as call, each, finiteOrDefault, isArray, isFinite, isNullOrUndef, isObject, valueOrDefault} from '../helpers/helpers.core.js';\nimport {toDegrees, toRadians, _int16Range, _limitValue, HALF_PI} from '../helpers/helpers.math.js';\nimport {_alignStartEnd, _toLeftRightCenter} from '../helpers/helpers.extras.js';\nimport {createContext, toFont, toPadding, _addGrace} from '../helpers/helpers.options.js';\nimport {autoSkip} from './core.scale.autoskip.js';\n\nconst reverseAlign = (align) => align === 'left' ? 'right' : align === 'right' ? 'left' : align;\nconst offsetFromEdge = (scale, edge, offset) => edge === 'top' || edge === 'left' ? scale[edge] + offset : scale[edge] - offset;\nconst getTicksLimit = (ticksLength, maxTicksLimit) => Math.min(maxTicksLimit || ticksLength, ticksLength);\n\n/**\n * @typedef { import('./core.controller.js').default } Chart\n * @typedef {{value:number | string, label?:string, major?:boolean, $context?:any}} Tick\n */\n\n/**\n * Returns a new array containing numItems from arr\n * @param {any[]} arr\n * @param {number} numItems\n */\nfunction sample(arr, numItems) {\n  const result = [];\n  const increment = arr.length / numItems;\n  const len = arr.length;\n  let i = 0;\n\n  for (; i < len; i += increment) {\n    result.push(arr[Math.floor(i)]);\n  }\n  return result;\n}\n\n/**\n * @param {Scale} scale\n * @param {number} index\n * @param {boolean} offsetGridLines\n */\nfunction getPixelForGridLine(scale, index, offsetGridLines) {\n  const length = scale.ticks.length;\n  const validIndex = Math.min(index, length - 1);\n  const start = scale._startPixel;\n  const end = scale._endPixel;\n  const epsilon = 1e-6; // 1e-6 is margin in pixels for accumulated error.\n  let lineValue = scale.getPixelForTick(validIndex);\n  let offset;\n\n  if (offsetGridLines) {\n    if (length === 1) {\n      offset = Math.max(lineValue - start, end - lineValue);\n    } else if (index === 0) {\n      offset = (scale.getPixelForTick(1) - lineValue) / 2;\n    } else {\n      offset = (lineValue - scale.getPixelForTick(validIndex - 1)) / 2;\n    }\n    lineValue += validIndex < index ? offset : -offset;\n\n    // Return undefined if the pixel is out of the range\n    if (lineValue < start - epsilon || lineValue > end + epsilon) {\n      return;\n    }\n  }\n  return lineValue;\n}\n\n/**\n * @param {object} caches\n * @param {number} length\n */\nfunction garbageCollect(caches, length) {\n  each(caches, (cache) => {\n    const gc = cache.gc;\n    const gcLen = gc.length / 2;\n    let i;\n    if (gcLen > length) {\n      for (i = 0; i < gcLen; ++i) {\n        delete cache.data[gc[i]];\n      }\n      gc.splice(0, gcLen);\n    }\n  });\n}\n\n/**\n * @param {object} options\n */\nfunction getTickMarkLength(options) {\n  return options.drawTicks ? options.tickLength : 0;\n}\n\n/**\n * @param {object} options\n */\nfunction getTitleHeight(options, fallback) {\n  if (!options.display) {\n    return 0;\n  }\n\n  const font = toFont(options.font, fallback);\n  const padding = toPadding(options.padding);\n  const lines = isArray(options.text) ? options.text.length : 1;\n\n  return (lines * font.lineHeight) + padding.height;\n}\n\nfunction createScaleContext(parent, scale) {\n  return createContext(parent, {\n    scale,\n    type: 'scale'\n  });\n}\n\nfunction createTickContext(parent, index, tick) {\n  return createContext(parent, {\n    tick,\n    index,\n    type: 'tick'\n  });\n}\n\nfunction titleAlign(align, position, reverse) {\n  let ret = _toLeftRightCenter(align);\n  if ((reverse && position !== 'right') || (!reverse && position === 'right')) {\n    ret = reverseAlign(ret);\n  }\n  return ret;\n}\n\nfunction titleArgs(scale, offset, position, align) {\n  const {top, left, bottom, right, chart} = scale;\n  const {chartArea, scales} = chart;\n  let rotation = 0;\n  let maxWidth, titleX, titleY;\n  const height = bottom - top;\n  const width = right - left;\n\n  if (scale.isHorizontal()) {\n    titleX = _alignStartEnd(align, left, right);\n\n    if (isObject(position)) {\n      const positionAxisID = Object.keys(position)[0];\n      const value = position[positionAxisID];\n      titleY = scales[positionAxisID].getPixelForValue(value) + height - offset;\n    } else if (position === 'center') {\n      titleY = (chartArea.bottom + chartArea.top) / 2 + height - offset;\n    } else {\n      titleY = offsetFromEdge(scale, position, offset);\n    }\n    maxWidth = right - left;\n  } else {\n    if (isObject(position)) {\n      const positionAxisID = Object.keys(position)[0];\n      const value = position[positionAxisID];\n      titleX = scales[positionAxisID].getPixelForValue(value) - width + offset;\n    } else if (position === 'center') {\n      titleX = (chartArea.left + chartArea.right) / 2 - width + offset;\n    } else {\n      titleX = offsetFromEdge(scale, position, offset);\n    }\n    titleY = _alignStartEnd(align, bottom, top);\n    rotation = position === 'left' ? -HALF_PI : HALF_PI;\n  }\n  return {titleX, titleY, maxWidth, rotation};\n}\n\nexport default class Scale extends Element {\n\n  // eslint-disable-next-line max-statements\n  constructor(cfg) {\n    super();\n\n    /** @type {string} */\n    this.id = cfg.id;\n    /** @type {string} */\n    this.type = cfg.type;\n    /** @type {any} */\n    this.options = undefined;\n    /** @type {CanvasRenderingContext2D} */\n    this.ctx = cfg.ctx;\n    /** @type {Chart} */\n    this.chart = cfg.chart;\n\n    // implements box\n    /** @type {number} */\n    this.top = undefined;\n    /** @type {number} */\n    this.bottom = undefined;\n    /** @type {number} */\n    this.left = undefined;\n    /** @type {number} */\n    this.right = undefined;\n    /** @type {number} */\n    this.width = undefined;\n    /** @type {number} */\n    this.height = undefined;\n    this._margins = {\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0\n    };\n    /** @type {number} */\n    this.maxWidth = undefined;\n    /** @type {number} */\n    this.maxHeight = undefined;\n    /** @type {number} */\n    this.paddingTop = undefined;\n    /** @type {number} */\n    this.paddingBottom = undefined;\n    /** @type {number} */\n    this.paddingLeft = undefined;\n    /** @type {number} */\n    this.paddingRight = undefined;\n\n    // scale-specific properties\n    /** @type {string=} */\n    this.axis = undefined;\n    /** @type {number=} */\n    this.labelRotation = undefined;\n    this.min = undefined;\n    this.max = undefined;\n    this._range = undefined;\n    /** @type {Tick[]} */\n    this.ticks = [];\n    /** @type {object[]|null} */\n    this._gridLineItems = null;\n    /** @type {object[]|null} */\n    this._labelItems = null;\n    /** @type {object|null} */\n    this._labelSizes = null;\n    this._length = 0;\n    this._maxLength = 0;\n    this._longestTextCache = {};\n    /** @type {number} */\n    this._startPixel = undefined;\n    /** @type {number} */\n    this._endPixel = undefined;\n    this._reversePixels = false;\n    this._userMax = undefined;\n    this._userMin = undefined;\n    this._suggestedMax = undefined;\n    this._suggestedMin = undefined;\n    this._ticksLength = 0;\n    this._borderValue = 0;\n    this._cache = {};\n    this._dataLimitsCached = false;\n    this.$context = undefined;\n  }\n\n  /**\n\t * @param {any} options\n\t * @since 3.0\n\t */\n  init(options) {\n    this.options = options.setContext(this.getContext());\n\n    this.axis = options.axis;\n\n    // parse min/max value, so we can properly determine min/max for other scales\n    this._userMin = this.parse(options.min);\n    this._userMax = this.parse(options.max);\n    this._suggestedMin = this.parse(options.suggestedMin);\n    this._suggestedMax = this.parse(options.suggestedMax);\n  }\n\n  /**\n\t * Parse a supported input value to internal representation.\n\t * @param {*} raw\n\t * @param {number} [index]\n\t * @since 3.0\n\t */\n  parse(raw, index) { // eslint-disable-line no-unused-vars\n    return raw;\n  }\n\n  /**\n\t * @return {{min: number, max: number, minDefined: boolean, maxDefined: boolean}}\n\t * @protected\n\t * @since 3.0\n\t */\n  getUserBounds() {\n    let {_userMin, _userMax, _suggestedMin, _suggestedMax} = this;\n    _userMin = finiteOrDefault(_userMin, Number.POSITIVE_INFINITY);\n    _userMax = finiteOrDefault(_userMax, Number.NEGATIVE_INFINITY);\n    _suggestedMin = finiteOrDefault(_suggestedMin, Number.POSITIVE_INFINITY);\n    _suggestedMax = finiteOrDefault(_suggestedMax, Number.NEGATIVE_INFINITY);\n    return {\n      min: finiteOrDefault(_userMin, _suggestedMin),\n      max: finiteOrDefault(_userMax, _suggestedMax),\n      minDefined: isFinite(_userMin),\n      maxDefined: isFinite(_userMax)\n    };\n  }\n\n  /**\n\t * @param {boolean} canStack\n\t * @return {{min: number, max: number}}\n\t * @protected\n\t * @since 3.0\n\t */\n  getMinMax(canStack) {\n    // eslint-disable-next-line prefer-const\n    let {min, max, minDefined, maxDefined} = this.getUserBounds();\n    let range;\n\n    if (minDefined && maxDefined) {\n      return {min, max};\n    }\n\n    const metas = this.getMatchingVisibleMetas();\n    for (let i = 0, ilen = metas.length; i < ilen; ++i) {\n      range = metas[i].controller.getMinMax(this, canStack);\n      if (!minDefined) {\n        min = Math.min(min, range.min);\n      }\n      if (!maxDefined) {\n        max = Math.max(max, range.max);\n      }\n    }\n\n    // Make sure min <= max when only min or max is defined by user and the data is outside that range\n    min = maxDefined && min > max ? max : min;\n    max = minDefined && min > max ? min : max;\n\n    return {\n      min: finiteOrDefault(min, finiteOrDefault(max, min)),\n      max: finiteOrDefault(max, finiteOrDefault(min, max))\n    };\n  }\n\n  /**\n\t * Get the padding needed for the scale\n\t * @return {{top: number, left: number, bottom: number, right: number}} the necessary padding\n\t * @private\n\t */\n  getPadding() {\n    return {\n      left: this.paddingLeft || 0,\n      top: this.paddingTop || 0,\n      right: this.paddingRight || 0,\n      bottom: this.paddingBottom || 0\n    };\n  }\n\n  /**\n\t * Returns the scale tick objects\n\t * @return {Tick[]}\n\t * @since 2.7\n\t */\n  getTicks() {\n    return this.ticks;\n  }\n\n  /**\n\t * @return {string[]}\n\t */\n  getLabels() {\n    const data = this.chart.data;\n    return this.options.labels || (this.isHorizontal() ? data.xLabels : data.yLabels) || data.labels || [];\n  }\n\n  /**\n   * @return {import('../types.js').LabelItem[]}\n   */\n  getLabelItems(chartArea = this.chart.chartArea) {\n    const items = this._labelItems || (this._labelItems = this._computeLabelItems(chartArea));\n    return items;\n  }\n\n  // When a new layout is created, reset the data limits cache\n  beforeLayout() {\n    this._cache = {};\n    this._dataLimitsCached = false;\n  }\n\n  // These methods are ordered by lifecycle. Utilities then follow.\n  // Any function defined here is inherited by all scale types.\n  // Any function can be extended by the scale type\n\n  beforeUpdate() {\n    call(this.options.beforeUpdate, [this]);\n  }\n\n  /**\n\t * @param {number} maxWidth - the max width in pixels\n\t * @param {number} maxHeight - the max height in pixels\n\t * @param {{top: number, left: number, bottom: number, right: number}} margins - the space between the edge of the other scales and edge of the chart\n\t *   This space comes from two sources:\n\t *     - padding - space that's required to show the labels at the edges of the scale\n\t *     - thickness of scales or legends in another orientation\n\t */\n  update(maxWidth, maxHeight, margins) {\n    const {beginAtZero, grace, ticks: tickOpts} = this.options;\n    const sampleSize = tickOpts.sampleSize;\n\n    // Update Lifecycle - Probably don't want to ever extend or overwrite this function ;)\n    this.beforeUpdate();\n\n    // Absorb the master measurements\n    this.maxWidth = maxWidth;\n    this.maxHeight = maxHeight;\n    this._margins = margins = Object.assign({\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0\n    }, margins);\n\n    this.ticks = null;\n    this._labelSizes = null;\n    this._gridLineItems = null;\n    this._labelItems = null;\n\n    // Dimensions\n    this.beforeSetDimensions();\n    this.setDimensions();\n    this.afterSetDimensions();\n\n    this._maxLength = this.isHorizontal()\n      ? this.width + margins.left + margins.right\n      : this.height + margins.top + margins.bottom;\n\n    // Data min/max\n    if (!this._dataLimitsCached) {\n      this.beforeDataLimits();\n      this.determineDataLimits();\n      this.afterDataLimits();\n      this._range = _addGrace(this, grace, beginAtZero);\n      this._dataLimitsCached = true;\n    }\n\n    this.beforeBuildTicks();\n\n    this.ticks = this.buildTicks() || [];\n\n    // Allow modification of ticks in callback.\n    this.afterBuildTicks();\n\n    // Compute tick rotation and fit using a sampled subset of labels\n    // We generally don't need to compute the size of every single label for determining scale size\n    const samplingEnabled = sampleSize < this.ticks.length;\n    this._convertTicksToLabels(samplingEnabled ? sample(this.ticks, sampleSize) : this.ticks);\n\n    // configure is called twice, once here, once from core.controller.updateLayout.\n    // Here we haven't been positioned yet, but dimensions are correct.\n    // Variables set in configure are needed for calculateLabelRotation, and\n    // it's ok that coordinates are not correct there, only dimensions matter.\n    this.configure();\n\n    // Tick Rotation\n    this.beforeCalculateLabelRotation();\n    this.calculateLabelRotation(); // Preconditions: number of ticks and sizes of largest labels must be calculated beforehand\n    this.afterCalculateLabelRotation();\n\n    // Auto-skip\n    if (tickOpts.display && (tickOpts.autoSkip || tickOpts.source === 'auto')) {\n      this.ticks = autoSkip(this, this.ticks);\n      this._labelSizes = null;\n      this.afterAutoSkip();\n    }\n\n    if (samplingEnabled) {\n      // Generate labels using all non-skipped ticks\n      this._convertTicksToLabels(this.ticks);\n    }\n\n    this.beforeFit();\n    this.fit(); // Preconditions: label rotation and label sizes must be calculated beforehand\n    this.afterFit();\n\n    // IMPORTANT: after this point, we consider that `this.ticks` will NEVER change!\n\n    this.afterUpdate();\n  }\n\n  /**\n\t * @protected\n\t */\n  configure() {\n    let reversePixels = this.options.reverse;\n    let startPixel, endPixel;\n\n    if (this.isHorizontal()) {\n      startPixel = this.left;\n      endPixel = this.right;\n    } else {\n      startPixel = this.top;\n      endPixel = this.bottom;\n      // by default vertical scales are from bottom to top, so pixels are reversed\n      reversePixels = !reversePixels;\n    }\n    this._startPixel = startPixel;\n    this._endPixel = endPixel;\n    this._reversePixels = reversePixels;\n    this._length = endPixel - startPixel;\n    this._alignToPixels = this.options.alignToPixels;\n  }\n\n  afterUpdate() {\n    call(this.options.afterUpdate, [this]);\n  }\n\n  //\n\n  beforeSetDimensions() {\n    call(this.options.beforeSetDimensions, [this]);\n  }\n  setDimensions() {\n    // Set the unconstrained dimension before label rotation\n    if (this.isHorizontal()) {\n      // Reset position before calculating rotation\n      this.width = this.maxWidth;\n      this.left = 0;\n      this.right = this.width;\n    } else {\n      this.height = this.maxHeight;\n\n      // Reset position before calculating rotation\n      this.top = 0;\n      this.bottom = this.height;\n    }\n\n    // Reset padding\n    this.paddingLeft = 0;\n    this.paddingTop = 0;\n    this.paddingRight = 0;\n    this.paddingBottom = 0;\n  }\n  afterSetDimensions() {\n    call(this.options.afterSetDimensions, [this]);\n  }\n\n  _callHooks(name) {\n    this.chart.notifyPlugins(name, this.getContext());\n    call(this.options[name], [this]);\n  }\n\n  // Data limits\n  beforeDataLimits() {\n    this._callHooks('beforeDataLimits');\n  }\n  determineDataLimits() {}\n  afterDataLimits() {\n    this._callHooks('afterDataLimits');\n  }\n\n  //\n  beforeBuildTicks() {\n    this._callHooks('beforeBuildTicks');\n  }\n  /**\n\t * @return {object[]} the ticks\n\t */\n  buildTicks() {\n    return [];\n  }\n  afterBuildTicks() {\n    this._callHooks('afterBuildTicks');\n  }\n\n  beforeTickToLabelConversion() {\n    call(this.options.beforeTickToLabelConversion, [this]);\n  }\n  /**\n\t * Convert ticks to label strings\n\t * @param {Tick[]} ticks\n\t */\n  generateTickLabels(ticks) {\n    const tickOpts = this.options.ticks;\n    let i, ilen, tick;\n    for (i = 0, ilen = ticks.length; i < ilen; i++) {\n      tick = ticks[i];\n      tick.label = call(tickOpts.callback, [tick.value, i, ticks], this);\n    }\n  }\n  afterTickToLabelConversion() {\n    call(this.options.afterTickToLabelConversion, [this]);\n  }\n\n  //\n\n  beforeCalculateLabelRotation() {\n    call(this.options.beforeCalculateLabelRotation, [this]);\n  }\n  calculateLabelRotation() {\n    const options = this.options;\n    const tickOpts = options.ticks;\n    const numTicks = getTicksLimit(this.ticks.length, options.ticks.maxTicksLimit);\n    const minRotation = tickOpts.minRotation || 0;\n    const maxRotation = tickOpts.maxRotation;\n    let labelRotation = minRotation;\n    let tickWidth, maxHeight, maxLabelDiagonal;\n\n    if (!this._isVisible() || !tickOpts.display || minRotation >= maxRotation || numTicks <= 1 || !this.isHorizontal()) {\n      this.labelRotation = minRotation;\n      return;\n    }\n\n    const labelSizes = this._getLabelSizes();\n    const maxLabelWidth = labelSizes.widest.width;\n    const maxLabelHeight = labelSizes.highest.height;\n\n    // Estimate the width of each grid based on the canvas width, the maximum\n    // label width and the number of tick intervals\n    const maxWidth = _limitValue(this.chart.width - maxLabelWidth, 0, this.maxWidth);\n    tickWidth = options.offset ? this.maxWidth / numTicks : maxWidth / (numTicks - 1);\n\n    // Allow 3 pixels x2 padding either side for label readability\n    if (maxLabelWidth + 6 > tickWidth) {\n      tickWidth = maxWidth / (numTicks - (options.offset ? 0.5 : 1));\n      maxHeight = this.maxHeight - getTickMarkLength(options.grid)\n\t\t\t\t- tickOpts.padding - getTitleHeight(options.title, this.chart.options.font);\n      maxLabelDiagonal = Math.sqrt(maxLabelWidth * maxLabelWidth + maxLabelHeight * maxLabelHeight);\n      labelRotation = toDegrees(Math.min(\n        Math.asin(_limitValue((labelSizes.highest.height + 6) / tickWidth, -1, 1)),\n        Math.asin(_limitValue(maxHeight / maxLabelDiagonal, -1, 1)) - Math.asin(_limitValue(maxLabelHeight / maxLabelDiagonal, -1, 1))\n      ));\n      labelRotation = Math.max(minRotation, Math.min(maxRotation, labelRotation));\n    }\n\n    this.labelRotation = labelRotation;\n  }\n  afterCalculateLabelRotation() {\n    call(this.options.afterCalculateLabelRotation, [this]);\n  }\n  afterAutoSkip() {}\n\n  //\n\n  beforeFit() {\n    call(this.options.beforeFit, [this]);\n  }\n  fit() {\n    // Reset\n    const minSize = {\n      width: 0,\n      height: 0\n    };\n\n    const {chart, options: {ticks: tickOpts, title: titleOpts, grid: gridOpts}} = this;\n    const display = this._isVisible();\n    const isHorizontal = this.isHorizontal();\n\n    if (display) {\n      const titleHeight = getTitleHeight(titleOpts, chart.options.font);\n      if (isHorizontal) {\n        minSize.width = this.maxWidth;\n        minSize.height = getTickMarkLength(gridOpts) + titleHeight;\n      } else {\n        minSize.height = this.maxHeight; // fill all the height\n        minSize.width = getTickMarkLength(gridOpts) + titleHeight;\n      }\n\n      // Don't bother fitting the ticks if we are not showing the labels\n      if (tickOpts.display && this.ticks.length) {\n        const {first, last, widest, highest} = this._getLabelSizes();\n        const tickPadding = tickOpts.padding * 2;\n        const angleRadians = toRadians(this.labelRotation);\n        const cos = Math.cos(angleRadians);\n        const sin = Math.sin(angleRadians);\n\n        if (isHorizontal) {\n        // A horizontal axis is more constrained by the height.\n          const labelHeight = tickOpts.mirror ? 0 : sin * widest.width + cos * highest.height;\n          minSize.height = Math.min(this.maxHeight, minSize.height + labelHeight + tickPadding);\n        } else {\n        // A vertical axis is more constrained by the width. Labels are the\n        // dominant factor here, so get that length first and account for padding\n          const labelWidth = tickOpts.mirror ? 0 : cos * widest.width + sin * highest.height;\n\n          minSize.width = Math.min(this.maxWidth, minSize.width + labelWidth + tickPadding);\n        }\n        this._calculatePadding(first, last, sin, cos);\n      }\n    }\n\n    this._handleMargins();\n\n    if (isHorizontal) {\n      this.width = this._length = chart.width - this._margins.left - this._margins.right;\n      this.height = minSize.height;\n    } else {\n      this.width = minSize.width;\n      this.height = this._length = chart.height - this._margins.top - this._margins.bottom;\n    }\n  }\n\n  _calculatePadding(first, last, sin, cos) {\n    const {ticks: {align, padding}, position} = this.options;\n    const isRotated = this.labelRotation !== 0;\n    const labelsBelowTicks = position !== 'top' && this.axis === 'x';\n\n    if (this.isHorizontal()) {\n      const offsetLeft = this.getPixelForTick(0) - this.left;\n      const offsetRight = this.right - this.getPixelForTick(this.ticks.length - 1);\n      let paddingLeft = 0;\n      let paddingRight = 0;\n\n      // Ensure that our ticks are always inside the canvas. When rotated, ticks are right aligned\n      // which means that the right padding is dominated by the font height\n      if (isRotated) {\n        if (labelsBelowTicks) {\n          paddingLeft = cos * first.width;\n          paddingRight = sin * last.height;\n        } else {\n          paddingLeft = sin * first.height;\n          paddingRight = cos * last.width;\n        }\n      } else if (align === 'start') {\n        paddingRight = last.width;\n      } else if (align === 'end') {\n        paddingLeft = first.width;\n      } else if (align !== 'inner') {\n        paddingLeft = first.width / 2;\n        paddingRight = last.width / 2;\n      }\n\n      // Adjust padding taking into account changes in offsets\n      this.paddingLeft = Math.max((paddingLeft - offsetLeft + padding) * this.width / (this.width - offsetLeft), 0);\n      this.paddingRight = Math.max((paddingRight - offsetRight + padding) * this.width / (this.width - offsetRight), 0);\n    } else {\n      let paddingTop = last.height / 2;\n      let paddingBottom = first.height / 2;\n\n      if (align === 'start') {\n        paddingTop = 0;\n        paddingBottom = first.height;\n      } else if (align === 'end') {\n        paddingTop = last.height;\n        paddingBottom = 0;\n      }\n\n      this.paddingTop = paddingTop + padding;\n      this.paddingBottom = paddingBottom + padding;\n    }\n  }\n\n  /**\n\t * Handle margins and padding interactions\n\t * @private\n\t */\n  _handleMargins() {\n    if (this._margins) {\n      this._margins.left = Math.max(this.paddingLeft, this._margins.left);\n      this._margins.top = Math.max(this.paddingTop, this._margins.top);\n      this._margins.right = Math.max(this.paddingRight, this._margins.right);\n      this._margins.bottom = Math.max(this.paddingBottom, this._margins.bottom);\n    }\n  }\n\n  afterFit() {\n    call(this.options.afterFit, [this]);\n  }\n\n  // Shared Methods\n  /**\n\t * @return {boolean}\n\t */\n  isHorizontal() {\n    const {axis, position} = this.options;\n    return position === 'top' || position === 'bottom' || axis === 'x';\n  }\n  /**\n\t * @return {boolean}\n\t */\n  isFullSize() {\n    return this.options.fullSize;\n  }\n\n  /**\n\t * @param {Tick[]} ticks\n\t * @private\n\t */\n  _convertTicksToLabels(ticks) {\n    this.beforeTickToLabelConversion();\n\n    this.generateTickLabels(ticks);\n\n    // Ticks should be skipped when callback returns null or undef, so lets remove those.\n    let i, ilen;\n    for (i = 0, ilen = ticks.length; i < ilen; i++) {\n      if (isNullOrUndef(ticks[i].label)) {\n        ticks.splice(i, 1);\n        ilen--;\n        i--;\n      }\n    }\n\n    this.afterTickToLabelConversion();\n  }\n\n  /**\n\t * @return {{ first: object, last: object, widest: object, highest: object, widths: Array, heights: array }}\n\t * @private\n\t */\n  _getLabelSizes() {\n    let labelSizes = this._labelSizes;\n\n    if (!labelSizes) {\n      const sampleSize = this.options.ticks.sampleSize;\n      let ticks = this.ticks;\n      if (sampleSize < ticks.length) {\n        ticks = sample(ticks, sampleSize);\n      }\n\n      this._labelSizes = labelSizes = this._computeLabelSizes(ticks, ticks.length, this.options.ticks.maxTicksLimit);\n    }\n\n    return labelSizes;\n  }\n\n  /**\n\t * Returns {width, height, offset} objects for the first, last, widest, highest tick\n\t * labels where offset indicates the anchor point offset from the top in pixels.\n\t * @return {{ first: object, last: object, widest: object, highest: object, widths: Array, heights: array }}\n\t * @private\n\t */\n  _computeLabelSizes(ticks, length, maxTicksLimit) {\n    const {ctx, _longestTextCache: caches} = this;\n    const widths = [];\n    const heights = [];\n    const increment = Math.floor(length / getTicksLimit(length, maxTicksLimit));\n    let widestLabelSize = 0;\n    let highestLabelSize = 0;\n    let i, j, jlen, label, tickFont, fontString, cache, lineHeight, width, height, nestedLabel;\n\n    for (i = 0; i < length; i += increment) {\n      label = ticks[i].label;\n      tickFont = this._resolveTickFontOptions(i);\n      ctx.font = fontString = tickFont.string;\n      cache = caches[fontString] = caches[fontString] || {data: {}, gc: []};\n      lineHeight = tickFont.lineHeight;\n      width = height = 0;\n      // Undefined labels and arrays should not be measured\n      if (!isNullOrUndef(label) && !isArray(label)) {\n        width = _measureText(ctx, cache.data, cache.gc, width, label);\n        height = lineHeight;\n      } else if (isArray(label)) {\n        // if it is an array let's measure each element\n        for (j = 0, jlen = label.length; j < jlen; ++j) {\n          nestedLabel = label[j];\n          // Undefined labels and arrays should not be measured\n          if (!isNullOrUndef(nestedLabel) && !isArray(nestedLabel)) {\n            width = _measureText(ctx, cache.data, cache.gc, width, nestedLabel);\n            height += lineHeight;\n          }\n        }\n      }\n      widths.push(width);\n      heights.push(height);\n      widestLabelSize = Math.max(width, widestLabelSize);\n      highestLabelSize = Math.max(height, highestLabelSize);\n    }\n    garbageCollect(caches, length);\n\n    const widest = widths.indexOf(widestLabelSize);\n    const highest = heights.indexOf(highestLabelSize);\n\n    const valueAt = (idx) => ({width: widths[idx] || 0, height: heights[idx] || 0});\n\n    return {\n      first: valueAt(0),\n      last: valueAt(length - 1),\n      widest: valueAt(widest),\n      highest: valueAt(highest),\n      widths,\n      heights,\n    };\n  }\n\n  /**\n\t * Used to get the label to display in the tooltip for the given value\n\t * @param {*} value\n\t * @return {string}\n\t */\n  getLabelForValue(value) {\n    return value;\n  }\n\n  /**\n\t * Returns the location of the given data point. Value can either be an index or a numerical value\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\n\t * @param {*} value\n\t * @param {number} [index]\n\t * @return {number}\n\t */\n  getPixelForValue(value, index) { // eslint-disable-line no-unused-vars\n    return NaN;\n  }\n\n  /**\n\t * Used to get the data value from a given pixel. This is the inverse of getPixelForValue\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\n\t * @param {number} pixel\n\t * @return {*}\n\t */\n  getValueForPixel(pixel) {} // eslint-disable-line no-unused-vars\n\n  /**\n\t * Returns the location of the tick at the given index\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\n\t * @param {number} index\n\t * @return {number}\n\t */\n  getPixelForTick(index) {\n    const ticks = this.ticks;\n    if (index < 0 || index > ticks.length - 1) {\n      return null;\n    }\n    return this.getPixelForValue(ticks[index].value);\n  }\n\n  /**\n\t * Utility for getting the pixel location of a percentage of scale\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\n\t * @param {number} decimal\n\t * @return {number}\n\t */\n  getPixelForDecimal(decimal) {\n    if (this._reversePixels) {\n      decimal = 1 - decimal;\n    }\n\n    const pixel = this._startPixel + decimal * this._length;\n    return _int16Range(this._alignToPixels ? _alignPixel(this.chart, pixel, 0) : pixel);\n  }\n\n  /**\n\t * @param {number} pixel\n\t * @return {number}\n\t */\n  getDecimalForPixel(pixel) {\n    const decimal = (pixel - this._startPixel) / this._length;\n    return this._reversePixels ? 1 - decimal : decimal;\n  }\n\n  /**\n\t * Returns the pixel for the minimum chart value\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\n\t * @return {number}\n\t */\n  getBasePixel() {\n    return this.getPixelForValue(this.getBaseValue());\n  }\n\n  /**\n\t * @return {number}\n\t */\n  getBaseValue() {\n    const {min, max} = this;\n\n    return min < 0 && max < 0 ? max :\n      min > 0 && max > 0 ? min :\n      0;\n  }\n\n  /**\n\t * @protected\n\t */\n  getContext(index) {\n    const ticks = this.ticks || [];\n\n    if (index >= 0 && index < ticks.length) {\n      const tick = ticks[index];\n      return tick.$context ||\n\t\t\t\t(tick.$context = createTickContext(this.getContext(), index, tick));\n    }\n    return this.$context ||\n\t\t\t(this.$context = createScaleContext(this.chart.getContext(), this));\n  }\n\n  /**\n\t * @return {number}\n\t * @private\n\t */\n  _tickSize() {\n    const optionTicks = this.options.ticks;\n\n    // Calculate space needed by label in axis direction.\n    const rot = toRadians(this.labelRotation);\n    const cos = Math.abs(Math.cos(rot));\n    const sin = Math.abs(Math.sin(rot));\n\n    const labelSizes = this._getLabelSizes();\n    const padding = optionTicks.autoSkipPadding || 0;\n    const w = labelSizes ? labelSizes.widest.width + padding : 0;\n    const h = labelSizes ? labelSizes.highest.height + padding : 0;\n\n    // Calculate space needed for 1 tick in axis direction.\n    return this.isHorizontal()\n      ? h * cos > w * sin ? w / cos : h / sin\n      : h * sin < w * cos ? h / cos : w / sin;\n  }\n\n  /**\n\t * @return {boolean}\n\t * @private\n\t */\n  _isVisible() {\n    const display = this.options.display;\n\n    if (display !== 'auto') {\n      return !!display;\n    }\n\n    return this.getMatchingVisibleMetas().length > 0;\n  }\n\n  /**\n\t * @private\n\t */\n  _computeGridLineItems(chartArea) {\n    const axis = this.axis;\n    const chart = this.chart;\n    const options = this.options;\n    const {grid, position, border} = options;\n    const offset = grid.offset;\n    const isHorizontal = this.isHorizontal();\n    const ticks = this.ticks;\n    const ticksLength = ticks.length + (offset ? 1 : 0);\n    const tl = getTickMarkLength(grid);\n    const items = [];\n\n    const borderOpts = border.setContext(this.getContext());\n    const axisWidth = borderOpts.display ? borderOpts.width : 0;\n    const axisHalfWidth = axisWidth / 2;\n    const alignBorderValue = function(pixel) {\n      return _alignPixel(chart, pixel, axisWidth);\n    };\n    let borderValue, i, lineValue, alignedLineValue;\n    let tx1, ty1, tx2, ty2, x1, y1, x2, y2;\n\n    if (position === 'top') {\n      borderValue = alignBorderValue(this.bottom);\n      ty1 = this.bottom - tl;\n      ty2 = borderValue - axisHalfWidth;\n      y1 = alignBorderValue(chartArea.top) + axisHalfWidth;\n      y2 = chartArea.bottom;\n    } else if (position === 'bottom') {\n      borderValue = alignBorderValue(this.top);\n      y1 = chartArea.top;\n      y2 = alignBorderValue(chartArea.bottom) - axisHalfWidth;\n      ty1 = borderValue + axisHalfWidth;\n      ty2 = this.top + tl;\n    } else if (position === 'left') {\n      borderValue = alignBorderValue(this.right);\n      tx1 = this.right - tl;\n      tx2 = borderValue - axisHalfWidth;\n      x1 = alignBorderValue(chartArea.left) + axisHalfWidth;\n      x2 = chartArea.right;\n    } else if (position === 'right') {\n      borderValue = alignBorderValue(this.left);\n      x1 = chartArea.left;\n      x2 = alignBorderValue(chartArea.right) - axisHalfWidth;\n      tx1 = borderValue + axisHalfWidth;\n      tx2 = this.left + tl;\n    } else if (axis === 'x') {\n      if (position === 'center') {\n        borderValue = alignBorderValue((chartArea.top + chartArea.bottom) / 2 + 0.5);\n      } else if (isObject(position)) {\n        const positionAxisID = Object.keys(position)[0];\n        const value = position[positionAxisID];\n        borderValue = alignBorderValue(this.chart.scales[positionAxisID].getPixelForValue(value));\n      }\n\n      y1 = chartArea.top;\n      y2 = chartArea.bottom;\n      ty1 = borderValue + axisHalfWidth;\n      ty2 = ty1 + tl;\n    } else if (axis === 'y') {\n      if (position === 'center') {\n        borderValue = alignBorderValue((chartArea.left + chartArea.right) / 2);\n      } else if (isObject(position)) {\n        const positionAxisID = Object.keys(position)[0];\n        const value = position[positionAxisID];\n        borderValue = alignBorderValue(this.chart.scales[positionAxisID].getPixelForValue(value));\n      }\n\n      tx1 = borderValue - axisHalfWidth;\n      tx2 = tx1 - tl;\n      x1 = chartArea.left;\n      x2 = chartArea.right;\n    }\n\n    const limit = valueOrDefault(options.ticks.maxTicksLimit, ticksLength);\n    const step = Math.max(1, Math.ceil(ticksLength / limit));\n    for (i = 0; i < ticksLength; i += step) {\n      const context = this.getContext(i);\n      const optsAtIndex = grid.setContext(context);\n      const optsAtIndexBorder = border.setContext(context);\n\n      const lineWidth = optsAtIndex.lineWidth;\n      const lineColor = optsAtIndex.color;\n      const borderDash = optsAtIndexBorder.dash || [];\n      const borderDashOffset = optsAtIndexBorder.dashOffset;\n\n      const tickWidth = optsAtIndex.tickWidth;\n      const tickColor = optsAtIndex.tickColor;\n      const tickBorderDash = optsAtIndex.tickBorderDash || [];\n      const tickBorderDashOffset = optsAtIndex.tickBorderDashOffset;\n\n      lineValue = getPixelForGridLine(this, i, offset);\n\n      // Skip if the pixel is out of the range\n      if (lineValue === undefined) {\n        continue;\n      }\n\n      alignedLineValue = _alignPixel(chart, lineValue, lineWidth);\n\n      if (isHorizontal) {\n        tx1 = tx2 = x1 = x2 = alignedLineValue;\n      } else {\n        ty1 = ty2 = y1 = y2 = alignedLineValue;\n      }\n\n      items.push({\n        tx1,\n        ty1,\n        tx2,\n        ty2,\n        x1,\n        y1,\n        x2,\n        y2,\n        width: lineWidth,\n        color: lineColor,\n        borderDash,\n        borderDashOffset,\n        tickWidth,\n        tickColor,\n        tickBorderDash,\n        tickBorderDashOffset,\n      });\n    }\n\n    this._ticksLength = ticksLength;\n    this._borderValue = borderValue;\n\n    return items;\n  }\n\n  /**\n\t * @private\n\t */\n  _computeLabelItems(chartArea) {\n    const axis = this.axis;\n    const options = this.options;\n    const {position, ticks: optionTicks} = options;\n    const isHorizontal = this.isHorizontal();\n    const ticks = this.ticks;\n    const {align, crossAlign, padding, mirror} = optionTicks;\n    const tl = getTickMarkLength(options.grid);\n    const tickAndPadding = tl + padding;\n    const hTickAndPadding = mirror ? -padding : tickAndPadding;\n    const rotation = -toRadians(this.labelRotation);\n    const items = [];\n    let i, ilen, tick, label, x, y, textAlign, pixel, font, lineHeight, lineCount, textOffset;\n    let textBaseline = 'middle';\n\n    if (position === 'top') {\n      y = this.bottom - hTickAndPadding;\n      textAlign = this._getXAxisLabelAlignment();\n    } else if (position === 'bottom') {\n      y = this.top + hTickAndPadding;\n      textAlign = this._getXAxisLabelAlignment();\n    } else if (position === 'left') {\n      const ret = this._getYAxisLabelAlignment(tl);\n      textAlign = ret.textAlign;\n      x = ret.x;\n    } else if (position === 'right') {\n      const ret = this._getYAxisLabelAlignment(tl);\n      textAlign = ret.textAlign;\n      x = ret.x;\n    } else if (axis === 'x') {\n      if (position === 'center') {\n        y = ((chartArea.top + chartArea.bottom) / 2) + tickAndPadding;\n      } else if (isObject(position)) {\n        const positionAxisID = Object.keys(position)[0];\n        const value = position[positionAxisID];\n        y = this.chart.scales[positionAxisID].getPixelForValue(value) + tickAndPadding;\n      }\n      textAlign = this._getXAxisLabelAlignment();\n    } else if (axis === 'y') {\n      if (position === 'center') {\n        x = ((chartArea.left + chartArea.right) / 2) - tickAndPadding;\n      } else if (isObject(position)) {\n        const positionAxisID = Object.keys(position)[0];\n        const value = position[positionAxisID];\n        x = this.chart.scales[positionAxisID].getPixelForValue(value);\n      }\n      textAlign = this._getYAxisLabelAlignment(tl).textAlign;\n    }\n\n    if (axis === 'y') {\n      if (align === 'start') {\n        textBaseline = 'top';\n      } else if (align === 'end') {\n        textBaseline = 'bottom';\n      }\n    }\n\n    const labelSizes = this._getLabelSizes();\n    for (i = 0, ilen = ticks.length; i < ilen; ++i) {\n      tick = ticks[i];\n      label = tick.label;\n\n      const optsAtIndex = optionTicks.setContext(this.getContext(i));\n      pixel = this.getPixelForTick(i) + optionTicks.labelOffset;\n      font = this._resolveTickFontOptions(i);\n      lineHeight = font.lineHeight;\n      lineCount = isArray(label) ? label.length : 1;\n      const halfCount = lineCount / 2;\n      const color = optsAtIndex.color;\n      const strokeColor = optsAtIndex.textStrokeColor;\n      const strokeWidth = optsAtIndex.textStrokeWidth;\n      let tickTextAlign = textAlign;\n\n      if (isHorizontal) {\n        x = pixel;\n\n        if (textAlign === 'inner') {\n          if (i === ilen - 1) {\n            tickTextAlign = !this.options.reverse ? 'right' : 'left';\n          } else if (i === 0) {\n            tickTextAlign = !this.options.reverse ? 'left' : 'right';\n          } else {\n            tickTextAlign = 'center';\n          }\n        }\n\n        if (position === 'top') {\n          if (crossAlign === 'near' || rotation !== 0) {\n            textOffset = -lineCount * lineHeight + lineHeight / 2;\n          } else if (crossAlign === 'center') {\n            textOffset = -labelSizes.highest.height / 2 - halfCount * lineHeight + lineHeight;\n          } else {\n            textOffset = -labelSizes.highest.height + lineHeight / 2;\n          }\n        } else {\n          // eslint-disable-next-line no-lonely-if\n          if (crossAlign === 'near' || rotation !== 0) {\n            textOffset = lineHeight / 2;\n          } else if (crossAlign === 'center') {\n            textOffset = labelSizes.highest.height / 2 - halfCount * lineHeight;\n          } else {\n            textOffset = labelSizes.highest.height - lineCount * lineHeight;\n          }\n        }\n        if (mirror) {\n          textOffset *= -1;\n        }\n        if (rotation !== 0 && !optsAtIndex.showLabelBackdrop) {\n          x += (lineHeight / 2) * Math.sin(rotation);\n        }\n      } else {\n        y = pixel;\n        textOffset = (1 - lineCount) * lineHeight / 2;\n      }\n\n      let backdrop;\n\n      if (optsAtIndex.showLabelBackdrop) {\n        const labelPadding = toPadding(optsAtIndex.backdropPadding);\n        const height = labelSizes.heights[i];\n        const width = labelSizes.widths[i];\n\n        let top = textOffset - labelPadding.top;\n        let left = 0 - labelPadding.left;\n\n        switch (textBaseline) {\n        case 'middle':\n          top -= height / 2;\n          break;\n        case 'bottom':\n          top -= height;\n          break;\n        default:\n          break;\n        }\n\n        switch (textAlign) {\n        case 'center':\n          left -= width / 2;\n          break;\n        case 'right':\n          left -= width;\n          break;\n        default:\n          break;\n        }\n\n        backdrop = {\n          left,\n          top,\n          width: width + labelPadding.width,\n          height: height + labelPadding.height,\n\n          color: optsAtIndex.backdropColor,\n        };\n      }\n\n      items.push({\n        label,\n        font,\n        textOffset,\n        options: {\n          rotation,\n          color,\n          strokeColor,\n          strokeWidth,\n          textAlign: tickTextAlign,\n          textBaseline,\n          translation: [x, y],\n          backdrop,\n        }\n      });\n    }\n\n    return items;\n  }\n\n  _getXAxisLabelAlignment() {\n    const {position, ticks} = this.options;\n    const rotation = -toRadians(this.labelRotation);\n\n    if (rotation) {\n      return position === 'top' ? 'left' : 'right';\n    }\n\n    let align = 'center';\n\n    if (ticks.align === 'start') {\n      align = 'left';\n    } else if (ticks.align === 'end') {\n      align = 'right';\n    } else if (ticks.align === 'inner') {\n      align = 'inner';\n    }\n\n    return align;\n  }\n\n  _getYAxisLabelAlignment(tl) {\n    const {position, ticks: {crossAlign, mirror, padding}} = this.options;\n    const labelSizes = this._getLabelSizes();\n    const tickAndPadding = tl + padding;\n    const widest = labelSizes.widest.width;\n\n    let textAlign;\n    let x;\n\n    if (position === 'left') {\n      if (mirror) {\n        x = this.right + padding;\n\n        if (crossAlign === 'near') {\n          textAlign = 'left';\n        } else if (crossAlign === 'center') {\n          textAlign = 'center';\n          x += (widest / 2);\n        } else {\n          textAlign = 'right';\n          x += widest;\n        }\n      } else {\n        x = this.right - tickAndPadding;\n\n        if (crossAlign === 'near') {\n          textAlign = 'right';\n        } else if (crossAlign === 'center') {\n          textAlign = 'center';\n          x -= (widest / 2);\n        } else {\n          textAlign = 'left';\n          x = this.left;\n        }\n      }\n    } else if (position === 'right') {\n      if (mirror) {\n        x = this.left + padding;\n\n        if (crossAlign === 'near') {\n          textAlign = 'right';\n        } else if (crossAlign === 'center') {\n          textAlign = 'center';\n          x -= (widest / 2);\n        } else {\n          textAlign = 'left';\n          x -= widest;\n        }\n      } else {\n        x = this.left + tickAndPadding;\n\n        if (crossAlign === 'near') {\n          textAlign = 'left';\n        } else if (crossAlign === 'center') {\n          textAlign = 'center';\n          x += widest / 2;\n        } else {\n          textAlign = 'right';\n          x = this.right;\n        }\n      }\n    } else {\n      textAlign = 'right';\n    }\n\n    return {textAlign, x};\n  }\n\n  /**\n\t * @private\n\t */\n  _computeLabelArea() {\n    if (this.options.ticks.mirror) {\n      return;\n    }\n\n    const chart = this.chart;\n    const position = this.options.position;\n\n    if (position === 'left' || position === 'right') {\n      return {top: 0, left: this.left, bottom: chart.height, right: this.right};\n    } if (position === 'top' || position === 'bottom') {\n      return {top: this.top, left: 0, bottom: this.bottom, right: chart.width};\n    }\n  }\n\n  /**\n   * @protected\n   */\n  drawBackground() {\n    const {ctx, options: {backgroundColor}, left, top, width, height} = this;\n    if (backgroundColor) {\n      ctx.save();\n      ctx.fillStyle = backgroundColor;\n      ctx.fillRect(left, top, width, height);\n      ctx.restore();\n    }\n  }\n\n  getLineWidthForValue(value) {\n    const grid = this.options.grid;\n    if (!this._isVisible() || !grid.display) {\n      return 0;\n    }\n    const ticks = this.ticks;\n    const index = ticks.findIndex(t => t.value === value);\n    if (index >= 0) {\n      const opts = grid.setContext(this.getContext(index));\n      return opts.lineWidth;\n    }\n    return 0;\n  }\n\n  /**\n\t * @protected\n\t */\n  drawGrid(chartArea) {\n    const grid = this.options.grid;\n    const ctx = this.ctx;\n    const items = this._gridLineItems || (this._gridLineItems = this._computeGridLineItems(chartArea));\n    let i, ilen;\n\n    const drawLine = (p1, p2, style) => {\n      if (!style.width || !style.color) {\n        return;\n      }\n      ctx.save();\n      ctx.lineWidth = style.width;\n      ctx.strokeStyle = style.color;\n      ctx.setLineDash(style.borderDash || []);\n      ctx.lineDashOffset = style.borderDashOffset;\n\n      ctx.beginPath();\n      ctx.moveTo(p1.x, p1.y);\n      ctx.lineTo(p2.x, p2.y);\n      ctx.stroke();\n      ctx.restore();\n    };\n\n    if (grid.display) {\n      for (i = 0, ilen = items.length; i < ilen; ++i) {\n        const item = items[i];\n\n        if (grid.drawOnChartArea) {\n          drawLine(\n            {x: item.x1, y: item.y1},\n            {x: item.x2, y: item.y2},\n            item\n          );\n        }\n\n        if (grid.drawTicks) {\n          drawLine(\n            {x: item.tx1, y: item.ty1},\n            {x: item.tx2, y: item.ty2},\n            {\n              color: item.tickColor,\n              width: item.tickWidth,\n              borderDash: item.tickBorderDash,\n              borderDashOffset: item.tickBorderDashOffset\n            }\n          );\n        }\n      }\n    }\n  }\n\n  /**\n\t * @protected\n\t */\n  drawBorder() {\n    const {chart, ctx, options: {border, grid}} = this;\n    const borderOpts = border.setContext(this.getContext());\n    const axisWidth = border.display ? borderOpts.width : 0;\n    if (!axisWidth) {\n      return;\n    }\n    const lastLineWidth = grid.setContext(this.getContext(0)).lineWidth;\n    const borderValue = this._borderValue;\n    let x1, x2, y1, y2;\n\n    if (this.isHorizontal()) {\n      x1 = _alignPixel(chart, this.left, axisWidth) - axisWidth / 2;\n      x2 = _alignPixel(chart, this.right, lastLineWidth) + lastLineWidth / 2;\n      y1 = y2 = borderValue;\n    } else {\n      y1 = _alignPixel(chart, this.top, axisWidth) - axisWidth / 2;\n      y2 = _alignPixel(chart, this.bottom, lastLineWidth) + lastLineWidth / 2;\n      x1 = x2 = borderValue;\n    }\n    ctx.save();\n    ctx.lineWidth = borderOpts.width;\n    ctx.strokeStyle = borderOpts.color;\n\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    ctx.stroke();\n\n    ctx.restore();\n  }\n\n  /**\n\t * @protected\n\t */\n  drawLabels(chartArea) {\n    const optionTicks = this.options.ticks;\n\n    if (!optionTicks.display) {\n      return;\n    }\n\n    const ctx = this.ctx;\n\n    const area = this._computeLabelArea();\n    if (area) {\n      clipArea(ctx, area);\n    }\n\n    const items = this.getLabelItems(chartArea);\n    for (const item of items) {\n      const renderTextOptions = item.options;\n      const tickFont = item.font;\n      const label = item.label;\n      const y = item.textOffset;\n      renderText(ctx, label, 0, y, tickFont, renderTextOptions);\n    }\n\n    if (area) {\n      unclipArea(ctx);\n    }\n  }\n\n  /**\n\t * @protected\n\t */\n  drawTitle() {\n    const {ctx, options: {position, title, reverse}} = this;\n\n    if (!title.display) {\n      return;\n    }\n\n    const font = toFont(title.font);\n    const padding = toPadding(title.padding);\n    const align = title.align;\n    let offset = font.lineHeight / 2;\n\n    if (position === 'bottom' || position === 'center' || isObject(position)) {\n      offset += padding.bottom;\n      if (isArray(title.text)) {\n        offset += font.lineHeight * (title.text.length - 1);\n      }\n    } else {\n      offset += padding.top;\n    }\n\n    const {titleX, titleY, maxWidth, rotation} = titleArgs(this, offset, position, align);\n\n    renderText(ctx, title.text, 0, 0, font, {\n      color: title.color,\n      maxWidth,\n      rotation,\n      textAlign: titleAlign(align, position, reverse),\n      textBaseline: 'middle',\n      translation: [titleX, titleY],\n    });\n  }\n\n  draw(chartArea) {\n    if (!this._isVisible()) {\n      return;\n    }\n\n    this.drawBackground();\n    this.drawGrid(chartArea);\n    this.drawBorder();\n    this.drawTitle();\n    this.drawLabels(chartArea);\n  }\n\n  /**\n\t * @return {object[]}\n\t * @private\n\t */\n  _layers() {\n    const opts = this.options;\n    const tz = opts.ticks && opts.ticks.z || 0;\n    const gz = valueOrDefault(opts.grid && opts.grid.z, -1);\n    const bz = valueOrDefault(opts.border && opts.border.z, 0);\n\n    if (!this._isVisible() || this.draw !== Scale.prototype.draw) {\n      // backward compatibility: draw has been overridden by custom scale\n      return [{\n        z: tz,\n        draw: (chartArea) => {\n          this.draw(chartArea);\n        }\n      }];\n    }\n\n    return [{\n      z: gz,\n      draw: (chartArea) => {\n        this.drawBackground();\n        this.drawGrid(chartArea);\n        this.drawTitle();\n      }\n    }, {\n      z: bz,\n      draw: () => {\n        this.drawBorder();\n      }\n    }, {\n      z: tz,\n      draw: (chartArea) => {\n        this.drawLabels(chartArea);\n      }\n    }];\n  }\n\n  /**\n\t * Returns visible dataset metas that are attached to this scale\n\t * @param {string} [type] - if specified, also filter by dataset type\n\t * @return {object[]}\n\t */\n  getMatchingVisibleMetas(type) {\n    const metas = this.chart.getSortedVisibleDatasetMetas();\n    const axisID = this.axis + 'AxisID';\n    const result = [];\n    let i, ilen;\n\n    for (i = 0, ilen = metas.length; i < ilen; ++i) {\n      const meta = metas[i];\n      if (meta[axisID] === this.id && (!type || meta.type === type)) {\n        result.push(meta);\n      }\n    }\n    return result;\n  }\n\n  /**\n\t * @param {number} index\n\t * @return {object}\n\t * @protected\n \t */\n  _resolveTickFontOptions(index) {\n    const opts = this.options.ticks.setContext(this.getContext(index));\n    return toFont(opts.font);\n  }\n\n  /**\n   * @protected\n   */\n  _maxDigits() {\n    const fontSize = this._resolveTickFontOptions(0).lineHeight;\n    return (this.isHorizontal() ? this.width : this.height) / fontSize;\n  }\n}\n","import {merge} from '../helpers/index.js';\nimport defaults, {overrides} from './core.defaults.js';\n\n/**\n * @typedef {{id: string, defaults: any, overrides?: any, defaultRoutes: any}} IChartComponent\n */\n\nexport default class TypedRegistry {\n  constructor(type, scope, override) {\n    this.type = type;\n    this.scope = scope;\n    this.override = override;\n    this.items = Object.create(null);\n  }\n\n  isForType(type) {\n    return Object.prototype.isPrototypeOf.call(this.type.prototype, type.prototype);\n  }\n\n  /**\n\t * @param {IChartComponent} item\n\t * @returns {string} The scope where items defaults were registered to.\n\t */\n  register(item) {\n    const proto = Object.getPrototypeOf(item);\n    let parentScope;\n\n    if (isIChartComponent(proto)) {\n      // Make sure the parent is registered and note the scope where its defaults are.\n      parentScope = this.register(proto);\n    }\n\n    const items = this.items;\n    const id = item.id;\n    const scope = this.scope + '.' + id;\n\n    if (!id) {\n      throw new Error('class does not have id: ' + item);\n    }\n\n    if (id in items) {\n      // already registered\n      return scope;\n    }\n\n    items[id] = item;\n    registerDefaults(item, scope, parentScope);\n    if (this.override) {\n      defaults.override(item.id, item.overrides);\n    }\n\n    return scope;\n  }\n\n  /**\n\t * @param {string} id\n\t * @returns {object?}\n\t */\n  get(id) {\n    return this.items[id];\n  }\n\n  /**\n\t * @param {IChartComponent} item\n\t */\n  unregister(item) {\n    const items = this.items;\n    const id = item.id;\n    const scope = this.scope;\n\n    if (id in items) {\n      delete items[id];\n    }\n\n    if (scope && id in defaults[scope]) {\n      delete defaults[scope][id];\n      if (this.override) {\n        delete overrides[id];\n      }\n    }\n  }\n}\n\nfunction registerDefaults(item, scope, parentScope) {\n  // Inherit the parent's defaults and keep existing defaults\n  const itemDefaults = merge(Object.create(null), [\n    parentScope ? defaults.get(parentScope) : {},\n    defaults.get(scope),\n    item.defaults\n  ]);\n\n  defaults.set(scope, itemDefaults);\n\n  if (item.defaultRoutes) {\n    routeDefaults(scope, item.defaultRoutes);\n  }\n\n  if (item.descriptors) {\n    defaults.describe(scope, item.descriptors);\n  }\n}\n\nfunction routeDefaults(scope, routes) {\n  Object.keys(routes).forEach(property => {\n    const propertyParts = property.split('.');\n    const sourceName = propertyParts.pop();\n    const sourceScope = [scope].concat(propertyParts).join('.');\n    const parts = routes[property].split('.');\n    const targetName = parts.pop();\n    const targetScope = parts.join('.');\n    defaults.route(sourceScope, sourceName, targetScope, targetName);\n  });\n}\n\nfunction isIChartComponent(proto) {\n  return 'id' in proto && 'defaults' in proto;\n}\n","import DatasetController from './core.datasetController.js';\nimport Element from './core.element.js';\nimport Scale from './core.scale.js';\nimport TypedRegistry from './core.typedRegistry.js';\nimport {each, callback as call, _capitalize} from '../helpers/helpers.core.js';\n\n/**\n * Please use the module's default export which provides a singleton instance\n * Note: class is exported for typedoc\n */\nexport class Registry {\n  constructor() {\n    this.controllers = new TypedRegistry(DatasetController, 'datasets', true);\n    this.elements = new TypedRegistry(Element, 'elements');\n    this.plugins = new TypedRegistry(Object, 'plugins');\n    this.scales = new TypedRegistry(Scale, 'scales');\n    // Order is important, Scale has Element in prototype chain,\n    // so Scales must be before Elements. Plugins are a fallback, so not listed here.\n    this._typedRegistries = [this.controllers, this.scales, this.elements];\n  }\n\n  /**\n\t * @param  {...any} args\n\t */\n  add(...args) {\n    this._each('register', args);\n  }\n\n  remove(...args) {\n    this._each('unregister', args);\n  }\n\n  /**\n\t * @param  {...typeof DatasetController} args\n\t */\n  addControllers(...args) {\n    this._each('register', args, this.controllers);\n  }\n\n  /**\n\t * @param  {...typeof Element} args\n\t */\n  addElements(...args) {\n    this._each('register', args, this.elements);\n  }\n\n  /**\n\t * @param  {...any} args\n\t */\n  addPlugins(...args) {\n    this._each('register', args, this.plugins);\n  }\n\n  /**\n\t * @param  {...typeof Scale} args\n\t */\n  addScales(...args) {\n    this._each('register', args, this.scales);\n  }\n\n  /**\n\t * @param {string} id\n\t * @returns {typeof DatasetController}\n\t */\n  getController(id) {\n    return this._get(id, this.controllers, 'controller');\n  }\n\n  /**\n\t * @param {string} id\n\t * @returns {typeof Element}\n\t */\n  getElement(id) {\n    return this._get(id, this.elements, 'element');\n  }\n\n  /**\n\t * @param {string} id\n\t * @returns {object}\n\t */\n  getPlugin(id) {\n    return this._get(id, this.plugins, 'plugin');\n  }\n\n  /**\n\t * @param {string} id\n\t * @returns {typeof Scale}\n\t */\n  getScale(id) {\n    return this._get(id, this.scales, 'scale');\n  }\n\n  /**\n\t * @param  {...typeof DatasetController} args\n\t */\n  removeControllers(...args) {\n    this._each('unregister', args, this.controllers);\n  }\n\n  /**\n\t * @param  {...typeof Element} args\n\t */\n  removeElements(...args) {\n    this._each('unregister', args, this.elements);\n  }\n\n  /**\n\t * @param  {...any} args\n\t */\n  removePlugins(...args) {\n    this._each('unregister', args, this.plugins);\n  }\n\n  /**\n\t * @param  {...typeof Scale} args\n\t */\n  removeScales(...args) {\n    this._each('unregister', args, this.scales);\n  }\n\n  /**\n\t * @private\n\t */\n  _each(method, args, typedRegistry) {\n    [...args].forEach(arg => {\n      const reg = typedRegistry || this._getRegistryForType(arg);\n      if (typedRegistry || reg.isForType(arg) || (reg === this.plugins && arg.id)) {\n        this._exec(method, reg, arg);\n      } else {\n        // Handle loopable args\n        // Use case:\n        //  import * as plugins from './plugins.js';\n        //  Chart.register(plugins);\n        each(arg, item => {\n          // If there are mixed types in the loopable, make sure those are\n          // registered in correct registry\n          // Use case: (treemap exporting controller, elements etc)\n          //  import * as treemap from 'chartjs-chart-treemap.js';\n          //  Chart.register(treemap);\n\n          const itemReg = typedRegistry || this._getRegistryForType(item);\n          this._exec(method, itemReg, item);\n        });\n      }\n    });\n  }\n\n  /**\n\t * @private\n\t */\n  _exec(method, registry, component) {\n    const camelMethod = _capitalize(method);\n    call(component['before' + camelMethod], [], component); // beforeRegister / beforeUnregister\n    registry[method](component);\n    call(component['after' + camelMethod], [], component); // afterRegister / afterUnregister\n  }\n\n  /**\n\t * @private\n\t */\n  _getRegistryForType(type) {\n    for (let i = 0; i < this._typedRegistries.length; i++) {\n      const reg = this._typedRegistries[i];\n      if (reg.isForType(type)) {\n        return reg;\n      }\n    }\n    // plugins is the fallback registry\n    return this.plugins;\n  }\n\n  /**\n\t * @private\n\t */\n  _get(id, typedRegistry, type) {\n    const item = typedRegistry.get(id);\n    if (item === undefined) {\n      throw new Error('\"' + id + '\" is not a registered ' + type + '.');\n    }\n    return item;\n  }\n\n}\n\n// singleton instance\nexport default /* #__PURE__ */ new Registry();\n","import registry from './core.registry.js';\nimport {callback as callCallback, isNullOrUndef, valueOrDefault} from '../helpers/helpers.core.js';\n\n/**\n * @typedef { import('./core.controller.js').default } Chart\n * @typedef { import('../types/index.js').ChartEvent } ChartEvent\n * @typedef { import('../plugins/plugin.tooltip.js').default } Tooltip\n */\n\n/**\n * @callback filterCallback\n * @param {{plugin: object, options: object}} value\n * @param {number} [index]\n * @param {array} [array]\n * @param {object} [thisArg]\n * @return {boolean}\n */\n\n\nexport default class PluginService {\n  constructor() {\n    this._init = [];\n  }\n\n  /**\n\t * Calls enabled plugins for `chart` on the specified hook and with the given args.\n\t * This method immediately returns as soon as a plugin explicitly returns false. The\n\t * returned value can be used, for instance, to interrupt the current action.\n\t * @param {Chart} chart - The chart instance for which plugins should be called.\n\t * @param {string} hook - The name of the plugin method to call (e.g. 'beforeUpdate').\n\t * @param {object} [args] - Extra arguments to apply to the hook call.\n   * @param {filterCallback} [filter] - Filtering function for limiting which plugins are notified\n\t * @returns {boolean} false if any of the plugins return false, else returns true.\n\t */\n  notify(chart, hook, args, filter) {\n    if (hook === 'beforeInit') {\n      this._init = this._createDescriptors(chart, true);\n      this._notify(this._init, chart, 'install');\n    }\n\n    const descriptors = filter ? this._descriptors(chart).filter(filter) : this._descriptors(chart);\n    const result = this._notify(descriptors, chart, hook, args);\n\n    if (hook === 'afterDestroy') {\n      this._notify(descriptors, chart, 'stop');\n      this._notify(this._init, chart, 'uninstall');\n    }\n    return result;\n  }\n\n  /**\n\t * @private\n\t */\n  _notify(descriptors, chart, hook, args) {\n    args = args || {};\n    for (const descriptor of descriptors) {\n      const plugin = descriptor.plugin;\n      const method = plugin[hook];\n      const params = [chart, args, descriptor.options];\n      if (callCallback(method, params, plugin) === false && args.cancelable) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  invalidate() {\n    // When plugins are registered, there is the possibility of a double\n    // invalidate situation. In this case, we only want to invalidate once.\n    // If we invalidate multiple times, the `_oldCache` is lost and all of the\n    // plugins are restarted without being correctly stopped.\n    // See https://github.com/chartjs/Chart.js/issues/8147\n    if (!isNullOrUndef(this._cache)) {\n      this._oldCache = this._cache;\n      this._cache = undefined;\n    }\n  }\n\n  /**\n\t * @param {Chart} chart\n\t * @private\n\t */\n  _descriptors(chart) {\n    if (this._cache) {\n      return this._cache;\n    }\n\n    const descriptors = this._cache = this._createDescriptors(chart);\n\n    this._notifyStateChanges(chart);\n\n    return descriptors;\n  }\n\n  _createDescriptors(chart, all) {\n    const config = chart && chart.config;\n    const options = valueOrDefault(config.options && config.options.plugins, {});\n    const plugins = allPlugins(config);\n    // options === false => all plugins are disabled\n    return options === false && !all ? [] : createDescriptors(chart, plugins, options, all);\n  }\n\n  /**\n\t * @param {Chart} chart\n\t * @private\n\t */\n  _notifyStateChanges(chart) {\n    const previousDescriptors = this._oldCache || [];\n    const descriptors = this._cache;\n    const diff = (a, b) => a.filter(x => !b.some(y => x.plugin.id === y.plugin.id));\n    this._notify(diff(previousDescriptors, descriptors), chart, 'stop');\n    this._notify(diff(descriptors, previousDescriptors), chart, 'start');\n  }\n}\n\n/**\n * @param {import('./core.config.js').default} config\n */\nfunction allPlugins(config) {\n  const localIds = {};\n  const plugins = [];\n  const keys = Object.keys(registry.plugins.items);\n  for (let i = 0; i < keys.length; i++) {\n    plugins.push(registry.getPlugin(keys[i]));\n  }\n\n  const local = config.plugins || [];\n  for (let i = 0; i < local.length; i++) {\n    const plugin = local[i];\n\n    if (plugins.indexOf(plugin) === -1) {\n      plugins.push(plugin);\n      localIds[plugin.id] = true;\n    }\n  }\n\n  return {plugins, localIds};\n}\n\nfunction getOpts(options, all) {\n  if (!all && options === false) {\n    return null;\n  }\n  if (options === true) {\n    return {};\n  }\n  return options;\n}\n\nfunction createDescriptors(chart, {plugins, localIds}, options, all) {\n  const result = [];\n  const context = chart.getContext();\n\n  for (const plugin of plugins) {\n    const id = plugin.id;\n    const opts = getOpts(options[id], all);\n    if (opts === null) {\n      continue;\n    }\n    result.push({\n      plugin,\n      options: pluginOpts(chart.config, {plugin, local: localIds[id]}, opts, context)\n    });\n  }\n\n  return result;\n}\n\nfunction pluginOpts(config, {plugin, local}, opts, context) {\n  const keys = config.pluginScopeKeys(plugin);\n  const scopes = config.getOptionScopes(opts, keys);\n  if (local && plugin.defaults) {\n    // make sure plugin defaults are in scopes for local (not registered) plugins\n    scopes.push(plugin.defaults);\n  }\n  return config.createResolver(scopes, context, [''], {\n    // These are just defaults that plugins can override\n    scriptable: false,\n    indexable: false,\n    allKeys: true\n  });\n}\n","import defaults, {overrides, descriptors} from './core.defaults.js';\nimport {mergeIf, resolveObjectKey, isArray, isFunction, valueOrDefault, isObject} from '../helpers/helpers.core.js';\nimport {_attachContext, _createResolver, _descriptors} from '../helpers/helpers.config.js';\n\nexport function getIndexAxis(type, options) {\n  const datasetDefaults = defaults.datasets[type] || {};\n  const datasetOptions = (options.datasets || {})[type] || {};\n  return datasetOptions.indexAxis || options.indexAxis || datasetDefaults.indexAxis || 'x';\n}\n\nfunction getAxisFromDefaultScaleID(id, indexAxis) {\n  let axis = id;\n  if (id === '_index_') {\n    axis = indexAxis;\n  } else if (id === '_value_') {\n    axis = indexAxis === 'x' ? 'y' : 'x';\n  }\n  return axis;\n}\n\nfunction getDefaultScaleIDFromAxis(axis, indexAxis) {\n  return axis === indexAxis ? '_index_' : '_value_';\n}\n\nfunction axisFromPosition(position) {\n  if (position === 'top' || position === 'bottom') {\n    return 'x';\n  }\n  if (position === 'left' || position === 'right') {\n    return 'y';\n  }\n}\n\nexport function determineAxis(id, scaleOptions) {\n  if (id === 'x' || id === 'y' || id === 'r') {\n    return id;\n  }\n\n  id = scaleOptions.axis\n    || axisFromPosition(scaleOptions.position)\n    || id.length > 1 && determineAxis(id[0].toLowerCase(), scaleOptions);\n\n  if (id) {\n    return id;\n  }\n\n  throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`);\n}\n\nfunction mergeScaleConfig(config, options) {\n  const chartDefaults = overrides[config.type] || {scales: {}};\n  const configScales = options.scales || {};\n  const chartIndexAxis = getIndexAxis(config.type, options);\n  const scales = Object.create(null);\n\n  // First figure out first scale id's per axis.\n  Object.keys(configScales).forEach(id => {\n    const scaleConf = configScales[id];\n    if (!isObject(scaleConf)) {\n      return console.error(`Invalid scale configuration for scale: ${id}`);\n    }\n    if (scaleConf._proxy) {\n      return console.warn(`Ignoring resolver passed as options for scale: ${id}`);\n    }\n    const axis = determineAxis(id, scaleConf);\n    const defaultId = getDefaultScaleIDFromAxis(axis, chartIndexAxis);\n    const defaultScaleOptions = chartDefaults.scales || {};\n    scales[id] = mergeIf(Object.create(null), [{axis}, scaleConf, defaultScaleOptions[axis], defaultScaleOptions[defaultId]]);\n  });\n\n  // Then merge dataset defaults to scale configs\n  config.data.datasets.forEach(dataset => {\n    const type = dataset.type || config.type;\n    const indexAxis = dataset.indexAxis || getIndexAxis(type, options);\n    const datasetDefaults = overrides[type] || {};\n    const defaultScaleOptions = datasetDefaults.scales || {};\n    Object.keys(defaultScaleOptions).forEach(defaultID => {\n      const axis = getAxisFromDefaultScaleID(defaultID, indexAxis);\n      const id = dataset[axis + 'AxisID'] || axis;\n      scales[id] = scales[id] || Object.create(null);\n      mergeIf(scales[id], [{axis}, configScales[id], defaultScaleOptions[defaultID]]);\n    });\n  });\n\n  // apply scale defaults, if not overridden by dataset defaults\n  Object.keys(scales).forEach(key => {\n    const scale = scales[key];\n    mergeIf(scale, [defaults.scales[scale.type], defaults.scale]);\n  });\n\n  return scales;\n}\n\nfunction initOptions(config) {\n  const options = config.options || (config.options = {});\n\n  options.plugins = valueOrDefault(options.plugins, {});\n  options.scales = mergeScaleConfig(config, options);\n}\n\nfunction initData(data) {\n  data = data || {};\n  data.datasets = data.datasets || [];\n  data.labels = data.labels || [];\n  return data;\n}\n\nfunction initConfig(config) {\n  config = config || {};\n  config.data = initData(config.data);\n\n  initOptions(config);\n\n  return config;\n}\n\nconst keyCache = new Map();\nconst keysCached = new Set();\n\nfunction cachedKeys(cacheKey, generate) {\n  let keys = keyCache.get(cacheKey);\n  if (!keys) {\n    keys = generate();\n    keyCache.set(cacheKey, keys);\n    keysCached.add(keys);\n  }\n  return keys;\n}\n\nconst addIfFound = (set, obj, key) => {\n  const opts = resolveObjectKey(obj, key);\n  if (opts !== undefined) {\n    set.add(opts);\n  }\n};\n\nexport default class Config {\n  constructor(config) {\n    this._config = initConfig(config);\n    this._scopeCache = new Map();\n    this._resolverCache = new Map();\n  }\n\n  get platform() {\n    return this._config.platform;\n  }\n\n  get type() {\n    return this._config.type;\n  }\n\n  set type(type) {\n    this._config.type = type;\n  }\n\n  get data() {\n    return this._config.data;\n  }\n\n  set data(data) {\n    this._config.data = initData(data);\n  }\n\n  get options() {\n    return this._config.options;\n  }\n\n  set options(options) {\n    this._config.options = options;\n  }\n\n  get plugins() {\n    return this._config.plugins;\n  }\n\n  update() {\n    const config = this._config;\n    this.clearCache();\n    initOptions(config);\n  }\n\n  clearCache() {\n    this._scopeCache.clear();\n    this._resolverCache.clear();\n  }\n\n  /**\n   * Returns the option scope keys for resolving dataset options.\n   * These keys do not include the dataset itself, because it is not under options.\n   * @param {string} datasetType\n   * @return {string[][]}\n   */\n  datasetScopeKeys(datasetType) {\n    return cachedKeys(datasetType,\n      () => [[\n        `datasets.${datasetType}`,\n        ''\n      ]]);\n  }\n\n  /**\n   * Returns the option scope keys for resolving dataset animation options.\n   * These keys do not include the dataset itself, because it is not under options.\n   * @param {string} datasetType\n   * @param {string} transition\n   * @return {string[][]}\n   */\n  datasetAnimationScopeKeys(datasetType, transition) {\n    return cachedKeys(`${datasetType}.transition.${transition}`,\n      () => [\n        [\n          `datasets.${datasetType}.transitions.${transition}`,\n          `transitions.${transition}`,\n        ],\n        // The following are used for looking up the `animations` and `animation` keys\n        [\n          `datasets.${datasetType}`,\n          ''\n        ]\n      ]);\n  }\n\n  /**\n   * Returns the options scope keys for resolving element options that belong\n   * to an dataset. These keys do not include the dataset itself, because it\n   * is not under options.\n   * @param {string} datasetType\n   * @param {string} elementType\n   * @return {string[][]}\n   */\n  datasetElementScopeKeys(datasetType, elementType) {\n    return cachedKeys(`${datasetType}-${elementType}`,\n      () => [[\n        `datasets.${datasetType}.elements.${elementType}`,\n        `datasets.${datasetType}`,\n        `elements.${elementType}`,\n        ''\n      ]]);\n  }\n\n  /**\n   * Returns the options scope keys for resolving plugin options.\n   * @param {{id: string, additionalOptionScopes?: string[]}} plugin\n   * @return {string[][]}\n   */\n  pluginScopeKeys(plugin) {\n    const id = plugin.id;\n    const type = this.type;\n    return cachedKeys(`${type}-plugin-${id}`,\n      () => [[\n        `plugins.${id}`,\n        ...plugin.additionalOptionScopes || [],\n      ]]);\n  }\n\n  /**\n   * @private\n   */\n  _cachedScopes(mainScope, resetCache) {\n    const _scopeCache = this._scopeCache;\n    let cache = _scopeCache.get(mainScope);\n    if (!cache || resetCache) {\n      cache = new Map();\n      _scopeCache.set(mainScope, cache);\n    }\n    return cache;\n  }\n\n  /**\n   * Resolves the objects from options and defaults for option value resolution.\n   * @param {object} mainScope - The main scope object for options\n   * @param {string[][]} keyLists - The arrays of keys in resolution order\n   * @param {boolean} [resetCache] - reset the cache for this mainScope\n   */\n  getOptionScopes(mainScope, keyLists, resetCache) {\n    const {options, type} = this;\n    const cache = this._cachedScopes(mainScope, resetCache);\n    const cached = cache.get(keyLists);\n    if (cached) {\n      return cached;\n    }\n\n    const scopes = new Set();\n\n    keyLists.forEach(keys => {\n      if (mainScope) {\n        scopes.add(mainScope);\n        keys.forEach(key => addIfFound(scopes, mainScope, key));\n      }\n      keys.forEach(key => addIfFound(scopes, options, key));\n      keys.forEach(key => addIfFound(scopes, overrides[type] || {}, key));\n      keys.forEach(key => addIfFound(scopes, defaults, key));\n      keys.forEach(key => addIfFound(scopes, descriptors, key));\n    });\n\n    const array = Array.from(scopes);\n    if (array.length === 0) {\n      array.push(Object.create(null));\n    }\n    if (keysCached.has(keyLists)) {\n      cache.set(keyLists, array);\n    }\n    return array;\n  }\n\n  /**\n   * Returns the option scopes for resolving chart options\n   * @return {object[]}\n   */\n  chartOptionScopes() {\n    const {options, type} = this;\n\n    return [\n      options,\n      overrides[type] || {},\n      defaults.datasets[type] || {}, // https://github.com/chartjs/Chart.js/issues/8531\n      {type},\n      defaults,\n      descriptors\n    ];\n  }\n\n  /**\n   * @param {object[]} scopes\n   * @param {string[]} names\n   * @param {function|object} context\n   * @param {string[]} [prefixes]\n   * @return {object}\n   */\n  resolveNamedOptions(scopes, names, context, prefixes = ['']) {\n    const result = {$shared: true};\n    const {resolver, subPrefixes} = getResolver(this._resolverCache, scopes, prefixes);\n    let options = resolver;\n    if (needContext(resolver, names)) {\n      result.$shared = false;\n      context = isFunction(context) ? context() : context;\n      // subResolver is passed to scriptable options. It should not resolve to hover options.\n      const subResolver = this.createResolver(scopes, context, subPrefixes);\n      options = _attachContext(resolver, context, subResolver);\n    }\n\n    for (const prop of names) {\n      result[prop] = options[prop];\n    }\n    return result;\n  }\n\n  /**\n   * @param {object[]} scopes\n   * @param {object} [context]\n   * @param {string[]} [prefixes]\n   * @param {{scriptable: boolean, indexable: boolean, allKeys?: boolean}} [descriptorDefaults]\n   */\n  createResolver(scopes, context, prefixes = [''], descriptorDefaults) {\n    const {resolver} = getResolver(this._resolverCache, scopes, prefixes);\n    return isObject(context)\n      ? _attachContext(resolver, context, undefined, descriptorDefaults)\n      : resolver;\n  }\n}\n\nfunction getResolver(resolverCache, scopes, prefixes) {\n  let cache = resolverCache.get(scopes);\n  if (!cache) {\n    cache = new Map();\n    resolverCache.set(scopes, cache);\n  }\n  const cacheKey = prefixes.join();\n  let cached = cache.get(cacheKey);\n  if (!cached) {\n    const resolver = _createResolver(scopes, prefixes);\n    cached = {\n      resolver,\n      subPrefixes: prefixes.filter(p => !p.toLowerCase().includes('hover'))\n    };\n    cache.set(cacheKey, cached);\n  }\n  return cached;\n}\n\nconst hasFunction = value => isObject(value)\n  && Object.getOwnPropertyNames(value).reduce((acc, key) => acc || isFunction(value[key]), false);\n\nfunction needContext(proxy, names) {\n  const {isScriptable, isIndexable} = _descriptors(proxy);\n\n  for (const prop of names) {\n    const scriptable = isScriptable(prop);\n    const indexable = isIndexable(prop);\n    const value = (indexable || scriptable) && proxy[prop];\n    if ((scriptable && (isFunction(value) || hasFunction(value)))\n      || (indexable && isArray(value))) {\n      return true;\n    }\n  }\n  return false;\n}\n","import animator from './core.animator.js';\nimport defaults, {overrides} from './core.defaults.js';\nimport Interaction from './core.interaction.js';\nimport layouts from './core.layouts.js';\nimport {_detectPlatform} from '../platform/index.js';\nimport PluginService from './core.plugins.js';\nimport registry from './core.registry.js';\nimport Config, {determineAxis, getIndexAxis} from './core.config.js';\nimport {retinaScale, _isDomSupported} from '../helpers/helpers.dom.js';\nimport {each, callback as callCallback, uid, valueOrDefault, _elementsEqual, isNullOrUndef, setsEqual, defined, isFunction, _isClickEvent} from '../helpers/helpers.core.js';\nimport {clearCanvas, clipArea, createContext, unclipArea, _isPointInArea} from '../helpers/index.js';\n// @ts-ignore\nimport {version} from '../../package.json';\nimport {debounce} from '../helpers/helpers.extras.js';\n\n/**\n * @typedef { import('../types/index.js').ChartEvent } ChartEvent\n * @typedef { import('../types/index.js').Point } Point\n */\n\nconst KNOWN_POSITIONS = ['top', 'bottom', 'left', 'right', 'chartArea'];\nfunction positionIsHorizontal(position, axis) {\n  return position === 'top' || position === 'bottom' || (KNOWN_POSITIONS.indexOf(position) === -1 && axis === 'x');\n}\n\nfunction compare2Level(l1, l2) {\n  return function(a, b) {\n    return a[l1] === b[l1]\n      ? a[l2] - b[l2]\n      : a[l1] - b[l1];\n  };\n}\n\nfunction onAnimationsComplete(context) {\n  const chart = context.chart;\n  const animationOptions = chart.options.animation;\n\n  chart.notifyPlugins('afterRender');\n  callCallback(animationOptions && animationOptions.onComplete, [context], chart);\n}\n\nfunction onAnimationProgress(context) {\n  const chart = context.chart;\n  const animationOptions = chart.options.animation;\n  callCallback(animationOptions && animationOptions.onProgress, [context], chart);\n}\n\n/**\n * Chart.js can take a string id of a canvas element, a 2d context, or a canvas element itself.\n * Attempt to unwrap the item passed into the chart constructor so that it is a canvas element (if possible).\n */\nfunction getCanvas(item) {\n  if (_isDomSupported() && typeof item === 'string') {\n    item = document.getElementById(item);\n  } else if (item && item.length) {\n    // Support for array based queries (such as jQuery)\n    item = item[0];\n  }\n\n  if (item && item.canvas) {\n    // Support for any object associated to a canvas (including a context2d)\n    item = item.canvas;\n  }\n  return item;\n}\n\nconst instances = {};\nconst getChart = (key) => {\n  const canvas = getCanvas(key);\n  return Object.values(instances).filter((c) => c.canvas === canvas).pop();\n};\n\nfunction moveNumericKeys(obj, start, move) {\n  const keys = Object.keys(obj);\n  for (const key of keys) {\n    const intKey = +key;\n    if (intKey >= start) {\n      const value = obj[key];\n      delete obj[key];\n      if (move > 0 || intKey > start) {\n        obj[intKey + move] = value;\n      }\n    }\n  }\n}\n\n/**\n * @param {ChartEvent} e\n * @param {ChartEvent|null} lastEvent\n * @param {boolean} inChartArea\n * @param {boolean} isClick\n * @returns {ChartEvent|null}\n */\nfunction determineLastEvent(e, lastEvent, inChartArea, isClick) {\n  if (!inChartArea || e.type === 'mouseout') {\n    return null;\n  }\n  if (isClick) {\n    return lastEvent;\n  }\n  return e;\n}\n\nfunction getDatasetArea(meta) {\n  const {xScale, yScale} = meta;\n  if (xScale && yScale) {\n    return {\n      left: xScale.left,\n      right: xScale.right,\n      top: yScale.top,\n      bottom: yScale.bottom\n    };\n  }\n}\n\nclass Chart {\n\n  static defaults = defaults;\n  static instances = instances;\n  static overrides = overrides;\n  static registry = registry;\n  static version = version;\n  static getChart = getChart;\n\n  static register(...items) {\n    registry.add(...items);\n    invalidatePlugins();\n  }\n\n  static unregister(...items) {\n    registry.remove(...items);\n    invalidatePlugins();\n  }\n\n  // eslint-disable-next-line max-statements\n  constructor(item, userConfig) {\n    const config = this.config = new Config(userConfig);\n    const initialCanvas = getCanvas(item);\n    const existingChart = getChart(initialCanvas);\n    if (existingChart) {\n      throw new Error(\n        'Canvas is already in use. Chart with ID \\'' + existingChart.id + '\\'' +\n\t\t\t\t' must be destroyed before the canvas with ID \\'' + existingChart.canvas.id + '\\' can be reused.'\n      );\n    }\n\n    const options = config.createResolver(config.chartOptionScopes(), this.getContext());\n\n    this.platform = new (config.platform || _detectPlatform(initialCanvas))();\n    this.platform.updateConfig(config);\n\n    const context = this.platform.acquireContext(initialCanvas, options.aspectRatio);\n    const canvas = context && context.canvas;\n    const height = canvas && canvas.height;\n    const width = canvas && canvas.width;\n\n    this.id = uid();\n    this.ctx = context;\n    this.canvas = canvas;\n    this.width = width;\n    this.height = height;\n    this._options = options;\n    // Store the previously used aspect ratio to determine if a resize\n    // is needed during updates. Do this after _options is set since\n    // aspectRatio uses a getter\n    this._aspectRatio = this.aspectRatio;\n    this._layers = [];\n    this._metasets = [];\n    this._stacks = undefined;\n    this.boxes = [];\n    this.currentDevicePixelRatio = undefined;\n    this.chartArea = undefined;\n    this._active = [];\n    this._lastEvent = undefined;\n    this._listeners = {};\n    /** @type {?{attach?: function, detach?: function, resize?: function}} */\n    this._responsiveListeners = undefined;\n    this._sortedMetasets = [];\n    this.scales = {};\n    this._plugins = new PluginService();\n    this.$proxies = {};\n    this._hiddenIndices = {};\n    this.attached = false;\n    this._animationsDisabled = undefined;\n    this.$context = undefined;\n    this._doResize = debounce(mode => this.update(mode), options.resizeDelay || 0);\n    this._dataChanges = [];\n\n    // Add the chart instance to the global namespace\n    instances[this.id] = this;\n\n    if (!context || !canvas) {\n      // The given item is not a compatible context2d element, let's return before finalizing\n      // the chart initialization but after setting basic chart / controller properties that\n      // can help to figure out that the chart is not valid (e.g chart.canvas !== null);\n      // https://github.com/chartjs/Chart.js/issues/2807\n      console.error(\"Failed to create chart: can't acquire context from the given item\");\n      return;\n    }\n\n    animator.listen(this, 'complete', onAnimationsComplete);\n    animator.listen(this, 'progress', onAnimationProgress);\n\n    this._initialize();\n    if (this.attached) {\n      this.update();\n    }\n  }\n\n  get aspectRatio() {\n    const {options: {aspectRatio, maintainAspectRatio}, width, height, _aspectRatio} = this;\n    if (!isNullOrUndef(aspectRatio)) {\n      // If aspectRatio is defined in options, use that.\n      return aspectRatio;\n    }\n\n    if (maintainAspectRatio && _aspectRatio) {\n      // If maintainAspectRatio is truthly and we had previously determined _aspectRatio, use that\n      return _aspectRatio;\n    }\n\n    // Calculate\n    return height ? width / height : null;\n  }\n\n  get data() {\n    return this.config.data;\n  }\n\n  set data(data) {\n    this.config.data = data;\n  }\n\n  get options() {\n    return this._options;\n  }\n\n  set options(options) {\n    this.config.options = options;\n  }\n\n  get registry() {\n    return registry;\n  }\n\n  /**\n\t * @private\n\t */\n  _initialize() {\n    // Before init plugin notification\n    this.notifyPlugins('beforeInit');\n\n    if (this.options.responsive) {\n      this.resize();\n    } else {\n      retinaScale(this, this.options.devicePixelRatio);\n    }\n\n    this.bindEvents();\n\n    // After init plugin notification\n    this.notifyPlugins('afterInit');\n\n    return this;\n  }\n\n  clear() {\n    clearCanvas(this.canvas, this.ctx);\n    return this;\n  }\n\n  stop() {\n    animator.stop(this);\n    return this;\n  }\n\n  /**\n\t * Resize the chart to its container or to explicit dimensions.\n\t * @param {number} [width]\n\t * @param {number} [height]\n\t */\n  resize(width, height) {\n    if (!animator.running(this)) {\n      this._resize(width, height);\n    } else {\n      this._resizeBeforeDraw = {width, height};\n    }\n  }\n\n  _resize(width, height) {\n    const options = this.options;\n    const canvas = this.canvas;\n    const aspectRatio = options.maintainAspectRatio && this.aspectRatio;\n    const newSize = this.platform.getMaximumSize(canvas, width, height, aspectRatio);\n    const newRatio = options.devicePixelRatio || this.platform.getDevicePixelRatio();\n    const mode = this.width ? 'resize' : 'attach';\n\n    this.width = newSize.width;\n    this.height = newSize.height;\n    this._aspectRatio = this.aspectRatio;\n    if (!retinaScale(this, newRatio, true)) {\n      return;\n    }\n\n    this.notifyPlugins('resize', {size: newSize});\n\n    callCallback(options.onResize, [this, newSize], this);\n\n    if (this.attached) {\n      if (this._doResize(mode)) {\n        // The resize update is delayed, only draw without updating.\n        this.render();\n      }\n    }\n  }\n\n  ensureScalesHaveIDs() {\n    const options = this.options;\n    const scalesOptions = options.scales || {};\n\n    each(scalesOptions, (axisOptions, axisID) => {\n      axisOptions.id = axisID;\n    });\n  }\n\n  /**\n\t * Builds a map of scale ID to scale object for future lookup.\n\t */\n  buildOrUpdateScales() {\n    const options = this.options;\n    const scaleOpts = options.scales;\n    const scales = this.scales;\n    const updated = Object.keys(scales).reduce((obj, id) => {\n      obj[id] = false;\n      return obj;\n    }, {});\n    let items = [];\n\n    if (scaleOpts) {\n      items = items.concat(\n        Object.keys(scaleOpts).map((id) => {\n          const scaleOptions = scaleOpts[id];\n          const axis = determineAxis(id, scaleOptions);\n          const isRadial = axis === 'r';\n          const isHorizontal = axis === 'x';\n          return {\n            options: scaleOptions,\n            dposition: isRadial ? 'chartArea' : isHorizontal ? 'bottom' : 'left',\n            dtype: isRadial ? 'radialLinear' : isHorizontal ? 'category' : 'linear'\n          };\n        })\n      );\n    }\n\n    each(items, (item) => {\n      const scaleOptions = item.options;\n      const id = scaleOptions.id;\n      const axis = determineAxis(id, scaleOptions);\n      const scaleType = valueOrDefault(scaleOptions.type, item.dtype);\n\n      if (scaleOptions.position === undefined || positionIsHorizontal(scaleOptions.position, axis) !== positionIsHorizontal(item.dposition)) {\n        scaleOptions.position = item.dposition;\n      }\n\n      updated[id] = true;\n      let scale = null;\n      if (id in scales && scales[id].type === scaleType) {\n        scale = scales[id];\n      } else {\n        const scaleClass = registry.getScale(scaleType);\n        scale = new scaleClass({\n          id,\n          type: scaleType,\n          ctx: this.ctx,\n          chart: this\n        });\n        scales[scale.id] = scale;\n      }\n\n      scale.init(scaleOptions, options);\n    });\n    // clear up discarded scales\n    each(updated, (hasUpdated, id) => {\n      if (!hasUpdated) {\n        delete scales[id];\n      }\n    });\n\n    each(scales, (scale) => {\n      layouts.configure(this, scale, scale.options);\n      layouts.addBox(this, scale);\n    });\n  }\n\n  /**\n\t * @private\n\t */\n  _updateMetasets() {\n    const metasets = this._metasets;\n    const numData = this.data.datasets.length;\n    const numMeta = metasets.length;\n\n    metasets.sort((a, b) => a.index - b.index);\n    if (numMeta > numData) {\n      for (let i = numData; i < numMeta; ++i) {\n        this._destroyDatasetMeta(i);\n      }\n      metasets.splice(numData, numMeta - numData);\n    }\n    this._sortedMetasets = metasets.slice(0).sort(compare2Level('order', 'index'));\n  }\n\n  /**\n\t * @private\n\t */\n  _removeUnreferencedMetasets() {\n    const {_metasets: metasets, data: {datasets}} = this;\n    if (metasets.length > datasets.length) {\n      delete this._stacks;\n    }\n    metasets.forEach((meta, index) => {\n      if (datasets.filter(x => x === meta._dataset).length === 0) {\n        this._destroyDatasetMeta(index);\n      }\n    });\n  }\n\n  buildOrUpdateControllers() {\n    const newControllers = [];\n    const datasets = this.data.datasets;\n    let i, ilen;\n\n    this._removeUnreferencedMetasets();\n\n    for (i = 0, ilen = datasets.length; i < ilen; i++) {\n      const dataset = datasets[i];\n      let meta = this.getDatasetMeta(i);\n      const type = dataset.type || this.config.type;\n\n      if (meta.type && meta.type !== type) {\n        this._destroyDatasetMeta(i);\n        meta = this.getDatasetMeta(i);\n      }\n      meta.type = type;\n      meta.indexAxis = dataset.indexAxis || getIndexAxis(type, this.options);\n      meta.order = dataset.order || 0;\n      meta.index = i;\n      meta.label = '' + dataset.label;\n      meta.visible = this.isDatasetVisible(i);\n\n      if (meta.controller) {\n        meta.controller.updateIndex(i);\n        meta.controller.linkScales();\n      } else {\n        const ControllerClass = registry.getController(type);\n        const {datasetElementType, dataElementType} = defaults.datasets[type];\n        Object.assign(ControllerClass, {\n          dataElementType: registry.getElement(dataElementType),\n          datasetElementType: datasetElementType && registry.getElement(datasetElementType)\n        });\n        meta.controller = new ControllerClass(this, i);\n        newControllers.push(meta.controller);\n      }\n    }\n\n    this._updateMetasets();\n    return newControllers;\n  }\n\n  /**\n\t * Reset the elements of all datasets\n\t * @private\n\t */\n  _resetElements() {\n    each(this.data.datasets, (dataset, datasetIndex) => {\n      this.getDatasetMeta(datasetIndex).controller.reset();\n    }, this);\n  }\n\n  /**\n\t* Resets the chart back to its state before the initial animation\n\t*/\n  reset() {\n    this._resetElements();\n    this.notifyPlugins('reset');\n  }\n\n  update(mode) {\n    const config = this.config;\n\n    config.update();\n    const options = this._options = config.createResolver(config.chartOptionScopes(), this.getContext());\n    const animsDisabled = this._animationsDisabled = !options.animation;\n\n    this._updateScales();\n    this._checkEventBindings();\n    this._updateHiddenIndices();\n\n    // plugins options references might have change, let's invalidate the cache\n    // https://github.com/chartjs/Chart.js/issues/5111#issuecomment-355934167\n    this._plugins.invalidate();\n\n    if (this.notifyPlugins('beforeUpdate', {mode, cancelable: true}) === false) {\n      return;\n    }\n\n    // Make sure dataset controllers are updated and new controllers are reset\n    const newControllers = this.buildOrUpdateControllers();\n\n    this.notifyPlugins('beforeElementsUpdate');\n\n    // Make sure all dataset controllers have correct meta data counts\n    let minPadding = 0;\n    for (let i = 0, ilen = this.data.datasets.length; i < ilen; i++) {\n      const {controller} = this.getDatasetMeta(i);\n      const reset = !animsDisabled && newControllers.indexOf(controller) === -1;\n      // New controllers will be reset after the layout pass, so we only want to modify\n      // elements added to new datasets\n      controller.buildOrUpdateElements(reset);\n      minPadding = Math.max(+controller.getMaxOverflow(), minPadding);\n    }\n    minPadding = this._minPadding = options.layout.autoPadding ? minPadding : 0;\n    this._updateLayout(minPadding);\n\n    // Only reset the controllers if we have animations\n    if (!animsDisabled) {\n      // Can only reset the new controllers after the scales have been updated\n      // Reset is done to get the starting point for the initial animation\n      each(newControllers, (controller) => {\n        controller.reset();\n      });\n    }\n\n    this._updateDatasets(mode);\n\n    // Do this before render so that any plugins that need final scale updates can use it\n    this.notifyPlugins('afterUpdate', {mode});\n\n    this._layers.sort(compare2Level('z', '_idx'));\n\n    // Replay last event from before update, or set hover styles on active elements\n    const {_active, _lastEvent} = this;\n    if (_lastEvent) {\n      this._eventHandler(_lastEvent, true);\n    } else if (_active.length) {\n      this._updateHoverStyles(_active, _active, true);\n    }\n\n    this.render();\n  }\n\n  /**\n   * @private\n   */\n  _updateScales() {\n    each(this.scales, (scale) => {\n      layouts.removeBox(this, scale);\n    });\n\n    this.ensureScalesHaveIDs();\n    this.buildOrUpdateScales();\n  }\n\n  /**\n   * @private\n   */\n  _checkEventBindings() {\n    const options = this.options;\n    const existingEvents = new Set(Object.keys(this._listeners));\n    const newEvents = new Set(options.events);\n\n    if (!setsEqual(existingEvents, newEvents) || !!this._responsiveListeners !== options.responsive) {\n      // The configured events have changed. Rebind.\n      this.unbindEvents();\n      this.bindEvents();\n    }\n  }\n\n  /**\n   * @private\n   */\n  _updateHiddenIndices() {\n    const {_hiddenIndices} = this;\n    const changes = this._getUniformDataChanges() || [];\n    for (const {method, start, count} of changes) {\n      const move = method === '_removeElements' ? -count : count;\n      moveNumericKeys(_hiddenIndices, start, move);\n    }\n  }\n\n  /**\n   * @private\n   */\n  _getUniformDataChanges() {\n    const _dataChanges = this._dataChanges;\n    if (!_dataChanges || !_dataChanges.length) {\n      return;\n    }\n\n    this._dataChanges = [];\n    const datasetCount = this.data.datasets.length;\n    const makeSet = (idx) => new Set(\n      _dataChanges\n        .filter(c => c[0] === idx)\n        .map((c, i) => i + ',' + c.splice(1).join(','))\n    );\n\n    const changeSet = makeSet(0);\n    for (let i = 1; i < datasetCount; i++) {\n      if (!setsEqual(changeSet, makeSet(i))) {\n        return;\n      }\n    }\n    return Array.from(changeSet)\n      .map(c => c.split(','))\n      .map(a => ({method: a[1], start: +a[2], count: +a[3]}));\n  }\n\n  /**\n\t * Updates the chart layout unless a plugin returns `false` to the `beforeLayout`\n\t * hook, in which case, plugins will not be called on `afterLayout`.\n\t * @private\n\t */\n  _updateLayout(minPadding) {\n    if (this.notifyPlugins('beforeLayout', {cancelable: true}) === false) {\n      return;\n    }\n\n    layouts.update(this, this.width, this.height, minPadding);\n\n    const area = this.chartArea;\n    const noArea = area.width <= 0 || area.height <= 0;\n\n    this._layers = [];\n    each(this.boxes, (box) => {\n      if (noArea && box.position === 'chartArea') {\n        // Skip drawing and configuring chartArea boxes when chartArea is zero or negative\n        return;\n      }\n\n      // configure is called twice, once in core.scale.update and once here.\n      // Here the boxes are fully updated and at their final positions.\n      if (box.configure) {\n        box.configure();\n      }\n      this._layers.push(...box._layers());\n    }, this);\n\n    this._layers.forEach((item, index) => {\n      item._idx = index;\n    });\n\n    this.notifyPlugins('afterLayout');\n  }\n\n  /**\n\t * Updates all datasets unless a plugin returns `false` to the `beforeDatasetsUpdate`\n\t * hook, in which case, plugins will not be called on `afterDatasetsUpdate`.\n\t * @private\n\t */\n  _updateDatasets(mode) {\n    if (this.notifyPlugins('beforeDatasetsUpdate', {mode, cancelable: true}) === false) {\n      return;\n    }\n\n    for (let i = 0, ilen = this.data.datasets.length; i < ilen; ++i) {\n      this.getDatasetMeta(i).controller.configure();\n    }\n\n    for (let i = 0, ilen = this.data.datasets.length; i < ilen; ++i) {\n      this._updateDataset(i, isFunction(mode) ? mode({datasetIndex: i}) : mode);\n    }\n\n    this.notifyPlugins('afterDatasetsUpdate', {mode});\n  }\n\n  /**\n\t * Updates dataset at index unless a plugin returns `false` to the `beforeDatasetUpdate`\n\t * hook, in which case, plugins will not be called on `afterDatasetUpdate`.\n\t * @private\n\t */\n  _updateDataset(index, mode) {\n    const meta = this.getDatasetMeta(index);\n    const args = {meta, index, mode, cancelable: true};\n\n    if (this.notifyPlugins('beforeDatasetUpdate', args) === false) {\n      return;\n    }\n\n    meta.controller._update(mode);\n\n    args.cancelable = false;\n    this.notifyPlugins('afterDatasetUpdate', args);\n  }\n\n  render() {\n    if (this.notifyPlugins('beforeRender', {cancelable: true}) === false) {\n      return;\n    }\n\n    if (animator.has(this)) {\n      if (this.attached && !animator.running(this)) {\n        animator.start(this);\n      }\n    } else {\n      this.draw();\n      onAnimationsComplete({chart: this});\n    }\n  }\n\n  draw() {\n    let i;\n    if (this._resizeBeforeDraw) {\n      const {width, height} = this._resizeBeforeDraw;\n      this._resize(width, height);\n      this._resizeBeforeDraw = null;\n    }\n    this.clear();\n\n    if (this.width <= 0 || this.height <= 0) {\n      return;\n    }\n\n    if (this.notifyPlugins('beforeDraw', {cancelable: true}) === false) {\n      return;\n    }\n\n    // Because of plugin hooks (before/afterDatasetsDraw), datasets can't\n    // currently be part of layers. Instead, we draw\n    // layers <= 0 before(default, backward compat), and the rest after\n    const layers = this._layers;\n    for (i = 0; i < layers.length && layers[i].z <= 0; ++i) {\n      layers[i].draw(this.chartArea);\n    }\n\n    this._drawDatasets();\n\n    // Rest of layers\n    for (; i < layers.length; ++i) {\n      layers[i].draw(this.chartArea);\n    }\n\n    this.notifyPlugins('afterDraw');\n  }\n\n  /**\n\t * @private\n\t */\n  _getSortedDatasetMetas(filterVisible) {\n    const metasets = this._sortedMetasets;\n    const result = [];\n    let i, ilen;\n\n    for (i = 0, ilen = metasets.length; i < ilen; ++i) {\n      const meta = metasets[i];\n      if (!filterVisible || meta.visible) {\n        result.push(meta);\n      }\n    }\n\n    return result;\n  }\n\n  /**\n\t * Gets the visible dataset metas in drawing order\n\t * @return {object[]}\n\t */\n  getSortedVisibleDatasetMetas() {\n    return this._getSortedDatasetMetas(true);\n  }\n\n  /**\n\t * Draws all datasets unless a plugin returns `false` to the `beforeDatasetsDraw`\n\t * hook, in which case, plugins will not be called on `afterDatasetsDraw`.\n\t * @private\n\t */\n  _drawDatasets() {\n    if (this.notifyPlugins('beforeDatasetsDraw', {cancelable: true}) === false) {\n      return;\n    }\n\n    const metasets = this.getSortedVisibleDatasetMetas();\n    for (let i = metasets.length - 1; i >= 0; --i) {\n      this._drawDataset(metasets[i]);\n    }\n\n    this.notifyPlugins('afterDatasetsDraw');\n  }\n\n  /**\n\t * Draws dataset at index unless a plugin returns `false` to the `beforeDatasetDraw`\n\t * hook, in which case, plugins will not be called on `afterDatasetDraw`.\n\t * @private\n\t */\n  _drawDataset(meta) {\n    const ctx = this.ctx;\n    const clip = meta._clip;\n    const useClip = !clip.disabled;\n    const area = getDatasetArea(meta) || this.chartArea;\n    const args = {\n      meta,\n      index: meta.index,\n      cancelable: true\n    };\n\n    if (this.notifyPlugins('beforeDatasetDraw', args) === false) {\n      return;\n    }\n\n    if (useClip) {\n      clipArea(ctx, {\n        left: clip.left === false ? 0 : area.left - clip.left,\n        right: clip.right === false ? this.width : area.right + clip.right,\n        top: clip.top === false ? 0 : area.top - clip.top,\n        bottom: clip.bottom === false ? this.height : area.bottom + clip.bottom\n      });\n    }\n\n    meta.controller.draw();\n\n    if (useClip) {\n      unclipArea(ctx);\n    }\n\n    args.cancelable = false;\n    this.notifyPlugins('afterDatasetDraw', args);\n  }\n\n  /**\n   * Checks whether the given point is in the chart area.\n   * @param {Point} point - in relative coordinates (see, e.g., getRelativePosition)\n   * @returns {boolean}\n   */\n  isPointInArea(point) {\n    return _isPointInArea(point, this.chartArea, this._minPadding);\n  }\n\n  getElementsAtEventForMode(e, mode, options, useFinalPosition) {\n    const method = Interaction.modes[mode];\n    if (typeof method === 'function') {\n      return method(this, e, options, useFinalPosition);\n    }\n\n    return [];\n  }\n\n  getDatasetMeta(datasetIndex) {\n    const dataset = this.data.datasets[datasetIndex];\n    const metasets = this._metasets;\n    let meta = metasets.filter(x => x && x._dataset === dataset).pop();\n\n    if (!meta) {\n      meta = {\n        type: null,\n        data: [],\n        dataset: null,\n        controller: null,\n        hidden: null,\t\t\t// See isDatasetVisible() comment\n        xAxisID: null,\n        yAxisID: null,\n        order: dataset && dataset.order || 0,\n        index: datasetIndex,\n        _dataset: dataset,\n        _parsed: [],\n        _sorted: false\n      };\n      metasets.push(meta);\n    }\n\n    return meta;\n  }\n\n  getContext() {\n    return this.$context || (this.$context = createContext(null, {chart: this, type: 'chart'}));\n  }\n\n  getVisibleDatasetCount() {\n    return this.getSortedVisibleDatasetMetas().length;\n  }\n\n  isDatasetVisible(datasetIndex) {\n    const dataset = this.data.datasets[datasetIndex];\n    if (!dataset) {\n      return false;\n    }\n\n    const meta = this.getDatasetMeta(datasetIndex);\n\n    // meta.hidden is a per chart dataset hidden flag override with 3 states: if true or false,\n    // the dataset.hidden value is ignored, else if null, the dataset hidden state is returned.\n    return typeof meta.hidden === 'boolean' ? !meta.hidden : !dataset.hidden;\n  }\n\n  setDatasetVisibility(datasetIndex, visible) {\n    const meta = this.getDatasetMeta(datasetIndex);\n    meta.hidden = !visible;\n  }\n\n  toggleDataVisibility(index) {\n    this._hiddenIndices[index] = !this._hiddenIndices[index];\n  }\n\n  getDataVisibility(index) {\n    return !this._hiddenIndices[index];\n  }\n\n  /**\n\t * @private\n\t */\n  _updateVisibility(datasetIndex, dataIndex, visible) {\n    const mode = visible ? 'show' : 'hide';\n    const meta = this.getDatasetMeta(datasetIndex);\n    const anims = meta.controller._resolveAnimations(undefined, mode);\n\n    if (defined(dataIndex)) {\n      meta.data[dataIndex].hidden = !visible;\n      this.update();\n    } else {\n      this.setDatasetVisibility(datasetIndex, visible);\n      // Animate visible state, so hide animation can be seen. This could be handled better if update / updateDataset returned a Promise.\n      anims.update(meta, {visible});\n      this.update((ctx) => ctx.datasetIndex === datasetIndex ? mode : undefined);\n    }\n  }\n\n  hide(datasetIndex, dataIndex) {\n    this._updateVisibility(datasetIndex, dataIndex, false);\n  }\n\n  show(datasetIndex, dataIndex) {\n    this._updateVisibility(datasetIndex, dataIndex, true);\n  }\n\n  /**\n\t * @private\n\t */\n  _destroyDatasetMeta(datasetIndex) {\n    const meta = this._metasets[datasetIndex];\n    if (meta && meta.controller) {\n      meta.controller._destroy();\n    }\n    delete this._metasets[datasetIndex];\n  }\n\n  _stop() {\n    let i, ilen;\n    this.stop();\n    animator.remove(this);\n\n    for (i = 0, ilen = this.data.datasets.length; i < ilen; ++i) {\n      this._destroyDatasetMeta(i);\n    }\n  }\n\n  destroy() {\n    this.notifyPlugins('beforeDestroy');\n    const {canvas, ctx} = this;\n\n    this._stop();\n    this.config.clearCache();\n\n    if (canvas) {\n      this.unbindEvents();\n      clearCanvas(canvas, ctx);\n      this.platform.releaseContext(ctx);\n      this.canvas = null;\n      this.ctx = null;\n    }\n\n    delete instances[this.id];\n\n    this.notifyPlugins('afterDestroy');\n  }\n\n  toBase64Image(...args) {\n    return this.canvas.toDataURL(...args);\n  }\n\n  /**\n\t * @private\n\t */\n  bindEvents() {\n    this.bindUserEvents();\n    if (this.options.responsive) {\n      this.bindResponsiveEvents();\n    } else {\n      this.attached = true;\n    }\n  }\n\n  /**\n   * @private\n   */\n  bindUserEvents() {\n    const listeners = this._listeners;\n    const platform = this.platform;\n\n    const _add = (type, listener) => {\n      platform.addEventListener(this, type, listener);\n      listeners[type] = listener;\n    };\n\n    const listener = (e, x, y) => {\n      e.offsetX = x;\n      e.offsetY = y;\n      this._eventHandler(e);\n    };\n\n    each(this.options.events, (type) => _add(type, listener));\n  }\n\n  /**\n   * @private\n   */\n  bindResponsiveEvents() {\n    if (!this._responsiveListeners) {\n      this._responsiveListeners = {};\n    }\n    const listeners = this._responsiveListeners;\n    const platform = this.platform;\n\n    const _add = (type, listener) => {\n      platform.addEventListener(this, type, listener);\n      listeners[type] = listener;\n    };\n    const _remove = (type, listener) => {\n      if (listeners[type]) {\n        platform.removeEventListener(this, type, listener);\n        delete listeners[type];\n      }\n    };\n\n    const listener = (width, height) => {\n      if (this.canvas) {\n        this.resize(width, height);\n      }\n    };\n\n    let detached; // eslint-disable-line prefer-const\n    const attached = () => {\n      _remove('attach', attached);\n\n      this.attached = true;\n      this.resize();\n\n      _add('resize', listener);\n      _add('detach', detached);\n    };\n\n    detached = () => {\n      this.attached = false;\n\n      _remove('resize', listener);\n\n      // Stop animating and remove metasets, so when re-attached, the animations start from beginning.\n      this._stop();\n      this._resize(0, 0);\n\n      _add('attach', attached);\n    };\n\n    if (platform.isAttached(this.canvas)) {\n      attached();\n    } else {\n      detached();\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  unbindEvents() {\n    each(this._listeners, (listener, type) => {\n      this.platform.removeEventListener(this, type, listener);\n    });\n    this._listeners = {};\n\n    each(this._responsiveListeners, (listener, type) => {\n      this.platform.removeEventListener(this, type, listener);\n    });\n    this._responsiveListeners = undefined;\n  }\n\n  updateHoverStyle(items, mode, enabled) {\n    const prefix = enabled ? 'set' : 'remove';\n    let meta, item, i, ilen;\n\n    if (mode === 'dataset') {\n      meta = this.getDatasetMeta(items[0].datasetIndex);\n      meta.controller['_' + prefix + 'DatasetHoverStyle']();\n    }\n\n    for (i = 0, ilen = items.length; i < ilen; ++i) {\n      item = items[i];\n      const controller = item && this.getDatasetMeta(item.datasetIndex).controller;\n      if (controller) {\n        controller[prefix + 'HoverStyle'](item.element, item.datasetIndex, item.index);\n      }\n    }\n  }\n\n  /**\n\t * Get active (hovered) elements\n\t * @returns array\n\t */\n  getActiveElements() {\n    return this._active || [];\n  }\n\n  /**\n\t * Set active (hovered) elements\n\t * @param {array} activeElements New active data points\n\t */\n  setActiveElements(activeElements) {\n    const lastActive = this._active || [];\n    const active = activeElements.map(({datasetIndex, index}) => {\n      const meta = this.getDatasetMeta(datasetIndex);\n      if (!meta) {\n        throw new Error('No dataset found at index ' + datasetIndex);\n      }\n\n      return {\n        datasetIndex,\n        element: meta.data[index],\n        index,\n      };\n    });\n    const changed = !_elementsEqual(active, lastActive);\n\n    if (changed) {\n      this._active = active;\n      // Make sure we don't use the previous mouse event to override the active elements in update.\n      this._lastEvent = null;\n      this._updateHoverStyles(active, lastActive);\n    }\n  }\n\n  /**\n\t * Calls enabled plugins on the specified hook and with the given args.\n\t * This method immediately returns as soon as a plugin explicitly returns false. The\n\t * returned value can be used, for instance, to interrupt the current action.\n\t * @param {string} hook - The name of the plugin method to call (e.g. 'beforeUpdate').\n\t * @param {Object} [args] - Extra arguments to apply to the hook call.\n   * @param {import('./core.plugins.js').filterCallback} [filter] - Filtering function for limiting which plugins are notified\n\t * @returns {boolean} false if any of the plugins return false, else returns true.\n\t */\n  notifyPlugins(hook, args, filter) {\n    return this._plugins.notify(this, hook, args, filter);\n  }\n\n  /**\n   * Check if a plugin with the specific ID is registered and enabled\n   * @param {string} pluginId - The ID of the plugin of which to check if it is enabled\n   * @returns {boolean}\n   */\n  isPluginEnabled(pluginId) {\n    return this._plugins._cache.filter(p => p.plugin.id === pluginId).length === 1;\n  }\n\n  /**\n\t * @private\n\t */\n  _updateHoverStyles(active, lastActive, replay) {\n    const hoverOptions = this.options.hover;\n    const diff = (a, b) => a.filter(x => !b.some(y => x.datasetIndex === y.datasetIndex && x.index === y.index));\n    const deactivated = diff(lastActive, active);\n    const activated = replay ? active : diff(active, lastActive);\n\n    if (deactivated.length) {\n      this.updateHoverStyle(deactivated, hoverOptions.mode, false);\n    }\n\n    if (activated.length && hoverOptions.mode) {\n      this.updateHoverStyle(activated, hoverOptions.mode, true);\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _eventHandler(e, replay) {\n    const args = {\n      event: e,\n      replay,\n      cancelable: true,\n      inChartArea: this.isPointInArea(e)\n    };\n    const eventFilter = (plugin) => (plugin.options.events || this.options.events).includes(e.native.type);\n\n    if (this.notifyPlugins('beforeEvent', args, eventFilter) === false) {\n      return;\n    }\n\n    const changed = this._handleEvent(e, replay, args.inChartArea);\n\n    args.cancelable = false;\n    this.notifyPlugins('afterEvent', args, eventFilter);\n\n    if (changed || args.changed) {\n      this.render();\n    }\n\n    return this;\n  }\n\n  /**\n\t * Handle an event\n\t * @param {ChartEvent} e the event to handle\n\t * @param {boolean} [replay] - true if the event was replayed by `update`\n   * @param {boolean} [inChartArea] - true if the event is inside chartArea\n\t * @return {boolean} true if the chart needs to re-render\n\t * @private\n\t */\n  _handleEvent(e, replay, inChartArea) {\n    const {_active: lastActive = [], options} = this;\n\n    // If the event is replayed from `update`, we should evaluate with the final positions.\n    //\n    // The `replay`:\n    // It's the last event (excluding click) that has occurred before `update`.\n    // So mouse has not moved. It's also over the chart, because there is a `replay`.\n    //\n    // The why:\n    // If animations are active, the elements haven't moved yet compared to state before update.\n    // But if they will, we are activating the elements that would be active, if this check\n    // was done after the animations have completed. => \"final positions\".\n    // If there is no animations, the \"final\" and \"current\" positions are equal.\n    // This is done so we do not have to evaluate the active elements each animation frame\n    // - it would be expensive.\n    const useFinalPosition = replay;\n    const active = this._getActiveElements(e, lastActive, inChartArea, useFinalPosition);\n    const isClick = _isClickEvent(e);\n    const lastEvent = determineLastEvent(e, this._lastEvent, inChartArea, isClick);\n\n    if (inChartArea) {\n      // Set _lastEvent to null while we are processing the event handlers.\n      // This prevents recursion if the handler calls chart.update()\n      this._lastEvent = null;\n\n      // Invoke onHover hook\n      callCallback(options.onHover, [e, active, this], this);\n\n      if (isClick) {\n        callCallback(options.onClick, [e, active, this], this);\n      }\n    }\n\n    const changed = !_elementsEqual(active, lastActive);\n    if (changed || replay) {\n      this._active = active;\n      this._updateHoverStyles(active, lastActive, replay);\n    }\n\n    this._lastEvent = lastEvent;\n\n    return changed;\n  }\n\n  /**\n   * @param {ChartEvent} e - The event\n   * @param {import('../types/index.js').ActiveElement[]} lastActive - Previously active elements\n   * @param {boolean} inChartArea - Is the envent inside chartArea\n   * @param {boolean} useFinalPosition - Should the evaluation be done with current or final (after animation) element positions\n   * @returns {import('../types/index.js').ActiveElement[]} - The active elements\n   * @pravate\n   */\n  _getActiveElements(e, lastActive, inChartArea, useFinalPosition) {\n    if (e.type === 'mouseout') {\n      return [];\n    }\n\n    if (!inChartArea) {\n      // Let user control the active elements outside chartArea. Eg. using Legend.\n      return lastActive;\n    }\n\n    const hoverOptions = this.options.hover;\n    return this.getElementsAtEventForMode(e, hoverOptions.mode, hoverOptions, useFinalPosition);\n  }\n}\n\n// @ts-ignore\nfunction invalidatePlugins() {\n  return each(Chart.instances, (chart) => chart._plugins.invalidate());\n}\n\nexport default Chart;\n","import Element from '../core/core.element.js';\nimport {_angleBetween, getAngleFromPoint, TAU, HALF_PI, valueOrDefault} from '../helpers/index.js';\nimport {PI, _isBetween, _limitValue} from '../helpers/helpers.math.js';\nimport {_readValueToProps} from '../helpers/helpers.options.js';\nimport type {ArcOptions, Point} from '../types/index.js';\n\n\nfunction clipArc(ctx: CanvasRenderingContext2D, element: ArcElement, endAngle: number) {\n  const {startAngle, pixelMargin, x, y, outerRadius, innerRadius} = element;\n  let angleMargin = pixelMargin / outerRadius;\n\n  // Draw an inner border by clipping the arc and drawing a double-width border\n  // Enlarge the clipping arc by 0.33 pixels to eliminate glitches between borders\n  ctx.beginPath();\n  ctx.arc(x, y, outerRadius, startAngle - angleMargin, endAngle + angleMargin);\n  if (innerRadius > pixelMargin) {\n    angleMargin = pixelMargin / innerRadius;\n    ctx.arc(x, y, innerRadius, endAngle + angleMargin, startAngle - angleMargin, true);\n  } else {\n    ctx.arc(x, y, pixelMargin, endAngle + HALF_PI, startAngle - HALF_PI);\n  }\n  ctx.closePath();\n  ctx.clip();\n}\n\nfunction toRadiusCorners(value) {\n  return _readValueToProps(value, ['outerStart', 'outerEnd', 'innerStart', 'innerEnd']);\n}\n\n/**\n * Parse border radius from the provided options\n */\nfunction parseBorderRadius(arc: ArcElement, innerRadius: number, outerRadius: number, angleDelta: number) {\n  const o = toRadiusCorners(arc.options.borderRadius);\n  const halfThickness = (outerRadius - innerRadius) / 2;\n  const innerLimit = Math.min(halfThickness, angleDelta * innerRadius / 2);\n\n  // Outer limits are complicated. We want to compute the available angular distance at\n  // a radius of outerRadius - borderRadius because for small angular distances, this term limits.\n  // We compute at r = outerRadius - borderRadius because this circle defines the center of the border corners.\n  //\n  // If the borderRadius is large, that value can become negative.\n  // This causes the outer borders to lose their radius entirely, which is rather unexpected. To solve that, if borderRadius > outerRadius\n  // we know that the thickness term will dominate and compute the limits at that point\n  const computeOuterLimit = (val) => {\n    const outerArcLimit = (outerRadius - Math.min(halfThickness, val)) * angleDelta / 2;\n    return _limitValue(val, 0, Math.min(halfThickness, outerArcLimit));\n  };\n\n  return {\n    outerStart: computeOuterLimit(o.outerStart),\n    outerEnd: computeOuterLimit(o.outerEnd),\n    innerStart: _limitValue(o.innerStart, 0, innerLimit),\n    innerEnd: _limitValue(o.innerEnd, 0, innerLimit),\n  };\n}\n\n/**\n * Convert (r, 𝜃) to (x, y)\n */\nfunction rThetaToXY(r: number, theta: number, x: number, y: number) {\n  return {\n    x: x + r * Math.cos(theta),\n    y: y + r * Math.sin(theta),\n  };\n}\n\n\n/**\n * Path the arc, respecting border radius by separating into left and right halves.\n *\n *   Start      End\n *\n *    1--->a--->2    Outer\n *   /           \\\n *   8           3\n *   |           |\n *   |           |\n *   7           4\n *   \\           /\n *    6<---b<---5    Inner\n */\nfunction pathArc(\n  ctx: CanvasRenderingContext2D,\n  element: ArcElement,\n  offset: number,\n  spacing: number,\n  end: number,\n  circular: boolean,\n) {\n  const {x, y, startAngle: start, pixelMargin, innerRadius: innerR} = element;\n\n  const outerRadius = Math.max(element.outerRadius + spacing + offset - pixelMargin, 0);\n  const innerRadius = innerR > 0 ? innerR + spacing + offset + pixelMargin : 0;\n\n  let spacingOffset = 0;\n  const alpha = end - start;\n\n  if (spacing) {\n    // When spacing is present, it is the same for all items\n    // So we adjust the start and end angle of the arc such that\n    // the distance is the same as it would be without the spacing\n    const noSpacingInnerRadius = innerR > 0 ? innerR - spacing : 0;\n    const noSpacingOuterRadius = outerRadius > 0 ? outerRadius - spacing : 0;\n    const avNogSpacingRadius = (noSpacingInnerRadius + noSpacingOuterRadius) / 2;\n    const adjustedAngle = avNogSpacingRadius !== 0 ? (alpha * avNogSpacingRadius) / (avNogSpacingRadius + spacing) : alpha;\n    spacingOffset = (alpha - adjustedAngle) / 2;\n  }\n\n  const beta = Math.max(0.001, alpha * outerRadius - offset / PI) / outerRadius;\n  const angleOffset = (alpha - beta) / 2;\n  const startAngle = start + angleOffset + spacingOffset;\n  const endAngle = end - angleOffset - spacingOffset;\n  const {outerStart, outerEnd, innerStart, innerEnd} = parseBorderRadius(element, innerRadius, outerRadius, endAngle - startAngle);\n\n  const outerStartAdjustedRadius = outerRadius - outerStart;\n  const outerEndAdjustedRadius = outerRadius - outerEnd;\n  const outerStartAdjustedAngle = startAngle + outerStart / outerStartAdjustedRadius;\n  const outerEndAdjustedAngle = endAngle - outerEnd / outerEndAdjustedRadius;\n\n  const innerStartAdjustedRadius = innerRadius + innerStart;\n  const innerEndAdjustedRadius = innerRadius + innerEnd;\n  const innerStartAdjustedAngle = startAngle + innerStart / innerStartAdjustedRadius;\n  const innerEndAdjustedAngle = endAngle - innerEnd / innerEndAdjustedRadius;\n\n  ctx.beginPath();\n\n  if (circular) {\n    // The first arc segments from point 1 to point a to point 2\n    const outerMidAdjustedAngle = (outerStartAdjustedAngle + outerEndAdjustedAngle) / 2;\n    ctx.arc(x, y, outerRadius, outerStartAdjustedAngle, outerMidAdjustedAngle);\n    ctx.arc(x, y, outerRadius, outerMidAdjustedAngle, outerEndAdjustedAngle);\n\n    // The corner segment from point 2 to point 3\n    if (outerEnd > 0) {\n      const pCenter = rThetaToXY(outerEndAdjustedRadius, outerEndAdjustedAngle, x, y);\n      ctx.arc(pCenter.x, pCenter.y, outerEnd, outerEndAdjustedAngle, endAngle + HALF_PI);\n    }\n\n    // The line from point 3 to point 4\n    const p4 = rThetaToXY(innerEndAdjustedRadius, endAngle, x, y);\n    ctx.lineTo(p4.x, p4.y);\n\n    // The corner segment from point 4 to point 5\n    if (innerEnd > 0) {\n      const pCenter = rThetaToXY(innerEndAdjustedRadius, innerEndAdjustedAngle, x, y);\n      ctx.arc(pCenter.x, pCenter.y, innerEnd, endAngle + HALF_PI, innerEndAdjustedAngle + Math.PI);\n    }\n\n    // The inner arc from point 5 to point b to point 6\n    const innerMidAdjustedAngle = ((endAngle - (innerEnd / innerRadius)) + (startAngle + (innerStart / innerRadius))) / 2;\n    ctx.arc(x, y, innerRadius, endAngle - (innerEnd / innerRadius), innerMidAdjustedAngle, true);\n    ctx.arc(x, y, innerRadius, innerMidAdjustedAngle, startAngle + (innerStart / innerRadius), true);\n\n    // The corner segment from point 6 to point 7\n    if (innerStart > 0) {\n      const pCenter = rThetaToXY(innerStartAdjustedRadius, innerStartAdjustedAngle, x, y);\n      ctx.arc(pCenter.x, pCenter.y, innerStart, innerStartAdjustedAngle + Math.PI, startAngle - HALF_PI);\n    }\n\n    // The line from point 7 to point 8\n    const p8 = rThetaToXY(outerStartAdjustedRadius, startAngle, x, y);\n    ctx.lineTo(p8.x, p8.y);\n\n    // The corner segment from point 8 to point 1\n    if (outerStart > 0) {\n      const pCenter = rThetaToXY(outerStartAdjustedRadius, outerStartAdjustedAngle, x, y);\n      ctx.arc(pCenter.x, pCenter.y, outerStart, startAngle - HALF_PI, outerStartAdjustedAngle);\n    }\n  } else {\n    ctx.moveTo(x, y);\n\n    const outerStartX = Math.cos(outerStartAdjustedAngle) * outerRadius + x;\n    const outerStartY = Math.sin(outerStartAdjustedAngle) * outerRadius + y;\n    ctx.lineTo(outerStartX, outerStartY);\n\n    const outerEndX = Math.cos(outerEndAdjustedAngle) * outerRadius + x;\n    const outerEndY = Math.sin(outerEndAdjustedAngle) * outerRadius + y;\n    ctx.lineTo(outerEndX, outerEndY);\n  }\n\n  ctx.closePath();\n}\n\nfunction drawArc(\n  ctx: CanvasRenderingContext2D,\n  element: ArcElement,\n  offset: number,\n  spacing: number,\n  circular: boolean,\n) {\n  const {fullCircles, startAngle, circumference} = element;\n  let endAngle = element.endAngle;\n  if (fullCircles) {\n    pathArc(ctx, element, offset, spacing, endAngle, circular);\n    for (let i = 0; i < fullCircles; ++i) {\n      ctx.fill();\n    }\n    if (!isNaN(circumference)) {\n      endAngle = startAngle + (circumference % TAU || TAU);\n    }\n  }\n  pathArc(ctx, element, offset, spacing, endAngle, circular);\n  ctx.fill();\n  return endAngle;\n}\n\nfunction drawBorder(\n  ctx: CanvasRenderingContext2D,\n  element: ArcElement,\n  offset: number,\n  spacing: number,\n  circular: boolean,\n) {\n  const {fullCircles, startAngle, circumference, options} = element;\n  const {borderWidth, borderJoinStyle} = options;\n  const inner = options.borderAlign === 'inner';\n\n  if (!borderWidth) {\n    return;\n  }\n\n  if (inner) {\n    ctx.lineWidth = borderWidth * 2;\n    ctx.lineJoin = borderJoinStyle || 'round';\n  } else {\n    ctx.lineWidth = borderWidth;\n    ctx.lineJoin = borderJoinStyle || 'bevel';\n  }\n\n  let endAngle = element.endAngle;\n  if (fullCircles) {\n    pathArc(ctx, element, offset, spacing, endAngle, circular);\n    for (let i = 0; i < fullCircles; ++i) {\n      ctx.stroke();\n    }\n    if (!isNaN(circumference)) {\n      endAngle = startAngle + (circumference % TAU || TAU);\n    }\n  }\n\n  if (inner) {\n    clipArc(ctx, element, endAngle);\n  }\n\n  if (!fullCircles) {\n    pathArc(ctx, element, offset, spacing, endAngle, circular);\n    ctx.stroke();\n  }\n}\n\nexport interface ArcProps extends Point {\n  startAngle: number;\n  endAngle: number;\n  innerRadius: number;\n  outerRadius: number;\n  circumference: number;\n}\n\nexport default class ArcElement extends Element<ArcProps, ArcOptions> {\n\n  static id = 'arc';\n\n  static defaults = {\n    borderAlign: 'center',\n    borderColor: '#fff',\n    borderJoinStyle: undefined,\n    borderRadius: 0,\n    borderWidth: 2,\n    offset: 0,\n    spacing: 0,\n    angle: undefined,\n    circular: true,\n  };\n\n  static defaultRoutes = {\n    backgroundColor: 'backgroundColor'\n  };\n\n  circumference: number;\n  endAngle: number;\n  fullCircles: number;\n  innerRadius: number;\n  outerRadius: number;\n  pixelMargin: number;\n  startAngle: number;\n\n  constructor(cfg) {\n    super();\n\n    this.options = undefined;\n    this.circumference = undefined;\n    this.startAngle = undefined;\n    this.endAngle = undefined;\n    this.innerRadius = undefined;\n    this.outerRadius = undefined;\n    this.pixelMargin = 0;\n    this.fullCircles = 0;\n\n    if (cfg) {\n      Object.assign(this, cfg);\n    }\n  }\n\n  inRange(chartX: number, chartY: number, useFinalPosition: boolean) {\n    const point = this.getProps(['x', 'y'], useFinalPosition);\n    const {angle, distance} = getAngleFromPoint(point, {x: chartX, y: chartY});\n    const {startAngle, endAngle, innerRadius, outerRadius, circumference} = this.getProps([\n      'startAngle',\n      'endAngle',\n      'innerRadius',\n      'outerRadius',\n      'circumference'\n    ], useFinalPosition);\n    const rAdjust = this.options.spacing / 2;\n    const _circumference = valueOrDefault(circumference, endAngle - startAngle);\n    const betweenAngles = _circumference >= TAU || _angleBetween(angle, startAngle, endAngle);\n    const withinRadius = _isBetween(distance, innerRadius + rAdjust, outerRadius + rAdjust);\n\n    return (betweenAngles && withinRadius);\n  }\n\n  getCenterPoint(useFinalPosition: boolean) {\n    const {x, y, startAngle, endAngle, innerRadius, outerRadius} = this.getProps([\n      'x',\n      'y',\n      'startAngle',\n      'endAngle',\n      'innerRadius',\n      'outerRadius'\n    ], useFinalPosition);\n    const {offset, spacing} = this.options;\n    const halfAngle = (startAngle + endAngle) / 2;\n    const halfRadius = (innerRadius + outerRadius + spacing + offset) / 2;\n    return {\n      x: x + Math.cos(halfAngle) * halfRadius,\n      y: y + Math.sin(halfAngle) * halfRadius\n    };\n  }\n\n  tooltipPosition(useFinalPosition: boolean) {\n    return this.getCenterPoint(useFinalPosition);\n  }\n\n  draw(ctx: CanvasRenderingContext2D) {\n    const {options, circumference} = this;\n    const offset = (options.offset || 0) / 4;\n    const spacing = (options.spacing || 0) / 2;\n    const circular = options.circular;\n    this.pixelMargin = (options.borderAlign === 'inner') ? 0.33 : 0;\n    this.fullCircles = circumference > TAU ? Math.floor(circumference / TAU) : 0;\n\n    if (circumference === 0 || this.innerRadius < 0 || this.outerRadius < 0) {\n      return;\n    }\n\n    ctx.save();\n\n    const halfAngle = (this.startAngle + this.endAngle) / 2;\n    ctx.translate(Math.cos(halfAngle) * offset, Math.sin(halfAngle) * offset);\n    const fix = 1 - Math.sin(Math.min(PI, circumference || 0));\n    const radiusOffset = offset * fix;\n\n    ctx.fillStyle = options.backgroundColor;\n    ctx.strokeStyle = options.borderColor;\n\n    drawArc(ctx, this, radiusOffset, spacing, circular);\n    drawBorder(ctx, this, radiusOffset, spacing, circular);\n\n    ctx.restore();\n  }\n}\n","import Element from '../core/core.element.js';\nimport {_bezierInterpolation, _pointInLine, _steppedInterpolation} from '../helpers/helpers.interpolation.js';\nimport {_computeSegments, _boundSegments} from '../helpers/helpers.segment.js';\nimport {_steppedLineTo, _bezierCurveTo} from '../helpers/helpers.canvas.js';\nimport {_updateBezierControlPoints} from '../helpers/helpers.curve.js';\nimport {valueOrDefault} from '../helpers/index.js';\n\n/**\n * @typedef { import('./element.point.js').default } PointElement\n */\n\nfunction setStyle(ctx, options, style = options) {\n  ctx.lineCap = valueOrDefault(style.borderCapStyle, options.borderCapStyle);\n  ctx.setLineDash(valueOrDefault(style.borderDash, options.borderDash));\n  ctx.lineDashOffset = valueOrDefault(style.borderDashOffset, options.borderDashOffset);\n  ctx.lineJoin = valueOrDefault(style.borderJoinStyle, options.borderJoinStyle);\n  ctx.lineWidth = valueOrDefault(style.borderWidth, options.borderWidth);\n  ctx.strokeStyle = valueOrDefault(style.borderColor, options.borderColor);\n}\n\nfunction lineTo(ctx, previous, target) {\n  ctx.lineTo(target.x, target.y);\n}\n\nfunction getLineMethod(options) {\n  if (options.stepped) {\n    return _steppedLineTo;\n  }\n\n  if (options.tension || options.cubicInterpolationMode === 'monotone') {\n    return _bezierCurveTo;\n  }\n\n  return lineTo;\n}\n\nfunction pathVars(points, segment, params = {}) {\n  const count = points.length;\n  const {start: paramsStart = 0, end: paramsEnd = count - 1} = params;\n  const {start: segmentStart, end: segmentEnd} = segment;\n  const start = Math.max(paramsStart, segmentStart);\n  const end = Math.min(paramsEnd, segmentEnd);\n  const outside = paramsStart < segmentStart && paramsEnd < segmentStart || paramsStart > segmentEnd && paramsEnd > segmentEnd;\n\n  return {\n    count,\n    start,\n    loop: segment.loop,\n    ilen: end < start && !outside ? count + end - start : end - start\n  };\n}\n\n/**\n * Create path from points, grouping by truncated x-coordinate\n * Points need to be in order by x-coordinate for this to work efficiently\n * @param {CanvasRenderingContext2D|Path2D} ctx - Context\n * @param {LineElement} line\n * @param {object} segment\n * @param {number} segment.start - start index of the segment, referring the points array\n * @param {number} segment.end - end index of the segment, referring the points array\n * @param {boolean} segment.loop - indicates that the segment is a loop\n * @param {object} params\n * @param {boolean} params.move - move to starting point (vs line to it)\n * @param {boolean} params.reverse - path the segment from end to start\n * @param {number} params.start - limit segment to points starting from `start` index\n * @param {number} params.end - limit segment to points ending at `start` + `count` index\n */\nfunction pathSegment(ctx, line, segment, params) {\n  const {points, options} = line;\n  const {count, start, loop, ilen} = pathVars(points, segment, params);\n  const lineMethod = getLineMethod(options);\n  // eslint-disable-next-line prefer-const\n  let {move = true, reverse} = params || {};\n  let i, point, prev;\n\n  for (i = 0; i <= ilen; ++i) {\n    point = points[(start + (reverse ? ilen - i : i)) % count];\n\n    if (point.skip) {\n      // If there is a skipped point inside a segment, spanGaps must be true\n      continue;\n    } else if (move) {\n      ctx.moveTo(point.x, point.y);\n      move = false;\n    } else {\n      lineMethod(ctx, prev, point, reverse, options.stepped);\n    }\n\n    prev = point;\n  }\n\n  if (loop) {\n    point = points[(start + (reverse ? ilen : 0)) % count];\n    lineMethod(ctx, prev, point, reverse, options.stepped);\n  }\n\n  return !!loop;\n}\n\n/**\n * Create path from points, grouping by truncated x-coordinate\n * Points need to be in order by x-coordinate for this to work efficiently\n * @param {CanvasRenderingContext2D|Path2D} ctx - Context\n * @param {LineElement} line\n * @param {object} segment\n * @param {number} segment.start - start index of the segment, referring the points array\n * @param {number} segment.end - end index of the segment, referring the points array\n * @param {boolean} segment.loop - indicates that the segment is a loop\n * @param {object} params\n * @param {boolean} params.move - move to starting point (vs line to it)\n * @param {boolean} params.reverse - path the segment from end to start\n * @param {number} params.start - limit segment to points starting from `start` index\n * @param {number} params.end - limit segment to points ending at `start` + `count` index\n */\nfunction fastPathSegment(ctx, line, segment, params) {\n  const points = line.points;\n  const {count, start, ilen} = pathVars(points, segment, params);\n  const {move = true, reverse} = params || {};\n  let avgX = 0;\n  let countX = 0;\n  let i, point, prevX, minY, maxY, lastY;\n\n  const pointIndex = (index) => (start + (reverse ? ilen - index : index)) % count;\n  const drawX = () => {\n    if (minY !== maxY) {\n      // Draw line to maxY and minY, using the average x-coordinate\n      ctx.lineTo(avgX, maxY);\n      ctx.lineTo(avgX, minY);\n      // Line to y-value of last point in group. So the line continues\n      // from correct position. Not using move, to have solid path.\n      ctx.lineTo(avgX, lastY);\n    }\n  };\n\n  if (move) {\n    point = points[pointIndex(0)];\n    ctx.moveTo(point.x, point.y);\n  }\n\n  for (i = 0; i <= ilen; ++i) {\n    point = points[pointIndex(i)];\n\n    if (point.skip) {\n      // If there is a skipped point inside a segment, spanGaps must be true\n      continue;\n    }\n\n    const x = point.x;\n    const y = point.y;\n    const truncX = x | 0; // truncated x-coordinate\n\n    if (truncX === prevX) {\n      // Determine `minY` / `maxY` and `avgX` while we stay within same x-position\n      if (y < minY) {\n        minY = y;\n      } else if (y > maxY) {\n        maxY = y;\n      }\n      // For first point in group, countX is `0`, so average will be `x` / 1.\n      avgX = (countX * avgX + x) / ++countX;\n    } else {\n      drawX();\n      // Draw line to next x-position, using the first (or only)\n      // y-value in that group\n      ctx.lineTo(x, y);\n\n      prevX = truncX;\n      countX = 0;\n      minY = maxY = y;\n    }\n    // Keep track of the last y-value in group\n    lastY = y;\n  }\n  drawX();\n}\n\n/**\n * @param {LineElement} line - the line\n * @returns {function}\n * @private\n */\nfunction _getSegmentMethod(line) {\n  const opts = line.options;\n  const borderDash = opts.borderDash && opts.borderDash.length;\n  const useFastPath = !line._decimated && !line._loop && !opts.tension && opts.cubicInterpolationMode !== 'monotone' && !opts.stepped && !borderDash;\n  return useFastPath ? fastPathSegment : pathSegment;\n}\n\n/**\n * @private\n */\nfunction _getInterpolationMethod(options) {\n  if (options.stepped) {\n    return _steppedInterpolation;\n  }\n\n  if (options.tension || options.cubicInterpolationMode === 'monotone') {\n    return _bezierInterpolation;\n  }\n\n  return _pointInLine;\n}\n\nfunction strokePathWithCache(ctx, line, start, count) {\n  let path = line._path;\n  if (!path) {\n    path = line._path = new Path2D();\n    if (line.path(path, start, count)) {\n      path.closePath();\n    }\n  }\n  setStyle(ctx, line.options);\n  ctx.stroke(path);\n}\n\nfunction strokePathDirect(ctx, line, start, count) {\n  const {segments, options} = line;\n  const segmentMethod = _getSegmentMethod(line);\n\n  for (const segment of segments) {\n    setStyle(ctx, options, segment.style);\n    ctx.beginPath();\n    if (segmentMethod(ctx, line, segment, {start, end: start + count - 1})) {\n      ctx.closePath();\n    }\n    ctx.stroke();\n  }\n}\n\nconst usePath2D = typeof Path2D === 'function';\n\nfunction draw(ctx, line, start, count) {\n  if (usePath2D && !line.options.segment) {\n    strokePathWithCache(ctx, line, start, count);\n  } else {\n    strokePathDirect(ctx, line, start, count);\n  }\n}\n\nexport default class LineElement extends Element {\n\n  static id = 'line';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    borderCapStyle: 'butt',\n    borderDash: [],\n    borderDashOffset: 0,\n    borderJoinStyle: 'miter',\n    borderWidth: 3,\n    capBezierPoints: true,\n    cubicInterpolationMode: 'default',\n    fill: false,\n    spanGaps: false,\n    stepped: false,\n    tension: 0,\n  };\n\n  /**\n   * @type {any}\n   */\n  static defaultRoutes = {\n    backgroundColor: 'backgroundColor',\n    borderColor: 'borderColor'\n  };\n\n\n  static descriptors = {\n    _scriptable: true,\n    _indexable: (name) => name !== 'borderDash' && name !== 'fill',\n  };\n\n\n  constructor(cfg) {\n    super();\n\n    this.animated = true;\n    this.options = undefined;\n    this._chart = undefined;\n    this._loop = undefined;\n    this._fullLoop = undefined;\n    this._path = undefined;\n    this._points = undefined;\n    this._segments = undefined;\n    this._decimated = false;\n    this._pointsUpdated = false;\n    this._datasetIndex = undefined;\n\n    if (cfg) {\n      Object.assign(this, cfg);\n    }\n  }\n\n  updateControlPoints(chartArea, indexAxis) {\n    const options = this.options;\n    if ((options.tension || options.cubicInterpolationMode === 'monotone') && !options.stepped && !this._pointsUpdated) {\n      const loop = options.spanGaps ? this._loop : this._fullLoop;\n      _updateBezierControlPoints(this._points, options, chartArea, loop, indexAxis);\n      this._pointsUpdated = true;\n    }\n  }\n\n  set points(points) {\n    this._points = points;\n    delete this._segments;\n    delete this._path;\n    this._pointsUpdated = false;\n  }\n\n  get points() {\n    return this._points;\n  }\n\n  get segments() {\n    return this._segments || (this._segments = _computeSegments(this, this.options.segment));\n  }\n\n  /**\n\t * First non-skipped point on this line\n\t * @returns {PointElement|undefined}\n\t */\n  first() {\n    const segments = this.segments;\n    const points = this.points;\n    return segments.length && points[segments[0].start];\n  }\n\n  /**\n\t * Last non-skipped point on this line\n\t * @returns {PointElement|undefined}\n\t */\n  last() {\n    const segments = this.segments;\n    const points = this.points;\n    const count = segments.length;\n    return count && points[segments[count - 1].end];\n  }\n\n  /**\n\t * Interpolate a point in this line at the same value on `property` as\n\t * the reference `point` provided\n\t * @param {PointElement} point - the reference point\n\t * @param {string} property - the property to match on\n\t * @returns {PointElement|undefined}\n\t */\n  interpolate(point, property) {\n    const options = this.options;\n    const value = point[property];\n    const points = this.points;\n    const segments = _boundSegments(this, {property, start: value, end: value});\n\n    if (!segments.length) {\n      return;\n    }\n\n    const result = [];\n    const _interpolate = _getInterpolationMethod(options);\n    let i, ilen;\n    for (i = 0, ilen = segments.length; i < ilen; ++i) {\n      const {start, end} = segments[i];\n      const p1 = points[start];\n      const p2 = points[end];\n      if (p1 === p2) {\n        result.push(p1);\n        continue;\n      }\n      const t = Math.abs((value - p1[property]) / (p2[property] - p1[property]));\n      const interpolated = _interpolate(p1, p2, t, options.stepped);\n      interpolated[property] = point[property];\n      result.push(interpolated);\n    }\n    return result.length === 1 ? result[0] : result;\n  }\n\n  /**\n\t * Append a segment of this line to current path.\n\t * @param {CanvasRenderingContext2D} ctx\n\t * @param {object} segment\n\t * @param {number} segment.start - start index of the segment, referring the points array\n \t * @param {number} segment.end - end index of the segment, referring the points array\n \t * @param {boolean} segment.loop - indicates that the segment is a loop\n\t * @param {object} params\n\t * @param {boolean} params.move - move to starting point (vs line to it)\n\t * @param {boolean} params.reverse - path the segment from end to start\n\t * @param {number} params.start - limit segment to points starting from `start` index\n\t * @param {number} params.end - limit segment to points ending at `start` + `count` index\n\t * @returns {undefined|boolean} - true if the segment is a full loop (path should be closed)\n\t */\n  pathSegment(ctx, segment, params) {\n    const segmentMethod = _getSegmentMethod(this);\n    return segmentMethod(ctx, this, segment, params);\n  }\n\n  /**\n\t * Append all segments of this line to current path.\n\t * @param {CanvasRenderingContext2D|Path2D} ctx\n\t * @param {number} [start]\n\t * @param {number} [count]\n\t * @returns {undefined|boolean} - true if line is a full loop (path should be closed)\n\t */\n  path(ctx, start, count) {\n    const segments = this.segments;\n    const segmentMethod = _getSegmentMethod(this);\n    let loop = this._loop;\n\n    start = start || 0;\n    count = count || (this.points.length - start);\n\n    for (const segment of segments) {\n      loop &= segmentMethod(ctx, this, segment, {start, end: start + count - 1});\n    }\n    return !!loop;\n  }\n\n  /**\n\t * Draw\n\t * @param {CanvasRenderingContext2D} ctx\n\t * @param {object} chartArea\n\t * @param {number} [start]\n\t * @param {number} [count]\n\t */\n  draw(ctx, chartArea, start, count) {\n    const options = this.options || {};\n    const points = this.points || [];\n\n    if (points.length && options.borderWidth) {\n      ctx.save();\n\n      draw(ctx, this, start, count);\n\n      ctx.restore();\n    }\n\n    if (this.animated) {\n      // When line is animated, the control points and path are not cached.\n      this._pointsUpdated = false;\n      this._path = undefined;\n    }\n  }\n}\n","import Element from '../core/core.element.js';\nimport {drawPoint, _isPointInArea} from '../helpers/helpers.canvas.js';\nimport type {\n  CartesianParsedData,\n  ChartArea,\n  Point,\n  PointHoverOptions,\n  PointOptions,\n} from '../types/index.js';\n\nfunction inRange(el: PointElement, pos: number, axis: 'x' | 'y', useFinalPosition?: boolean) {\n  const options = el.options;\n  const {[axis]: value} = el.getProps([axis], useFinalPosition);\n\n  return (Math.abs(pos - value) < options.radius + options.hitRadius);\n}\n\nexport type PointProps = Point\n\nexport default class PointElement extends Element<PointProps, PointOptions & PointHoverOptions> {\n\n  static id = 'point';\n\n  parsed: CartesianParsedData;\n  skip?: boolean;\n  stop?: boolean;\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    borderWidth: 1,\n    hitRadius: 1,\n    hoverBorderWidth: 1,\n    hoverRadius: 4,\n    pointStyle: 'circle',\n    radius: 3,\n    rotation: 0\n  };\n\n  /**\n   * @type {any}\n   */\n  static defaultRoutes = {\n    backgroundColor: 'backgroundColor',\n    borderColor: 'borderColor'\n  };\n\n  constructor(cfg) {\n    super();\n\n    this.options = undefined;\n    this.parsed = undefined;\n    this.skip = undefined;\n    this.stop = undefined;\n\n    if (cfg) {\n      Object.assign(this, cfg);\n    }\n  }\n\n  inRange(mouseX: number, mouseY: number, useFinalPosition?: boolean) {\n    const options = this.options;\n    const {x, y} = this.getProps(['x', 'y'], useFinalPosition);\n    return ((Math.pow(mouseX - x, 2) + Math.pow(mouseY - y, 2)) < Math.pow(options.hitRadius + options.radius, 2));\n  }\n\n  inXRange(mouseX: number, useFinalPosition?: boolean) {\n    return inRange(this, mouseX, 'x', useFinalPosition);\n  }\n\n  inYRange(mouseY: number, useFinalPosition?: boolean) {\n    return inRange(this, mouseY, 'y', useFinalPosition);\n  }\n\n  getCenterPoint(useFinalPosition?: boolean) {\n    const {x, y} = this.getProps(['x', 'y'], useFinalPosition);\n    return {x, y};\n  }\n\n  size(options?: Partial<PointOptions & PointHoverOptions>) {\n    options = options || this.options || {};\n    let radius = options.radius || 0;\n    radius = Math.max(radius, radius && options.hoverRadius || 0);\n    const borderWidth = radius && options.borderWidth || 0;\n    return (radius + borderWidth) * 2;\n  }\n\n  draw(ctx: CanvasRenderingContext2D, area: ChartArea) {\n    const options = this.options;\n\n    if (this.skip || options.radius < 0.1 || !_isPointInArea(this, area, this.size(options) / 2)) {\n      return;\n    }\n\n    ctx.strokeStyle = options.borderColor;\n    ctx.lineWidth = options.borderWidth;\n    ctx.fillStyle = options.backgroundColor;\n    drawPoint(ctx, options, this.x, this.y);\n  }\n\n  getRange() {\n    const options = this.options || {};\n    // @ts-expect-error Fallbacks should never be hit in practice\n    return options.radius + options.hitRadius;\n  }\n}\n","import Element from '../core/core.element.js';\nimport {isObject, _isBetween, _limitValue} from '../helpers/index.js';\nimport {addRoundedRectPath} from '../helpers/helpers.canvas.js';\nimport {toTRBL, toTRBLCorners} from '../helpers/helpers.options.js';\n\n/** @typedef {{ x: number, y: number, base: number, horizontal: boolean, width: number, height: number }} BarProps */\n\n/**\n * Helper function to get the bounds of the bar regardless of the orientation\n * @param {BarElement} bar the bar\n * @param {boolean} [useFinalPosition]\n * @return {object} bounds of the bar\n * @private\n */\nfunction getBarBounds(bar, useFinalPosition) {\n  const {x, y, base, width, height} = /** @type {BarProps} */ (bar.getProps(['x', 'y', 'base', 'width', 'height'], useFinalPosition));\n\n  let left, right, top, bottom, half;\n\n  if (bar.horizontal) {\n    half = height / 2;\n    left = Math.min(x, base);\n    right = Math.max(x, base);\n    top = y - half;\n    bottom = y + half;\n  } else {\n    half = width / 2;\n    left = x - half;\n    right = x + half;\n    top = Math.min(y, base);\n    bottom = Math.max(y, base);\n  }\n\n  return {left, top, right, bottom};\n}\n\nfunction skipOrLimit(skip, value, min, max) {\n  return skip ? 0 : _limitValue(value, min, max);\n}\n\nfunction parseBorderWidth(bar, maxW, maxH) {\n  const value = bar.options.borderWidth;\n  const skip = bar.borderSkipped;\n  const o = toTRBL(value);\n\n  return {\n    t: skipOrLimit(skip.top, o.top, 0, maxH),\n    r: skipOrLimit(skip.right, o.right, 0, maxW),\n    b: skipOrLimit(skip.bottom, o.bottom, 0, maxH),\n    l: skipOrLimit(skip.left, o.left, 0, maxW)\n  };\n}\n\nfunction parseBorderRadius(bar, maxW, maxH) {\n  const {enableBorderRadius} = bar.getProps(['enableBorderRadius']);\n  const value = bar.options.borderRadius;\n  const o = toTRBLCorners(value);\n  const maxR = Math.min(maxW, maxH);\n  const skip = bar.borderSkipped;\n\n  // If the value is an object, assume the user knows what they are doing\n  // and apply as directed.\n  const enableBorder = enableBorderRadius || isObject(value);\n\n  return {\n    topLeft: skipOrLimit(!enableBorder || skip.top || skip.left, o.topLeft, 0, maxR),\n    topRight: skipOrLimit(!enableBorder || skip.top || skip.right, o.topRight, 0, maxR),\n    bottomLeft: skipOrLimit(!enableBorder || skip.bottom || skip.left, o.bottomLeft, 0, maxR),\n    bottomRight: skipOrLimit(!enableBorder || skip.bottom || skip.right, o.bottomRight, 0, maxR)\n  };\n}\n\nfunction boundingRects(bar) {\n  const bounds = getBarBounds(bar);\n  const width = bounds.right - bounds.left;\n  const height = bounds.bottom - bounds.top;\n  const border = parseBorderWidth(bar, width / 2, height / 2);\n  const radius = parseBorderRadius(bar, width / 2, height / 2);\n\n  return {\n    outer: {\n      x: bounds.left,\n      y: bounds.top,\n      w: width,\n      h: height,\n      radius\n    },\n    inner: {\n      x: bounds.left + border.l,\n      y: bounds.top + border.t,\n      w: width - border.l - border.r,\n      h: height - border.t - border.b,\n      radius: {\n        topLeft: Math.max(0, radius.topLeft - Math.max(border.t, border.l)),\n        topRight: Math.max(0, radius.topRight - Math.max(border.t, border.r)),\n        bottomLeft: Math.max(0, radius.bottomLeft - Math.max(border.b, border.l)),\n        bottomRight: Math.max(0, radius.bottomRight - Math.max(border.b, border.r)),\n      }\n    }\n  };\n}\n\nfunction inRange(bar, x, y, useFinalPosition) {\n  const skipX = x === null;\n  const skipY = y === null;\n  const skipBoth = skipX && skipY;\n  const bounds = bar && !skipBoth && getBarBounds(bar, useFinalPosition);\n\n  return bounds\n\t\t&& (skipX || _isBetween(x, bounds.left, bounds.right))\n\t\t&& (skipY || _isBetween(y, bounds.top, bounds.bottom));\n}\n\nfunction hasRadius(radius) {\n  return radius.topLeft || radius.topRight || radius.bottomLeft || radius.bottomRight;\n}\n\n/**\n * Add a path of a rectangle to the current sub-path\n * @param {CanvasRenderingContext2D} ctx Context\n * @param {*} rect Bounding rect\n */\nfunction addNormalRectPath(ctx, rect) {\n  ctx.rect(rect.x, rect.y, rect.w, rect.h);\n}\n\nfunction inflateRect(rect, amount, refRect = {}) {\n  const x = rect.x !== refRect.x ? -amount : 0;\n  const y = rect.y !== refRect.y ? -amount : 0;\n  const w = (rect.x + rect.w !== refRect.x + refRect.w ? amount : 0) - x;\n  const h = (rect.y + rect.h !== refRect.y + refRect.h ? amount : 0) - y;\n  return {\n    x: rect.x + x,\n    y: rect.y + y,\n    w: rect.w + w,\n    h: rect.h + h,\n    radius: rect.radius\n  };\n}\n\nexport default class BarElement extends Element {\n\n  static id = 'bar';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    borderSkipped: 'start',\n    borderWidth: 0,\n    borderRadius: 0,\n    inflateAmount: 'auto',\n    pointStyle: undefined\n  };\n\n  /**\n   * @type {any}\n   */\n  static defaultRoutes = {\n    backgroundColor: 'backgroundColor',\n    borderColor: 'borderColor'\n  };\n\n  constructor(cfg) {\n    super();\n\n    this.options = undefined;\n    this.horizontal = undefined;\n    this.base = undefined;\n    this.width = undefined;\n    this.height = undefined;\n    this.inflateAmount = undefined;\n\n    if (cfg) {\n      Object.assign(this, cfg);\n    }\n  }\n\n  draw(ctx) {\n    const {inflateAmount, options: {borderColor, backgroundColor}} = this;\n    const {inner, outer} = boundingRects(this);\n    const addRectPath = hasRadius(outer.radius) ? addRoundedRectPath : addNormalRectPath;\n\n    ctx.save();\n\n    if (outer.w !== inner.w || outer.h !== inner.h) {\n      ctx.beginPath();\n      addRectPath(ctx, inflateRect(outer, inflateAmount, inner));\n      ctx.clip();\n      addRectPath(ctx, inflateRect(inner, -inflateAmount, outer));\n      ctx.fillStyle = borderColor;\n      ctx.fill('evenodd');\n    }\n\n    ctx.beginPath();\n    addRectPath(ctx, inflateRect(inner, inflateAmount));\n    ctx.fillStyle = backgroundColor;\n    ctx.fill();\n\n    ctx.restore();\n  }\n\n  inRange(mouseX, mouseY, useFinalPosition) {\n    return inRange(this, mouseX, mouseY, useFinalPosition);\n  }\n\n  inXRange(mouseX, useFinalPosition) {\n    return inRange(this, mouseX, null, useFinalPosition);\n  }\n\n  inYRange(mouseY, useFinalPosition) {\n    return inRange(this, null, mouseY, useFinalPosition);\n  }\n\n  getCenterPoint(useFinalPosition) {\n    const {x, y, base, horizontal} = /** @type {BarProps} */ (this.getProps(['x', 'y', 'base', 'horizontal'], useFinalPosition));\n    return {\n      x: horizontal ? (x + base) / 2 : x,\n      y: horizontal ? y : (y + base) / 2\n    };\n  }\n\n  getRange(axis) {\n    return axis === 'x' ? this.width / 2 : this.height / 2;\n  }\n}\n","import {_boundSegment, _boundSegments, _normalizeAngle} from '../../helpers/index.js';\n\nexport function _segments(line, target, property) {\n  const segments = line.segments;\n  const points = line.points;\n  const tpoints = target.points;\n  const parts = [];\n\n  for (const segment of segments) {\n    let {start, end} = segment;\n    end = _findSegmentEnd(start, end, points);\n\n    const bounds = _getBounds(property, points[start], points[end], segment.loop);\n\n    if (!target.segments) {\n      // Special case for boundary not supporting `segments` (simpleArc)\n      // Bounds are provided as `target` for partial circle, or undefined for full circle\n      parts.push({\n        source: segment,\n        target: bounds,\n        start: points[start],\n        end: points[end]\n      });\n      continue;\n    }\n\n    // Get all segments from `target` that intersect the bounds of current segment of `line`\n    const targetSegments = _boundSegments(target, bounds);\n\n    for (const tgt of targetSegments) {\n      const subBounds = _getBounds(property, tpoints[tgt.start], tpoints[tgt.end], tgt.loop);\n      const fillSources = _boundSegment(segment, points, subBounds);\n\n      for (const fillSource of fillSources) {\n        parts.push({\n          source: fillSource,\n          target: tgt,\n          start: {\n            [property]: _getEdge(bounds, subBounds, 'start', Math.max)\n          },\n          end: {\n            [property]: _getEdge(bounds, subBounds, 'end', Math.min)\n          }\n        });\n      }\n    }\n  }\n  return parts;\n}\n\nexport function _getBounds(property, first, last, loop) {\n  if (loop) {\n    return;\n  }\n  let start = first[property];\n  let end = last[property];\n\n  if (property === 'angle') {\n    start = _normalizeAngle(start);\n    end = _normalizeAngle(end);\n  }\n  return {property, start, end};\n}\n\nexport function _pointsFromSegments(boundary, line) {\n  const {x = null, y = null} = boundary || {};\n  const linePoints = line.points;\n  const points = [];\n  line.segments.forEach(({start, end}) => {\n    end = _findSegmentEnd(start, end, linePoints);\n    const first = linePoints[start];\n    const last = linePoints[end];\n    if (y !== null) {\n      points.push({x: first.x, y});\n      points.push({x: last.x, y});\n    } else if (x !== null) {\n      points.push({x, y: first.y});\n      points.push({x, y: last.y});\n    }\n  });\n  return points;\n}\n\nexport function _findSegmentEnd(start, end, points) {\n  for (;end > start; end--) {\n    const point = points[end];\n    if (!isNaN(point.x) && !isNaN(point.y)) {\n      break;\n    }\n  }\n  return end;\n}\n\nfunction _getEdge(a, b, prop, fn) {\n  if (a && b) {\n    return fn(a[prop], b[prop]);\n  }\n  return a ? a[prop] : b ? b[prop] : 0;\n}\n","/**\n * @typedef { import('../../core/core.controller.js').default } Chart\n * @typedef { import('../../core/core.scale.js').default } Scale\n * @typedef { import('../../elements/element.point.js').default } PointElement\n */\n\nimport {LineElement} from '../../elements/index.js';\nimport {isArray} from '../../helpers/index.js';\nimport {_pointsFromSegments} from './filler.segment.js';\n\n/**\n * @param {PointElement[] | { x: number; y: number; }} boundary\n * @param {LineElement} line\n * @return {LineElement?}\n */\nexport function _createBoundaryLine(boundary, line) {\n  let points = [];\n  let _loop = false;\n\n  if (isArray(boundary)) {\n    _loop = true;\n    // @ts-ignore\n    points = boundary;\n  } else {\n    points = _pointsFromSegments(boundary, line);\n  }\n\n  return points.length ? new LineElement({\n    points,\n    options: {tension: 0},\n    _loop,\n    _fullLoop: _loop\n  }) : null;\n}\n\nexport function _shouldApplyFill(source) {\n  return source && source.fill !== false;\n}\n","import {isObject, isFinite, valueOrDefault} from '../../helpers/helpers.core.js';\n\n/**\n * @typedef { import('../../core/core.scale.js').default } Scale\n * @typedef { import('../../elements/element.line.js').default } LineElement\n * @typedef { import('../../types/index.js').FillTarget } FillTarget\n * @typedef { import('../../types/index.js').ComplexFillTarget } ComplexFillTarget\n */\n\nexport function _resolveTarget(sources, index, propagate) {\n  const source = sources[index];\n  let fill = source.fill;\n  const visited = [index];\n  let target;\n\n  if (!propagate) {\n    return fill;\n  }\n\n  while (fill !== false && visited.indexOf(fill) === -1) {\n    if (!isFinite(fill)) {\n      return fill;\n    }\n\n    target = sources[fill];\n    if (!target) {\n      return false;\n    }\n\n    if (target.visible) {\n      return fill;\n    }\n\n    visited.push(fill);\n    fill = target.fill;\n  }\n\n  return false;\n}\n\n/**\n * @param {LineElement} line\n * @param {number} index\n * @param {number} count\n */\nexport function _decodeFill(line, index, count) {\n  /** @type {string | {value: number}} */\n  const fill = parseFillOption(line);\n\n  if (isObject(fill)) {\n    return isNaN(fill.value) ? false : fill;\n  }\n\n  let target = parseFloat(fill);\n\n  if (isFinite(target) && Math.floor(target) === target) {\n    return decodeTargetIndex(fill[0], index, target, count);\n  }\n\n  return ['origin', 'start', 'end', 'stack', 'shape'].indexOf(fill) >= 0 && fill;\n}\n\nfunction decodeTargetIndex(firstCh, index, target, count) {\n  if (firstCh === '-' || firstCh === '+') {\n    target = index + target;\n  }\n\n  if (target === index || target < 0 || target >= count) {\n    return false;\n  }\n\n  return target;\n}\n\n/**\n * @param {FillTarget | ComplexFillTarget} fill\n * @param {Scale} scale\n * @returns {number | null}\n */\nexport function _getTargetPixel(fill, scale) {\n  let pixel = null;\n  if (fill === 'start') {\n    pixel = scale.bottom;\n  } else if (fill === 'end') {\n    pixel = scale.top;\n  } else if (isObject(fill)) {\n    // @ts-ignore\n    pixel = scale.getPixelForValue(fill.value);\n  } else if (scale.getBasePixel) {\n    pixel = scale.getBasePixel();\n  }\n  return pixel;\n}\n\n/**\n * @param {FillTarget | ComplexFillTarget} fill\n * @param {Scale} scale\n * @param {number} startValue\n * @returns {number | undefined}\n */\nexport function _getTargetValue(fill, scale, startValue) {\n  let value;\n\n  if (fill === 'start') {\n    value = startValue;\n  } else if (fill === 'end') {\n    value = scale.options.reverse ? scale.min : scale.max;\n  } else if (isObject(fill)) {\n    // @ts-ignore\n    value = fill.value;\n  } else {\n    value = scale.getBaseValue();\n  }\n  return value;\n}\n\n/**\n * @param {LineElement} line\n */\nfunction parseFillOption(line) {\n  const options = line.options;\n  const fillOption = options.fill;\n  let fill = valueOrDefault(fillOption && fillOption.target, fillOption);\n\n  if (fill === undefined) {\n    fill = !!options.backgroundColor;\n  }\n\n  if (fill === false || fill === null) {\n    return false;\n  }\n\n  if (fill === true) {\n    return 'origin';\n  }\n  return fill;\n}\n","/**\n * @typedef { import('../../core/core.controller.js').default } Chart\n * @typedef { import('../../core/core.scale.js').default } Scale\n * @typedef { import('../../elements/element.point.js').default } PointElement\n */\n\nimport {LineElement} from '../../elements/index.js';\nimport {_isBetween} from '../../helpers/index.js';\nimport {_createBoundaryLine} from './filler.helper.js';\n\n/**\n * @param {{ chart: Chart; scale: Scale; index: number; line: LineElement; }} source\n * @return {LineElement}\n */\nexport function _buildStackLine(source) {\n  const {scale, index, line} = source;\n  const points = [];\n  const segments = line.segments;\n  const sourcePoints = line.points;\n  const linesBelow = getLinesBelow(scale, index);\n  linesBelow.push(_createBoundaryLine({x: null, y: scale.bottom}, line));\n\n  for (let i = 0; i < segments.length; i++) {\n    const segment = segments[i];\n    for (let j = segment.start; j <= segment.end; j++) {\n      addPointsBelow(points, sourcePoints[j], linesBelow);\n    }\n  }\n  return new LineElement({points, options: {}});\n}\n\n/**\n * @param {Scale} scale\n * @param {number} index\n * @return {LineElement[]}\n */\nfunction getLinesBelow(scale, index) {\n  const below = [];\n  const metas = scale.getMatchingVisibleMetas('line');\n\n  for (let i = 0; i < metas.length; i++) {\n    const meta = metas[i];\n    if (meta.index === index) {\n      break;\n    }\n    if (!meta.hidden) {\n      below.unshift(meta.dataset);\n    }\n  }\n  return below;\n}\n\n/**\n * @param {PointElement[]} points\n * @param {PointElement} sourcePoint\n * @param {LineElement[]} linesBelow\n */\nfunction addPointsBelow(points, sourcePoint, linesBelow) {\n  const postponed = [];\n  for (let j = 0; j < linesBelow.length; j++) {\n    const line = linesBelow[j];\n    const {first, last, point} = findPoint(line, sourcePoint, 'x');\n\n    if (!point || (first && last)) {\n      continue;\n    }\n    if (first) {\n      // First point of an segment -> need to add another point before this,\n      // from next line below.\n      postponed.unshift(point);\n    } else {\n      points.push(point);\n      if (!last) {\n        // In the middle of an segment, no need to add more points.\n        break;\n      }\n    }\n  }\n  points.push(...postponed);\n}\n\n/**\n * @param {LineElement} line\n * @param {PointElement} sourcePoint\n * @param {string} property\n * @returns {{point?: PointElement, first?: boolean, last?: boolean}}\n */\nfunction findPoint(line, sourcePoint, property) {\n  const point = line.interpolate(sourcePoint, property);\n  if (!point) {\n    return {};\n  }\n\n  const pointValue = point[property];\n  const segments = line.segments;\n  const linePoints = line.points;\n  let first = false;\n  let last = false;\n  for (let i = 0; i < segments.length; i++) {\n    const segment = segments[i];\n    const firstValue = linePoints[segment.start][property];\n    const lastValue = linePoints[segment.end][property];\n    if (_isBetween(pointValue, firstValue, lastValue)) {\n      first = pointValue === firstValue;\n      last = pointValue === lastValue;\n      break;\n    }\n  }\n  return {first, last, point};\n}\n","import {TAU} from '../../helpers/index.js';\n\n// TODO: use elements.ArcElement instead\nexport class simpleArc {\n  constructor(opts) {\n    this.x = opts.x;\n    this.y = opts.y;\n    this.radius = opts.radius;\n  }\n\n  pathSegment(ctx, bounds, opts) {\n    const {x, y, radius} = this;\n    bounds = bounds || {start: 0, end: TAU};\n    ctx.arc(x, y, radius, bounds.end, bounds.start, true);\n    return !opts.bounds;\n  }\n\n  interpolate(point) {\n    const {x, y, radius} = this;\n    const angle = point.angle;\n    return {\n      x: x + Math.cos(angle) * radius,\n      y: y + Math.sin(angle) * radius,\n      angle\n    };\n  }\n}\n","import {isFinite} from '../../helpers/index.js';\nimport {_createBoundaryLine} from './filler.helper.js';\nimport {_getTargetPixel, _getTargetValue} from './filler.options.js';\nimport {_buildStackLine} from './filler.target.stack.js';\nimport {simpleArc} from './simpleArc.js';\n\n/**\n * @typedef { import('../../core/core.controller.js').default } Chart\n * @typedef { import('../../core/core.scale.js').default } Scale\n * @typedef { import('../../elements/element.point.js').default } PointElement\n */\n\nexport function _getTarget(source) {\n  const {chart, fill, line} = source;\n\n  if (isFinite(fill)) {\n    return getLineByIndex(chart, fill);\n  }\n\n  if (fill === 'stack') {\n    return _buildStackLine(source);\n  }\n\n  if (fill === 'shape') {\n    return true;\n  }\n\n  const boundary = computeBoundary(source);\n\n  if (boundary instanceof simpleArc) {\n    return boundary;\n  }\n\n  return _createBoundaryLine(boundary, line);\n}\n\n/**\n * @param {Chart} chart\n * @param {number} index\n */\nfunction getLineByIndex(chart, index) {\n  const meta = chart.getDatasetMeta(index);\n  const visible = meta && chart.isDatasetVisible(index);\n  return visible ? meta.dataset : null;\n}\n\nfunction computeBoundary(source) {\n  const scale = source.scale || {};\n\n  if (scale.getPointPositionForValue) {\n    return computeCircularBoundary(source);\n  }\n  return computeLinearBoundary(source);\n}\n\n\nfunction computeLinearBoundary(source) {\n  const {scale = {}, fill} = source;\n  const pixel = _getTargetPixel(fill, scale);\n\n  if (isFinite(pixel)) {\n    const horizontal = scale.isHorizontal();\n\n    return {\n      x: horizontal ? pixel : null,\n      y: horizontal ? null : pixel\n    };\n  }\n\n  return null;\n}\n\nfunction computeCircularBoundary(source) {\n  const {scale, fill} = source;\n  const options = scale.options;\n  const length = scale.getLabels().length;\n  const start = options.reverse ? scale.max : scale.min;\n  const value = _getTargetValue(fill, scale, start);\n  const target = [];\n\n  if (options.grid.circular) {\n    const center = scale.getPointPositionForValue(0, start);\n    return new simpleArc({\n      x: center.x,\n      y: center.y,\n      radius: scale.getDistanceFromCenterForValue(value)\n    });\n  }\n\n  for (let i = 0; i < length; ++i) {\n    target.push(scale.getPointPositionForValue(i, value));\n  }\n  return target;\n}\n\n","import {clipArea, unclipArea} from '../../helpers/index.js';\nimport {_findSegmentEnd, _getBounds, _segments} from './filler.segment.js';\nimport {_getTarget} from './filler.target.js';\n\nexport function _drawfill(ctx, source, area) {\n  const target = _getTarget(source);\n  const {line, scale, axis} = source;\n  const lineOpts = line.options;\n  const fillOption = lineOpts.fill;\n  const color = lineOpts.backgroundColor;\n  const {above = color, below = color} = fillOption || {};\n  if (target && line.points.length) {\n    clipArea(ctx, area);\n    doFill(ctx, {line, target, above, below, area, scale, axis});\n    unclipArea(ctx);\n  }\n}\n\nfunction doFill(ctx, cfg) {\n  const {line, target, above, below, area, scale} = cfg;\n  const property = line._loop ? 'angle' : cfg.axis;\n\n  ctx.save();\n\n  if (property === 'x' && below !== above) {\n    clipVertical(ctx, target, area.top);\n    fill(ctx, {line, target, color: above, scale, property});\n    ctx.restore();\n    ctx.save();\n    clipVertical(ctx, target, area.bottom);\n  }\n  fill(ctx, {line, target, color: below, scale, property});\n\n  ctx.restore();\n}\n\nfunction clipVertical(ctx, target, clipY) {\n  const {segments, points} = target;\n  let first = true;\n  let lineLoop = false;\n\n  ctx.beginPath();\n  for (const segment of segments) {\n    const {start, end} = segment;\n    const firstPoint = points[start];\n    const lastPoint = points[_findSegmentEnd(start, end, points)];\n    if (first) {\n      ctx.moveTo(firstPoint.x, firstPoint.y);\n      first = false;\n    } else {\n      ctx.lineTo(firstPoint.x, clipY);\n      ctx.lineTo(firstPoint.x, firstPoint.y);\n    }\n    lineLoop = !!target.pathSegment(ctx, segment, {move: lineLoop});\n    if (lineLoop) {\n      ctx.closePath();\n    } else {\n      ctx.lineTo(lastPoint.x, clipY);\n    }\n  }\n\n  ctx.lineTo(target.first().x, clipY);\n  ctx.closePath();\n  ctx.clip();\n}\n\nfunction fill(ctx, cfg) {\n  const {line, target, property, color, scale} = cfg;\n  const segments = _segments(line, target, property);\n\n  for (const {source: src, target: tgt, start, end} of segments) {\n    const {style: {backgroundColor = color} = {}} = src;\n    const notShape = target !== true;\n\n    ctx.save();\n    ctx.fillStyle = backgroundColor;\n\n    clipBounds(ctx, scale, notShape && _getBounds(property, start, end));\n\n    ctx.beginPath();\n\n    const lineLoop = !!line.pathSegment(ctx, src);\n\n    let loop;\n    if (notShape) {\n      if (lineLoop) {\n        ctx.closePath();\n      } else {\n        interpolatedLineTo(ctx, target, end, property);\n      }\n\n      const targetLoop = !!target.pathSegment(ctx, tgt, {move: lineLoop, reverse: true});\n      loop = lineLoop && targetLoop;\n      if (!loop) {\n        interpolatedLineTo(ctx, target, start, property);\n      }\n    }\n\n    ctx.closePath();\n    ctx.fill(loop ? 'evenodd' : 'nonzero');\n\n    ctx.restore();\n  }\n}\n\nfunction clipBounds(ctx, scale, bounds) {\n  const {top, bottom} = scale.chart.chartArea;\n  const {property, start, end} = bounds || {};\n  if (property === 'x') {\n    ctx.beginPath();\n    ctx.rect(start, top, end - start, bottom - top);\n    ctx.clip();\n  }\n}\n\nfunction interpolatedLineTo(ctx, target, point, property) {\n  const interpolatedPoint = target.interpolate(point, property);\n  if (interpolatedPoint) {\n    ctx.lineTo(interpolatedPoint.x, interpolatedPoint.y);\n  }\n}\n\n","/**\n * Plugin based on discussion from the following Chart.js issues:\n * @see https://github.com/chartjs/Chart.js/issues/2380#issuecomment-279961569\n * @see https://github.com/chartjs/Chart.js/issues/2440#issuecomment-256461897\n */\n\nimport LineElement from '../../elements/element.line.js';\nimport {_drawfill} from './filler.drawing.js';\nimport {_shouldApplyFill} from './filler.helper.js';\nimport {_decodeFill, _resolveTarget} from './filler.options.js';\n\nexport default {\n  id: 'filler',\n\n  afterDatasetsUpdate(chart, _args, options) {\n    const count = (chart.data.datasets || []).length;\n    const sources = [];\n    let meta, i, line, source;\n\n    for (i = 0; i < count; ++i) {\n      meta = chart.getDatasetMeta(i);\n      line = meta.dataset;\n      source = null;\n\n      if (line && line.options && line instanceof LineElement) {\n        source = {\n          visible: chart.isDatasetVisible(i),\n          index: i,\n          fill: _decodeFill(line, i, count),\n          chart,\n          axis: meta.controller.options.indexAxis,\n          scale: meta.vScale,\n          line,\n        };\n      }\n\n      meta.$filler = source;\n      sources.push(source);\n    }\n\n    for (i = 0; i < count; ++i) {\n      source = sources[i];\n      if (!source || source.fill === false) {\n        continue;\n      }\n\n      source.fill = _resolveTarget(sources, i, options.propagate);\n    }\n  },\n\n  beforeDraw(chart, _args, options) {\n    const draw = options.drawTime === 'beforeDraw';\n    const metasets = chart.getSortedVisibleDatasetMetas();\n    const area = chart.chartArea;\n    for (let i = metasets.length - 1; i >= 0; --i) {\n      const source = metasets[i].$filler;\n      if (!source) {\n        continue;\n      }\n\n      source.line.updateControlPoints(area, source.axis);\n      if (draw && source.fill) {\n        _drawfill(chart.ctx, source, area);\n      }\n    }\n  },\n\n  beforeDatasetsDraw(chart, _args, options) {\n    if (options.drawTime !== 'beforeDatasetsDraw') {\n      return;\n    }\n\n    const metasets = chart.getSortedVisibleDatasetMetas();\n    for (let i = metasets.length - 1; i >= 0; --i) {\n      const source = metasets[i].$filler;\n\n      if (_shouldApplyFill(source)) {\n        _drawfill(chart.ctx, source, chart.chartArea);\n      }\n    }\n  },\n\n  beforeDatasetDraw(chart, args, options) {\n    const source = args.meta.$filler;\n\n    if (!_shouldApplyFill(source) || options.drawTime !== 'beforeDatasetDraw') {\n      return;\n    }\n\n    _drawfill(chart.ctx, source, chart.chartArea);\n  },\n\n  defaults: {\n    propagate: true,\n    drawTime: 'beforeDatasetDraw'\n  }\n};\n","import defaults from '../core/core.defaults.js';\nimport Element from '../core/core.element.js';\nimport layouts from '../core/core.layouts.js';\nimport {addRoundedRectPath, drawPointLegend, renderText} from '../helpers/helpers.canvas.js';\nimport {\n  _isBetween,\n  callback as call,\n  clipArea,\n  getRtlAdapter,\n  overrideTextDirection,\n  restoreTextDirection,\n  toFont,\n  toPadding,\n  unclipArea,\n  valueOrDefault,\n} from '../helpers/index.js';\nimport {_alignStartEnd, _textX, _toLeftRightCenter} from '../helpers/helpers.extras.js';\nimport {toTRBLCorners} from '../helpers/helpers.options.js';\n\n/**\n * @typedef { import('../types/index.js').ChartEvent } ChartEvent\n */\n\nconst getBoxSize = (labelOpts, fontSize) => {\n  let {boxHeight = fontSize, boxWidth = fontSize} = labelOpts;\n\n  if (labelOpts.usePointStyle) {\n    boxHeight = Math.min(boxHeight, fontSize);\n    boxWidth = labelOpts.pointStyleWidth || Math.min(boxWidth, fontSize);\n  }\n\n  return {\n    boxWidth,\n    boxHeight,\n    itemHeight: Math.max(fontSize, boxHeight)\n  };\n};\n\nconst itemsEqual = (a, b) => a !== null && b !== null && a.datasetIndex === b.datasetIndex && a.index === b.index;\n\nexport class Legend extends Element {\n\n  /**\n\t * @param {{ ctx: any; options: any; chart: any; }} config\n\t */\n  constructor(config) {\n    super();\n\n    this._added = false;\n\n    // Contains hit boxes for each dataset (in dataset order)\n    this.legendHitBoxes = [];\n\n    /**\n \t\t * @private\n \t\t */\n    this._hoveredItem = null;\n\n    // Are we in doughnut mode which has a different data type\n    this.doughnutMode = false;\n\n    this.chart = config.chart;\n    this.options = config.options;\n    this.ctx = config.ctx;\n    this.legendItems = undefined;\n    this.columnSizes = undefined;\n    this.lineWidths = undefined;\n    this.maxHeight = undefined;\n    this.maxWidth = undefined;\n    this.top = undefined;\n    this.bottom = undefined;\n    this.left = undefined;\n    this.right = undefined;\n    this.height = undefined;\n    this.width = undefined;\n    this._margins = undefined;\n    this.position = undefined;\n    this.weight = undefined;\n    this.fullSize = undefined;\n  }\n\n  update(maxWidth, maxHeight, margins) {\n    this.maxWidth = maxWidth;\n    this.maxHeight = maxHeight;\n    this._margins = margins;\n\n    this.setDimensions();\n    this.buildLabels();\n    this.fit();\n  }\n\n  setDimensions() {\n    if (this.isHorizontal()) {\n      this.width = this.maxWidth;\n      this.left = this._margins.left;\n      this.right = this.width;\n    } else {\n      this.height = this.maxHeight;\n      this.top = this._margins.top;\n      this.bottom = this.height;\n    }\n  }\n\n  buildLabels() {\n    const labelOpts = this.options.labels || {};\n    let legendItems = call(labelOpts.generateLabels, [this.chart], this) || [];\n\n    if (labelOpts.filter) {\n      legendItems = legendItems.filter((item) => labelOpts.filter(item, this.chart.data));\n    }\n\n    if (labelOpts.sort) {\n      legendItems = legendItems.sort((a, b) => labelOpts.sort(a, b, this.chart.data));\n    }\n\n    if (this.options.reverse) {\n      legendItems.reverse();\n    }\n\n    this.legendItems = legendItems;\n  }\n\n  fit() {\n    const {options, ctx} = this;\n\n    // The legend may not be displayed for a variety of reasons including\n    // the fact that the defaults got set to `false`.\n    // When the legend is not displayed, there are no guarantees that the options\n    // are correctly formatted so we need to bail out as early as possible.\n    if (!options.display) {\n      this.width = this.height = 0;\n      return;\n    }\n\n    const labelOpts = options.labels;\n    const labelFont = toFont(labelOpts.font);\n    const fontSize = labelFont.size;\n    const titleHeight = this._computeTitleHeight();\n    const {boxWidth, itemHeight} = getBoxSize(labelOpts, fontSize);\n\n    let width, height;\n\n    ctx.font = labelFont.string;\n\n    if (this.isHorizontal()) {\n      width = this.maxWidth; // fill all the width\n      height = this._fitRows(titleHeight, fontSize, boxWidth, itemHeight) + 10;\n    } else {\n      height = this.maxHeight; // fill all the height\n      width = this._fitCols(titleHeight, labelFont, boxWidth, itemHeight) + 10;\n    }\n\n    this.width = Math.min(width, options.maxWidth || this.maxWidth);\n    this.height = Math.min(height, options.maxHeight || this.maxHeight);\n  }\n\n  /**\n\t * @private\n\t */\n  _fitRows(titleHeight, fontSize, boxWidth, itemHeight) {\n    const {ctx, maxWidth, options: {labels: {padding}}} = this;\n    const hitboxes = this.legendHitBoxes = [];\n    // Width of each line of legend boxes. Labels wrap onto multiple lines when there are too many to fit on one\n    const lineWidths = this.lineWidths = [0];\n    const lineHeight = itemHeight + padding;\n    let totalHeight = titleHeight;\n\n    ctx.textAlign = 'left';\n    ctx.textBaseline = 'middle';\n\n    let row = -1;\n    let top = -lineHeight;\n    this.legendItems.forEach((legendItem, i) => {\n      const itemWidth = boxWidth + (fontSize / 2) + ctx.measureText(legendItem.text).width;\n\n      if (i === 0 || lineWidths[lineWidths.length - 1] + itemWidth + 2 * padding > maxWidth) {\n        totalHeight += lineHeight;\n        lineWidths[lineWidths.length - (i > 0 ? 0 : 1)] = 0;\n        top += lineHeight;\n        row++;\n      }\n\n      hitboxes[i] = {left: 0, top, row, width: itemWidth, height: itemHeight};\n\n      lineWidths[lineWidths.length - 1] += itemWidth + padding;\n    });\n\n    return totalHeight;\n  }\n\n  _fitCols(titleHeight, labelFont, boxWidth, _itemHeight) {\n    const {ctx, maxHeight, options: {labels: {padding}}} = this;\n    const hitboxes = this.legendHitBoxes = [];\n    const columnSizes = this.columnSizes = [];\n    const heightLimit = maxHeight - titleHeight;\n\n    let totalWidth = padding;\n    let currentColWidth = 0;\n    let currentColHeight = 0;\n\n    let left = 0;\n    let col = 0;\n\n    this.legendItems.forEach((legendItem, i) => {\n      const {itemWidth, itemHeight} = calculateItemSize(boxWidth, labelFont, ctx, legendItem, _itemHeight);\n\n      // If too tall, go to new column\n      if (i > 0 && currentColHeight + itemHeight + 2 * padding > heightLimit) {\n        totalWidth += currentColWidth + padding;\n        columnSizes.push({width: currentColWidth, height: currentColHeight}); // previous column size\n        left += currentColWidth + padding;\n        col++;\n        currentColWidth = currentColHeight = 0;\n      }\n\n      // Store the hitbox width and height here. Final position will be updated in `draw`\n      hitboxes[i] = {left, top: currentColHeight, col, width: itemWidth, height: itemHeight};\n\n      // Get max width\n      currentColWidth = Math.max(currentColWidth, itemWidth);\n      currentColHeight += itemHeight + padding;\n    });\n\n    totalWidth += currentColWidth;\n    columnSizes.push({width: currentColWidth, height: currentColHeight}); // previous column size\n\n    return totalWidth;\n  }\n\n  adjustHitBoxes() {\n    if (!this.options.display) {\n      return;\n    }\n    const titleHeight = this._computeTitleHeight();\n    const {legendHitBoxes: hitboxes, options: {align, labels: {padding}, rtl}} = this;\n    const rtlHelper = getRtlAdapter(rtl, this.left, this.width);\n    if (this.isHorizontal()) {\n      let row = 0;\n      let left = _alignStartEnd(align, this.left + padding, this.right - this.lineWidths[row]);\n      for (const hitbox of hitboxes) {\n        if (row !== hitbox.row) {\n          row = hitbox.row;\n          left = _alignStartEnd(align, this.left + padding, this.right - this.lineWidths[row]);\n        }\n        hitbox.top += this.top + titleHeight + padding;\n        hitbox.left = rtlHelper.leftForLtr(rtlHelper.x(left), hitbox.width);\n        left += hitbox.width + padding;\n      }\n    } else {\n      let col = 0;\n      let top = _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - this.columnSizes[col].height);\n      for (const hitbox of hitboxes) {\n        if (hitbox.col !== col) {\n          col = hitbox.col;\n          top = _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - this.columnSizes[col].height);\n        }\n        hitbox.top = top;\n        hitbox.left += this.left + padding;\n        hitbox.left = rtlHelper.leftForLtr(rtlHelper.x(hitbox.left), hitbox.width);\n        top += hitbox.height + padding;\n      }\n    }\n  }\n\n  isHorizontal() {\n    return this.options.position === 'top' || this.options.position === 'bottom';\n  }\n\n  draw() {\n    if (this.options.display) {\n      const ctx = this.ctx;\n      clipArea(ctx, this);\n\n      this._draw();\n\n      unclipArea(ctx);\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _draw() {\n    const {options: opts, columnSizes, lineWidths, ctx} = this;\n    const {align, labels: labelOpts} = opts;\n    const defaultColor = defaults.color;\n    const rtlHelper = getRtlAdapter(opts.rtl, this.left, this.width);\n    const labelFont = toFont(labelOpts.font);\n    const {padding} = labelOpts;\n    const fontSize = labelFont.size;\n    const halfFontSize = fontSize / 2;\n    let cursor;\n\n    this.drawTitle();\n\n    // Canvas setup\n    ctx.textAlign = rtlHelper.textAlign('left');\n    ctx.textBaseline = 'middle';\n    ctx.lineWidth = 0.5;\n    ctx.font = labelFont.string;\n\n    const {boxWidth, boxHeight, itemHeight} = getBoxSize(labelOpts, fontSize);\n\n    // current position\n    const drawLegendBox = function(x, y, legendItem) {\n      if (isNaN(boxWidth) || boxWidth <= 0 || isNaN(boxHeight) || boxHeight < 0) {\n        return;\n      }\n\n      // Set the ctx for the box\n      ctx.save();\n\n      const lineWidth = valueOrDefault(legendItem.lineWidth, 1);\n      ctx.fillStyle = valueOrDefault(legendItem.fillStyle, defaultColor);\n      ctx.lineCap = valueOrDefault(legendItem.lineCap, 'butt');\n      ctx.lineDashOffset = valueOrDefault(legendItem.lineDashOffset, 0);\n      ctx.lineJoin = valueOrDefault(legendItem.lineJoin, 'miter');\n      ctx.lineWidth = lineWidth;\n      ctx.strokeStyle = valueOrDefault(legendItem.strokeStyle, defaultColor);\n\n      ctx.setLineDash(valueOrDefault(legendItem.lineDash, []));\n\n      if (labelOpts.usePointStyle) {\n        // Recalculate x and y for drawPoint() because its expecting\n        // x and y to be center of figure (instead of top left)\n        const drawOptions = {\n          radius: boxHeight * Math.SQRT2 / 2,\n          pointStyle: legendItem.pointStyle,\n          rotation: legendItem.rotation,\n          borderWidth: lineWidth\n        };\n        const centerX = rtlHelper.xPlus(x, boxWidth / 2);\n        const centerY = y + halfFontSize;\n\n        // Draw pointStyle as legend symbol\n        drawPointLegend(ctx, drawOptions, centerX, centerY, labelOpts.pointStyleWidth && boxWidth);\n      } else {\n        // Draw box as legend symbol\n        // Adjust position when boxHeight < fontSize (want it centered)\n        const yBoxTop = y + Math.max((fontSize - boxHeight) / 2, 0);\n        const xBoxLeft = rtlHelper.leftForLtr(x, boxWidth);\n        const borderRadius = toTRBLCorners(legendItem.borderRadius);\n\n        ctx.beginPath();\n\n        if (Object.values(borderRadius).some(v => v !== 0)) {\n          addRoundedRectPath(ctx, {\n            x: xBoxLeft,\n            y: yBoxTop,\n            w: boxWidth,\n            h: boxHeight,\n            radius: borderRadius,\n          });\n        } else {\n          ctx.rect(xBoxLeft, yBoxTop, boxWidth, boxHeight);\n        }\n\n        ctx.fill();\n        if (lineWidth !== 0) {\n          ctx.stroke();\n        }\n      }\n\n      ctx.restore();\n    };\n\n    const fillText = function(x, y, legendItem) {\n      renderText(ctx, legendItem.text, x, y + (itemHeight / 2), labelFont, {\n        strikethrough: legendItem.hidden,\n        textAlign: rtlHelper.textAlign(legendItem.textAlign)\n      });\n    };\n\n    // Horizontal\n    const isHorizontal = this.isHorizontal();\n    const titleHeight = this._computeTitleHeight();\n    if (isHorizontal) {\n      cursor = {\n        x: _alignStartEnd(align, this.left + padding, this.right - lineWidths[0]),\n        y: this.top + padding + titleHeight,\n        line: 0\n      };\n    } else {\n      cursor = {\n        x: this.left + padding,\n        y: _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - columnSizes[0].height),\n        line: 0\n      };\n    }\n\n    overrideTextDirection(this.ctx, opts.textDirection);\n\n    const lineHeight = itemHeight + padding;\n    this.legendItems.forEach((legendItem, i) => {\n      ctx.strokeStyle = legendItem.fontColor; // for strikethrough effect\n      ctx.fillStyle = legendItem.fontColor; // render in correct colour\n\n      const textWidth = ctx.measureText(legendItem.text).width;\n      const textAlign = rtlHelper.textAlign(legendItem.textAlign || (legendItem.textAlign = labelOpts.textAlign));\n      const width = boxWidth + halfFontSize + textWidth;\n      let x = cursor.x;\n      let y = cursor.y;\n\n      rtlHelper.setWidth(this.width);\n\n      if (isHorizontal) {\n        if (i > 0 && x + width + padding > this.right) {\n          y = cursor.y += lineHeight;\n          cursor.line++;\n          x = cursor.x = _alignStartEnd(align, this.left + padding, this.right - lineWidths[cursor.line]);\n        }\n      } else if (i > 0 && y + lineHeight > this.bottom) {\n        x = cursor.x = x + columnSizes[cursor.line].width + padding;\n        cursor.line++;\n        y = cursor.y = _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - columnSizes[cursor.line].height);\n      }\n\n      const realX = rtlHelper.x(x);\n\n      drawLegendBox(realX, y, legendItem);\n\n      x = _textX(textAlign, x + boxWidth + halfFontSize, isHorizontal ? x + width : this.right, opts.rtl);\n\n      // Fill the actual label\n      fillText(rtlHelper.x(x), y, legendItem);\n\n      if (isHorizontal) {\n        cursor.x += width + padding;\n      } else if (typeof legendItem.text !== 'string') {\n        const fontLineHeight = labelFont.lineHeight;\n        cursor.y += calculateLegendItemHeight(legendItem, fontLineHeight);\n      } else {\n        cursor.y += lineHeight;\n      }\n    });\n\n    restoreTextDirection(this.ctx, opts.textDirection);\n  }\n\n  /**\n\t * @protected\n\t */\n  drawTitle() {\n    const opts = this.options;\n    const titleOpts = opts.title;\n    const titleFont = toFont(titleOpts.font);\n    const titlePadding = toPadding(titleOpts.padding);\n\n    if (!titleOpts.display) {\n      return;\n    }\n\n    const rtlHelper = getRtlAdapter(opts.rtl, this.left, this.width);\n    const ctx = this.ctx;\n    const position = titleOpts.position;\n    const halfFontSize = titleFont.size / 2;\n    const topPaddingPlusHalfFontSize = titlePadding.top + halfFontSize;\n    let y;\n\n    // These defaults are used when the legend is vertical.\n    // When horizontal, they are computed below.\n    let left = this.left;\n    let maxWidth = this.width;\n\n    if (this.isHorizontal()) {\n      // Move left / right so that the title is above the legend lines\n      maxWidth = Math.max(...this.lineWidths);\n      y = this.top + topPaddingPlusHalfFontSize;\n      left = _alignStartEnd(opts.align, left, this.right - maxWidth);\n    } else {\n      // Move down so that the title is above the legend stack in every alignment\n      const maxHeight = this.columnSizes.reduce((acc, size) => Math.max(acc, size.height), 0);\n      y = topPaddingPlusHalfFontSize + _alignStartEnd(opts.align, this.top, this.bottom - maxHeight - opts.labels.padding - this._computeTitleHeight());\n    }\n\n    // Now that we know the left edge of the inner legend box, compute the correct\n    // X coordinate from the title alignment\n    const x = _alignStartEnd(position, left, left + maxWidth);\n\n    // Canvas setup\n    ctx.textAlign = rtlHelper.textAlign(_toLeftRightCenter(position));\n    ctx.textBaseline = 'middle';\n    ctx.strokeStyle = titleOpts.color;\n    ctx.fillStyle = titleOpts.color;\n    ctx.font = titleFont.string;\n\n    renderText(ctx, titleOpts.text, x, y, titleFont);\n  }\n\n  /**\n\t * @private\n\t */\n  _computeTitleHeight() {\n    const titleOpts = this.options.title;\n    const titleFont = toFont(titleOpts.font);\n    const titlePadding = toPadding(titleOpts.padding);\n    return titleOpts.display ? titleFont.lineHeight + titlePadding.height : 0;\n  }\n\n  /**\n\t * @private\n\t */\n  _getLegendItemAt(x, y) {\n    let i, hitBox, lh;\n\n    if (_isBetween(x, this.left, this.right)\n      && _isBetween(y, this.top, this.bottom)) {\n      // See if we are touching one of the dataset boxes\n      lh = this.legendHitBoxes;\n      for (i = 0; i < lh.length; ++i) {\n        hitBox = lh[i];\n\n        if (_isBetween(x, hitBox.left, hitBox.left + hitBox.width)\n          && _isBetween(y, hitBox.top, hitBox.top + hitBox.height)) {\n          // Touching an element\n          return this.legendItems[i];\n        }\n      }\n    }\n\n    return null;\n  }\n\n  /**\n\t * Handle an event\n\t * @param {ChartEvent} e - The event to handle\n\t */\n  handleEvent(e) {\n    const opts = this.options;\n    if (!isListened(e.type, opts)) {\n      return;\n    }\n\n    // Chart event already has relative position in it\n    const hoveredItem = this._getLegendItemAt(e.x, e.y);\n\n    if (e.type === 'mousemove' || e.type === 'mouseout') {\n      const previous = this._hoveredItem;\n      const sameItem = itemsEqual(previous, hoveredItem);\n      if (previous && !sameItem) {\n        call(opts.onLeave, [e, previous, this], this);\n      }\n\n      this._hoveredItem = hoveredItem;\n\n      if (hoveredItem && !sameItem) {\n        call(opts.onHover, [e, hoveredItem, this], this);\n      }\n    } else if (hoveredItem) {\n      call(opts.onClick, [e, hoveredItem, this], this);\n    }\n  }\n}\n\nfunction calculateItemSize(boxWidth, labelFont, ctx, legendItem, _itemHeight) {\n  const itemWidth = calculateItemWidth(legendItem, boxWidth, labelFont, ctx);\n  const itemHeight = calculateItemHeight(_itemHeight, legendItem, labelFont.lineHeight);\n  return {itemWidth, itemHeight};\n}\n\nfunction calculateItemWidth(legendItem, boxWidth, labelFont, ctx) {\n  let legendItemText = legendItem.text;\n  if (legendItemText && typeof legendItemText !== 'string') {\n    legendItemText = legendItemText.reduce((a, b) => a.length > b.length ? a : b);\n  }\n  return boxWidth + (labelFont.size / 2) + ctx.measureText(legendItemText).width;\n}\n\nfunction calculateItemHeight(_itemHeight, legendItem, fontLineHeight) {\n  let itemHeight = _itemHeight;\n  if (typeof legendItem.text !== 'string') {\n    itemHeight = calculateLegendItemHeight(legendItem, fontLineHeight);\n  }\n  return itemHeight;\n}\n\nfunction calculateLegendItemHeight(legendItem, fontLineHeight) {\n  const labelHeight = legendItem.text ? legendItem.text.length + 0.5 : 0;\n  return fontLineHeight * labelHeight;\n}\n\nfunction isListened(type, opts) {\n  if ((type === 'mousemove' || type === 'mouseout') && (opts.onHover || opts.onLeave)) {\n    return true;\n  }\n  if (opts.onClick && (type === 'click' || type === 'mouseup')) {\n    return true;\n  }\n  return false;\n}\n\nexport default {\n  id: 'legend',\n\n  /**\n\t * For tests\n\t * @private\n\t */\n  _element: Legend,\n\n  start(chart, _args, options) {\n    const legend = chart.legend = new Legend({ctx: chart.ctx, options, chart});\n    layouts.configure(chart, legend, options);\n    layouts.addBox(chart, legend);\n  },\n\n  stop(chart) {\n    layouts.removeBox(chart, chart.legend);\n    delete chart.legend;\n  },\n\n  // During the beforeUpdate step, the layout configuration needs to run\n  // This ensures that if the legend position changes (via an option update)\n  // the layout system respects the change. See https://github.com/chartjs/Chart.js/issues/7527\n  beforeUpdate(chart, _args, options) {\n    const legend = chart.legend;\n    layouts.configure(chart, legend, options);\n    legend.options = options;\n  },\n\n  // The labels need to be built after datasets are updated to ensure that colors\n  // and other styling are correct. See https://github.com/chartjs/Chart.js/issues/6968\n  afterUpdate(chart) {\n    const legend = chart.legend;\n    legend.buildLabels();\n    legend.adjustHitBoxes();\n  },\n\n\n  afterEvent(chart, args) {\n    if (!args.replay) {\n      chart.legend.handleEvent(args.event);\n    }\n  },\n\n  defaults: {\n    display: true,\n    position: 'top',\n    align: 'center',\n    fullSize: true,\n    reverse: false,\n    weight: 1000,\n\n    // a callback that will handle\n    onClick(e, legendItem, legend) {\n      const index = legendItem.datasetIndex;\n      const ci = legend.chart;\n      if (ci.isDatasetVisible(index)) {\n        ci.hide(index);\n        legendItem.hidden = true;\n      } else {\n        ci.show(index);\n        legendItem.hidden = false;\n      }\n    },\n\n    onHover: null,\n    onLeave: null,\n\n    labels: {\n      color: (ctx) => ctx.chart.options.color,\n      boxWidth: 40,\n      padding: 10,\n      // Generates labels shown in the legend\n      // Valid properties to return:\n      // text : text to display\n      // fillStyle : fill of coloured box\n      // strokeStyle: stroke of coloured box\n      // hidden : if this legend item refers to a hidden item\n      // lineCap : cap style for line\n      // lineDash\n      // lineDashOffset :\n      // lineJoin :\n      // lineWidth :\n      generateLabels(chart) {\n        const datasets = chart.data.datasets;\n        const {labels: {usePointStyle, pointStyle, textAlign, color, useBorderRadius, borderRadius}} = chart.legend.options;\n\n        return chart._getSortedDatasetMetas().map((meta) => {\n          const style = meta.controller.getStyle(usePointStyle ? 0 : undefined);\n          const borderWidth = toPadding(style.borderWidth);\n\n          return {\n            text: datasets[meta.index].label,\n            fillStyle: style.backgroundColor,\n            fontColor: color,\n            hidden: !meta.visible,\n            lineCap: style.borderCapStyle,\n            lineDash: style.borderDash,\n            lineDashOffset: style.borderDashOffset,\n            lineJoin: style.borderJoinStyle,\n            lineWidth: (borderWidth.width + borderWidth.height) / 4,\n            strokeStyle: style.borderColor,\n            pointStyle: pointStyle || style.pointStyle,\n            rotation: style.rotation,\n            textAlign: textAlign || style.textAlign,\n            borderRadius: useBorderRadius && (borderRadius || style.borderRadius),\n\n            // Below is extra data used for toggling the datasets\n            datasetIndex: meta.index\n          };\n        }, this);\n      }\n    },\n\n    title: {\n      color: (ctx) => ctx.chart.options.color,\n      display: false,\n      position: 'center',\n      text: '',\n    }\n  },\n\n  descriptors: {\n    _scriptable: (name) => !name.startsWith('on'),\n    labels: {\n      _scriptable: (name) => !['generateLabels', 'filter', 'sort'].includes(name),\n    }\n  },\n};\n","import {Title} from './plugin.title.js';\nimport layouts from '../core/core.layouts.js';\n\nconst map = new WeakMap();\n\nexport default {\n  id: 'subtitle',\n\n  start(chart, _args, options) {\n    const title = new Title({\n      ctx: chart.ctx,\n      options,\n      chart\n    });\n\n    layouts.configure(chart, title, options);\n    layouts.addBox(chart, title);\n    map.set(chart, title);\n  },\n\n  stop(chart) {\n    layouts.removeBox(chart, map.get(chart));\n    map.delete(chart);\n  },\n\n  beforeUpdate(chart, _args, options) {\n    const title = map.get(chart);\n    layouts.configure(chart, title, options);\n    title.options = options;\n  },\n\n  defaults: {\n    align: 'center',\n    display: false,\n    font: {\n      weight: 'normal',\n    },\n    fullSize: true,\n    padding: 0,\n    position: 'top',\n    text: '',\n    weight: 1500         // by default greater than legend (1000) and smaller than title (2000)\n  },\n\n  defaultRoutes: {\n    color: 'color'\n  },\n\n  descriptors: {\n    _scriptable: true,\n    _indexable: false,\n  },\n};\n","import Element from '../core/core.element.js';\nimport layouts from '../core/core.layouts.js';\nimport {PI, isArray, toPadding, toFont} from '../helpers/index.js';\nimport {_toLeftRightCenter, _alignStartEnd} from '../helpers/helpers.extras.js';\nimport {renderText} from '../helpers/helpers.canvas.js';\n\nexport class Title extends Element {\n  /**\n\t * @param {{ ctx: any; options: any; chart: any; }} config\n\t */\n  constructor(config) {\n    super();\n\n    this.chart = config.chart;\n    this.options = config.options;\n    this.ctx = config.ctx;\n    this._padding = undefined;\n    this.top = undefined;\n    this.bottom = undefined;\n    this.left = undefined;\n    this.right = undefined;\n    this.width = undefined;\n    this.height = undefined;\n    this.position = undefined;\n    this.weight = undefined;\n    this.fullSize = undefined;\n  }\n\n  update(maxWidth, maxHeight) {\n    const opts = this.options;\n\n    this.left = 0;\n    this.top = 0;\n\n    if (!opts.display) {\n      this.width = this.height = this.right = this.bottom = 0;\n      return;\n    }\n\n    this.width = this.right = maxWidth;\n    this.height = this.bottom = maxHeight;\n\n    const lineCount = isArray(opts.text) ? opts.text.length : 1;\n    this._padding = toPadding(opts.padding);\n    const textSize = lineCount * toFont(opts.font).lineHeight + this._padding.height;\n\n    if (this.isHorizontal()) {\n      this.height = textSize;\n    } else {\n      this.width = textSize;\n    }\n  }\n\n  isHorizontal() {\n    const pos = this.options.position;\n    return pos === 'top' || pos === 'bottom';\n  }\n\n  _drawArgs(offset) {\n    const {top, left, bottom, right, options} = this;\n    const align = options.align;\n    let rotation = 0;\n    let maxWidth, titleX, titleY;\n\n    if (this.isHorizontal()) {\n      titleX = _alignStartEnd(align, left, right);\n      titleY = top + offset;\n      maxWidth = right - left;\n    } else {\n      if (options.position === 'left') {\n        titleX = left + offset;\n        titleY = _alignStartEnd(align, bottom, top);\n        rotation = PI * -0.5;\n      } else {\n        titleX = right - offset;\n        titleY = _alignStartEnd(align, top, bottom);\n        rotation = PI * 0.5;\n      }\n      maxWidth = bottom - top;\n    }\n    return {titleX, titleY, maxWidth, rotation};\n  }\n\n  draw() {\n    const ctx = this.ctx;\n    const opts = this.options;\n\n    if (!opts.display) {\n      return;\n    }\n\n    const fontOpts = toFont(opts.font);\n    const lineHeight = fontOpts.lineHeight;\n    const offset = lineHeight / 2 + this._padding.top;\n    const {titleX, titleY, maxWidth, rotation} = this._drawArgs(offset);\n\n    renderText(ctx, opts.text, 0, 0, fontOpts, {\n      color: opts.color,\n      maxWidth,\n      rotation,\n      textAlign: _toLeftRightCenter(opts.align),\n      textBaseline: 'middle',\n      translation: [titleX, titleY],\n    });\n  }\n}\n\nfunction createTitle(chart, titleOpts) {\n  const title = new Title({\n    ctx: chart.ctx,\n    options: titleOpts,\n    chart\n  });\n\n  layouts.configure(chart, title, titleOpts);\n  layouts.addBox(chart, title);\n  chart.titleBlock = title;\n}\n\nexport default {\n  id: 'title',\n\n  /**\n\t * For tests\n\t * @private\n\t */\n  _element: Title,\n\n  start(chart, _args, options) {\n    createTitle(chart, options);\n  },\n\n  stop(chart) {\n    const titleBlock = chart.titleBlock;\n    layouts.removeBox(chart, titleBlock);\n    delete chart.titleBlock;\n  },\n\n  beforeUpdate(chart, _args, options) {\n    const title = chart.titleBlock;\n    layouts.configure(chart, title, options);\n    title.options = options;\n  },\n\n  defaults: {\n    align: 'center',\n    display: false,\n    font: {\n      weight: 'bold',\n    },\n    fullSize: true,\n    padding: 10,\n    position: 'top',\n    text: '',\n    weight: 2000         // by default greater than legend (1000) to be above\n  },\n\n  defaultRoutes: {\n    color: 'color'\n  },\n\n  descriptors: {\n    _scriptable: true,\n    _indexable: false,\n  },\n};\n","import Animations from '../core/core.animations.js';\nimport Element from '../core/core.element.js';\nimport {addRoundedRectPath} from '../helpers/helpers.canvas.js';\nimport {each, noop, isNullOrUndef, isArray, _elementsEqual, isObject} from '../helpers/helpers.core.js';\nimport {toFont, toPadding, toTRBLCorners} from '../helpers/helpers.options.js';\nimport {getRtlAdapter, overrideTextDirection, restoreTextDirection} from '../helpers/helpers.rtl.js';\nimport {distanceBetweenPoints, _limitValue} from '../helpers/helpers.math.js';\nimport {createContext, drawPoint} from '../helpers/index.js';\n\n/**\n * @typedef { import('../platform/platform.base.js').Chart } Chart\n * @typedef { import('../types/index.js').ChartEvent } ChartEvent\n * @typedef { import('../types/index.js').ActiveElement } ActiveElement\n * @typedef { import('../core/core.interaction.js').InteractionItem } InteractionItem\n */\n\nconst positioners = {\n  /**\n\t * Average mode places the tooltip at the average position of the elements shown\n\t */\n  average(items) {\n    if (!items.length) {\n      return false;\n    }\n\n    let i, len;\n    let x = 0;\n    let y = 0;\n    let count = 0;\n\n    for (i = 0, len = items.length; i < len; ++i) {\n      const el = items[i].element;\n      if (el && el.hasValue()) {\n        const pos = el.tooltipPosition();\n        x += pos.x;\n        y += pos.y;\n        ++count;\n      }\n    }\n\n    return {\n      x: x / count,\n      y: y / count\n    };\n  },\n\n  /**\n\t * Gets the tooltip position nearest of the item nearest to the event position\n\t */\n  nearest(items, eventPosition) {\n    if (!items.length) {\n      return false;\n    }\n\n    let x = eventPosition.x;\n    let y = eventPosition.y;\n    let minDistance = Number.POSITIVE_INFINITY;\n    let i, len, nearestElement;\n\n    for (i = 0, len = items.length; i < len; ++i) {\n      const el = items[i].element;\n      if (el && el.hasValue()) {\n        const center = el.getCenterPoint();\n        const d = distanceBetweenPoints(eventPosition, center);\n\n        if (d < minDistance) {\n          minDistance = d;\n          nearestElement = el;\n        }\n      }\n    }\n\n    if (nearestElement) {\n      const tp = nearestElement.tooltipPosition();\n      x = tp.x;\n      y = tp.y;\n    }\n\n    return {\n      x,\n      y\n    };\n  }\n};\n\n// Helper to push or concat based on if the 2nd parameter is an array or not\nfunction pushOrConcat(base, toPush) {\n  if (toPush) {\n    if (isArray(toPush)) {\n      // base = base.concat(toPush);\n      Array.prototype.push.apply(base, toPush);\n    } else {\n      base.push(toPush);\n    }\n  }\n\n  return base;\n}\n\n/**\n * Returns array of strings split by newline\n * @param {*} str - The value to split by newline.\n * @returns {string|string[]} value if newline present - Returned from String split() method\n * @function\n */\nfunction splitNewlines(str) {\n  if ((typeof str === 'string' || str instanceof String) && str.indexOf('\\n') > -1) {\n    return str.split('\\n');\n  }\n  return str;\n}\n\n\n/**\n * Private helper to create a tooltip item model\n * @param {Chart} chart\n * @param {ActiveElement} item - {element, index, datasetIndex} to create the tooltip item for\n * @return new tooltip item\n */\nfunction createTooltipItem(chart, item) {\n  const {element, datasetIndex, index} = item;\n  const controller = chart.getDatasetMeta(datasetIndex).controller;\n  const {label, value} = controller.getLabelAndValue(index);\n\n  return {\n    chart,\n    label,\n    parsed: controller.getParsed(index),\n    raw: chart.data.datasets[datasetIndex].data[index],\n    formattedValue: value,\n    dataset: controller.getDataset(),\n    dataIndex: index,\n    datasetIndex,\n    element\n  };\n}\n\n/**\n * Get the size of the tooltip\n */\nfunction getTooltipSize(tooltip, options) {\n  const ctx = tooltip.chart.ctx;\n  const {body, footer, title} = tooltip;\n  const {boxWidth, boxHeight} = options;\n  const bodyFont = toFont(options.bodyFont);\n  const titleFont = toFont(options.titleFont);\n  const footerFont = toFont(options.footerFont);\n  const titleLineCount = title.length;\n  const footerLineCount = footer.length;\n  const bodyLineItemCount = body.length;\n\n  const padding = toPadding(options.padding);\n  let height = padding.height;\n  let width = 0;\n\n  // Count of all lines in the body\n  let combinedBodyLength = body.reduce((count, bodyItem) => count + bodyItem.before.length + bodyItem.lines.length + bodyItem.after.length, 0);\n  combinedBodyLength += tooltip.beforeBody.length + tooltip.afterBody.length;\n\n  if (titleLineCount) {\n    height += titleLineCount * titleFont.lineHeight\n\t\t\t+ (titleLineCount - 1) * options.titleSpacing\n\t\t\t+ options.titleMarginBottom;\n  }\n  if (combinedBodyLength) {\n    // Body lines may include some extra height depending on boxHeight\n    const bodyLineHeight = options.displayColors ? Math.max(boxHeight, bodyFont.lineHeight) : bodyFont.lineHeight;\n    height += bodyLineItemCount * bodyLineHeight\n\t\t\t+ (combinedBodyLength - bodyLineItemCount) * bodyFont.lineHeight\n\t\t\t+ (combinedBodyLength - 1) * options.bodySpacing;\n  }\n  if (footerLineCount) {\n    height += options.footerMarginTop\n\t\t\t+ footerLineCount * footerFont.lineHeight\n\t\t\t+ (footerLineCount - 1) * options.footerSpacing;\n  }\n\n  // Title width\n  let widthPadding = 0;\n  const maxLineWidth = function(line) {\n    width = Math.max(width, ctx.measureText(line).width + widthPadding);\n  };\n\n  ctx.save();\n\n  ctx.font = titleFont.string;\n  each(tooltip.title, maxLineWidth);\n\n  // Body width\n  ctx.font = bodyFont.string;\n  each(tooltip.beforeBody.concat(tooltip.afterBody), maxLineWidth);\n\n  // Body lines may include some extra width due to the color box\n  widthPadding = options.displayColors ? (boxWidth + 2 + options.boxPadding) : 0;\n  each(body, (bodyItem) => {\n    each(bodyItem.before, maxLineWidth);\n    each(bodyItem.lines, maxLineWidth);\n    each(bodyItem.after, maxLineWidth);\n  });\n\n  // Reset back to 0\n  widthPadding = 0;\n\n  // Footer width\n  ctx.font = footerFont.string;\n  each(tooltip.footer, maxLineWidth);\n\n  ctx.restore();\n\n  // Add padding\n  width += padding.width;\n\n  return {width, height};\n}\n\nfunction determineYAlign(chart, size) {\n  const {y, height} = size;\n\n  if (y < height / 2) {\n    return 'top';\n  } else if (y > (chart.height - height / 2)) {\n    return 'bottom';\n  }\n  return 'center';\n}\n\nfunction doesNotFitWithAlign(xAlign, chart, options, size) {\n  const {x, width} = size;\n  const caret = options.caretSize + options.caretPadding;\n  if (xAlign === 'left' && x + width + caret > chart.width) {\n    return true;\n  }\n\n  if (xAlign === 'right' && x - width - caret < 0) {\n    return true;\n  }\n}\n\nfunction determineXAlign(chart, options, size, yAlign) {\n  const {x, width} = size;\n  const {width: chartWidth, chartArea: {left, right}} = chart;\n  let xAlign = 'center';\n\n  if (yAlign === 'center') {\n    xAlign = x <= (left + right) / 2 ? 'left' : 'right';\n  } else if (x <= width / 2) {\n    xAlign = 'left';\n  } else if (x >= chartWidth - width / 2) {\n    xAlign = 'right';\n  }\n\n  if (doesNotFitWithAlign(xAlign, chart, options, size)) {\n    xAlign = 'center';\n  }\n\n  return xAlign;\n}\n\n/**\n * Helper to get the alignment of a tooltip given the size\n */\nfunction determineAlignment(chart, options, size) {\n  const yAlign = size.yAlign || options.yAlign || determineYAlign(chart, size);\n\n  return {\n    xAlign: size.xAlign || options.xAlign || determineXAlign(chart, options, size, yAlign),\n    yAlign\n  };\n}\n\nfunction alignX(size, xAlign) {\n  let {x, width} = size;\n  if (xAlign === 'right') {\n    x -= width;\n  } else if (xAlign === 'center') {\n    x -= (width / 2);\n  }\n  return x;\n}\n\nfunction alignY(size, yAlign, paddingAndSize) {\n  // eslint-disable-next-line prefer-const\n  let {y, height} = size;\n  if (yAlign === 'top') {\n    y += paddingAndSize;\n  } else if (yAlign === 'bottom') {\n    y -= height + paddingAndSize;\n  } else {\n    y -= (height / 2);\n  }\n  return y;\n}\n\n/**\n * Helper to get the location a tooltip needs to be placed at given the initial position (via the vm) and the size and alignment\n */\nfunction getBackgroundPoint(options, size, alignment, chart) {\n  const {caretSize, caretPadding, cornerRadius} = options;\n  const {xAlign, yAlign} = alignment;\n  const paddingAndSize = caretSize + caretPadding;\n  const {topLeft, topRight, bottomLeft, bottomRight} = toTRBLCorners(cornerRadius);\n\n  let x = alignX(size, xAlign);\n  const y = alignY(size, yAlign, paddingAndSize);\n\n  if (yAlign === 'center') {\n    if (xAlign === 'left') {\n      x += paddingAndSize;\n    } else if (xAlign === 'right') {\n      x -= paddingAndSize;\n    }\n  } else if (xAlign === 'left') {\n    x -= Math.max(topLeft, bottomLeft) + caretSize;\n  } else if (xAlign === 'right') {\n    x += Math.max(topRight, bottomRight) + caretSize;\n  }\n\n  return {\n    x: _limitValue(x, 0, chart.width - size.width),\n    y: _limitValue(y, 0, chart.height - size.height)\n  };\n}\n\nfunction getAlignedX(tooltip, align, options) {\n  const padding = toPadding(options.padding);\n\n  return align === 'center'\n    ? tooltip.x + tooltip.width / 2\n    : align === 'right'\n      ? tooltip.x + tooltip.width - padding.right\n      : tooltip.x + padding.left;\n}\n\n/**\n * Helper to build before and after body lines\n */\nfunction getBeforeAfterBodyLines(callback) {\n  return pushOrConcat([], splitNewlines(callback));\n}\n\nfunction createTooltipContext(parent, tooltip, tooltipItems) {\n  return createContext(parent, {\n    tooltip,\n    tooltipItems,\n    type: 'tooltip'\n  });\n}\n\nfunction overrideCallbacks(callbacks, context) {\n  const override = context && context.dataset && context.dataset.tooltip && context.dataset.tooltip.callbacks;\n  return override ? callbacks.override(override) : callbacks;\n}\n\nconst defaultCallbacks = {\n  // Args are: (tooltipItems, data)\n  beforeTitle: noop,\n  title(tooltipItems) {\n    if (tooltipItems.length > 0) {\n      const item = tooltipItems[0];\n      const labels = item.chart.data.labels;\n      const labelCount = labels ? labels.length : 0;\n\n      if (this && this.options && this.options.mode === 'dataset') {\n        return item.dataset.label || '';\n      } else if (item.label) {\n        return item.label;\n      } else if (labelCount > 0 && item.dataIndex < labelCount) {\n        return labels[item.dataIndex];\n      }\n    }\n\n    return '';\n  },\n  afterTitle: noop,\n\n  // Args are: (tooltipItems, data)\n  beforeBody: noop,\n\n  // Args are: (tooltipItem, data)\n  beforeLabel: noop,\n  label(tooltipItem) {\n    if (this && this.options && this.options.mode === 'dataset') {\n      return tooltipItem.label + ': ' + tooltipItem.formattedValue || tooltipItem.formattedValue;\n    }\n\n    let label = tooltipItem.dataset.label || '';\n\n    if (label) {\n      label += ': ';\n    }\n    const value = tooltipItem.formattedValue;\n    if (!isNullOrUndef(value)) {\n      label += value;\n    }\n    return label;\n  },\n  labelColor(tooltipItem) {\n    const meta = tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex);\n    const options = meta.controller.getStyle(tooltipItem.dataIndex);\n    return {\n      borderColor: options.borderColor,\n      backgroundColor: options.backgroundColor,\n      borderWidth: options.borderWidth,\n      borderDash: options.borderDash,\n      borderDashOffset: options.borderDashOffset,\n      borderRadius: 0,\n    };\n  },\n  labelTextColor() {\n    return this.options.bodyColor;\n  },\n  labelPointStyle(tooltipItem) {\n    const meta = tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex);\n    const options = meta.controller.getStyle(tooltipItem.dataIndex);\n    return {\n      pointStyle: options.pointStyle,\n      rotation: options.rotation,\n    };\n  },\n  afterLabel: noop,\n\n  // Args are: (tooltipItems, data)\n  afterBody: noop,\n\n  // Args are: (tooltipItems, data)\n  beforeFooter: noop,\n  footer: noop,\n  afterFooter: noop\n};\n\n/**\n * Invoke callback from object with context and arguments.\n * If callback returns `undefined`, then will be invoked default callback.\n * @param {Record<keyof typeof defaultCallbacks, Function>} callbacks\n * @param {keyof typeof defaultCallbacks} name\n * @param {*} ctx\n * @param {*} arg\n * @returns {any}\n */\nfunction invokeCallbackWithFallback(callbacks, name, ctx, arg) {\n  const result = callbacks[name].call(ctx, arg);\n\n  if (typeof result === 'undefined') {\n    return defaultCallbacks[name].call(ctx, arg);\n  }\n\n  return result;\n}\n\nexport class Tooltip extends Element {\n\n  /**\n   * @namespace Chart.Tooltip.positioners\n   */\n  static positioners = positioners;\n\n  constructor(config) {\n    super();\n\n    this.opacity = 0;\n    this._active = [];\n    this._eventPosition = undefined;\n    this._size = undefined;\n    this._cachedAnimations = undefined;\n    this._tooltipItems = [];\n    this.$animations = undefined;\n    this.$context = undefined;\n    this.chart = config.chart;\n    this.options = config.options;\n    this.dataPoints = undefined;\n    this.title = undefined;\n    this.beforeBody = undefined;\n    this.body = undefined;\n    this.afterBody = undefined;\n    this.footer = undefined;\n    this.xAlign = undefined;\n    this.yAlign = undefined;\n    this.x = undefined;\n    this.y = undefined;\n    this.height = undefined;\n    this.width = undefined;\n    this.caretX = undefined;\n    this.caretY = undefined;\n    // TODO: V4, make this private, rename to `_labelStyles`, and combine with `labelPointStyles`\n    // and `labelTextColors` to create a single variable\n    this.labelColors = undefined;\n    this.labelPointStyles = undefined;\n    this.labelTextColors = undefined;\n  }\n\n  initialize(options) {\n    this.options = options;\n    this._cachedAnimations = undefined;\n    this.$context = undefined;\n  }\n\n  /**\n\t * @private\n\t */\n  _resolveAnimations() {\n    const cached = this._cachedAnimations;\n\n    if (cached) {\n      return cached;\n    }\n\n    const chart = this.chart;\n    const options = this.options.setContext(this.getContext());\n    const opts = options.enabled && chart.options.animation && options.animations;\n    const animations = new Animations(this.chart, opts);\n    if (opts._cacheable) {\n      this._cachedAnimations = Object.freeze(animations);\n    }\n\n    return animations;\n  }\n\n  /**\n\t * @protected\n\t */\n  getContext() {\n    return this.$context ||\n\t\t\t(this.$context = createTooltipContext(this.chart.getContext(), this, this._tooltipItems));\n  }\n\n  getTitle(context, options) {\n    const {callbacks} = options;\n\n    const beforeTitle = invokeCallbackWithFallback(callbacks, 'beforeTitle', this, context);\n    const title = invokeCallbackWithFallback(callbacks, 'title', this, context);\n    const afterTitle = invokeCallbackWithFallback(callbacks, 'afterTitle', this, context);\n\n    let lines = [];\n    lines = pushOrConcat(lines, splitNewlines(beforeTitle));\n    lines = pushOrConcat(lines, splitNewlines(title));\n    lines = pushOrConcat(lines, splitNewlines(afterTitle));\n\n    return lines;\n  }\n\n  getBeforeBody(tooltipItems, options) {\n    return getBeforeAfterBodyLines(\n      invokeCallbackWithFallback(options.callbacks, 'beforeBody', this, tooltipItems)\n    );\n  }\n\n  getBody(tooltipItems, options) {\n    const {callbacks} = options;\n    const bodyItems = [];\n\n    each(tooltipItems, (context) => {\n      const bodyItem = {\n        before: [],\n        lines: [],\n        after: []\n      };\n      const scoped = overrideCallbacks(callbacks, context);\n      pushOrConcat(bodyItem.before, splitNewlines(invokeCallbackWithFallback(scoped, 'beforeLabel', this, context)));\n      pushOrConcat(bodyItem.lines, invokeCallbackWithFallback(scoped, 'label', this, context));\n      pushOrConcat(bodyItem.after, splitNewlines(invokeCallbackWithFallback(scoped, 'afterLabel', this, context)));\n\n      bodyItems.push(bodyItem);\n    });\n\n    return bodyItems;\n  }\n\n  getAfterBody(tooltipItems, options) {\n    return getBeforeAfterBodyLines(\n      invokeCallbackWithFallback(options.callbacks, 'afterBody', this, tooltipItems)\n    );\n  }\n\n  // Get the footer and beforeFooter and afterFooter lines\n  getFooter(tooltipItems, options) {\n    const {callbacks} = options;\n\n    const beforeFooter = invokeCallbackWithFallback(callbacks, 'beforeFooter', this, tooltipItems);\n    const footer = invokeCallbackWithFallback(callbacks, 'footer', this, tooltipItems);\n    const afterFooter = invokeCallbackWithFallback(callbacks, 'afterFooter', this, tooltipItems);\n\n    let lines = [];\n    lines = pushOrConcat(lines, splitNewlines(beforeFooter));\n    lines = pushOrConcat(lines, splitNewlines(footer));\n    lines = pushOrConcat(lines, splitNewlines(afterFooter));\n\n    return lines;\n  }\n\n  /**\n\t * @private\n\t */\n  _createItems(options) {\n    const active = this._active;\n    const data = this.chart.data;\n    const labelColors = [];\n    const labelPointStyles = [];\n    const labelTextColors = [];\n    let tooltipItems = [];\n    let i, len;\n\n    for (i = 0, len = active.length; i < len; ++i) {\n      tooltipItems.push(createTooltipItem(this.chart, active[i]));\n    }\n\n    // If the user provided a filter function, use it to modify the tooltip items\n    if (options.filter) {\n      tooltipItems = tooltipItems.filter((element, index, array) => options.filter(element, index, array, data));\n    }\n\n    // If the user provided a sorting function, use it to modify the tooltip items\n    if (options.itemSort) {\n      tooltipItems = tooltipItems.sort((a, b) => options.itemSort(a, b, data));\n    }\n\n    // Determine colors for boxes\n    each(tooltipItems, (context) => {\n      const scoped = overrideCallbacks(options.callbacks, context);\n      labelColors.push(invokeCallbackWithFallback(scoped, 'labelColor', this, context));\n      labelPointStyles.push(invokeCallbackWithFallback(scoped, 'labelPointStyle', this, context));\n      labelTextColors.push(invokeCallbackWithFallback(scoped, 'labelTextColor', this, context));\n    });\n\n    this.labelColors = labelColors;\n    this.labelPointStyles = labelPointStyles;\n    this.labelTextColors = labelTextColors;\n    this.dataPoints = tooltipItems;\n    return tooltipItems;\n  }\n\n  update(changed, replay) {\n    const options = this.options.setContext(this.getContext());\n    const active = this._active;\n    let properties;\n    let tooltipItems = [];\n\n    if (!active.length) {\n      if (this.opacity !== 0) {\n        properties = {\n          opacity: 0\n        };\n      }\n    } else {\n      const position = positioners[options.position].call(this, active, this._eventPosition);\n      tooltipItems = this._createItems(options);\n\n      this.title = this.getTitle(tooltipItems, options);\n      this.beforeBody = this.getBeforeBody(tooltipItems, options);\n      this.body = this.getBody(tooltipItems, options);\n      this.afterBody = this.getAfterBody(tooltipItems, options);\n      this.footer = this.getFooter(tooltipItems, options);\n\n      const size = this._size = getTooltipSize(this, options);\n      const positionAndSize = Object.assign({}, position, size);\n      const alignment = determineAlignment(this.chart, options, positionAndSize);\n      const backgroundPoint = getBackgroundPoint(options, positionAndSize, alignment, this.chart);\n\n      this.xAlign = alignment.xAlign;\n      this.yAlign = alignment.yAlign;\n\n      properties = {\n        opacity: 1,\n        x: backgroundPoint.x,\n        y: backgroundPoint.y,\n        width: size.width,\n        height: size.height,\n        caretX: position.x,\n        caretY: position.y\n      };\n    }\n\n    this._tooltipItems = tooltipItems;\n    this.$context = undefined;\n\n    if (properties) {\n      this._resolveAnimations().update(this, properties);\n    }\n\n    if (changed && options.external) {\n      options.external.call(this, {chart: this.chart, tooltip: this, replay});\n    }\n  }\n\n  drawCaret(tooltipPoint, ctx, size, options) {\n    const caretPosition = this.getCaretPosition(tooltipPoint, size, options);\n\n    ctx.lineTo(caretPosition.x1, caretPosition.y1);\n    ctx.lineTo(caretPosition.x2, caretPosition.y2);\n    ctx.lineTo(caretPosition.x3, caretPosition.y3);\n  }\n\n  getCaretPosition(tooltipPoint, size, options) {\n    const {xAlign, yAlign} = this;\n    const {caretSize, cornerRadius} = options;\n    const {topLeft, topRight, bottomLeft, bottomRight} = toTRBLCorners(cornerRadius);\n    const {x: ptX, y: ptY} = tooltipPoint;\n    const {width, height} = size;\n    let x1, x2, x3, y1, y2, y3;\n\n    if (yAlign === 'center') {\n      y2 = ptY + (height / 2);\n\n      if (xAlign === 'left') {\n        x1 = ptX;\n        x2 = x1 - caretSize;\n\n        // Left draws bottom -> top, this y1 is on the bottom\n        y1 = y2 + caretSize;\n        y3 = y2 - caretSize;\n      } else {\n        x1 = ptX + width;\n        x2 = x1 + caretSize;\n\n        // Right draws top -> bottom, thus y1 is on the top\n        y1 = y2 - caretSize;\n        y3 = y2 + caretSize;\n      }\n\n      x3 = x1;\n    } else {\n      if (xAlign === 'left') {\n        x2 = ptX + Math.max(topLeft, bottomLeft) + (caretSize);\n      } else if (xAlign === 'right') {\n        x2 = ptX + width - Math.max(topRight, bottomRight) - caretSize;\n      } else {\n        x2 = this.caretX;\n      }\n\n      if (yAlign === 'top') {\n        y1 = ptY;\n        y2 = y1 - caretSize;\n\n        // Top draws left -> right, thus x1 is on the left\n        x1 = x2 - caretSize;\n        x3 = x2 + caretSize;\n      } else {\n        y1 = ptY + height;\n        y2 = y1 + caretSize;\n\n        // Bottom draws right -> left, thus x1 is on the right\n        x1 = x2 + caretSize;\n        x3 = x2 - caretSize;\n      }\n      y3 = y1;\n    }\n    return {x1, x2, x3, y1, y2, y3};\n  }\n\n  drawTitle(pt, ctx, options) {\n    const title = this.title;\n    const length = title.length;\n    let titleFont, titleSpacing, i;\n\n    if (length) {\n      const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);\n\n      pt.x = getAlignedX(this, options.titleAlign, options);\n\n      ctx.textAlign = rtlHelper.textAlign(options.titleAlign);\n      ctx.textBaseline = 'middle';\n\n      titleFont = toFont(options.titleFont);\n      titleSpacing = options.titleSpacing;\n\n      ctx.fillStyle = options.titleColor;\n      ctx.font = titleFont.string;\n\n      for (i = 0; i < length; ++i) {\n        ctx.fillText(title[i], rtlHelper.x(pt.x), pt.y + titleFont.lineHeight / 2);\n        pt.y += titleFont.lineHeight + titleSpacing; // Line Height and spacing\n\n        if (i + 1 === length) {\n          pt.y += options.titleMarginBottom - titleSpacing; // If Last, add margin, remove spacing\n        }\n      }\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _drawColorBox(ctx, pt, i, rtlHelper, options) {\n    const labelColors = this.labelColors[i];\n    const labelPointStyle = this.labelPointStyles[i];\n    const {boxHeight, boxWidth, boxPadding} = options;\n    const bodyFont = toFont(options.bodyFont);\n    const colorX = getAlignedX(this, 'left', options);\n    const rtlColorX = rtlHelper.x(colorX);\n    const yOffSet = boxHeight < bodyFont.lineHeight ? (bodyFont.lineHeight - boxHeight) / 2 : 0;\n    const colorY = pt.y + yOffSet;\n\n    if (options.usePointStyle) {\n      const drawOptions = {\n        radius: Math.min(boxWidth, boxHeight) / 2, // fit the circle in the box\n        pointStyle: labelPointStyle.pointStyle,\n        rotation: labelPointStyle.rotation,\n        borderWidth: 1\n      };\n      // Recalculate x and y for drawPoint() because its expecting\n      // x and y to be center of figure (instead of top left)\n      const centerX = rtlHelper.leftForLtr(rtlColorX, boxWidth) + boxWidth / 2;\n      const centerY = colorY + boxHeight / 2;\n\n      // Fill the point with white so that colours merge nicely if the opacity is < 1\n      ctx.strokeStyle = options.multiKeyBackground;\n      ctx.fillStyle = options.multiKeyBackground;\n      drawPoint(ctx, drawOptions, centerX, centerY);\n\n      // Draw the point\n      ctx.strokeStyle = labelColors.borderColor;\n      ctx.fillStyle = labelColors.backgroundColor;\n      drawPoint(ctx, drawOptions, centerX, centerY);\n    } else {\n      // Border\n      ctx.lineWidth = isObject(labelColors.borderWidth) ? Math.max(...Object.values(labelColors.borderWidth)) : (labelColors.borderWidth || 1); // TODO, v4 remove fallback\n      ctx.strokeStyle = labelColors.borderColor;\n      ctx.setLineDash(labelColors.borderDash || []);\n      ctx.lineDashOffset = labelColors.borderDashOffset || 0;\n\n      // Fill a white rect so that colours merge nicely if the opacity is < 1\n      const outerX = rtlHelper.leftForLtr(rtlColorX, boxWidth - boxPadding);\n      const innerX = rtlHelper.leftForLtr(rtlHelper.xPlus(rtlColorX, 1), boxWidth - boxPadding - 2);\n      const borderRadius = toTRBLCorners(labelColors.borderRadius);\n\n      if (Object.values(borderRadius).some(v => v !== 0)) {\n        ctx.beginPath();\n        ctx.fillStyle = options.multiKeyBackground;\n        addRoundedRectPath(ctx, {\n          x: outerX,\n          y: colorY,\n          w: boxWidth,\n          h: boxHeight,\n          radius: borderRadius,\n        });\n        ctx.fill();\n        ctx.stroke();\n\n        // Inner square\n        ctx.fillStyle = labelColors.backgroundColor;\n        ctx.beginPath();\n        addRoundedRectPath(ctx, {\n          x: innerX,\n          y: colorY + 1,\n          w: boxWidth - 2,\n          h: boxHeight - 2,\n          radius: borderRadius,\n        });\n        ctx.fill();\n      } else {\n        // Normal rect\n        ctx.fillStyle = options.multiKeyBackground;\n        ctx.fillRect(outerX, colorY, boxWidth, boxHeight);\n        ctx.strokeRect(outerX, colorY, boxWidth, boxHeight);\n        // Inner square\n        ctx.fillStyle = labelColors.backgroundColor;\n        ctx.fillRect(innerX, colorY + 1, boxWidth - 2, boxHeight - 2);\n      }\n    }\n\n    // restore fillStyle\n    ctx.fillStyle = this.labelTextColors[i];\n  }\n\n  drawBody(pt, ctx, options) {\n    const {body} = this;\n    const {bodySpacing, bodyAlign, displayColors, boxHeight, boxWidth, boxPadding} = options;\n    const bodyFont = toFont(options.bodyFont);\n    let bodyLineHeight = bodyFont.lineHeight;\n    let xLinePadding = 0;\n\n    const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);\n\n    const fillLineOfText = function(line) {\n      ctx.fillText(line, rtlHelper.x(pt.x + xLinePadding), pt.y + bodyLineHeight / 2);\n      pt.y += bodyLineHeight + bodySpacing;\n    };\n\n    const bodyAlignForCalculation = rtlHelper.textAlign(bodyAlign);\n    let bodyItem, textColor, lines, i, j, ilen, jlen;\n\n    ctx.textAlign = bodyAlign;\n    ctx.textBaseline = 'middle';\n    ctx.font = bodyFont.string;\n\n    pt.x = getAlignedX(this, bodyAlignForCalculation, options);\n\n    // Before body lines\n    ctx.fillStyle = options.bodyColor;\n    each(this.beforeBody, fillLineOfText);\n\n    xLinePadding = displayColors && bodyAlignForCalculation !== 'right'\n      ? bodyAlign === 'center' ? (boxWidth / 2 + boxPadding) : (boxWidth + 2 + boxPadding)\n      : 0;\n\n    // Draw body lines now\n    for (i = 0, ilen = body.length; i < ilen; ++i) {\n      bodyItem = body[i];\n      textColor = this.labelTextColors[i];\n\n      ctx.fillStyle = textColor;\n      each(bodyItem.before, fillLineOfText);\n\n      lines = bodyItem.lines;\n      // Draw Legend-like boxes if needed\n      if (displayColors && lines.length) {\n        this._drawColorBox(ctx, pt, i, rtlHelper, options);\n        bodyLineHeight = Math.max(bodyFont.lineHeight, boxHeight);\n      }\n\n      for (j = 0, jlen = lines.length; j < jlen; ++j) {\n        fillLineOfText(lines[j]);\n        // Reset for any lines that don't include colorbox\n        bodyLineHeight = bodyFont.lineHeight;\n      }\n\n      each(bodyItem.after, fillLineOfText);\n    }\n\n    // Reset back to 0 for after body\n    xLinePadding = 0;\n    bodyLineHeight = bodyFont.lineHeight;\n\n    // After body lines\n    each(this.afterBody, fillLineOfText);\n    pt.y -= bodySpacing; // Remove last body spacing\n  }\n\n  drawFooter(pt, ctx, options) {\n    const footer = this.footer;\n    const length = footer.length;\n    let footerFont, i;\n\n    if (length) {\n      const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);\n\n      pt.x = getAlignedX(this, options.footerAlign, options);\n      pt.y += options.footerMarginTop;\n\n      ctx.textAlign = rtlHelper.textAlign(options.footerAlign);\n      ctx.textBaseline = 'middle';\n\n      footerFont = toFont(options.footerFont);\n\n      ctx.fillStyle = options.footerColor;\n      ctx.font = footerFont.string;\n\n      for (i = 0; i < length; ++i) {\n        ctx.fillText(footer[i], rtlHelper.x(pt.x), pt.y + footerFont.lineHeight / 2);\n        pt.y += footerFont.lineHeight + options.footerSpacing;\n      }\n    }\n  }\n\n  drawBackground(pt, ctx, tooltipSize, options) {\n    const {xAlign, yAlign} = this;\n    const {x, y} = pt;\n    const {width, height} = tooltipSize;\n    const {topLeft, topRight, bottomLeft, bottomRight} = toTRBLCorners(options.cornerRadius);\n\n    ctx.fillStyle = options.backgroundColor;\n    ctx.strokeStyle = options.borderColor;\n    ctx.lineWidth = options.borderWidth;\n\n    ctx.beginPath();\n    ctx.moveTo(x + topLeft, y);\n    if (yAlign === 'top') {\n      this.drawCaret(pt, ctx, tooltipSize, options);\n    }\n    ctx.lineTo(x + width - topRight, y);\n    ctx.quadraticCurveTo(x + width, y, x + width, y + topRight);\n    if (yAlign === 'center' && xAlign === 'right') {\n      this.drawCaret(pt, ctx, tooltipSize, options);\n    }\n    ctx.lineTo(x + width, y + height - bottomRight);\n    ctx.quadraticCurveTo(x + width, y + height, x + width - bottomRight, y + height);\n    if (yAlign === 'bottom') {\n      this.drawCaret(pt, ctx, tooltipSize, options);\n    }\n    ctx.lineTo(x + bottomLeft, y + height);\n    ctx.quadraticCurveTo(x, y + height, x, y + height - bottomLeft);\n    if (yAlign === 'center' && xAlign === 'left') {\n      this.drawCaret(pt, ctx, tooltipSize, options);\n    }\n    ctx.lineTo(x, y + topLeft);\n    ctx.quadraticCurveTo(x, y, x + topLeft, y);\n    ctx.closePath();\n\n    ctx.fill();\n\n    if (options.borderWidth > 0) {\n      ctx.stroke();\n    }\n  }\n\n  /**\n\t * Update x/y animation targets when _active elements are animating too\n\t * @private\n\t */\n  _updateAnimationTarget(options) {\n    const chart = this.chart;\n    const anims = this.$animations;\n    const animX = anims && anims.x;\n    const animY = anims && anims.y;\n    if (animX || animY) {\n      const position = positioners[options.position].call(this, this._active, this._eventPosition);\n      if (!position) {\n        return;\n      }\n      const size = this._size = getTooltipSize(this, options);\n      const positionAndSize = Object.assign({}, position, this._size);\n      const alignment = determineAlignment(chart, options, positionAndSize);\n      const point = getBackgroundPoint(options, positionAndSize, alignment, chart);\n      if (animX._to !== point.x || animY._to !== point.y) {\n        this.xAlign = alignment.xAlign;\n        this.yAlign = alignment.yAlign;\n        this.width = size.width;\n        this.height = size.height;\n        this.caretX = position.x;\n        this.caretY = position.y;\n        this._resolveAnimations().update(this, point);\n      }\n    }\n  }\n\n  /**\n   * Determine if the tooltip will draw anything\n   * @returns {boolean} True if the tooltip will render\n   */\n  _willRender() {\n    return !!this.opacity;\n  }\n\n  draw(ctx) {\n    const options = this.options.setContext(this.getContext());\n    let opacity = this.opacity;\n\n    if (!opacity) {\n      return;\n    }\n\n    this._updateAnimationTarget(options);\n\n    const tooltipSize = {\n      width: this.width,\n      height: this.height\n    };\n    const pt = {\n      x: this.x,\n      y: this.y\n    };\n\n    // IE11/Edge does not like very small opacities, so snap to 0\n    opacity = Math.abs(opacity) < 1e-3 ? 0 : opacity;\n\n    const padding = toPadding(options.padding);\n\n    // Truthy/falsey value for empty tooltip\n    const hasTooltipContent = this.title.length || this.beforeBody.length || this.body.length || this.afterBody.length || this.footer.length;\n\n    if (options.enabled && hasTooltipContent) {\n      ctx.save();\n      ctx.globalAlpha = opacity;\n\n      // Draw Background\n      this.drawBackground(pt, ctx, tooltipSize, options);\n\n      overrideTextDirection(ctx, options.textDirection);\n\n      pt.y += padding.top;\n\n      // Titles\n      this.drawTitle(pt, ctx, options);\n\n      // Body\n      this.drawBody(pt, ctx, options);\n\n      // Footer\n      this.drawFooter(pt, ctx, options);\n\n      restoreTextDirection(ctx, options.textDirection);\n\n      ctx.restore();\n    }\n  }\n\n  /**\n\t * Get active elements in the tooltip\n\t * @returns {Array} Array of elements that are active in the tooltip\n\t */\n  getActiveElements() {\n    return this._active || [];\n  }\n\n  /**\n\t * Set active elements in the tooltip\n\t * @param {array} activeElements Array of active datasetIndex/index pairs.\n\t * @param {object} eventPosition Synthetic event position used in positioning\n\t */\n  setActiveElements(activeElements, eventPosition) {\n    const lastActive = this._active;\n    const active = activeElements.map(({datasetIndex, index}) => {\n      const meta = this.chart.getDatasetMeta(datasetIndex);\n\n      if (!meta) {\n        throw new Error('Cannot find a dataset at index ' + datasetIndex);\n      }\n\n      return {\n        datasetIndex,\n        element: meta.data[index],\n        index,\n      };\n    });\n    const changed = !_elementsEqual(lastActive, active);\n    const positionChanged = this._positionChanged(active, eventPosition);\n\n    if (changed || positionChanged) {\n      this._active = active;\n      this._eventPosition = eventPosition;\n      this._ignoreReplayEvents = true;\n      this.update(true);\n    }\n  }\n\n  /**\n\t * Handle an event\n\t * @param {ChartEvent} e - The event to handle\n\t * @param {boolean} [replay] - This is a replayed event (from update)\n\t * @param {boolean} [inChartArea] - The event is inside chartArea\n\t * @returns {boolean} true if the tooltip changed\n\t */\n  handleEvent(e, replay, inChartArea = true) {\n    if (replay && this._ignoreReplayEvents) {\n      return false;\n    }\n    this._ignoreReplayEvents = false;\n\n    const options = this.options;\n    const lastActive = this._active || [];\n    const active = this._getActiveElements(e, lastActive, replay, inChartArea);\n\n    // When there are multiple items shown, but the tooltip position is nearest mode\n    // an update may need to be made because our position may have changed even though\n    // the items are the same as before.\n    const positionChanged = this._positionChanged(active, e);\n\n    // Remember Last Actives\n    const changed = replay || !_elementsEqual(active, lastActive) || positionChanged;\n\n    // Only handle target event on tooltip change\n    if (changed) {\n      this._active = active;\n\n      if (options.enabled || options.external) {\n        this._eventPosition = {\n          x: e.x,\n          y: e.y\n        };\n\n        this.update(true, replay);\n      }\n    }\n\n    return changed;\n  }\n\n  /**\n\t * Helper for determining the active elements for event\n\t * @param {ChartEvent} e - The event to handle\n\t * @param {InteractionItem[]} lastActive - Previously active elements\n\t * @param {boolean} [replay] - This is a replayed event (from update)\n\t * @param {boolean} [inChartArea] - The event is inside chartArea\n\t * @returns {InteractionItem[]} - Active elements\n\t * @private\n\t */\n  _getActiveElements(e, lastActive, replay, inChartArea) {\n    const options = this.options;\n\n    if (e.type === 'mouseout') {\n      return [];\n    }\n\n    if (!inChartArea) {\n      // Let user control the active elements outside chartArea. Eg. using Legend.\n      return lastActive;\n    }\n\n    // Find Active Elements for tooltips\n    const active = this.chart.getElementsAtEventForMode(e, options.mode, options, replay);\n\n    if (options.reverse) {\n      active.reverse();\n    }\n\n    return active;\n  }\n\n  /**\n\t * Determine if the active elements + event combination changes the\n\t * tooltip position\n\t * @param {array} active - Active elements\n\t * @param {ChartEvent} e - Event that triggered the position change\n\t * @returns {boolean} True if the position has changed\n\t */\n  _positionChanged(active, e) {\n    const {caretX, caretY, options} = this;\n    const position = positioners[options.position].call(this, active, e);\n    return position !== false && (caretX !== position.x || caretY !== position.y);\n  }\n}\n\nexport default {\n  id: 'tooltip',\n  _element: Tooltip,\n  positioners,\n\n  afterInit(chart, _args, options) {\n    if (options) {\n      chart.tooltip = new Tooltip({chart, options});\n    }\n  },\n\n  beforeUpdate(chart, _args, options) {\n    if (chart.tooltip) {\n      chart.tooltip.initialize(options);\n    }\n  },\n\n  reset(chart, _args, options) {\n    if (chart.tooltip) {\n      chart.tooltip.initialize(options);\n    }\n  },\n\n  afterDraw(chart) {\n    const tooltip = chart.tooltip;\n\n    if (tooltip && tooltip._willRender()) {\n      const args = {\n        tooltip\n      };\n\n      if (chart.notifyPlugins('beforeTooltipDraw', {...args, cancelable: true}) === false) {\n        return;\n      }\n\n      tooltip.draw(chart.ctx);\n\n      chart.notifyPlugins('afterTooltipDraw', args);\n    }\n  },\n\n  afterEvent(chart, args) {\n    if (chart.tooltip) {\n      // If the event is replayed from `update`, we should evaluate with the final positions.\n      const useFinalPosition = args.replay;\n      if (chart.tooltip.handleEvent(args.event, useFinalPosition, args.inChartArea)) {\n        // notify chart about the change, so it will render\n        args.changed = true;\n      }\n    }\n  },\n\n  defaults: {\n    enabled: true,\n    external: null,\n    position: 'average',\n    backgroundColor: 'rgba(0,0,0,0.8)',\n    titleColor: '#fff',\n    titleFont: {\n      weight: 'bold',\n    },\n    titleSpacing: 2,\n    titleMarginBottom: 6,\n    titleAlign: 'left',\n    bodyColor: '#fff',\n    bodySpacing: 2,\n    bodyFont: {\n    },\n    bodyAlign: 'left',\n    footerColor: '#fff',\n    footerSpacing: 2,\n    footerMarginTop: 6,\n    footerFont: {\n      weight: 'bold',\n    },\n    footerAlign: 'left',\n    padding: 6,\n    caretPadding: 2,\n    caretSize: 5,\n    cornerRadius: 6,\n    boxHeight: (ctx, opts) => opts.bodyFont.size,\n    boxWidth: (ctx, opts) => opts.bodyFont.size,\n    multiKeyBackground: '#fff',\n    displayColors: true,\n    boxPadding: 0,\n    borderColor: 'rgba(0,0,0,0)',\n    borderWidth: 0,\n    animation: {\n      duration: 400,\n      easing: 'easeOutQuart',\n    },\n    animations: {\n      numbers: {\n        type: 'number',\n        properties: ['x', 'y', 'width', 'height', 'caretX', 'caretY'],\n      },\n      opacity: {\n        easing: 'linear',\n        duration: 200\n      }\n    },\n    callbacks: defaultCallbacks\n  },\n\n  defaultRoutes: {\n    bodyFont: 'font',\n    footerFont: 'font',\n    titleFont: 'font'\n  },\n\n  descriptors: {\n    _scriptable: (name) => name !== 'filter' && name !== 'itemSort' && name !== 'external',\n    _indexable: false,\n    callbacks: {\n      _scriptable: false,\n      _indexable: false,\n    },\n    animation: {\n      _fallback: false\n    },\n    animations: {\n      _fallback: 'animation'\n    }\n  },\n\n  // Resolve additionally from `interaction` options and defaults.\n  additionalOptionScopes: ['interaction']\n};\n","import Scale from '../core/core.scale.js';\nimport {isNullOrUndef, valueOrDefault, _limitValue} from '../helpers/index.js';\n\nconst addIfString = (labels, raw, index, addedLabels) => {\n  if (typeof raw === 'string') {\n    index = labels.push(raw) - 1;\n    addedLabels.unshift({index, label: raw});\n  } else if (isNaN(raw)) {\n    index = null;\n  }\n  return index;\n};\n\nfunction findOrAddLabel(labels, raw, index, addedLabels) {\n  const first = labels.indexOf(raw);\n  if (first === -1) {\n    return addIfString(labels, raw, index, addedLabels);\n  }\n  const last = labels.lastIndexOf(raw);\n  return first !== last ? index : first;\n}\n\nconst validIndex = (index, max) => index === null ? null : _limitValue(Math.round(index), 0, max);\n\nfunction _getLabelForValue(value) {\n  const labels = this.getLabels();\n\n  if (value >= 0 && value < labels.length) {\n    return labels[value];\n  }\n  return value;\n}\n\nexport default class CategoryScale extends Scale {\n\n  static id = 'category';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    ticks: {\n      callback: _getLabelForValue\n    }\n  };\n\n  constructor(cfg) {\n    super(cfg);\n\n    /** @type {number} */\n    this._startValue = undefined;\n    this._valueRange = 0;\n    this._addedLabels = [];\n  }\n\n  init(scaleOptions) {\n    const added = this._addedLabels;\n    if (added.length) {\n      const labels = this.getLabels();\n      for (const {index, label} of added) {\n        if (labels[index] === label) {\n          labels.splice(index, 1);\n        }\n      }\n      this._addedLabels = [];\n    }\n    super.init(scaleOptions);\n  }\n\n  parse(raw, index) {\n    if (isNullOrUndef(raw)) {\n      return null;\n    }\n    const labels = this.getLabels();\n    index = isFinite(index) && labels[index] === raw ? index\n      : findOrAddLabel(labels, raw, valueOrDefault(index, raw), this._addedLabels);\n    return validIndex(index, labels.length - 1);\n  }\n\n  determineDataLimits() {\n    const {minDefined, maxDefined} = this.getUserBounds();\n    let {min, max} = this.getMinMax(true);\n\n    if (this.options.bounds === 'ticks') {\n      if (!minDefined) {\n        min = 0;\n      }\n      if (!maxDefined) {\n        max = this.getLabels().length - 1;\n      }\n    }\n\n    this.min = min;\n    this.max = max;\n  }\n\n  buildTicks() {\n    const min = this.min;\n    const max = this.max;\n    const offset = this.options.offset;\n    const ticks = [];\n    let labels = this.getLabels();\n\n    // If we are viewing some subset of labels, slice the original array\n    labels = (min === 0 && max === labels.length - 1) ? labels : labels.slice(min, max + 1);\n\n    this._valueRange = Math.max(labels.length - (offset ? 0 : 1), 1);\n    this._startValue = this.min - (offset ? 0.5 : 0);\n\n    for (let value = min; value <= max; value++) {\n      ticks.push({value});\n    }\n    return ticks;\n  }\n\n  getLabelForValue(value) {\n    return _getLabelForValue.call(this, value);\n  }\n\n  /**\n\t * @protected\n\t */\n  configure() {\n    super.configure();\n\n    if (!this.isHorizontal()) {\n      // For backward compatibility, vertical category scale reverse is inverted.\n      this._reversePixels = !this._reversePixels;\n    }\n  }\n\n  // Used to get data value locations. Value can either be an index or a numerical value\n  getPixelForValue(value) {\n    if (typeof value !== 'number') {\n      value = this.parse(value);\n    }\n\n    return value === null ? NaN : this.getPixelForDecimal((value - this._startValue) / this._valueRange);\n  }\n\n  // Must override base implementation because it calls getPixelForValue\n  // and category scale can have duplicate values\n  getPixelForTick(index) {\n    const ticks = this.ticks;\n    if (index < 0 || index > ticks.length - 1) {\n      return null;\n    }\n    return this.getPixelForValue(ticks[index].value);\n  }\n\n  getValueForPixel(pixel) {\n    return Math.round(this._startValue + this.getDecimalForPixel(pixel) * this._valueRange);\n  }\n\n  getBasePixel() {\n    return this.bottom;\n  }\n}\n","import {isNullOrUndef} from '../helpers/helpers.core.js';\nimport {almostEquals, almostWhole, niceNum, _decimalPlaces, _setMinAndMaxByKey, sign, toRadians} from '../helpers/helpers.math.js';\nimport Scale from '../core/core.scale.js';\nimport {formatNumber} from '../helpers/helpers.intl.js';\n\n/**\n * Generate a set of linear ticks for an axis\n * 1. If generationOptions.min, generationOptions.max, and generationOptions.step are defined:\n *    if (max - min) / step is an integer, ticks are generated as [min, min + step, ..., max]\n *    Note that the generationOptions.maxCount setting is respected in this scenario\n *\n * 2. If generationOptions.min, generationOptions.max, and generationOptions.count is defined\n *    spacing = (max - min) / count\n *    Ticks are generated as [min, min + spacing, ..., max]\n *\n * 3. If generationOptions.count is defined\n *    spacing = (niceMax - niceMin) / count\n *\n * 4. Compute optimal spacing of ticks using niceNum algorithm\n *\n * @param generationOptions the options used to generate the ticks\n * @param dataRange the range of the data\n * @returns {object[]} array of tick objects\n */\nfunction generateTicks(generationOptions, dataRange) {\n  const ticks = [];\n  // To get a \"nice\" value for the tick spacing, we will use the appropriately named\n  // \"nice number\" algorithm. See https://stackoverflow.com/questions/8506881/nice-label-algorithm-for-charts-with-minimum-ticks\n  // for details.\n\n  const MIN_SPACING = 1e-14;\n  const {bounds, step, min, max, precision, count, maxTicks, maxDigits, includeBounds} = generationOptions;\n  const unit = step || 1;\n  const maxSpaces = maxTicks - 1;\n  const {min: rmin, max: rmax} = dataRange;\n  const minDefined = !isNullOrUndef(min);\n  const maxDefined = !isNullOrUndef(max);\n  const countDefined = !isNullOrUndef(count);\n  const minSpacing = (rmax - rmin) / (maxDigits + 1);\n  let spacing = niceNum((rmax - rmin) / maxSpaces / unit) * unit;\n  let factor, niceMin, niceMax, numSpaces;\n\n  // Beyond MIN_SPACING floating point numbers being to lose precision\n  // such that we can't do the math necessary to generate ticks\n  if (spacing < MIN_SPACING && !minDefined && !maxDefined) {\n    return [{value: rmin}, {value: rmax}];\n  }\n\n  numSpaces = Math.ceil(rmax / spacing) - Math.floor(rmin / spacing);\n  if (numSpaces > maxSpaces) {\n    // If the calculated num of spaces exceeds maxNumSpaces, recalculate it\n    spacing = niceNum(numSpaces * spacing / maxSpaces / unit) * unit;\n  }\n\n  if (!isNullOrUndef(precision)) {\n    // If the user specified a precision, round to that number of decimal places\n    factor = Math.pow(10, precision);\n    spacing = Math.ceil(spacing * factor) / factor;\n  }\n\n  if (bounds === 'ticks') {\n    niceMin = Math.floor(rmin / spacing) * spacing;\n    niceMax = Math.ceil(rmax / spacing) * spacing;\n  } else {\n    niceMin = rmin;\n    niceMax = rmax;\n  }\n\n  if (minDefined && maxDefined && step && almostWhole((max - min) / step, spacing / 1000)) {\n    // Case 1: If min, max and stepSize are set and they make an evenly spaced scale use it.\n    // spacing = step;\n    // numSpaces = (max - min) / spacing;\n    // Note that we round here to handle the case where almostWhole translated an FP error\n    numSpaces = Math.round(Math.min((max - min) / spacing, maxTicks));\n    spacing = (max - min) / numSpaces;\n    niceMin = min;\n    niceMax = max;\n  } else if (countDefined) {\n    // Cases 2 & 3, we have a count specified. Handle optional user defined edges to the range.\n    // Sometimes these are no-ops, but it makes the code a lot clearer\n    // and when a user defined range is specified, we want the correct ticks\n    niceMin = minDefined ? min : niceMin;\n    niceMax = maxDefined ? max : niceMax;\n    numSpaces = count - 1;\n    spacing = (niceMax - niceMin) / numSpaces;\n  } else {\n    // Case 4\n    numSpaces = (niceMax - niceMin) / spacing;\n\n    // If very close to our rounded value, use it.\n    if (almostEquals(numSpaces, Math.round(numSpaces), spacing / 1000)) {\n      numSpaces = Math.round(numSpaces);\n    } else {\n      numSpaces = Math.ceil(numSpaces);\n    }\n  }\n\n  // The spacing will have changed in cases 1, 2, and 3 so the factor cannot be computed\n  // until this point\n  const decimalPlaces = Math.max(\n    _decimalPlaces(spacing),\n    _decimalPlaces(niceMin)\n  );\n  factor = Math.pow(10, isNullOrUndef(precision) ? decimalPlaces : precision);\n  niceMin = Math.round(niceMin * factor) / factor;\n  niceMax = Math.round(niceMax * factor) / factor;\n\n  let j = 0;\n  if (minDefined) {\n    if (includeBounds && niceMin !== min) {\n      ticks.push({value: min});\n\n      if (niceMin < min) {\n        j++; // Skip niceMin\n      }\n      // If the next nice tick is close to min, skip it\n      if (almostEquals(Math.round((niceMin + j * spacing) * factor) / factor, min, relativeLabelSize(min, minSpacing, generationOptions))) {\n        j++;\n      }\n    } else if (niceMin < min) {\n      j++;\n    }\n  }\n\n  for (; j < numSpaces; ++j) {\n    ticks.push({value: Math.round((niceMin + j * spacing) * factor) / factor});\n  }\n\n  if (maxDefined && includeBounds && niceMax !== max) {\n    // If the previous tick is too close to max, replace it with max, else add max\n    if (ticks.length && almostEquals(ticks[ticks.length - 1].value, max, relativeLabelSize(max, minSpacing, generationOptions))) {\n      ticks[ticks.length - 1].value = max;\n    } else {\n      ticks.push({value: max});\n    }\n  } else if (!maxDefined || niceMax === max) {\n    ticks.push({value: niceMax});\n  }\n\n  return ticks;\n}\n\nfunction relativeLabelSize(value, minSpacing, {horizontal, minRotation}) {\n  const rad = toRadians(minRotation);\n  const ratio = (horizontal ? Math.sin(rad) : Math.cos(rad)) || 0.001;\n  const length = 0.75 * minSpacing * ('' + value).length;\n  return Math.min(minSpacing / ratio, length);\n}\n\nexport default class LinearScaleBase extends Scale {\n\n  constructor(cfg) {\n    super(cfg);\n\n    /** @type {number} */\n    this.start = undefined;\n    /** @type {number} */\n    this.end = undefined;\n    /** @type {number} */\n    this._startValue = undefined;\n    /** @type {number} */\n    this._endValue = undefined;\n    this._valueRange = 0;\n  }\n\n  parse(raw, index) { // eslint-disable-line no-unused-vars\n    if (isNullOrUndef(raw)) {\n      return null;\n    }\n    if ((typeof raw === 'number' || raw instanceof Number) && !isFinite(+raw)) {\n      return null;\n    }\n\n    return +raw;\n  }\n\n  handleTickRangeOptions() {\n    const {beginAtZero} = this.options;\n    const {minDefined, maxDefined} = this.getUserBounds();\n    let {min, max} = this;\n\n    const setMin = v => (min = minDefined ? min : v);\n    const setMax = v => (max = maxDefined ? max : v);\n\n    if (beginAtZero) {\n      const minSign = sign(min);\n      const maxSign = sign(max);\n\n      if (minSign < 0 && maxSign < 0) {\n        setMax(0);\n      } else if (minSign > 0 && maxSign > 0) {\n        setMin(0);\n      }\n    }\n\n    if (min === max) {\n      let offset = max === 0 ? 1 : Math.abs(max * 0.05);\n\n      setMax(max + offset);\n\n      if (!beginAtZero) {\n        setMin(min - offset);\n      }\n    }\n    this.min = min;\n    this.max = max;\n  }\n\n  getTickLimit() {\n    const tickOpts = this.options.ticks;\n    // eslint-disable-next-line prefer-const\n    let {maxTicksLimit, stepSize} = tickOpts;\n    let maxTicks;\n\n    if (stepSize) {\n      maxTicks = Math.ceil(this.max / stepSize) - Math.floor(this.min / stepSize) + 1;\n      if (maxTicks > 1000) {\n        console.warn(`scales.${this.id}.ticks.stepSize: ${stepSize} would result generating up to ${maxTicks} ticks. Limiting to 1000.`);\n        maxTicks = 1000;\n      }\n    } else {\n      maxTicks = this.computeTickLimit();\n      maxTicksLimit = maxTicksLimit || 11;\n    }\n\n    if (maxTicksLimit) {\n      maxTicks = Math.min(maxTicksLimit, maxTicks);\n    }\n\n    return maxTicks;\n  }\n\n  /**\n\t * @protected\n\t */\n  computeTickLimit() {\n    return Number.POSITIVE_INFINITY;\n  }\n\n  buildTicks() {\n    const opts = this.options;\n    const tickOpts = opts.ticks;\n\n    // Figure out what the max number of ticks we can support it is based on the size of\n    // the axis area. For now, we say that the minimum tick spacing in pixels must be 40\n    // We also limit the maximum number of ticks to 11 which gives a nice 10 squares on\n    // the graph. Make sure we always have at least 2 ticks\n    let maxTicks = this.getTickLimit();\n    maxTicks = Math.max(2, maxTicks);\n\n    const numericGeneratorOptions = {\n      maxTicks,\n      bounds: opts.bounds,\n      min: opts.min,\n      max: opts.max,\n      precision: tickOpts.precision,\n      step: tickOpts.stepSize,\n      count: tickOpts.count,\n      maxDigits: this._maxDigits(),\n      horizontal: this.isHorizontal(),\n      minRotation: tickOpts.minRotation || 0,\n      includeBounds: tickOpts.includeBounds !== false\n    };\n    const dataRange = this._range || this;\n    const ticks = generateTicks(numericGeneratorOptions, dataRange);\n\n    // At this point, we need to update our max and min given the tick values,\n    // since we probably have expanded the range of the scale\n    if (opts.bounds === 'ticks') {\n      _setMinAndMaxByKey(ticks, this, 'value');\n    }\n\n    if (opts.reverse) {\n      ticks.reverse();\n\n      this.start = this.max;\n      this.end = this.min;\n    } else {\n      this.start = this.min;\n      this.end = this.max;\n    }\n\n    return ticks;\n  }\n\n  /**\n\t * @protected\n\t */\n  configure() {\n    const ticks = this.ticks;\n    let start = this.min;\n    let end = this.max;\n\n    super.configure();\n\n    if (this.options.offset && ticks.length) {\n      const offset = (end - start) / Math.max(ticks.length - 1, 1) / 2;\n      start -= offset;\n      end += offset;\n    }\n    this._startValue = start;\n    this._endValue = end;\n    this._valueRange = end - start;\n  }\n\n  getLabelForValue(value) {\n    return formatNumber(value, this.chart.options.locale, this.options.ticks.format);\n  }\n}\n","import {isFinite} from '../helpers/helpers.core.js';\nimport LinearScaleBase from './scale.linearbase.js';\nimport Ticks from '../core/core.ticks.js';\nimport {toRadians} from '../helpers/index.js';\n\nexport default class LinearScale extends LinearScaleBase {\n\n  static id = 'linear';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    ticks: {\n      callback: Ticks.formatters.numeric\n    }\n  };\n\n\n  determineDataLimits() {\n    const {min, max} = this.getMinMax(true);\n\n    this.min = isFinite(min) ? min : 0;\n    this.max = isFinite(max) ? max : 1;\n\n    // Common base implementation to handle min, max, beginAtZero\n    this.handleTickRangeOptions();\n  }\n\n  /**\n\t * Returns the maximum number of ticks based on the scale dimension\n\t * @protected\n \t */\n  computeTickLimit() {\n    const horizontal = this.isHorizontal();\n    const length = horizontal ? this.width : this.height;\n    const minRotation = toRadians(this.options.ticks.minRotation);\n    const ratio = (horizontal ? Math.sin(minRotation) : Math.cos(minRotation)) || 0.001;\n    const tickFont = this._resolveTickFontOptions(0);\n    return Math.ceil(length / Math.min(40, tickFont.lineHeight / ratio));\n  }\n\n  // Utils\n  getPixelForValue(value) {\n    return value === null ? NaN : this.getPixelForDecimal((value - this._startValue) / this._valueRange);\n  }\n\n  getValueForPixel(pixel) {\n    return this._startValue + this.getDecimalForPixel(pixel) * this._valueRange;\n  }\n}\n","import {finiteOrDefault, isFinite} from '../helpers/helpers.core.js';\nimport {formatNumber} from '../helpers/helpers.intl.js';\nimport {_setMinAndMaxByKey, log10} from '../helpers/helpers.math.js';\nimport Scale from '../core/core.scale.js';\nimport LinearScaleBase from './scale.linearbase.js';\nimport Ticks from '../core/core.ticks.js';\n\nconst log10Floor = v => Math.floor(log10(v));\nconst changeExponent = (v, m) => Math.pow(10, log10Floor(v) + m);\n\nfunction isMajor(tickVal) {\n  const remain = tickVal / (Math.pow(10, log10Floor(tickVal)));\n  return remain === 1;\n}\n\nfunction steps(min, max, rangeExp) {\n  const rangeStep = Math.pow(10, rangeExp);\n  const start = Math.floor(min / rangeStep);\n  const end = Math.ceil(max / rangeStep);\n  return end - start;\n}\n\nfunction startExp(min, max) {\n  const range = max - min;\n  let rangeExp = log10Floor(range);\n  while (steps(min, max, rangeExp) > 10) {\n    rangeExp++;\n  }\n  while (steps(min, max, rangeExp) < 10) {\n    rangeExp--;\n  }\n  return Math.min(rangeExp, log10Floor(min));\n}\n\n\n/**\n * Generate a set of logarithmic ticks\n * @param generationOptions the options used to generate the ticks\n * @param dataRange the range of the data\n * @returns {object[]} array of tick objects\n */\nfunction generateTicks(generationOptions, {min, max}) {\n  min = finiteOrDefault(generationOptions.min, min);\n  const ticks = [];\n  const minExp = log10Floor(min);\n  let exp = startExp(min, max);\n  let precision = exp < 0 ? Math.pow(10, Math.abs(exp)) : 1;\n  const stepSize = Math.pow(10, exp);\n  const base = minExp > exp ? Math.pow(10, minExp) : 0;\n  const start = Math.round((min - base) * precision) / precision;\n  const offset = Math.floor((min - base) / stepSize / 10) * stepSize * 10;\n  let significand = Math.floor((start - offset) / Math.pow(10, exp));\n  let value = finiteOrDefault(generationOptions.min, Math.round((base + offset + significand * Math.pow(10, exp)) * precision) / precision);\n  while (value < max) {\n    ticks.push({value, major: isMajor(value), significand});\n    if (significand >= 10) {\n      significand = significand < 15 ? 15 : 20;\n    } else {\n      significand++;\n    }\n    if (significand >= 20) {\n      exp++;\n      significand = 2;\n      precision = exp >= 0 ? 1 : precision;\n    }\n    value = Math.round((base + offset + significand * Math.pow(10, exp)) * precision) / precision;\n  }\n  const lastTick = finiteOrDefault(generationOptions.max, value);\n  ticks.push({value: lastTick, major: isMajor(lastTick), significand});\n\n  return ticks;\n}\n\nexport default class LogarithmicScale extends Scale {\n\n  static id = 'logarithmic';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    ticks: {\n      callback: Ticks.formatters.logarithmic,\n      major: {\n        enabled: true\n      }\n    }\n  };\n\n\n  constructor(cfg) {\n    super(cfg);\n\n    /** @type {number} */\n    this.start = undefined;\n    /** @type {number} */\n    this.end = undefined;\n    /** @type {number} */\n    this._startValue = undefined;\n    this._valueRange = 0;\n  }\n\n  parse(raw, index) {\n    const value = LinearScaleBase.prototype.parse.apply(this, [raw, index]);\n    if (value === 0) {\n      this._zero = true;\n      return undefined;\n    }\n    return isFinite(value) && value > 0 ? value : null;\n  }\n\n  determineDataLimits() {\n    const {min, max} = this.getMinMax(true);\n\n    this.min = isFinite(min) ? Math.max(0, min) : null;\n    this.max = isFinite(max) ? Math.max(0, max) : null;\n\n    if (this.options.beginAtZero) {\n      this._zero = true;\n    }\n\n    // if data has `0` in it or `beginAtZero` is true, min (non zero) value is at bottom\n    // of scale, and it does not equal suggestedMin, lower the min bound by one exp.\n    if (this._zero && this.min !== this._suggestedMin && !isFinite(this._userMin)) {\n      this.min = min === changeExponent(this.min, 0) ? changeExponent(this.min, -1) : changeExponent(this.min, 0);\n    }\n\n    this.handleTickRangeOptions();\n  }\n\n  handleTickRangeOptions() {\n    const {minDefined, maxDefined} = this.getUserBounds();\n    let min = this.min;\n    let max = this.max;\n\n    const setMin = v => (min = minDefined ? min : v);\n    const setMax = v => (max = maxDefined ? max : v);\n\n    if (min === max) {\n      if (min <= 0) { // includes null\n        setMin(1);\n        setMax(10);\n      } else {\n        setMin(changeExponent(min, -1));\n        setMax(changeExponent(max, +1));\n      }\n    }\n    if (min <= 0) {\n      setMin(changeExponent(max, -1));\n    }\n    if (max <= 0) {\n\n      setMax(changeExponent(min, +1));\n    }\n\n    this.min = min;\n    this.max = max;\n  }\n\n  buildTicks() {\n    const opts = this.options;\n\n    const generationOptions = {\n      min: this._userMin,\n      max: this._userMax\n    };\n    const ticks = generateTicks(generationOptions, this);\n\n    // At this point, we need to update our max and min given the tick values,\n    // since we probably have expanded the range of the scale\n    if (opts.bounds === 'ticks') {\n      _setMinAndMaxByKey(ticks, this, 'value');\n    }\n\n    if (opts.reverse) {\n      ticks.reverse();\n\n      this.start = this.max;\n      this.end = this.min;\n    } else {\n      this.start = this.min;\n      this.end = this.max;\n    }\n\n    return ticks;\n  }\n\n  /**\n\t * @param {number} value\n\t * @return {string}\n\t */\n  getLabelForValue(value) {\n    return value === undefined\n      ? '0'\n      : formatNumber(value, this.chart.options.locale, this.options.ticks.format);\n  }\n\n  /**\n\t * @protected\n\t */\n  configure() {\n    const start = this.min;\n\n    super.configure();\n\n    this._startValue = log10(start);\n    this._valueRange = log10(this.max) - log10(start);\n  }\n\n  getPixelForValue(value) {\n    if (value === undefined || value === 0) {\n      value = this.min;\n    }\n    if (value === null || isNaN(value)) {\n      return NaN;\n    }\n    return this.getPixelForDecimal(value === this.min\n      ? 0\n      : (log10(value) - this._startValue) / this._valueRange);\n  }\n\n  getValueForPixel(pixel) {\n    const decimal = this.getDecimalForPixel(pixel);\n    return Math.pow(10, this._startValue + decimal * this._valueRange);\n  }\n}\n","import defaults from '../core/core.defaults.js';\nimport {_longestText, addRoundedRectPath, renderText} from '../helpers/helpers.canvas.js';\nimport {HALF_PI, TAU, toDegrees, toRadians, _normalizeAngle, PI} from '../helpers/helpers.math.js';\nimport LinearScaleBase from './scale.linearbase.js';\nimport Ticks from '../core/core.ticks.js';\nimport {valueOrDefault, isArray, isFinite, callback as callCallback, isNullOrUndef} from '../helpers/helpers.core.js';\nimport {createContext, toFont, toPadding, toTRBLCorners} from '../helpers/helpers.options.js';\n\nfunction getTickBackdropHeight(opts) {\n  const tickOpts = opts.ticks;\n\n  if (tickOpts.display && opts.display) {\n    const padding = toPadding(tickOpts.backdropPadding);\n    return valueOrDefault(tickOpts.font && tickOpts.font.size, defaults.font.size) + padding.height;\n  }\n  return 0;\n}\n\nfunction measureLabelSize(ctx, font, label) {\n  label = isArray(label) ? label : [label];\n  return {\n    w: _longestText(ctx, font.string, label),\n    h: label.length * font.lineHeight\n  };\n}\n\nfunction determineLimits(angle, pos, size, min, max) {\n  if (angle === min || angle === max) {\n    return {\n      start: pos - (size / 2),\n      end: pos + (size / 2)\n    };\n  } else if (angle < min || angle > max) {\n    return {\n      start: pos - size,\n      end: pos\n    };\n  }\n\n  return {\n    start: pos,\n    end: pos + size\n  };\n}\n\n/**\n * Helper function to fit a radial linear scale with point labels\n */\nfunction fitWithPointLabels(scale) {\n\n  // Right, this is really confusing and there is a lot of maths going on here\n  // The gist of the problem is here: https://gist.github.com/nnnick/696cc9c55f4b0beb8fe9\n  //\n  // Reaction: https://dl.dropboxusercontent.com/u/34601363/toomuchscience.gif\n  //\n  // Solution:\n  //\n  // We assume the radius of the polygon is half the size of the canvas at first\n  // at each index we check if the text overlaps.\n  //\n  // Where it does, we store that angle and that index.\n  //\n  // After finding the largest index and angle we calculate how much we need to remove\n  // from the shape radius to move the point inwards by that x.\n  //\n  // We average the left and right distances to get the maximum shape radius that can fit in the box\n  // along with labels.\n  //\n  // Once we have that, we can find the centre point for the chart, by taking the x text protrusion\n  // on each side, removing that from the size, halving it and adding the left x protrusion width.\n  //\n  // This will mean we have a shape fitted to the canvas, as large as it can be with the labels\n  // and position it in the most space efficient manner\n  //\n  // https://dl.dropboxusercontent.com/u/34601363/yeahscience.gif\n\n  // Get maximum radius of the polygon. Either half the height (minus the text width) or half the width.\n  // Use this to calculate the offset + change. - Make sure L/R protrusion is at least 0 to stop issues with centre points\n  const orig = {\n    l: scale.left + scale._padding.left,\n    r: scale.right - scale._padding.right,\n    t: scale.top + scale._padding.top,\n    b: scale.bottom - scale._padding.bottom\n  };\n  const limits = Object.assign({}, orig);\n  const labelSizes = [];\n  const padding = [];\n  const valueCount = scale._pointLabels.length;\n  const pointLabelOpts = scale.options.pointLabels;\n  const additionalAngle = pointLabelOpts.centerPointLabels ? PI / valueCount : 0;\n\n  for (let i = 0; i < valueCount; i++) {\n    const opts = pointLabelOpts.setContext(scale.getPointLabelContext(i));\n    padding[i] = opts.padding;\n    const pointPosition = scale.getPointPosition(i, scale.drawingArea + padding[i], additionalAngle);\n    const plFont = toFont(opts.font);\n    const textSize = measureLabelSize(scale.ctx, plFont, scale._pointLabels[i]);\n    labelSizes[i] = textSize;\n\n    const angleRadians = _normalizeAngle(scale.getIndexAngle(i) + additionalAngle);\n    const angle = Math.round(toDegrees(angleRadians));\n    const hLimits = determineLimits(angle, pointPosition.x, textSize.w, 0, 180);\n    const vLimits = determineLimits(angle, pointPosition.y, textSize.h, 90, 270);\n    updateLimits(limits, orig, angleRadians, hLimits, vLimits);\n  }\n\n  scale.setCenterPoint(\n    orig.l - limits.l,\n    limits.r - orig.r,\n    orig.t - limits.t,\n    limits.b - orig.b\n  );\n\n  // Now that text size is determined, compute the full positions\n  scale._pointLabelItems = buildPointLabelItems(scale, labelSizes, padding);\n}\n\nfunction updateLimits(limits, orig, angle, hLimits, vLimits) {\n  const sin = Math.abs(Math.sin(angle));\n  const cos = Math.abs(Math.cos(angle));\n  let x = 0;\n  let y = 0;\n  if (hLimits.start < orig.l) {\n    x = (orig.l - hLimits.start) / sin;\n    limits.l = Math.min(limits.l, orig.l - x);\n  } else if (hLimits.end > orig.r) {\n    x = (hLimits.end - orig.r) / sin;\n    limits.r = Math.max(limits.r, orig.r + x);\n  }\n  if (vLimits.start < orig.t) {\n    y = (orig.t - vLimits.start) / cos;\n    limits.t = Math.min(limits.t, orig.t - y);\n  } else if (vLimits.end > orig.b) {\n    y = (vLimits.end - orig.b) / cos;\n    limits.b = Math.max(limits.b, orig.b + y);\n  }\n}\n\nfunction buildPointLabelItems(scale, labelSizes, padding) {\n  const items = [];\n  const valueCount = scale._pointLabels.length;\n  const opts = scale.options;\n  const extra = getTickBackdropHeight(opts) / 2;\n  const outerDistance = scale.drawingArea;\n  const additionalAngle = opts.pointLabels.centerPointLabels ? PI / valueCount : 0;\n\n  for (let i = 0; i < valueCount; i++) {\n    const pointLabelPosition = scale.getPointPosition(i, outerDistance + extra + padding[i], additionalAngle);\n    const angle = Math.round(toDegrees(_normalizeAngle(pointLabelPosition.angle + HALF_PI)));\n    const size = labelSizes[i];\n    const y = yForAngle(pointLabelPosition.y, size.h, angle);\n    const textAlign = getTextAlignForAngle(angle);\n    const left = leftForTextAlign(pointLabelPosition.x, size.w, textAlign);\n\n    items.push({\n      // Text position\n      x: pointLabelPosition.x,\n      y,\n\n      // Text rendering data\n      textAlign,\n\n      // Bounding box\n      left,\n      top: y,\n      right: left + size.w,\n      bottom: y + size.h\n    });\n  }\n  return items;\n}\n\nfunction getTextAlignForAngle(angle) {\n  if (angle === 0 || angle === 180) {\n    return 'center';\n  } else if (angle < 180) {\n    return 'left';\n  }\n\n  return 'right';\n}\n\nfunction leftForTextAlign(x, w, align) {\n  if (align === 'right') {\n    x -= w;\n  } else if (align === 'center') {\n    x -= (w / 2);\n  }\n  return x;\n}\n\nfunction yForAngle(y, h, angle) {\n  if (angle === 90 || angle === 270) {\n    y -= (h / 2);\n  } else if (angle > 270 || angle < 90) {\n    y -= h;\n  }\n  return y;\n}\n\nfunction drawPointLabels(scale, labelCount) {\n  const {ctx, options: {pointLabels}} = scale;\n\n  for (let i = labelCount - 1; i >= 0; i--) {\n    const optsAtIndex = pointLabels.setContext(scale.getPointLabelContext(i));\n    const plFont = toFont(optsAtIndex.font);\n    const {x, y, textAlign, left, top, right, bottom} = scale._pointLabelItems[i];\n    const {backdropColor} = optsAtIndex;\n\n    if (!isNullOrUndef(backdropColor)) {\n      const borderRadius = toTRBLCorners(optsAtIndex.borderRadius);\n      const padding = toPadding(optsAtIndex.backdropPadding);\n      ctx.fillStyle = backdropColor;\n\n      const backdropLeft = left - padding.left;\n      const backdropTop = top - padding.top;\n      const backdropWidth = right - left + padding.width;\n      const backdropHeight = bottom - top + padding.height;\n\n      if (Object.values(borderRadius).some(v => v !== 0)) {\n        ctx.beginPath();\n        addRoundedRectPath(ctx, {\n          x: backdropLeft,\n          y: backdropTop,\n          w: backdropWidth,\n          h: backdropHeight,\n          radius: borderRadius,\n        });\n        ctx.fill();\n      } else {\n        ctx.fillRect(backdropLeft, backdropTop, backdropWidth, backdropHeight);\n      }\n    }\n\n    renderText(\n      ctx,\n      scale._pointLabels[i],\n      x,\n      y + (plFont.lineHeight / 2),\n      plFont,\n      {\n        color: optsAtIndex.color,\n        textAlign: textAlign,\n        textBaseline: 'middle'\n      }\n    );\n  }\n}\n\nfunction pathRadiusLine(scale, radius, circular, labelCount) {\n  const {ctx} = scale;\n  if (circular) {\n    // Draw circular arcs between the points\n    ctx.arc(scale.xCenter, scale.yCenter, radius, 0, TAU);\n  } else {\n    // Draw straight lines connecting each index\n    let pointPosition = scale.getPointPosition(0, radius);\n    ctx.moveTo(pointPosition.x, pointPosition.y);\n\n    for (let i = 1; i < labelCount; i++) {\n      pointPosition = scale.getPointPosition(i, radius);\n      ctx.lineTo(pointPosition.x, pointPosition.y);\n    }\n  }\n}\n\nfunction drawRadiusLine(scale, gridLineOpts, radius, labelCount, borderOpts) {\n  const ctx = scale.ctx;\n  const circular = gridLineOpts.circular;\n\n  const {color, lineWidth} = gridLineOpts;\n\n  if ((!circular && !labelCount) || !color || !lineWidth || radius < 0) {\n    return;\n  }\n\n  ctx.save();\n  ctx.strokeStyle = color;\n  ctx.lineWidth = lineWidth;\n  ctx.setLineDash(borderOpts.dash);\n  ctx.lineDashOffset = borderOpts.dashOffset;\n\n  ctx.beginPath();\n  pathRadiusLine(scale, radius, circular, labelCount);\n  ctx.closePath();\n  ctx.stroke();\n  ctx.restore();\n}\n\nfunction createPointLabelContext(parent, index, label) {\n  return createContext(parent, {\n    label,\n    index,\n    type: 'pointLabel'\n  });\n}\n\nexport default class RadialLinearScale extends LinearScaleBase {\n\n  static id = 'radialLinear';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    display: true,\n\n    // Boolean - Whether to animate scaling the chart from the centre\n    animate: true,\n    position: 'chartArea',\n\n    angleLines: {\n      display: true,\n      lineWidth: 1,\n      borderDash: [],\n      borderDashOffset: 0.0\n    },\n\n    grid: {\n      circular: false\n    },\n\n    startAngle: 0,\n\n    // label settings\n    ticks: {\n      // Boolean - Show a backdrop to the scale label\n      showLabelBackdrop: true,\n\n      callback: Ticks.formatters.numeric\n    },\n\n    pointLabels: {\n      backdropColor: undefined,\n\n      // Number - The backdrop padding above & below the label in pixels\n      backdropPadding: 2,\n\n      // Boolean - if true, show point labels\n      display: true,\n\n      // Number - Point label font size in pixels\n      font: {\n        size: 10\n      },\n\n      // Function - Used to convert point labels\n      callback(label) {\n        return label;\n      },\n\n      // Number - Additionl padding between scale and pointLabel\n      padding: 5,\n\n      // Boolean - if true, center point labels to slices in polar chart\n      centerPointLabels: false\n    }\n  };\n\n  static defaultRoutes = {\n    'angleLines.color': 'borderColor',\n    'pointLabels.color': 'color',\n    'ticks.color': 'color'\n  };\n\n  static descriptors = {\n    angleLines: {\n      _fallback: 'grid'\n    }\n  };\n\n  constructor(cfg) {\n    super(cfg);\n\n    /** @type {number} */\n    this.xCenter = undefined;\n    /** @type {number} */\n    this.yCenter = undefined;\n    /** @type {number} */\n    this.drawingArea = undefined;\n    /** @type {string[]} */\n    this._pointLabels = [];\n    this._pointLabelItems = [];\n  }\n\n  setDimensions() {\n    // Set the unconstrained dimension before label rotation\n    const padding = this._padding = toPadding(getTickBackdropHeight(this.options) / 2);\n    const w = this.width = this.maxWidth - padding.width;\n    const h = this.height = this.maxHeight - padding.height;\n    this.xCenter = Math.floor(this.left + w / 2 + padding.left);\n    this.yCenter = Math.floor(this.top + h / 2 + padding.top);\n    this.drawingArea = Math.floor(Math.min(w, h) / 2);\n  }\n\n  determineDataLimits() {\n    const {min, max} = this.getMinMax(false);\n\n    this.min = isFinite(min) && !isNaN(min) ? min : 0;\n    this.max = isFinite(max) && !isNaN(max) ? max : 0;\n\n    // Common base implementation to handle min, max, beginAtZero\n    this.handleTickRangeOptions();\n  }\n\n  /**\n\t * Returns the maximum number of ticks based on the scale dimension\n\t * @protected\n\t */\n  computeTickLimit() {\n    return Math.ceil(this.drawingArea / getTickBackdropHeight(this.options));\n  }\n\n  generateTickLabels(ticks) {\n    LinearScaleBase.prototype.generateTickLabels.call(this, ticks);\n\n    // Point labels\n    this._pointLabels = this.getLabels()\n      .map((value, index) => {\n        const label = callCallback(this.options.pointLabels.callback, [value, index], this);\n        return label || label === 0 ? label : '';\n      })\n      .filter((v, i) => this.chart.getDataVisibility(i));\n  }\n\n  fit() {\n    const opts = this.options;\n\n    if (opts.display && opts.pointLabels.display) {\n      fitWithPointLabels(this);\n    } else {\n      this.setCenterPoint(0, 0, 0, 0);\n    }\n  }\n\n  setCenterPoint(leftMovement, rightMovement, topMovement, bottomMovement) {\n    this.xCenter += Math.floor((leftMovement - rightMovement) / 2);\n    this.yCenter += Math.floor((topMovement - bottomMovement) / 2);\n    this.drawingArea -= Math.min(this.drawingArea / 2, Math.max(leftMovement, rightMovement, topMovement, bottomMovement));\n  }\n\n  getIndexAngle(index) {\n    const angleMultiplier = TAU / (this._pointLabels.length || 1);\n    const startAngle = this.options.startAngle || 0;\n\n    return _normalizeAngle(index * angleMultiplier + toRadians(startAngle));\n  }\n\n  getDistanceFromCenterForValue(value) {\n    if (isNullOrUndef(value)) {\n      return NaN;\n    }\n\n    // Take into account half font size + the yPadding of the top value\n    const scalingFactor = this.drawingArea / (this.max - this.min);\n    if (this.options.reverse) {\n      return (this.max - value) * scalingFactor;\n    }\n    return (value - this.min) * scalingFactor;\n  }\n\n  getValueForDistanceFromCenter(distance) {\n    if (isNullOrUndef(distance)) {\n      return NaN;\n    }\n\n    const scaledDistance = distance / (this.drawingArea / (this.max - this.min));\n    return this.options.reverse ? this.max - scaledDistance : this.min + scaledDistance;\n  }\n\n  getPointLabelContext(index) {\n    const pointLabels = this._pointLabels || [];\n\n    if (index >= 0 && index < pointLabels.length) {\n      const pointLabel = pointLabels[index];\n      return createPointLabelContext(this.getContext(), index, pointLabel);\n    }\n  }\n\n  getPointPosition(index, distanceFromCenter, additionalAngle = 0) {\n    const angle = this.getIndexAngle(index) - HALF_PI + additionalAngle;\n    return {\n      x: Math.cos(angle) * distanceFromCenter + this.xCenter,\n      y: Math.sin(angle) * distanceFromCenter + this.yCenter,\n      angle\n    };\n  }\n\n  getPointPositionForValue(index, value) {\n    return this.getPointPosition(index, this.getDistanceFromCenterForValue(value));\n  }\n\n  getBasePosition(index) {\n    return this.getPointPositionForValue(index || 0, this.getBaseValue());\n  }\n\n  getPointLabelPosition(index) {\n    const {left, top, right, bottom} = this._pointLabelItems[index];\n    return {\n      left,\n      top,\n      right,\n      bottom,\n    };\n  }\n\n  /**\n\t * @protected\n\t */\n  drawBackground() {\n    const {backgroundColor, grid: {circular}} = this.options;\n    if (backgroundColor) {\n      const ctx = this.ctx;\n      ctx.save();\n      ctx.beginPath();\n      pathRadiusLine(this, this.getDistanceFromCenterForValue(this._endValue), circular, this._pointLabels.length);\n      ctx.closePath();\n      ctx.fillStyle = backgroundColor;\n      ctx.fill();\n      ctx.restore();\n    }\n  }\n\n  /**\n\t * @protected\n\t */\n  drawGrid() {\n    const ctx = this.ctx;\n    const opts = this.options;\n    const {angleLines, grid, border} = opts;\n    const labelCount = this._pointLabels.length;\n\n    let i, offset, position;\n\n    if (opts.pointLabels.display) {\n      drawPointLabels(this, labelCount);\n    }\n\n    if (grid.display) {\n      this.ticks.forEach((tick, index) => {\n        if (index !== 0) {\n          offset = this.getDistanceFromCenterForValue(tick.value);\n          const context = this.getContext(index);\n          const optsAtIndex = grid.setContext(context);\n          const optsAtIndexBorder = border.setContext(context);\n\n          drawRadiusLine(this, optsAtIndex, offset, labelCount, optsAtIndexBorder);\n        }\n      });\n    }\n\n    if (angleLines.display) {\n      ctx.save();\n\n      for (i = labelCount - 1; i >= 0; i--) {\n        const optsAtIndex = angleLines.setContext(this.getPointLabelContext(i));\n        const {color, lineWidth} = optsAtIndex;\n\n        if (!lineWidth || !color) {\n          continue;\n        }\n\n        ctx.lineWidth = lineWidth;\n        ctx.strokeStyle = color;\n\n        ctx.setLineDash(optsAtIndex.borderDash);\n        ctx.lineDashOffset = optsAtIndex.borderDashOffset;\n\n        offset = this.getDistanceFromCenterForValue(opts.ticks.reverse ? this.min : this.max);\n        position = this.getPointPosition(i, offset);\n        ctx.beginPath();\n        ctx.moveTo(this.xCenter, this.yCenter);\n        ctx.lineTo(position.x, position.y);\n        ctx.stroke();\n      }\n\n      ctx.restore();\n    }\n  }\n\n  /**\n\t * @protected\n\t */\n  drawBorder() {}\n\n  /**\n\t * @protected\n\t */\n  drawLabels() {\n    const ctx = this.ctx;\n    const opts = this.options;\n    const tickOpts = opts.ticks;\n\n    if (!tickOpts.display) {\n      return;\n    }\n\n    const startAngle = this.getIndexAngle(0);\n    let offset, width;\n\n    ctx.save();\n    ctx.translate(this.xCenter, this.yCenter);\n    ctx.rotate(startAngle);\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n\n    this.ticks.forEach((tick, index) => {\n      if (index === 0 && !opts.reverse) {\n        return;\n      }\n\n      const optsAtIndex = tickOpts.setContext(this.getContext(index));\n      const tickFont = toFont(optsAtIndex.font);\n      offset = this.getDistanceFromCenterForValue(this.ticks[index].value);\n\n      if (optsAtIndex.showLabelBackdrop) {\n        ctx.font = tickFont.string;\n        width = ctx.measureText(tick.label).width;\n        ctx.fillStyle = optsAtIndex.backdropColor;\n\n        const padding = toPadding(optsAtIndex.backdropPadding);\n        ctx.fillRect(\n          -width / 2 - padding.left,\n          -offset - tickFont.size / 2 - padding.top,\n          width + padding.width,\n          tickFont.size + padding.height\n        );\n      }\n\n      renderText(ctx, tick.label, 0, -offset, tickFont, {\n        color: optsAtIndex.color,\n      });\n    });\n\n    ctx.restore();\n  }\n\n  /**\n\t * @protected\n\t */\n  drawTitle() {}\n}\n","import adapters from '../core/core.adapters.js';\nimport {callback as call, isFinite, isNullOrUndef, mergeIf, valueOrDefault} from '../helpers/helpers.core.js';\nimport {toRadians, isNumber, _limitValue} from '../helpers/helpers.math.js';\nimport Scale from '../core/core.scale.js';\nimport {_arrayUnique, _filterBetween, _lookup} from '../helpers/helpers.collection.js';\n\n/**\n * @typedef { import('../core/core.adapters.js').TimeUnit } Unit\n * @typedef {{common: boolean, size: number, steps?: number}} Interval\n * @typedef { import('../core/core.adapters.js').DateAdapter } DateAdapter\n */\n\n/**\n * @type {Object<Unit, Interval>}\n */\nconst INTERVALS = {\n  millisecond: {common: true, size: 1, steps: 1000},\n  second: {common: true, size: 1000, steps: 60},\n  minute: {common: true, size: 60000, steps: 60},\n  hour: {common: true, size: 3600000, steps: 24},\n  day: {common: true, size: 86400000, steps: 30},\n  week: {common: false, size: 604800000, steps: 4},\n  month: {common: true, size: 2.628e9, steps: 12},\n  quarter: {common: false, size: 7.884e9, steps: 4},\n  year: {common: true, size: 3.154e10}\n};\n\n/**\n * @type {Unit[]}\n */\nconst UNITS = /** @type Unit[] */ /* #__PURE__ */ (Object.keys(INTERVALS));\n\n/**\n * @param {number} a\n * @param {number} b\n */\nfunction sorter(a, b) {\n  return a - b;\n}\n\n/**\n * @param {TimeScale} scale\n * @param {*} input\n * @return {number}\n */\nfunction parse(scale, input) {\n  if (isNullOrUndef(input)) {\n    return null;\n  }\n\n  const adapter = scale._adapter;\n  const {parser, round, isoWeekday} = scale._parseOpts;\n  let value = input;\n\n  if (typeof parser === 'function') {\n    value = parser(value);\n  }\n\n  // Only parse if its not a timestamp already\n  if (!isFinite(value)) {\n    value = typeof parser === 'string'\n      ? adapter.parse(value, /** @type {Unit} */ (parser))\n      : adapter.parse(value);\n  }\n\n  if (value === null) {\n    return null;\n  }\n\n  if (round) {\n    value = round === 'week' && (isNumber(isoWeekday) || isoWeekday === true)\n      ? adapter.startOf(value, 'isoWeek', isoWeekday)\n      : adapter.startOf(value, round);\n  }\n\n  return +value;\n}\n\n/**\n * Figures out what unit results in an appropriate number of auto-generated ticks\n * @param {Unit} minUnit\n * @param {number} min\n * @param {number} max\n * @param {number} capacity\n * @return {object}\n */\nfunction determineUnitForAutoTicks(minUnit, min, max, capacity) {\n  const ilen = UNITS.length;\n\n  for (let i = UNITS.indexOf(minUnit); i < ilen - 1; ++i) {\n    const interval = INTERVALS[UNITS[i]];\n    const factor = interval.steps ? interval.steps : Number.MAX_SAFE_INTEGER;\n\n    if (interval.common && Math.ceil((max - min) / (factor * interval.size)) <= capacity) {\n      return UNITS[i];\n    }\n  }\n\n  return UNITS[ilen - 1];\n}\n\n/**\n * Figures out what unit to format a set of ticks with\n * @param {TimeScale} scale\n * @param {number} numTicks\n * @param {Unit} minUnit\n * @param {number} min\n * @param {number} max\n * @return {Unit}\n */\nfunction determineUnitForFormatting(scale, numTicks, minUnit, min, max) {\n  for (let i = UNITS.length - 1; i >= UNITS.indexOf(minUnit); i--) {\n    const unit = UNITS[i];\n    if (INTERVALS[unit].common && scale._adapter.diff(max, min, unit) >= numTicks - 1) {\n      return unit;\n    }\n  }\n\n  return UNITS[minUnit ? UNITS.indexOf(minUnit) : 0];\n}\n\n/**\n * @param {Unit} unit\n * @return {object}\n */\nfunction determineMajorUnit(unit) {\n  for (let i = UNITS.indexOf(unit) + 1, ilen = UNITS.length; i < ilen; ++i) {\n    if (INTERVALS[UNITS[i]].common) {\n      return UNITS[i];\n    }\n  }\n}\n\n/**\n * @param {object} ticks\n * @param {number} time\n * @param {number[]} [timestamps] - if defined, snap to these timestamps\n */\nfunction addTick(ticks, time, timestamps) {\n  if (!timestamps) {\n    ticks[time] = true;\n  } else if (timestamps.length) {\n    const {lo, hi} = _lookup(timestamps, time);\n    const timestamp = timestamps[lo] >= time ? timestamps[lo] : timestamps[hi];\n    ticks[timestamp] = true;\n  }\n}\n\n/**\n * @param {TimeScale} scale\n * @param {object[]} ticks\n * @param {object} map\n * @param {Unit} majorUnit\n * @return {object[]}\n */\nfunction setMajorTicks(scale, ticks, map, majorUnit) {\n  const adapter = scale._adapter;\n  const first = +adapter.startOf(ticks[0].value, majorUnit);\n  const last = ticks[ticks.length - 1].value;\n  let major, index;\n\n  for (major = first; major <= last; major = +adapter.add(major, 1, majorUnit)) {\n    index = map[major];\n    if (index >= 0) {\n      ticks[index].major = true;\n    }\n  }\n  return ticks;\n}\n\n/**\n * @param {TimeScale} scale\n * @param {number[]} values\n * @param {Unit|undefined} [majorUnit]\n * @return {object[]}\n */\nfunction ticksFromTimestamps(scale, values, majorUnit) {\n  const ticks = [];\n  /** @type {Object<number,object>} */\n  const map = {};\n  const ilen = values.length;\n  let i, value;\n\n  for (i = 0; i < ilen; ++i) {\n    value = values[i];\n    map[value] = i;\n\n    ticks.push({\n      value,\n      major: false\n    });\n  }\n\n  // We set the major ticks separately from the above loop because calling startOf for every tick\n  // is expensive when there is a large number of ticks\n  return (ilen === 0 || !majorUnit) ? ticks : setMajorTicks(scale, ticks, map, majorUnit);\n}\n\nexport default class TimeScale extends Scale {\n\n  static id = 'time';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    /**\n     * Scale boundary strategy (bypassed by min/max time options)\n     * - `data`: make sure data are fully visible, ticks outside are removed\n     * - `ticks`: make sure ticks are fully visible, data outside are truncated\n     * @see https://github.com/chartjs/Chart.js/pull/4556\n     * @since 2.7.0\n     */\n    bounds: 'data',\n\n    adapters: {},\n    time: {\n      parser: false, // false == a pattern string from or a custom callback that converts its argument to a timestamp\n      unit: false, // false == automatic or override with week, month, year, etc.\n      round: false, // none, or override with week, month, year, etc.\n      isoWeekday: false, // override week start day\n      minUnit: 'millisecond',\n      displayFormats: {}\n    },\n    ticks: {\n      /**\n       * Ticks generation input values:\n       * - 'auto': generates \"optimal\" ticks based on scale size and time options.\n       * - 'data': generates ticks from data (including labels from data {t|x|y} objects).\n       * - 'labels': generates ticks from user given `data.labels` values ONLY.\n       * @see https://github.com/chartjs/Chart.js/pull/4507\n       * @since 2.7.0\n       */\n      source: 'auto',\n\n      callback: false,\n\n      major: {\n        enabled: false\n      }\n    }\n  };\n\n  /**\n\t * @param {object} props\n\t */\n  constructor(props) {\n    super(props);\n\n    /** @type {{data: number[], labels: number[], all: number[]}} */\n    this._cache = {\n      data: [],\n      labels: [],\n      all: []\n    };\n\n    /** @type {Unit} */\n    this._unit = 'day';\n    /** @type {Unit=} */\n    this._majorUnit = undefined;\n    this._offsets = {};\n    this._normalized = false;\n    this._parseOpts = undefined;\n  }\n\n  init(scaleOpts, opts = {}) {\n    const time = scaleOpts.time || (scaleOpts.time = {});\n    /** @type {DateAdapter} */\n    const adapter = this._adapter = new adapters._date(scaleOpts.adapters.date);\n\n    adapter.init(opts);\n\n    // Backward compatibility: before introducing adapter, `displayFormats` was\n    // supposed to contain *all* unit/string pairs but this can't be resolved\n    // when loading the scale (adapters are loaded afterward), so let's populate\n    // missing formats on update\n    mergeIf(time.displayFormats, adapter.formats());\n\n    this._parseOpts = {\n      parser: time.parser,\n      round: time.round,\n      isoWeekday: time.isoWeekday\n    };\n\n    super.init(scaleOpts);\n\n    this._normalized = opts.normalized;\n  }\n\n  /**\n\t * @param {*} raw\n\t * @param {number?} [index]\n\t * @return {number}\n\t */\n  parse(raw, index) { // eslint-disable-line no-unused-vars\n    if (raw === undefined) {\n      return null;\n    }\n    return parse(this, raw);\n  }\n\n  beforeLayout() {\n    super.beforeLayout();\n    this._cache = {\n      data: [],\n      labels: [],\n      all: []\n    };\n  }\n\n  determineDataLimits() {\n    const options = this.options;\n    const adapter = this._adapter;\n    const unit = options.time.unit || 'day';\n    // eslint-disable-next-line prefer-const\n    let {min, max, minDefined, maxDefined} = this.getUserBounds();\n\n    /**\n\t\t * @param {object} bounds\n\t\t */\n    function _applyBounds(bounds) {\n      if (!minDefined && !isNaN(bounds.min)) {\n        min = Math.min(min, bounds.min);\n      }\n      if (!maxDefined && !isNaN(bounds.max)) {\n        max = Math.max(max, bounds.max);\n      }\n    }\n\n    // If we have user provided `min` and `max` labels / data bounds can be ignored\n    if (!minDefined || !maxDefined) {\n      // Labels are always considered, when user did not force bounds\n      _applyBounds(this._getLabelBounds());\n\n      // If `bounds` is `'ticks'` and `ticks.source` is `'labels'`,\n      // data bounds are ignored (and don't need to be determined)\n      if (options.bounds !== 'ticks' || options.ticks.source !== 'labels') {\n        _applyBounds(this.getMinMax(false));\n      }\n    }\n\n    min = isFinite(min) && !isNaN(min) ? min : +adapter.startOf(Date.now(), unit);\n    max = isFinite(max) && !isNaN(max) ? max : +adapter.endOf(Date.now(), unit) + 1;\n\n    // Make sure that max is strictly higher than min (required by the timeseries lookup table)\n    this.min = Math.min(min, max - 1);\n    this.max = Math.max(min + 1, max);\n  }\n\n  /**\n\t * @private\n\t */\n  _getLabelBounds() {\n    const arr = this.getLabelTimestamps();\n    let min = Number.POSITIVE_INFINITY;\n    let max = Number.NEGATIVE_INFINITY;\n\n    if (arr.length) {\n      min = arr[0];\n      max = arr[arr.length - 1];\n    }\n    return {min, max};\n  }\n\n  /**\n\t * @return {object[]}\n\t */\n  buildTicks() {\n    const options = this.options;\n    const timeOpts = options.time;\n    const tickOpts = options.ticks;\n    const timestamps = tickOpts.source === 'labels' ? this.getLabelTimestamps() : this._generate();\n\n    if (options.bounds === 'ticks' && timestamps.length) {\n      this.min = this._userMin || timestamps[0];\n      this.max = this._userMax || timestamps[timestamps.length - 1];\n    }\n\n    const min = this.min;\n    const max = this.max;\n\n    const ticks = _filterBetween(timestamps, min, max);\n\n    // PRIVATE\n    // determineUnitForFormatting relies on the number of ticks so we don't use it when\n    // autoSkip is enabled because we don't yet know what the final number of ticks will be\n    this._unit = timeOpts.unit || (tickOpts.autoSkip\n      ? determineUnitForAutoTicks(timeOpts.minUnit, this.min, this.max, this._getLabelCapacity(min))\n      : determineUnitForFormatting(this, ticks.length, timeOpts.minUnit, this.min, this.max));\n    this._majorUnit = !tickOpts.major.enabled || this._unit === 'year' ? undefined\n      : determineMajorUnit(this._unit);\n    this.initOffsets(timestamps);\n\n    if (options.reverse) {\n      ticks.reverse();\n    }\n\n    return ticksFromTimestamps(this, ticks, this._majorUnit);\n  }\n\n  afterAutoSkip() {\n    // Offsets for bar charts need to be handled with the auto skipped\n    // ticks. Once ticks have been skipped, we re-compute the offsets.\n    if (this.options.offsetAfterAutoskip) {\n      this.initOffsets(this.ticks.map(tick => +tick.value));\n    }\n  }\n\n  /**\n\t * Returns the start and end offsets from edges in the form of {start, end}\n\t * where each value is a relative width to the scale and ranges between 0 and 1.\n\t * They add extra margins on the both sides by scaling down the original scale.\n\t * Offsets are added when the `offset` option is true.\n\t * @param {number[]} timestamps\n\t * @protected\n\t */\n  initOffsets(timestamps = []) {\n    let start = 0;\n    let end = 0;\n    let first, last;\n\n    if (this.options.offset && timestamps.length) {\n      first = this.getDecimalForValue(timestamps[0]);\n      if (timestamps.length === 1) {\n        start = 1 - first;\n      } else {\n        start = (this.getDecimalForValue(timestamps[1]) - first) / 2;\n      }\n      last = this.getDecimalForValue(timestamps[timestamps.length - 1]);\n      if (timestamps.length === 1) {\n        end = last;\n      } else {\n        end = (last - this.getDecimalForValue(timestamps[timestamps.length - 2])) / 2;\n      }\n    }\n    const limit = timestamps.length < 3 ? 0.5 : 0.25;\n    start = _limitValue(start, 0, limit);\n    end = _limitValue(end, 0, limit);\n\n    this._offsets = {start, end, factor: 1 / (start + 1 + end)};\n  }\n\n  /**\n\t * Generates a maximum of `capacity` timestamps between min and max, rounded to the\n\t * `minor` unit using the given scale time `options`.\n\t * Important: this method can return ticks outside the min and max range, it's the\n\t * responsibility of the calling code to clamp values if needed.\n\t * @private\n\t */\n  _generate() {\n    const adapter = this._adapter;\n    const min = this.min;\n    const max = this.max;\n    const options = this.options;\n    const timeOpts = options.time;\n    // @ts-ignore\n    const minor = timeOpts.unit || determineUnitForAutoTicks(timeOpts.minUnit, min, max, this._getLabelCapacity(min));\n    const stepSize = valueOrDefault(options.ticks.stepSize, 1);\n    const weekday = minor === 'week' ? timeOpts.isoWeekday : false;\n    const hasWeekday = isNumber(weekday) || weekday === true;\n    const ticks = {};\n    let first = min;\n    let time, count;\n\n    // For 'week' unit, handle the first day of week option\n    if (hasWeekday) {\n      first = +adapter.startOf(first, 'isoWeek', weekday);\n    }\n\n    // Align first ticks on unit\n    first = +adapter.startOf(first, hasWeekday ? 'day' : minor);\n\n    // Prevent browser from freezing in case user options request millions of milliseconds\n    if (adapter.diff(max, min, minor) > 100000 * stepSize) {\n      throw new Error(min + ' and ' + max + ' are too far apart with stepSize of ' + stepSize + ' ' + minor);\n    }\n\n    const timestamps = options.ticks.source === 'data' && this.getDataTimestamps();\n    for (time = first, count = 0; time < max; time = +adapter.add(time, stepSize, minor), count++) {\n      addTick(ticks, time, timestamps);\n    }\n\n    if (time === max || options.bounds === 'ticks' || count === 1) {\n      addTick(ticks, time, timestamps);\n    }\n\n    // @ts-ignore\n    return Object.keys(ticks).sort((a, b) => a - b).map(x => +x);\n  }\n\n  /**\n\t * @param {number} value\n\t * @return {string}\n\t */\n  getLabelForValue(value) {\n    const adapter = this._adapter;\n    const timeOpts = this.options.time;\n\n    if (timeOpts.tooltipFormat) {\n      return adapter.format(value, timeOpts.tooltipFormat);\n    }\n    return adapter.format(value, timeOpts.displayFormats.datetime);\n  }\n\n  /**\n\t * @param {number} value\n\t * @param {string|undefined} format\n\t * @return {string}\n\t */\n  format(value, format) {\n    const options = this.options;\n    const formats = options.time.displayFormats;\n    const unit = this._unit;\n    const fmt = format || formats[unit];\n    return this._adapter.format(value, fmt);\n  }\n\n  /**\n\t * Function to format an individual tick mark\n\t * @param {number} time\n\t * @param {number} index\n\t * @param {object[]} ticks\n\t * @param {string|undefined} [format]\n\t * @return {string}\n\t * @private\n\t */\n  _tickFormatFunction(time, index, ticks, format) {\n    const options = this.options;\n    const formatter = options.ticks.callback;\n\n    if (formatter) {\n      return call(formatter, [time, index, ticks], this);\n    }\n\n    const formats = options.time.displayFormats;\n    const unit = this._unit;\n    const majorUnit = this._majorUnit;\n    const minorFormat = unit && formats[unit];\n    const majorFormat = majorUnit && formats[majorUnit];\n    const tick = ticks[index];\n    const major = majorUnit && majorFormat && tick && tick.major;\n\n    return this._adapter.format(time, format || (major ? majorFormat : minorFormat));\n  }\n\n  /**\n\t * @param {object[]} ticks\n\t */\n  generateTickLabels(ticks) {\n    let i, ilen, tick;\n\n    for (i = 0, ilen = ticks.length; i < ilen; ++i) {\n      tick = ticks[i];\n      tick.label = this._tickFormatFunction(tick.value, i, ticks);\n    }\n  }\n\n  /**\n\t * @param {number} value - Milliseconds since epoch (1 January 1970 00:00:00 UTC)\n\t * @return {number}\n\t */\n  getDecimalForValue(value) {\n    return value === null ? NaN : (value - this.min) / (this.max - this.min);\n  }\n\n  /**\n\t * @param {number} value - Milliseconds since epoch (1 January 1970 00:00:00 UTC)\n\t * @return {number}\n\t */\n  getPixelForValue(value) {\n    const offsets = this._offsets;\n    const pos = this.getDecimalForValue(value);\n    return this.getPixelForDecimal((offsets.start + pos) * offsets.factor);\n  }\n\n  /**\n\t * @param {number} pixel\n\t * @return {number}\n\t */\n  getValueForPixel(pixel) {\n    const offsets = this._offsets;\n    const pos = this.getDecimalForPixel(pixel) / offsets.factor - offsets.end;\n    return this.min + pos * (this.max - this.min);\n  }\n\n  /**\n\t * @param {string} label\n\t * @return {{w:number, h:number}}\n\t * @private\n\t */\n  _getLabelSize(label) {\n    const ticksOpts = this.options.ticks;\n    const tickLabelWidth = this.ctx.measureText(label).width;\n    const angle = toRadians(this.isHorizontal() ? ticksOpts.maxRotation : ticksOpts.minRotation);\n    const cosRotation = Math.cos(angle);\n    const sinRotation = Math.sin(angle);\n    const tickFontSize = this._resolveTickFontOptions(0).size;\n\n    return {\n      w: (tickLabelWidth * cosRotation) + (tickFontSize * sinRotation),\n      h: (tickLabelWidth * sinRotation) + (tickFontSize * cosRotation)\n    };\n  }\n\n  /**\n\t * @param {number} exampleTime\n\t * @return {number}\n\t * @private\n\t */\n  _getLabelCapacity(exampleTime) {\n    const timeOpts = this.options.time;\n    const displayFormats = timeOpts.displayFormats;\n\n    // pick the longest format (milliseconds) for guestimation\n    const format = displayFormats[timeOpts.unit] || displayFormats.millisecond;\n    const exampleLabel = this._tickFormatFunction(exampleTime, 0, ticksFromTimestamps(this, [exampleTime], this._majorUnit), format);\n    const size = this._getLabelSize(exampleLabel);\n    // subtract 1 - if offset then there's one less label than tick\n    // if not offset then one half label padding is added to each end leaving room for one less label\n    const capacity = Math.floor(this.isHorizontal() ? this.width / size.w : this.height / size.h) - 1;\n    return capacity > 0 ? capacity : 1;\n  }\n\n  /**\n\t * @protected\n\t */\n  getDataTimestamps() {\n    let timestamps = this._cache.data || [];\n    let i, ilen;\n\n    if (timestamps.length) {\n      return timestamps;\n    }\n\n    const metas = this.getMatchingVisibleMetas();\n\n    if (this._normalized && metas.length) {\n      return (this._cache.data = metas[0].controller.getAllParsedValues(this));\n    }\n\n    for (i = 0, ilen = metas.length; i < ilen; ++i) {\n      timestamps = timestamps.concat(metas[i].controller.getAllParsedValues(this));\n    }\n\n    return (this._cache.data = this.normalize(timestamps));\n  }\n\n  /**\n\t * @protected\n\t */\n  getLabelTimestamps() {\n    const timestamps = this._cache.labels || [];\n    let i, ilen;\n\n    if (timestamps.length) {\n      return timestamps;\n    }\n\n    const labels = this.getLabels();\n    for (i = 0, ilen = labels.length; i < ilen; ++i) {\n      timestamps.push(parse(this, labels[i]));\n    }\n\n    return (this._cache.labels = this._normalized ? timestamps : this.normalize(timestamps));\n  }\n\n  /**\n\t * @param {number[]} values\n\t * @protected\n\t */\n  normalize(values) {\n    // It seems to be somewhat faster to do sorting first\n    return _arrayUnique(values.sort(sorter));\n  }\n}\n","import TimeScale from './scale.time.js';\nimport {_lookupByKey} from '../helpers/helpers.collection.js';\n\n/**\n * Linearly interpolates the given source `val` using the table. If value is out of bounds, values\n * at edges are used for the interpolation.\n * @param {object} table\n * @param {number} val\n * @param {boolean} [reverse] lookup time based on position instead of vice versa\n * @return {object}\n */\nfunction interpolate(table, val, reverse) {\n  let lo = 0;\n  let hi = table.length - 1;\n  let prevSource, nextSource, prevTarget, nextTarget;\n  if (reverse) {\n    if (val >= table[lo].pos && val <= table[hi].pos) {\n      ({lo, hi} = _lookupByKey(table, 'pos', val));\n    }\n    ({pos: prevSource, time: prevTarget} = table[lo]);\n    ({pos: nextSource, time: nextTarget} = table[hi]);\n  } else {\n    if (val >= table[lo].time && val <= table[hi].time) {\n      ({lo, hi} = _lookupByKey(table, 'time', val));\n    }\n    ({time: prevSource, pos: prevTarget} = table[lo]);\n    ({time: nextSource, pos: nextTarget} = table[hi]);\n  }\n\n  const span = nextSource - prevSource;\n  return span ? prevTarget + (nextTarget - prevTarget) * (val - prevSource) / span : prevTarget;\n}\n\nclass TimeSeriesScale extends TimeScale {\n\n  static id = 'timeseries';\n\n  /**\n   * @type {any}\n   */\n  static defaults = TimeScale.defaults;\n\n  /**\n\t * @param {object} props\n\t */\n  constructor(props) {\n    super(props);\n\n    /** @type {object[]} */\n    this._table = [];\n    /** @type {number} */\n    this._minPos = undefined;\n    /** @type {number} */\n    this._tableRange = undefined;\n  }\n\n  /**\n\t * @protected\n\t */\n  initOffsets() {\n    const timestamps = this._getTimestampsForTable();\n    const table = this._table = this.buildLookupTable(timestamps);\n    this._minPos = interpolate(table, this.min);\n    this._tableRange = interpolate(table, this.max) - this._minPos;\n    super.initOffsets(timestamps);\n  }\n\n  /**\n\t * Returns an array of {time, pos} objects used to interpolate a specific `time` or position\n\t * (`pos`) on the scale, by searching entries before and after the requested value. `pos` is\n\t * a decimal between 0 and 1: 0 being the start of the scale (left or top) and 1 the other\n\t * extremity (left + width or top + height). Note that it would be more optimized to directly\n\t * store pre-computed pixels, but the scale dimensions are not guaranteed at the time we need\n\t * to create the lookup table. The table ALWAYS contains at least two items: min and max.\n\t * @param {number[]} timestamps\n\t * @return {object[]}\n\t * @protected\n\t */\n  buildLookupTable(timestamps) {\n    const {min, max} = this;\n    const items = [];\n    const table = [];\n    let i, ilen, prev, curr, next;\n\n    for (i = 0, ilen = timestamps.length; i < ilen; ++i) {\n      curr = timestamps[i];\n      if (curr >= min && curr <= max) {\n        items.push(curr);\n      }\n    }\n\n    if (items.length < 2) {\n      // In case there is less that 2 timestamps between min and max, the scale is defined by min and max\n      return [\n        {time: min, pos: 0},\n        {time: max, pos: 1}\n      ];\n    }\n\n    for (i = 0, ilen = items.length; i < ilen; ++i) {\n      next = items[i + 1];\n      prev = items[i - 1];\n      curr = items[i];\n\n      // only add points that breaks the scale linearity\n      if (Math.round((next + prev) / 2) !== curr) {\n        table.push({time: curr, pos: i / (ilen - 1)});\n      }\n    }\n    return table;\n  }\n\n  /**\n\t * Returns all timestamps\n\t * @return {number[]}\n\t * @private\n\t */\n  _getTimestampsForTable() {\n    let timestamps = this._cache.all || [];\n\n    if (timestamps.length) {\n      return timestamps;\n    }\n\n    const data = this.getDataTimestamps();\n    const label = this.getLabelTimestamps();\n    if (data.length && label.length) {\n      // If combining labels and data (data might not contain all labels),\n      // we need to recheck uniqueness and sort\n      timestamps = this.normalize(data.concat(label));\n    } else {\n      timestamps = data.length ? data : label;\n    }\n    timestamps = this._cache.all = timestamps;\n\n    return timestamps;\n  }\n\n  /**\n\t * @param {number} value - Milliseconds since epoch (1 January 1970 00:00:00 UTC)\n\t * @return {number}\n\t */\n  getDecimalForValue(value) {\n    return (interpolate(this._table, value) - this._minPos) / this._tableRange;\n  }\n\n  /**\n\t * @param {number} pixel\n\t * @return {number}\n\t */\n  getValueForPixel(pixel) {\n    const offsets = this._offsets;\n    const decimal = this.getDecimalForPixel(pixel) / offsets.factor - offsets.end;\n    return interpolate(this._table, decimal * this._tableRange + this._minPos, true);\n  }\n}\n\nexport default TimeSeriesScale;\n","// https://github.com/python/cpython/blob/a74eea238f5baba15797e2e8b570d153bc8690a7/Modules/mathmodule.c#L1423\nexport class Adder {\n  constructor() {\n    this._partials = new Float64Array(32);\n    this._n = 0;\n  }\n  add(x) {\n    const p = this._partials;\n    let i = 0;\n    for (let j = 0; j < this._n && j < 32; j++) {\n      const y = p[j],\n        hi = x + y,\n        lo = Math.abs(x) < Math.abs(y) ? x - (hi - y) : y - (hi - x);\n      if (lo) p[i++] = lo;\n      x = hi;\n    }\n    p[i] = x;\n    this._n = i + 1;\n    return this;\n  }\n  valueOf() {\n    const p = this._partials;\n    let n = this._n, x, y, lo, hi = 0;\n    if (n > 0) {\n      hi = p[--n];\n      while (n > 0) {\n        x = hi;\n        y = p[--n];\n        hi = x + y;\n        lo = y - (hi - x);\n        if (lo) break;\n      }\n      if (n > 0 && ((lo < 0 && p[n - 1] < 0) || (lo > 0 && p[n - 1] > 0))) {\n        y = lo * 2;\n        x = hi + y;\n        if (y == x - hi) hi = x;\n      }\n    }\n    return hi;\n  }\n}\n\nexport function fsum(values, valueof) {\n  const adder = new Adder();\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value = +value) {\n        adder.add(value);\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if (value = +valueof(value, ++index, values)) {\n        adder.add(value);\n      }\n    }\n  }\n  return +adder;\n}\n\nexport function fcumsum(values, valueof) {\n  const adder = new Adder();\n  let index = -1;\n  return Float64Array.from(values, valueof === undefined\n      ? v => adder.add(+v || 0)\n      : v => adder.add(+valueof(v, ++index, values) || 0)\n  );\n}\n","import {Adder} from \"d3-array\";\nimport {atan2, cos, quarterPi, radians, sin, tau} from \"./math.js\";\nimport noop from \"./noop.js\";\nimport stream from \"./stream.js\";\n\nexport var areaRingSum = new Adder();\n\n// hello?\n\nvar areaSum = new Adder(),\n    lambda00,\n    phi00,\n    lambda0,\n    cosPhi0,\n    sinPhi0;\n\nexport var areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaRingSum = new Adder();\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    var areaRing = +areaRingSum;\n    areaSum.add(areaRing < 0 ? tau + areaRing : areaRing);\n    this.lineStart = this.lineEnd = this.point = noop;\n  },\n  sphere: function() {\n    areaSum.add(tau);\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaRingEnd() {\n  areaPoint(lambda00, phi00);\n}\n\nfunction areaPointFirst(lambda, phi) {\n  areaStream.point = areaPoint;\n  lambda00 = lambda, phi00 = phi;\n  lambda *= radians, phi *= radians;\n  lambda0 = lambda, cosPhi0 = cos(phi = phi / 2 + quarterPi), sinPhi0 = sin(phi);\n}\n\nfunction areaPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  phi = phi / 2 + quarterPi; // half the angular distance from south pole\n\n  // Spherical excess E for a spherical triangle with vertices: south pole,\n  // previous point, current point.  Uses a formula derived from Cagnoli’s\n  // theorem.  See Todhunter, Spherical Trig. (1871), Sec. 103, Eq. (2).\n  var dLambda = lambda - lambda0,\n      sdLambda = dLambda >= 0 ? 1 : -1,\n      adLambda = sdLambda * dLambda,\n      cosPhi = cos(phi),\n      sinPhi = sin(phi),\n      k = sinPhi0 * sinPhi,\n      u = cosPhi0 * cosPhi + k * cos(adLambda),\n      v = k * sdLambda * sin(adLambda);\n  areaRingSum.add(atan2(v, u));\n\n  // Advance the previous points.\n  lambda0 = lambda, cosPhi0 = cosPhi, sinPhi0 = sinPhi;\n}\n\nexport default function(object) {\n  areaSum = new Adder();\n  stream(object, areaStream);\n  return areaSum * 2;\n}\n","import {asin, atan2, cos, sin, sqrt} from \"./math.js\";\n\nexport function spherical(cartesian) {\n  return [atan2(cartesian[1], cartesian[0]), asin(cartesian[2])];\n}\n\nexport function cartesian(spherical) {\n  var lambda = spherical[0], phi = spherical[1], cosPhi = cos(phi);\n  return [cosPhi * cos(lambda), cosPhi * sin(lambda), sin(phi)];\n}\n\nexport function cartesianDot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\nexport function cartesianCross(a, b) {\n  return [a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]];\n}\n\n// TODO return a\nexport function cartesianAddInPlace(a, b) {\n  a[0] += b[0], a[1] += b[1], a[2] += b[2];\n}\n\nexport function cartesianScale(vector, k) {\n  return [vector[0] * k, vector[1] * k, vector[2] * k];\n}\n\n// TODO return d\nexport function cartesianNormalizeInPlace(d) {\n  var l = sqrt(d[0] * d[0] + d[1] * d[1] + d[2] * d[2]);\n  d[0] /= l, d[1] /= l, d[2] /= l;\n}\n","export default x => x;\n","export var epsilon = 1e-6;\nexport var epsilon2 = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var quarterPi = pi / 4;\nexport var tau = pi * 2;\n\nexport var degrees = 180 / pi;\nexport var radians = pi / 180;\n\nexport var abs = Math.abs;\nexport var atan = Math.atan;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var ceil = Math.ceil;\nexport var exp = Math.exp;\nexport var floor = Math.floor;\nexport var hypot = Math.hypot;\nexport var log = Math.log;\nexport var pow = Math.pow;\nexport var sin = Math.sin;\nexport var sign = Math.sign || function(x) { return x > 0 ? 1 : x < 0 ? -1 : 0; };\nexport var sqrt = Math.sqrt;\nexport var tan = Math.tan;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x > 1 ? halfPi : x < -1 ? -halfPi : Math.asin(x);\n}\n\nexport function haversin(x) {\n  return (x = sin(x / 2)) * x;\n}\n","export default function noop() {}\n","import noop from \"../noop.js\";\n\nvar x0 = Infinity,\n    y0 = x0,\n    x1 = -x0,\n    y1 = x1;\n\nvar boundsStream = {\n  point: boundsPoint,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: noop,\n  polygonEnd: noop,\n  result: function() {\n    var bounds = [[x0, y0], [x1, y1]];\n    x1 = y1 = -(y0 = x0 = Infinity);\n    return bounds;\n  }\n};\n\nfunction boundsPoint(x, y) {\n  if (x < x0) x0 = x;\n  if (x > x1) x1 = x;\n  if (y < y0) y0 = y;\n  if (y > y1) y1 = y;\n}\n\nexport default boundsStream;\n","export default function(a, b) {\n\n  function compose(x, y) {\n    return x = a(x, y), b(x[0], x[1]);\n  }\n\n  if (a.invert && b.invert) compose.invert = function(x, y) {\n    return x = b.invert(x, y), x && a.invert(x[0], x[1]);\n  };\n\n  return compose;\n}\n","import compose from \"./compose.js\";\nimport {abs, asin, atan2, cos, degrees, pi, radians, sin, tau} from \"./math.js\";\n\nfunction rotationIdentity(lambda, phi) {\n  if (abs(lambda) > pi) lambda -= Math.round(lambda / tau) * tau;\n  return [lambda, phi];\n}\n\nrotationIdentity.invert = rotationIdentity;\n\nexport function rotateRadians(deltaLambda, deltaPhi, deltaGamma) {\n  return (deltaLambda %= tau) ? (deltaPhi || deltaGamma ? compose(rotationLambda(deltaLambda), rotationPhiGamma(deltaPhi, deltaGamma))\n    : rotationLambda(deltaLambda))\n    : (deltaPhi || deltaGamma ? rotationPhiGamma(deltaPhi, deltaGamma)\n    : rotationIdentity);\n}\n\nfunction forwardRotationLambda(deltaLambda) {\n  return function(lambda, phi) {\n    lambda += deltaLambda;\n    if (abs(lambda) > pi) lambda -= Math.round(lambda / tau) * tau;\n    return [lambda, phi];\n  };\n}\n\nfunction rotationLambda(deltaLambda) {\n  var rotation = forwardRotationLambda(deltaLambda);\n  rotation.invert = forwardRotationLambda(-deltaLambda);\n  return rotation;\n}\n\nfunction rotationPhiGamma(deltaPhi, deltaGamma) {\n  var cosDeltaPhi = cos(deltaPhi),\n      sinDeltaPhi = sin(deltaPhi),\n      cosDeltaGamma = cos(deltaGamma),\n      sinDeltaGamma = sin(deltaGamma);\n\n  function rotation(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaPhi + x * sinDeltaPhi;\n    return [\n      atan2(y * cosDeltaGamma - k * sinDeltaGamma, x * cosDeltaPhi - z * sinDeltaPhi),\n      asin(k * cosDeltaGamma + y * sinDeltaGamma)\n    ];\n  }\n\n  rotation.invert = function(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaGamma - y * sinDeltaGamma;\n    return [\n      atan2(y * cosDeltaGamma + z * sinDeltaGamma, x * cosDeltaPhi + k * sinDeltaPhi),\n      asin(k * cosDeltaPhi - x * sinDeltaPhi)\n    ];\n  };\n\n  return rotation;\n}\n\nexport default function(rotate) {\n  rotate = rotateRadians(rotate[0] * radians, rotate[1] * radians, rotate.length > 2 ? rotate[2] * radians : 0);\n\n  function forward(coordinates) {\n    coordinates = rotate(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  }\n\n  forward.invert = function(coordinates) {\n    coordinates = rotate.invert(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  };\n\n  return forward;\n}\n","import noop from \"../noop.js\";\n\nexport default function() {\n  var lines = [],\n      line;\n  return {\n    point: function(x, y, m) {\n      line.push([x, y, m]);\n    },\n    lineStart: function() {\n      lines.push(line = []);\n    },\n    lineEnd: noop,\n    rejoin: function() {\n      if (lines.length > 1) lines.push(lines.pop().concat(lines.shift()));\n    },\n    result: function() {\n      var result = lines;\n      lines = [];\n      line = null;\n      return result;\n    }\n  };\n}\n","import {abs, epsilon} from \"./math.js\";\n\nexport default function(a, b) {\n  return abs(a[0] - b[0]) < epsilon && abs(a[1] - b[1]) < epsilon;\n}\n","import pointEqual from \"../pointEqual.js\";\nimport {epsilon} from \"../math.js\";\n\nfunction Intersection(point, points, other, entry) {\n  this.x = point;\n  this.z = points;\n  this.o = other; // another intersection\n  this.e = entry; // is an entry?\n  this.v = false; // visited\n  this.n = this.p = null; // next & previous\n}\n\n// A generalized polygon clipping algorithm: given a polygon that has been cut\n// into its visible line segments, and rejoins the segments by interpolating\n// along the clip edge.\nexport default function(segments, compareIntersection, startInside, interpolate, stream) {\n  var subject = [],\n      clip = [],\n      i,\n      n;\n\n  segments.forEach(function(segment) {\n    if ((n = segment.length - 1) <= 0) return;\n    var n, p0 = segment[0], p1 = segment[n], x;\n\n    if (pointEqual(p0, p1)) {\n      if (!p0[2] && !p1[2]) {\n        stream.lineStart();\n        for (i = 0; i < n; ++i) stream.point((p0 = segment[i])[0], p0[1]);\n        stream.lineEnd();\n        return;\n      }\n      // handle degenerate cases by moving the point\n      p1[0] += 2 * epsilon;\n    }\n\n    subject.push(x = new Intersection(p0, segment, null, true));\n    clip.push(x.o = new Intersection(p0, null, x, false));\n    subject.push(x = new Intersection(p1, segment, null, false));\n    clip.push(x.o = new Intersection(p1, null, x, true));\n  });\n\n  if (!subject.length) return;\n\n  clip.sort(compareIntersection);\n  link(subject);\n  link(clip);\n\n  for (i = 0, n = clip.length; i < n; ++i) {\n    clip[i].e = startInside = !startInside;\n  }\n\n  var start = subject[0],\n      points,\n      point;\n\n  while (1) {\n    // Find first unvisited intersection.\n    var current = start,\n        isSubject = true;\n    while (current.v) if ((current = current.n) === start) return;\n    points = current.z;\n    stream.lineStart();\n    do {\n      current.v = current.o.v = true;\n      if (current.e) {\n        if (isSubject) {\n          for (i = 0, n = points.length; i < n; ++i) stream.point((point = points[i])[0], point[1]);\n        } else {\n          interpolate(current.x, current.n.x, 1, stream);\n        }\n        current = current.n;\n      } else {\n        if (isSubject) {\n          points = current.p.z;\n          for (i = points.length - 1; i >= 0; --i) stream.point((point = points[i])[0], point[1]);\n        } else {\n          interpolate(current.x, current.p.x, -1, stream);\n        }\n        current = current.p;\n      }\n      current = current.o;\n      points = current.z;\n      isSubject = !isSubject;\n    } while (!current.v);\n    stream.lineEnd();\n  }\n}\n\nfunction link(array) {\n  if (!(n = array.length)) return;\n  var n,\n      i = 0,\n      a = array[0],\n      b;\n  while (++i < n) {\n    a.n = b = array[i];\n    b.p = a;\n    a = b;\n  }\n  a.n = b = array[0];\n  b.p = a;\n}\n","import {Adder} from \"d3-array\";\nimport {cartesian, cartesianCross, cartesianNormalizeInPlace} from \"./cartesian.js\";\nimport {abs, asin, atan2, cos, epsilon, epsilon2, halfPi, pi, quarterPi, sign, sin, tau} from \"./math.js\";\n\nfunction longitude(point) {\n  return abs(point[0]) <= pi ? point[0] : sign(point[0]) * ((abs(point[0]) + pi) % tau - pi);\n}\n\nexport default function(polygon, point) {\n  var lambda = longitude(point),\n      phi = point[1],\n      sinPhi = sin(phi),\n      normal = [sin(lambda), -cos(lambda), 0],\n      angle = 0,\n      winding = 0;\n\n  var sum = new Adder();\n\n  if (sinPhi === 1) phi = halfPi + epsilon;\n  else if (sinPhi === -1) phi = -halfPi - epsilon;\n\n  for (var i = 0, n = polygon.length; i < n; ++i) {\n    if (!(m = (ring = polygon[i]).length)) continue;\n    var ring,\n        m,\n        point0 = ring[m - 1],\n        lambda0 = longitude(point0),\n        phi0 = point0[1] / 2 + quarterPi,\n        sinPhi0 = sin(phi0),\n        cosPhi0 = cos(phi0);\n\n    for (var j = 0; j < m; ++j, lambda0 = lambda1, sinPhi0 = sinPhi1, cosPhi0 = cosPhi1, point0 = point1) {\n      var point1 = ring[j],\n          lambda1 = longitude(point1),\n          phi1 = point1[1] / 2 + quarterPi,\n          sinPhi1 = sin(phi1),\n          cosPhi1 = cos(phi1),\n          delta = lambda1 - lambda0,\n          sign = delta >= 0 ? 1 : -1,\n          absDelta = sign * delta,\n          antimeridian = absDelta > pi,\n          k = sinPhi0 * sinPhi1;\n\n      sum.add(atan2(k * sign * sin(absDelta), cosPhi0 * cosPhi1 + k * cos(absDelta)));\n      angle += antimeridian ? delta + sign * tau : delta;\n\n      // Are the longitudes either side of the point’s meridian (lambda),\n      // and are the latitudes smaller than the parallel (phi)?\n      if (antimeridian ^ lambda0 >= lambda ^ lambda1 >= lambda) {\n        var arc = cartesianCross(cartesian(point0), cartesian(point1));\n        cartesianNormalizeInPlace(arc);\n        var intersection = cartesianCross(normal, arc);\n        cartesianNormalizeInPlace(intersection);\n        var phiArc = (antimeridian ^ delta >= 0 ? -1 : 1) * asin(intersection[2]);\n        if (phi > phiArc || phi === phiArc && (arc[0] || arc[1])) {\n          winding += antimeridian ^ delta >= 0 ? 1 : -1;\n        }\n      }\n    }\n  }\n\n  // First, determine whether the South pole is inside or outside:\n  //\n  // It is inside if:\n  // * the polygon winds around it in a clockwise direction.\n  // * the polygon does not (cumulatively) wind around it, but has a negative\n  //   (counter-clockwise) area.\n  //\n  // Second, count the (signed) number of times a segment crosses a lambda\n  // from the point to the South pole.  If it is zero, then the point is the\n  // same side as the South pole.\n\n  return (angle < -epsilon || angle < epsilon && sum < -epsilon2) ^ (winding & 1);\n}\n","function* flatten(arrays) {\n  for (const array of arrays) {\n    yield* array;\n  }\n}\n\nexport default function merge(arrays) {\n  return Array.from(flatten(arrays));\n}\n","import clipBuffer from \"./buffer.js\";\nimport clipRejoin from \"./rejoin.js\";\nimport {epsilon, halfPi} from \"../math.js\";\nimport polygonContains from \"../polygonContains.js\";\nimport {merge} from \"d3-array\";\n\nexport default function(pointVisible, clipLine, interpolate, start) {\n  return function(sink) {\n    var line = clipLine(sink),\n        ringBuffer = clipBuffer(),\n        ringSink = clipLine(ringBuffer),\n        polygonStarted = false,\n        polygon,\n        segments,\n        ring;\n\n    var clip = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() {\n        clip.point = pointRing;\n        clip.lineStart = ringStart;\n        clip.lineEnd = ringEnd;\n        segments = [];\n        polygon = [];\n      },\n      polygonEnd: function() {\n        clip.point = point;\n        clip.lineStart = lineStart;\n        clip.lineEnd = lineEnd;\n        segments = merge(segments);\n        var startInside = polygonContains(polygon, start);\n        if (segments.length) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          clipRejoin(segments, compareIntersection, startInside, interpolate, sink);\n        } else if (startInside) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n          interpolate(null, null, 1, sink);\n          sink.lineEnd();\n        }\n        if (polygonStarted) sink.polygonEnd(), polygonStarted = false;\n        segments = polygon = null;\n      },\n      sphere: function() {\n        sink.polygonStart();\n        sink.lineStart();\n        interpolate(null, null, 1, sink);\n        sink.lineEnd();\n        sink.polygonEnd();\n      }\n    };\n\n    function point(lambda, phi) {\n      if (pointVisible(lambda, phi)) sink.point(lambda, phi);\n    }\n\n    function pointLine(lambda, phi) {\n      line.point(lambda, phi);\n    }\n\n    function lineStart() {\n      clip.point = pointLine;\n      line.lineStart();\n    }\n\n    function lineEnd() {\n      clip.point = point;\n      line.lineEnd();\n    }\n\n    function pointRing(lambda, phi) {\n      ring.push([lambda, phi]);\n      ringSink.point(lambda, phi);\n    }\n\n    function ringStart() {\n      ringSink.lineStart();\n      ring = [];\n    }\n\n    function ringEnd() {\n      pointRing(ring[0][0], ring[0][1]);\n      ringSink.lineEnd();\n\n      var clean = ringSink.clean(),\n          ringSegments = ringBuffer.result(),\n          i, n = ringSegments.length, m,\n          segment,\n          point;\n\n      ring.pop();\n      polygon.push(ring);\n      ring = null;\n\n      if (!n) return;\n\n      // No intersections.\n      if (clean & 1) {\n        segment = ringSegments[0];\n        if ((m = segment.length - 1) > 0) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n          for (i = 0; i < m; ++i) sink.point((point = segment[i])[0], point[1]);\n          sink.lineEnd();\n        }\n        return;\n      }\n\n      // Rejoin connected segments.\n      // TODO reuse ringBuffer.rejoin()?\n      if (n > 1 && clean & 2) ringSegments.push(ringSegments.pop().concat(ringSegments.shift()));\n\n      segments.push(ringSegments.filter(validSegment));\n    }\n\n    return clip;\n  };\n}\n\nfunction validSegment(segment) {\n  return segment.length > 1;\n}\n\n// Intersections are sorted along the clip edge. For both antimeridian cutting\n// and circle clipping, the same comparison is used.\nfunction compareIntersection(a, b) {\n  return ((a = a.x)[0] < 0 ? a[1] - halfPi - epsilon : halfPi - a[1])\n       - ((b = b.x)[0] < 0 ? b[1] - halfPi - epsilon : halfPi - b[1]);\n}\n","import clip from \"./index.js\";\nimport {abs, atan, cos, epsilon, halfPi, pi, sin} from \"../math.js\";\n\nexport default clip(\n  function() { return true; },\n  clipAntimeridianLine,\n  clipAntimeridianInterpolate,\n  [-pi, -halfPi]\n);\n\n// Takes a line and cuts into visible segments. Return values: 0 - there were\n// intersections or the line was empty; 1 - no intersections; 2 - there were\n// intersections, and the first and last segments should be rejoined.\nfunction clipAntimeridianLine(stream) {\n  var lambda0 = NaN,\n      phi0 = NaN,\n      sign0 = NaN,\n      clean; // no intersections\n\n  return {\n    lineStart: function() {\n      stream.lineStart();\n      clean = 1;\n    },\n    point: function(lambda1, phi1) {\n      var sign1 = lambda1 > 0 ? pi : -pi,\n          delta = abs(lambda1 - lambda0);\n      if (abs(delta - pi) < epsilon) { // line crosses a pole\n        stream.point(lambda0, phi0 = (phi0 + phi1) / 2 > 0 ? halfPi : -halfPi);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        stream.point(lambda1, phi0);\n        clean = 0;\n      } else if (sign0 !== sign1 && delta >= pi) { // line crosses antimeridian\n        if (abs(lambda0 - sign0) < epsilon) lambda0 -= sign0 * epsilon; // handle degeneracies\n        if (abs(lambda1 - sign1) < epsilon) lambda1 -= sign1 * epsilon;\n        phi0 = clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        clean = 0;\n      }\n      stream.point(lambda0 = lambda1, phi0 = phi1);\n      sign0 = sign1;\n    },\n    lineEnd: function() {\n      stream.lineEnd();\n      lambda0 = phi0 = NaN;\n    },\n    clean: function() {\n      return 2 - clean; // if intersections, rejoin first and last segments\n    }\n  };\n}\n\nfunction clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1) {\n  var cosPhi0,\n      cosPhi1,\n      sinLambda0Lambda1 = sin(lambda0 - lambda1);\n  return abs(sinLambda0Lambda1) > epsilon\n      ? atan((sin(phi0) * (cosPhi1 = cos(phi1)) * sin(lambda1)\n          - sin(phi1) * (cosPhi0 = cos(phi0)) * sin(lambda0))\n          / (cosPhi0 * cosPhi1 * sinLambda0Lambda1))\n      : (phi0 + phi1) / 2;\n}\n\nfunction clipAntimeridianInterpolate(from, to, direction, stream) {\n  var phi;\n  if (from == null) {\n    phi = direction * halfPi;\n    stream.point(-pi, phi);\n    stream.point(0, phi);\n    stream.point(pi, phi);\n    stream.point(pi, 0);\n    stream.point(pi, -phi);\n    stream.point(0, -phi);\n    stream.point(-pi, -phi);\n    stream.point(-pi, 0);\n    stream.point(-pi, phi);\n  } else if (abs(from[0] - to[0]) > epsilon) {\n    var lambda = from[0] < to[0] ? pi : -pi;\n    phi = direction * lambda / 2;\n    stream.point(-lambda, phi);\n    stream.point(0, phi);\n    stream.point(lambda, phi);\n  } else {\n    stream.point(to[0], to[1]);\n  }\n}\n","import {cartesian, cartesianNormalizeInPlace, spherical} from \"./cartesian.js\";\nimport constant from \"./constant.js\";\nimport {acos, cos, degrees, epsilon, radians, sin, tau} from \"./math.js\";\nimport {rotateRadians} from \"./rotation.js\";\n\n// Generates a circle centered at [0°, 0°], with a given radius and precision.\nexport function circleStream(stream, radius, delta, direction, t0, t1) {\n  if (!delta) return;\n  var cosRadius = cos(radius),\n      sinRadius = sin(radius),\n      step = direction * delta;\n  if (t0 == null) {\n    t0 = radius + direction * tau;\n    t1 = radius - step / 2;\n  } else {\n    t0 = circleRadius(cosRadius, t0);\n    t1 = circleRadius(cosRadius, t1);\n    if (direction > 0 ? t0 < t1 : t0 > t1) t0 += direction * tau;\n  }\n  for (var point, t = t0; direction > 0 ? t > t1 : t < t1; t -= step) {\n    point = spherical([cosRadius, -sinRadius * cos(t), -sinRadius * sin(t)]);\n    stream.point(point[0], point[1]);\n  }\n}\n\n// Returns the signed angle of a cartesian point relative to [cosRadius, 0, 0].\nfunction circleRadius(cosRadius, point) {\n  point = cartesian(point), point[0] -= cosRadius;\n  cartesianNormalizeInPlace(point);\n  var radius = acos(-point[1]);\n  return ((-point[2] < 0 ? -radius : radius) + tau - epsilon) % tau;\n}\n\nexport default function() {\n  var center = constant([0, 0]),\n      radius = constant(90),\n      precision = constant(6),\n      ring,\n      rotate,\n      stream = {point: point};\n\n  function point(x, y) {\n    ring.push(x = rotate(x, y));\n    x[0] *= degrees, x[1] *= degrees;\n  }\n\n  function circle() {\n    var c = center.apply(this, arguments),\n        r = radius.apply(this, arguments) * radians,\n        p = precision.apply(this, arguments) * radians;\n    ring = [];\n    rotate = rotateRadians(-c[0] * radians, -c[1] * radians, 0).invert;\n    circleStream(stream, r, p, 1);\n    c = {type: \"Polygon\", coordinates: [ring]};\n    ring = rotate = null;\n    return c;\n  }\n\n  circle.center = function(_) {\n    return arguments.length ? (center = typeof _ === \"function\" ? _ : constant([+_[0], +_[1]]), circle) : center;\n  };\n\n  circle.radius = function(_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), circle) : radius;\n  };\n\n  circle.precision = function(_) {\n    return arguments.length ? (precision = typeof _ === \"function\" ? _ : constant(+_), circle) : precision;\n  };\n\n  return circle;\n}\n","import {abs, epsilon} from \"../math.js\";\nimport clipBuffer from \"./buffer.js\";\nimport clipLine from \"./line.js\";\nimport clipRejoin from \"./rejoin.js\";\nimport {merge} from \"d3-array\";\n\nvar clipMax = 1e9, clipMin = -clipMax;\n\n// TODO Use d3-polygon’s polygonContains here for the ring check?\n// TODO Eliminate duplicate buffering in clipBuffer and polygon.push?\n\nexport default function clipRectangle(x0, y0, x1, y1) {\n\n  function visible(x, y) {\n    return x0 <= x && x <= x1 && y0 <= y && y <= y1;\n  }\n\n  function interpolate(from, to, direction, stream) {\n    var a = 0, a1 = 0;\n    if (from == null\n        || (a = corner(from, direction)) !== (a1 = corner(to, direction))\n        || comparePoint(from, to) < 0 ^ direction > 0) {\n      do stream.point(a === 0 || a === 3 ? x0 : x1, a > 1 ? y1 : y0);\n      while ((a = (a + direction + 4) % 4) !== a1);\n    } else {\n      stream.point(to[0], to[1]);\n    }\n  }\n\n  function corner(p, direction) {\n    return abs(p[0] - x0) < epsilon ? direction > 0 ? 0 : 3\n        : abs(p[0] - x1) < epsilon ? direction > 0 ? 2 : 1\n        : abs(p[1] - y0) < epsilon ? direction > 0 ? 1 : 0\n        : direction > 0 ? 3 : 2; // abs(p[1] - y1) < epsilon\n  }\n\n  function compareIntersection(a, b) {\n    return comparePoint(a.x, b.x);\n  }\n\n  function comparePoint(a, b) {\n    var ca = corner(a, 1),\n        cb = corner(b, 1);\n    return ca !== cb ? ca - cb\n        : ca === 0 ? b[1] - a[1]\n        : ca === 1 ? a[0] - b[0]\n        : ca === 2 ? a[1] - b[1]\n        : b[0] - a[0];\n  }\n\n  return function(stream) {\n    var activeStream = stream,\n        bufferStream = clipBuffer(),\n        segments,\n        polygon,\n        ring,\n        x__, y__, v__, // first point\n        x_, y_, v_, // previous point\n        first,\n        clean;\n\n    var clipStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: polygonStart,\n      polygonEnd: polygonEnd\n    };\n\n    function point(x, y) {\n      if (visible(x, y)) activeStream.point(x, y);\n    }\n\n    function polygonInside() {\n      var winding = 0;\n\n      for (var i = 0, n = polygon.length; i < n; ++i) {\n        for (var ring = polygon[i], j = 1, m = ring.length, point = ring[0], a0, a1, b0 = point[0], b1 = point[1]; j < m; ++j) {\n          a0 = b0, a1 = b1, point = ring[j], b0 = point[0], b1 = point[1];\n          if (a1 <= y1) { if (b1 > y1 && (b0 - a0) * (y1 - a1) > (b1 - a1) * (x0 - a0)) ++winding; }\n          else { if (b1 <= y1 && (b0 - a0) * (y1 - a1) < (b1 - a1) * (x0 - a0)) --winding; }\n        }\n      }\n\n      return winding;\n    }\n\n    // Buffer geometry within a polygon and then clip it en masse.\n    function polygonStart() {\n      activeStream = bufferStream, segments = [], polygon = [], clean = true;\n    }\n\n    function polygonEnd() {\n      var startInside = polygonInside(),\n          cleanInside = clean && startInside,\n          visible = (segments = merge(segments)).length;\n      if (cleanInside || visible) {\n        stream.polygonStart();\n        if (cleanInside) {\n          stream.lineStart();\n          interpolate(null, null, 1, stream);\n          stream.lineEnd();\n        }\n        if (visible) {\n          clipRejoin(segments, compareIntersection, startInside, interpolate, stream);\n        }\n        stream.polygonEnd();\n      }\n      activeStream = stream, segments = polygon = ring = null;\n    }\n\n    function lineStart() {\n      clipStream.point = linePoint;\n      if (polygon) polygon.push(ring = []);\n      first = true;\n      v_ = false;\n      x_ = y_ = NaN;\n    }\n\n    // TODO rather than special-case polygons, simply handle them separately.\n    // Ideally, coincident intersection points should be jittered to avoid\n    // clipping issues.\n    function lineEnd() {\n      if (segments) {\n        linePoint(x__, y__);\n        if (v__ && v_) bufferStream.rejoin();\n        segments.push(bufferStream.result());\n      }\n      clipStream.point = point;\n      if (v_) activeStream.lineEnd();\n    }\n\n    function linePoint(x, y) {\n      var v = visible(x, y);\n      if (polygon) ring.push([x, y]);\n      if (first) {\n        x__ = x, y__ = y, v__ = v;\n        first = false;\n        if (v) {\n          activeStream.lineStart();\n          activeStream.point(x, y);\n        }\n      } else {\n        if (v && v_) activeStream.point(x, y);\n        else {\n          var a = [x_ = Math.max(clipMin, Math.min(clipMax, x_)), y_ = Math.max(clipMin, Math.min(clipMax, y_))],\n              b = [x = Math.max(clipMin, Math.min(clipMax, x)), y = Math.max(clipMin, Math.min(clipMax, y))];\n          if (clipLine(a, b, x0, y0, x1, y1)) {\n            if (!v_) {\n              activeStream.lineStart();\n              activeStream.point(a[0], a[1]);\n            }\n            activeStream.point(b[0], b[1]);\n            if (!v) activeStream.lineEnd();\n            clean = false;\n          } else if (v) {\n            activeStream.lineStart();\n            activeStream.point(x, y);\n            clean = false;\n          }\n        }\n      }\n      x_ = x, y_ = y, v_ = v;\n    }\n\n    return clipStream;\n  };\n}\n","export default function(a, b, x0, y0, x1, y1) {\n  var ax = a[0],\n      ay = a[1],\n      bx = b[0],\n      by = b[1],\n      t0 = 0,\n      t1 = 1,\n      dx = bx - ax,\n      dy = by - ay,\n      r;\n\n  r = x0 - ax;\n  if (!dx && r > 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dx > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = x1 - ax;\n  if (!dx && r < 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dx > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  r = y0 - ay;\n  if (!dy && r > 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dy > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = y1 - ay;\n  if (!dy && r < 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dy > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  if (t0 > 0) a[0] = ax + t0 * dx, a[1] = ay + t0 * dy;\n  if (t1 < 1) b[0] = ax + t1 * dx, b[1] = ay + t1 * dy;\n  return true;\n}\n","export default function(methods) {\n  return {\n    stream: transformer(methods)\n  };\n}\n\nexport function transformer(methods) {\n  return function(stream) {\n    var s = new TransformStream;\n    for (var key in methods) s[key] = methods[key];\n    s.stream = stream;\n    return s;\n  };\n}\n\nfunction TransformStream() {}\n\nTransformStream.prototype = {\n  constructor: TransformStream,\n  point: function(x, y) { this.stream.point(x, y); },\n  sphere: function() { this.stream.sphere(); },\n  lineStart: function() { this.stream.lineStart(); },\n  lineEnd: function() { this.stream.lineEnd(); },\n  polygonStart: function() { this.stream.polygonStart(); },\n  polygonEnd: function() { this.stream.polygonEnd(); }\n};\n","import {default as geoStream} from \"../stream.js\";\nimport boundsStream from \"../path/bounds.js\";\n\nfunction fit(projection, fitBounds, object) {\n  var clip = projection.clipExtent && projection.clipExtent();\n  projection.scale(150).translate([0, 0]);\n  if (clip != null) projection.clipExtent(null);\n  geoStream(object, projection.stream(boundsStream));\n  fitBounds(boundsStream.result());\n  if (clip != null) projection.clipExtent(clip);\n  return projection;\n}\n\nexport function fitExtent(projection, extent, object) {\n  return fit(projection, function(b) {\n    var w = extent[1][0] - extent[0][0],\n        h = extent[1][1] - extent[0][1],\n        k = Math.min(w / (b[1][0] - b[0][0]), h / (b[1][1] - b[0][1])),\n        x = +extent[0][0] + (w - k * (b[1][0] + b[0][0])) / 2,\n        y = +extent[0][1] + (h - k * (b[1][1] + b[0][1])) / 2;\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n\nexport function fitSize(projection, size, object) {\n  return fitExtent(projection, [[0, 0], size], object);\n}\n\nexport function fitWidth(projection, width, object) {\n  return fit(projection, function(b) {\n    var w = +width,\n        k = w / (b[1][0] - b[0][0]),\n        x = (w - k * (b[1][0] + b[0][0])) / 2,\n        y = -k * b[0][1];\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n\nexport function fitHeight(projection, height, object) {\n  return fit(projection, function(b) {\n    var h = +height,\n        k = h / (b[1][1] - b[0][1]),\n        x = -k * b[0][0],\n        y = (h - k * (b[1][1] + b[0][1])) / 2;\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n","import {cartesian} from \"../cartesian.js\";\nimport {abs, asin, atan2, cos, epsilon, radians, sqrt} from \"../math.js\";\nimport {transformer} from \"../transform.js\";\n\nvar maxDepth = 16, // maximum depth of subdivision\n    cosMinDistance = cos(30 * radians); // cos(minimum angular distance)\n\nexport default function(project, delta2) {\n  return +delta2 ? resample(project, delta2) : resampleNone(project);\n}\n\nfunction resampleNone(project) {\n  return transformer({\n    point: function(x, y) {\n      x = project(x, y);\n      this.stream.point(x[0], x[1]);\n    }\n  });\n}\n\nfunction resample(project, delta2) {\n\n  function resampleLineTo(x0, y0, lambda0, a0, b0, c0, x1, y1, lambda1, a1, b1, c1, depth, stream) {\n    var dx = x1 - x0,\n        dy = y1 - y0,\n        d2 = dx * dx + dy * dy;\n    if (d2 > 4 * delta2 && depth--) {\n      var a = a0 + a1,\n          b = b0 + b1,\n          c = c0 + c1,\n          m = sqrt(a * a + b * b + c * c),\n          phi2 = asin(c /= m),\n          lambda2 = abs(abs(c) - 1) < epsilon || abs(lambda0 - lambda1) < epsilon ? (lambda0 + lambda1) / 2 : atan2(b, a),\n          p = project(lambda2, phi2),\n          x2 = p[0],\n          y2 = p[1],\n          dx2 = x2 - x0,\n          dy2 = y2 - y0,\n          dz = dy * dx2 - dx * dy2;\n      if (dz * dz / d2 > delta2 // perpendicular projected distance\n          || abs((dx * dx2 + dy * dy2) / d2 - 0.5) > 0.3 // midpoint close to an end\n          || a0 * a1 + b0 * b1 + c0 * c1 < cosMinDistance) { // angular distance\n        resampleLineTo(x0, y0, lambda0, a0, b0, c0, x2, y2, lambda2, a /= m, b /= m, c, depth, stream);\n        stream.point(x2, y2);\n        resampleLineTo(x2, y2, lambda2, a, b, c, x1, y1, lambda1, a1, b1, c1, depth, stream);\n      }\n    }\n  }\n  return function(stream) {\n    var lambda00, x00, y00, a00, b00, c00, // first point\n        lambda0, x0, y0, a0, b0, c0; // previous point\n\n    var resampleStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() { stream.polygonStart(); resampleStream.lineStart = ringStart; },\n      polygonEnd: function() { stream.polygonEnd(); resampleStream.lineStart = lineStart; }\n    };\n\n    function point(x, y) {\n      x = project(x, y);\n      stream.point(x[0], x[1]);\n    }\n\n    function lineStart() {\n      x0 = NaN;\n      resampleStream.point = linePoint;\n      stream.lineStart();\n    }\n\n    function linePoint(lambda, phi) {\n      var c = cartesian([lambda, phi]), p = project(lambda, phi);\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x0 = p[0], y0 = p[1], lambda0 = lambda, a0 = c[0], b0 = c[1], c0 = c[2], maxDepth, stream);\n      stream.point(x0, y0);\n    }\n\n    function lineEnd() {\n      resampleStream.point = point;\n      stream.lineEnd();\n    }\n\n    function ringStart() {\n      lineStart();\n      resampleStream.point = ringPoint;\n      resampleStream.lineEnd = ringEnd;\n    }\n\n    function ringPoint(lambda, phi) {\n      linePoint(lambda00 = lambda, phi), x00 = x0, y00 = y0, a00 = a0, b00 = b0, c00 = c0;\n      resampleStream.point = linePoint;\n    }\n\n    function ringEnd() {\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x00, y00, lambda00, a00, b00, c00, maxDepth, stream);\n      resampleStream.lineEnd = lineEnd;\n      lineEnd();\n    }\n\n    return resampleStream;\n  };\n}\n","import clipAntimeridian from \"../clip/antimeridian.js\";\nimport clipCircle from \"../clip/circle.js\";\nimport clipRectangle from \"../clip/rectangle.js\";\nimport compose from \"../compose.js\";\nimport identity from \"../identity.js\";\nimport {cos, degrees, radians, sin, sqrt} from \"../math.js\";\nimport {rotateRadians} from \"../rotation.js\";\nimport {transformer} from \"../transform.js\";\nimport {fitExtent, fitSize, fitWidth, fitHeight} from \"./fit.js\";\nimport resample from \"./resample.js\";\n\nvar transformRadians = transformer({\n  point: function(x, y) {\n    this.stream.point(x * radians, y * radians);\n  }\n});\n\nfunction transformRotate(rotate) {\n  return transformer({\n    point: function(x, y) {\n      var r = rotate(x, y);\n      return this.stream.point(r[0], r[1]);\n    }\n  });\n}\n\nfunction scaleTranslate(k, dx, dy, sx, sy) {\n  function transform(x, y) {\n    x *= sx; y *= sy;\n    return [dx + k * x, dy - k * y];\n  }\n  transform.invert = function(x, y) {\n    return [(x - dx) / k * sx, (dy - y) / k * sy];\n  };\n  return transform;\n}\n\nfunction scaleTranslateRotate(k, dx, dy, sx, sy, alpha) {\n  if (!alpha) return scaleTranslate(k, dx, dy, sx, sy);\n  var cosAlpha = cos(alpha),\n      sinAlpha = sin(alpha),\n      a = cosAlpha * k,\n      b = sinAlpha * k,\n      ai = cosAlpha / k,\n      bi = sinAlpha / k,\n      ci = (sinAlpha * dy - cosAlpha * dx) / k,\n      fi = (sinAlpha * dx + cosAlpha * dy) / k;\n  function transform(x, y) {\n    x *= sx; y *= sy;\n    return [a * x - b * y + dx, dy - b * x - a * y];\n  }\n  transform.invert = function(x, y) {\n    return [sx * (ai * x - bi * y + ci), sy * (fi - bi * x - ai * y)];\n  };\n  return transform;\n}\n\nexport default function projection(project) {\n  return projectionMutator(function() { return project; })();\n}\n\nexport function projectionMutator(projectAt) {\n  var project,\n      k = 150, // scale\n      x = 480, y = 250, // translate\n      lambda = 0, phi = 0, // center\n      deltaLambda = 0, deltaPhi = 0, deltaGamma = 0, rotate, // pre-rotate\n      alpha = 0, // post-rotate angle\n      sx = 1, // reflectX\n      sy = 1, // reflectX\n      theta = null, preclip = clipAntimeridian, // pre-clip angle\n      x0 = null, y0, x1, y1, postclip = identity, // post-clip extent\n      delta2 = 0.5, // precision\n      projectResample,\n      projectTransform,\n      projectRotateTransform,\n      cache,\n      cacheStream;\n\n  function projection(point) {\n    return projectRotateTransform(point[0] * radians, point[1] * radians);\n  }\n\n  function invert(point) {\n    point = projectRotateTransform.invert(point[0], point[1]);\n    return point && [point[0] * degrees, point[1] * degrees];\n  }\n\n  projection.stream = function(stream) {\n    return cache && cacheStream === stream ? cache : cache = transformRadians(transformRotate(rotate)(preclip(projectResample(postclip(cacheStream = stream)))));\n  };\n\n  projection.preclip = function(_) {\n    return arguments.length ? (preclip = _, theta = undefined, reset()) : preclip;\n  };\n\n  projection.postclip = function(_) {\n    return arguments.length ? (postclip = _, x0 = y0 = x1 = y1 = null, reset()) : postclip;\n  };\n\n  projection.clipAngle = function(_) {\n    return arguments.length ? (preclip = +_ ? clipCircle(theta = _ * radians) : (theta = null, clipAntimeridian), reset()) : theta * degrees;\n  };\n\n  projection.clipExtent = function(_) {\n    return arguments.length ? (postclip = _ == null ? (x0 = y0 = x1 = y1 = null, identity) : clipRectangle(x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1]), reset()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n\n  projection.scale = function(_) {\n    return arguments.length ? (k = +_, recenter()) : k;\n  };\n\n  projection.translate = function(_) {\n    return arguments.length ? (x = +_[0], y = +_[1], recenter()) : [x, y];\n  };\n\n  projection.center = function(_) {\n    return arguments.length ? (lambda = _[0] % 360 * radians, phi = _[1] % 360 * radians, recenter()) : [lambda * degrees, phi * degrees];\n  };\n\n  projection.rotate = function(_) {\n    return arguments.length ? (deltaLambda = _[0] % 360 * radians, deltaPhi = _[1] % 360 * radians, deltaGamma = _.length > 2 ? _[2] % 360 * radians : 0, recenter()) : [deltaLambda * degrees, deltaPhi * degrees, deltaGamma * degrees];\n  };\n\n  projection.angle = function(_) {\n    return arguments.length ? (alpha = _ % 360 * radians, recenter()) : alpha * degrees;\n  };\n\n  projection.reflectX = function(_) {\n    return arguments.length ? (sx = _ ? -1 : 1, recenter()) : sx < 0;\n  };\n\n  projection.reflectY = function(_) {\n    return arguments.length ? (sy = _ ? -1 : 1, recenter()) : sy < 0;\n  };\n\n  projection.precision = function(_) {\n    return arguments.length ? (projectResample = resample(projectTransform, delta2 = _ * _), reset()) : sqrt(delta2);\n  };\n\n  projection.fitExtent = function(extent, object) {\n    return fitExtent(projection, extent, object);\n  };\n\n  projection.fitSize = function(size, object) {\n    return fitSize(projection, size, object);\n  };\n\n  projection.fitWidth = function(width, object) {\n    return fitWidth(projection, width, object);\n  };\n\n  projection.fitHeight = function(height, object) {\n    return fitHeight(projection, height, object);\n  };\n\n  function recenter() {\n    var center = scaleTranslateRotate(k, 0, 0, sx, sy, alpha).apply(null, project(lambda, phi)),\n        transform = scaleTranslateRotate(k, x - center[0], y - center[1], sx, sy, alpha);\n    rotate = rotateRadians(deltaLambda, deltaPhi, deltaGamma);\n    projectTransform = compose(project, transform);\n    projectRotateTransform = compose(rotate, projectTransform);\n    projectResample = resample(projectTransform, delta2);\n    return reset();\n  }\n\n  function reset() {\n    cache = cacheStream = null;\n    return projection;\n  }\n\n  return function() {\n    project = projectAt.apply(this, arguments);\n    projection.invert = project.invert && invert;\n    return recenter();\n  };\n}\n","import {cartesian, cartesianAddInPlace, cartesianCross, cartesianDot, cartesianScale, spherical} from \"../cartesian.js\";\nimport {circleStream} from \"../circle.js\";\nimport {abs, cos, epsilon, pi, radians, sqrt} from \"../math.js\";\nimport pointEqual from \"../pointEqual.js\";\nimport clip from \"./index.js\";\n\nexport default function(radius) {\n  var cr = cos(radius),\n      delta = 6 * radians,\n      smallRadius = cr > 0,\n      notHemisphere = abs(cr) > epsilon; // TODO optimise for this common case\n\n  function interpolate(from, to, direction, stream) {\n    circleStream(stream, radius, delta, direction, from, to);\n  }\n\n  function visible(lambda, phi) {\n    return cos(lambda) * cos(phi) > cr;\n  }\n\n  // Takes a line and cuts into visible segments. Return values used for polygon\n  // clipping: 0 - there were intersections or the line was empty; 1 - no\n  // intersections 2 - there were intersections, and the first and last segments\n  // should be rejoined.\n  function clipLine(stream) {\n    var point0, // previous point\n        c0, // code for previous point\n        v0, // visibility of previous point\n        v00, // visibility of first point\n        clean; // no intersections\n    return {\n      lineStart: function() {\n        v00 = v0 = false;\n        clean = 1;\n      },\n      point: function(lambda, phi) {\n        var point1 = [lambda, phi],\n            point2,\n            v = visible(lambda, phi),\n            c = smallRadius\n              ? v ? 0 : code(lambda, phi)\n              : v ? code(lambda + (lambda < 0 ? pi : -pi), phi) : 0;\n        if (!point0 && (v00 = v0 = v)) stream.lineStart();\n        if (v !== v0) {\n          point2 = intersect(point0, point1);\n          if (!point2 || pointEqual(point0, point2) || pointEqual(point1, point2))\n            point1[2] = 1;\n        }\n        if (v !== v0) {\n          clean = 0;\n          if (v) {\n            // outside going in\n            stream.lineStart();\n            point2 = intersect(point1, point0);\n            stream.point(point2[0], point2[1]);\n          } else {\n            // inside going out\n            point2 = intersect(point0, point1);\n            stream.point(point2[0], point2[1], 2);\n            stream.lineEnd();\n          }\n          point0 = point2;\n        } else if (notHemisphere && point0 && smallRadius ^ v) {\n          var t;\n          // If the codes for two points are different, or are both zero,\n          // and there this segment intersects with the small circle.\n          if (!(c & c0) && (t = intersect(point1, point0, true))) {\n            clean = 0;\n            if (smallRadius) {\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1]);\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n            } else {\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1], 3);\n            }\n          }\n        }\n        if (v && (!point0 || !pointEqual(point0, point1))) {\n          stream.point(point1[0], point1[1]);\n        }\n        point0 = point1, v0 = v, c0 = c;\n      },\n      lineEnd: function() {\n        if (v0) stream.lineEnd();\n        point0 = null;\n      },\n      // Rejoin first and last segments if there were intersections and the first\n      // and last points were visible.\n      clean: function() {\n        return clean | ((v00 && v0) << 1);\n      }\n    };\n  }\n\n  // Intersects the great circle between a and b with the clip circle.\n  function intersect(a, b, two) {\n    var pa = cartesian(a),\n        pb = cartesian(b);\n\n    // We have two planes, n1.p = d1 and n2.p = d2.\n    // Find intersection line p(t) = c1 n1 + c2 n2 + t (n1 ⨯ n2).\n    var n1 = [1, 0, 0], // normal\n        n2 = cartesianCross(pa, pb),\n        n2n2 = cartesianDot(n2, n2),\n        n1n2 = n2[0], // cartesianDot(n1, n2),\n        determinant = n2n2 - n1n2 * n1n2;\n\n    // Two polar points.\n    if (!determinant) return !two && a;\n\n    var c1 =  cr * n2n2 / determinant,\n        c2 = -cr * n1n2 / determinant,\n        n1xn2 = cartesianCross(n1, n2),\n        A = cartesianScale(n1, c1),\n        B = cartesianScale(n2, c2);\n    cartesianAddInPlace(A, B);\n\n    // Solve |p(t)|^2 = 1.\n    var u = n1xn2,\n        w = cartesianDot(A, u),\n        uu = cartesianDot(u, u),\n        t2 = w * w - uu * (cartesianDot(A, A) - 1);\n\n    if (t2 < 0) return;\n\n    var t = sqrt(t2),\n        q = cartesianScale(u, (-w - t) / uu);\n    cartesianAddInPlace(q, A);\n    q = spherical(q);\n\n    if (!two) return q;\n\n    // Two intersection points.\n    var lambda0 = a[0],\n        lambda1 = b[0],\n        phi0 = a[1],\n        phi1 = b[1],\n        z;\n\n    if (lambda1 < lambda0) z = lambda0, lambda0 = lambda1, lambda1 = z;\n\n    var delta = lambda1 - lambda0,\n        polar = abs(delta - pi) < epsilon,\n        meridian = polar || delta < epsilon;\n\n    if (!polar && phi1 < phi0) z = phi0, phi0 = phi1, phi1 = z;\n\n    // Check that the first point is between a and b.\n    if (meridian\n        ? polar\n          ? phi0 + phi1 > 0 ^ q[1] < (abs(q[0] - lambda0) < epsilon ? phi0 : phi1)\n          : phi0 <= q[1] && q[1] <= phi1\n        : delta > pi ^ (lambda0 <= q[0] && q[0] <= lambda1)) {\n      var q1 = cartesianScale(u, (-w + t) / uu);\n      cartesianAddInPlace(q1, A);\n      return [q, spherical(q1)];\n    }\n  }\n\n  // Generates a 4-bit vector representing the location of a point relative to\n  // the small circle's bounding box.\n  function code(lambda, phi) {\n    var r = smallRadius ? radius : pi - radius,\n        code = 0;\n    if (lambda < -r) code |= 1; // left\n    else if (lambda > r) code |= 2; // right\n    if (phi < -r) code |= 4; // below\n    else if (phi > r) code |= 8; // above\n    return code;\n  }\n\n  return clip(visible, clipLine, interpolate, smallRadius ? [0, -radius] : [-pi, radius - pi]);\n}\n","import {atan, exp, halfPi, log, pi, tan, tau} from \"../math.js\";\nimport rotation from \"../rotation.js\";\nimport projection from \"./index.js\";\n\nexport function mercatorRaw(lambda, phi) {\n  return [lambda, log(tan((halfPi + phi) / 2))];\n}\n\nmercatorRaw.invert = function(x, y) {\n  return [x, 2 * atan(exp(y)) - halfPi];\n};\n\nexport default function() {\n  return mercatorProjection(mercatorRaw)\n      .scale(961 / tau);\n}\n\nexport function mercatorProjection(project) {\n  var m = projection(project),\n      center = m.center,\n      scale = m.scale,\n      translate = m.translate,\n      clipExtent = m.clipExtent,\n      x0 = null, y0, x1, y1; // clip extent\n\n  m.scale = function(_) {\n    return arguments.length ? (scale(_), reclip()) : scale();\n  };\n\n  m.translate = function(_) {\n    return arguments.length ? (translate(_), reclip()) : translate();\n  };\n\n  m.center = function(_) {\n    return arguments.length ? (center(_), reclip()) : center();\n  };\n\n  m.clipExtent = function(_) {\n    return arguments.length ? ((_ == null ? x0 = y0 = x1 = y1 = null : (x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1])), reclip()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n\n  function reclip() {\n    var k = pi * scale(),\n        t = m(rotation(m.rotate()).invert([0, 0]));\n    return clipExtent(x0 == null\n        ? [[t[0] - k, t[1] - k], [t[0] + k, t[1] + k]] : project === mercatorRaw\n        ? [[Math.max(t[0] - k, x0), y0], [Math.min(t[0] + k, x1), y1]]\n        : [[x0, Math.max(t[1] - k, y0)], [x1, Math.min(t[1] + k, y1)]]);\n  }\n\n  return reclip();\n}\n","function streamGeometry(geometry, stream) {\n  if (geometry && streamGeometryType.hasOwnProperty(geometry.type)) {\n    streamGeometryType[geometry.type](geometry, stream);\n  }\n}\n\nvar streamObjectType = {\n  Feature: function(object, stream) {\n    streamGeometry(object.geometry, stream);\n  },\n  FeatureCollection: function(object, stream) {\n    var features = object.features, i = -1, n = features.length;\n    while (++i < n) streamGeometry(features[i].geometry, stream);\n  }\n};\n\nvar streamGeometryType = {\n  Sphere: function(object, stream) {\n    stream.sphere();\n  },\n  Point: function(object, stream) {\n    object = object.coordinates;\n    stream.point(object[0], object[1], object[2]);\n  },\n  MultiPoint: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) object = coordinates[i], stream.point(object[0], object[1], object[2]);\n  },\n  LineString: function(object, stream) {\n    streamLine(object.coordinates, stream, 0);\n  },\n  MultiLineString: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamLine(coordinates[i], stream, 0);\n  },\n  Polygon: function(object, stream) {\n    streamPolygon(object.coordinates, stream);\n  },\n  MultiPolygon: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamPolygon(coordinates[i], stream);\n  },\n  GeometryCollection: function(object, stream) {\n    var geometries = object.geometries, i = -1, n = geometries.length;\n    while (++i < n) streamGeometry(geometries[i], stream);\n  }\n};\n\nfunction streamLine(coordinates, stream, closed) {\n  var i = -1, n = coordinates.length - closed, coordinate;\n  stream.lineStart();\n  while (++i < n) coordinate = coordinates[i], stream.point(coordinate[0], coordinate[1], coordinate[2]);\n  stream.lineEnd();\n}\n\nfunction streamPolygon(coordinates, stream) {\n  var i = -1, n = coordinates.length;\n  stream.polygonStart();\n  while (++i < n) streamLine(coordinates[i], stream, 1);\n  stream.polygonEnd();\n}\n\nexport default function(object, stream) {\n  if (object && streamObjectType.hasOwnProperty(object.type)) {\n    streamObjectType[object.type](object, stream);\n  } else {\n    streamGeometry(object, stream);\n  }\n}\n","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}","import type { MouseEvent } from 'react';\nimport type {\n  ChartType,\n  ChartData,\n  DefaultDataPoint,\n  ChartDataset,\n  ChartOptions,\n  Chart,\n} from 'chart.js';\n\nimport type { ForwardedRef } from './types.js';\n\nconst defaultDatasetIdKey = 'label';\n\nexport function reforwardRef<T>(ref: ForwardedRef<T>, value: T) {\n  if (typeof ref === 'function') {\n    ref(value);\n  } else if (ref) {\n    ref.current = value;\n  }\n}\n\nexport function setOptions<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown\n>(chart: Chart<TType, TData, TLabel>, nextOptions: ChartOptions<TType>) {\n  const options = chart.options;\n\n  if (options && nextOptions) {\n    Object.assign(options, nextOptions);\n  }\n}\n\nexport function setLabels<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown\n>(\n  currentData: ChartData<TType, TData, TLabel>,\n  nextLabels: TLabel[] | undefined\n) {\n  currentData.labels = nextLabels;\n}\n\nexport function setDatasets<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown\n>(\n  currentData: ChartData<TType, TData, TLabel>,\n  nextDatasets: ChartDataset<TType, TData>[],\n  datasetIdKey = defaultDatasetIdKey\n) {\n  const addedDatasets: ChartDataset<TType, TData>[] = [];\n\n  currentData.datasets = nextDatasets.map(\n    (nextDataset: Record<string, unknown>) => {\n      // given the new set, find it's current match\n      const currentDataset = currentData.datasets.find(\n        (dataset: Record<string, unknown>) =>\n          dataset[datasetIdKey] === nextDataset[datasetIdKey]\n      );\n\n      // There is no original to update, so simply add new one\n      if (\n        !currentDataset ||\n        !nextDataset.data ||\n        addedDatasets.includes(currentDataset)\n      ) {\n        return { ...nextDataset } as ChartDataset<TType, TData>;\n      }\n\n      addedDatasets.push(currentDataset);\n\n      Object.assign(currentDataset, nextDataset);\n\n      return currentDataset;\n    }\n  );\n}\n\nexport function cloneData<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown\n>(data: ChartData<TType, TData, TLabel>, datasetIdKey = defaultDatasetIdKey) {\n  const nextData: ChartData<TType, TData, TLabel> = {\n    labels: [],\n    datasets: [],\n  };\n\n  setLabels(nextData, data.labels);\n  setDatasets(nextData, data.datasets, datasetIdKey);\n\n  return nextData;\n}\n\n/**\n * Get dataset from mouse click event\n * @param chart - Chart.js instance\n * @param event - Mouse click event\n * @returns Dataset\n */\nexport function getDatasetAtEvent(\n  chart: Chart,\n  event: MouseEvent<HTMLCanvasElement>\n) {\n  return chart.getElementsAtEventForMode(\n    event.nativeEvent,\n    'dataset',\n    { intersect: true },\n    false\n  );\n}\n\n/**\n * Get single dataset element from mouse click event\n * @param chart - Chart.js instance\n * @param event - Mouse click event\n * @returns Dataset\n */\nexport function getElementAtEvent(\n  chart: Chart,\n  event: MouseEvent<HTMLCanvasElement>\n) {\n  return chart.getElementsAtEventForMode(\n    event.nativeEvent,\n    'nearest',\n    { intersect: true },\n    false\n  );\n}\n\n/**\n * Get all dataset elements from mouse click event\n * @param chart - Chart.js instance\n * @param event - Mouse click event\n * @returns Dataset\n */\nexport function getElementsAtEvent(\n  chart: Chart,\n  event: MouseEvent<HTMLCanvasElement>\n) {\n  return chart.getElementsAtEventForMode(\n    event.nativeEvent,\n    'index',\n    { intersect: true },\n    false\n  );\n}\n","import React, { useEffect, useRef, forwardRef } from 'react';\nimport { Chart as ChartJS } from 'chart.js';\nimport type { ChartType, DefaultDataPoint } from 'chart.js';\n\nimport type { ForwardedRef, ChartProps, BaseChartComponent } from './types.js';\nimport {\n  reforwardRef,\n  cloneData,\n  setOptions,\n  setLabels,\n  setDatasets,\n} from './utils.js';\n\nfunction ChartComponent<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown\n>(\n  props: ChartProps<TType, TData, TLabel>,\n  ref: ForwardedRef<ChartJS<TType, TData, TLabel>>\n) {\n  const {\n    height = 150,\n    width = 300,\n    redraw = false,\n    datasetIdKey,\n    type,\n    data,\n    options,\n    plugins = [],\n    fallbackContent,\n    updateMode,\n    ...canvasProps\n  } = props as ChartProps;\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const chartRef = useRef<ChartJS | null>();\n\n  const renderChart = () => {\n    if (!canvasRef.current) return;\n\n    chartRef.current = new ChartJS(canvasRef.current, {\n      type,\n      data: cloneData(data, datasetIdKey),\n      options: options && { ...options },\n      plugins,\n    });\n\n    reforwardRef(ref, chartRef.current);\n  };\n\n  const destroyChart = () => {\n    reforwardRef(ref, null);\n\n    if (chartRef.current) {\n      chartRef.current.destroy();\n      chartRef.current = null;\n    }\n  };\n\n  useEffect(() => {\n    if (!redraw && chartRef.current && options) {\n      setOptions(chartRef.current, options);\n    }\n  }, [redraw, options]);\n\n  useEffect(() => {\n    if (!redraw && chartRef.current) {\n      setLabels(chartRef.current.config.data, data.labels);\n    }\n  }, [redraw, data.labels]);\n\n  useEffect(() => {\n    if (!redraw && chartRef.current && data.datasets) {\n      setDatasets(chartRef.current.config.data, data.datasets, datasetIdKey);\n    }\n  }, [redraw, data.datasets]);\n\n  useEffect(() => {\n    if (!chartRef.current) return;\n\n    if (redraw) {\n      destroyChart();\n      setTimeout(renderChart);\n    } else {\n      chartRef.current.update(updateMode);\n    }\n  }, [redraw, options, data.labels, data.datasets, updateMode]);\n\n  useEffect(() => {\n    if (!chartRef.current) return;\n\n    destroyChart();\n    setTimeout(renderChart);\n  }, [type]);\n\n  useEffect(() => {\n    renderChart();\n\n    return () => destroyChart();\n  }, []);\n\n  return (\n    <canvas\n      ref={canvasRef}\n      role='img'\n      height={height}\n      width={width}\n      {...canvasProps}\n    >\n      {fallbackContent}\n    </canvas>\n  );\n}\n\nexport const Chart = forwardRef(ChartComponent) as BaseChartComponent;\n","import React, { forwardRef } from 'react';\nimport {\n  Chart as ChartJS,\n  LineController,\n  BarController,\n  RadarController,\n  DoughnutController,\n  PolarAreaController,\n  BubbleController,\n  PieController,\n  ScatterController,\n} from 'chart.js';\nimport type { ChartType, ChartComponentLike } from 'chart.js';\n\nimport type {\n  ChartProps,\n  ChartJSOrUndefined,\n  TypedChartComponent,\n} from './types.js';\nimport { Chart } from './chart.js';\n\nfunction createTypedChart<T extends ChartType>(\n  type: T,\n  registerables: ChartComponentLike\n) {\n  ChartJS.register(registerables);\n\n  return forwardRef<ChartJSOrUndefined<T>, Omit<ChartProps<T>, 'type'>>(\n    (props, ref) => <Chart {...props} ref={ref} type={type} />\n  ) as TypedChartComponent<T>;\n}\n\nexport const Line = /* #__PURE__ */ createTypedChart('line', LineController);\n\nexport const Bar = /* #__PURE__ */ createTypedChart('bar', BarController);\n\nexport const Radar = /* #__PURE__ */ createTypedChart('radar', RadarController);\n\nexport const Doughnut = /* #__PURE__ */ createTypedChart(\n  'doughnut',\n  DoughnutController\n);\n\nexport const PolarArea = /* #__PURE__ */ createTypedChart(\n  'polarArea',\n  PolarAreaController\n);\n\nexport const Bubble = /* #__PURE__ */ createTypedChart(\n  'bubble',\n  BubbleController\n);\n\nexport const Pie = /* #__PURE__ */ createTypedChart('pie', PieController);\n\nexport const Scatter = /* #__PURE__ */ createTypedChart(\n  'scatter',\n  ScatterController\n);\n"],"names":["x00","y00","x0","y0","MapChartDefaultTheme","_Theme","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","value","_get","_getPrototypeOf","prototype","call","ic","this","_root","interfaceColors","r","rule","bind","setAll","projection","geoMercator","panX","panY","pinchZoom","zoomStep","zoomLevel","rotationX","rotationY","rotationZ","maxZoomLevel","minZoomLevel","wheelY","wheelX","animationEasing","$ease","wheelEasing","wheelDuration","wheelSensitivity","maxPanOut","centerMapOnZoomOut","precision","role","setColor","affectsBounds","clipFront","clipBack","autoScale","isMeasured","fillOpacity","position","strokeWidth","strokeOpacity","x","p50","y","draw","display","moveTo","lineTo","step","p100","centerX","centerY","paddingRight","paddingBottom","Theme","areaSum","Adder","areaRingSum","areaStream","point","noop","lineStart","lineEnd","polygonStart","areaRingStart","areaRingEnd","polygonEnd","add","abs","result","area","areaPointFirst","areaPoint","X0","Y0","Z0","X1","Y1","Z1","X2","Y2","Z2","centroidStream","centroidPoint","centroidLineStart","centroidLineEnd","centroidRingStart","centroidRingEnd","centroid","NaN","centroidPointFirstLine","centroidPointLine","dx","dy","z","sqrt","centroidPointFirstRing","centroidPointRing","PathContext","context","_context","_radius","pointRadius","_","_line","_point","closePath","arc","tau","lengthRing","lengthSum","lengthStream","lengthPointFirst","lengthPoint","length","cacheDigits","cacheAppend","cacheRadius","cacheCircle","_taggedTemplateLiteral","strings","raw","slice","Object","freeze","defineProperties","PathString","digits","_append","append","d","Math","floor","RangeError","concat","k","pow","i","j","round","appendRound","_templateObject","_templateObject2","_templateObject3","s","_templateObject4","MapChart","_SerialChart","_this","defineProperty","_assertThisInitialized","type","geometries","longitude","latitude","left","right","top","bottom","get","path","projectionStream","contextStream","object","stream","pathArea","measure","pathMeasure","bounds","pathBounds","pathCentroid","identity","geoPath","setPrivateRaw","invert","seriesContainer","toGlobal","width","height","_geoCentroid","_geoBounds","_this2","chartContainer","_wheelDp","dispose","events","on","event","wheelEvent","originalEvent","$utils","preventDefault","_display","toLocal","_handleWheelZoom","deltaY","_handleWheelRotateY","_handleWheelRotateX","deltaX","_disposers","push","_this3","w","innerWidth","h","innerHeight","isDirty","_makeGeoPath","markDirtyProjection","_fitMap","scale","getPrivate","rotate","prev","_prevSettings","hw","hh","centerLocation","xy","translate","xx","yy","setRaw","_handleSetWheel","previousGeometries","_geometryColection","_dirtyGeometries","series","each","$array","_geometries","_pw","_ph","fitSize","newScale","_centerLocation","_centerX","_centerY","_mapBounds","previous","zoomControl","_disposeProperty","setPrivate","children","isType","dataItems","dataItem","bullets","bullet","sprite","set","_setUpTouch","$mapUtils","$math","prevGeoBounds","_prevGeoBounds","_dispatchBounds","_mapFitted","homeGeoPoint","duration","zoomToGeoPoint","isEnabled","dispatch","target","cancelTouch","markDirty","_this4","_defaultThemes","_settings","themeTags","bulletsContainer","Rectangle","fill","Color","_handleChartDown","_handleChartUp","_handleChartMove","license","registry","match","_showBranding","_downZoomLevel","count","$object","_downPoints","downPoint","_downTranslateX","_downTranslateY","_downRotationX","_downRotationY","_downRotationZ","downId","_getDownPointId","movePoint","_movePoints","bg","enableType","_za","stop","_txa","_tya","_rxa","_rya","l0","l1","_pLon","_pLat","ll","_event","_this5","downPoints","movePoints","downPoint0","downPoint1","movePoint0","movePoint1","initialDistance","hypot","level","moveCenter","downCenter","tx","ty","_getDownPoint","downPointId","pointerId","_handlePinch","local","disableType","$type","ww","cx","min","max","cy","downLocation","location","delta","easing","animate","to","newZoomLevel","zoomToPoint","geoBounds","mapBounds","p0","convert","p1","zl","geoPoint","center","readerAlert","_t","locale","geometry","SerialChart","className","MapSeries","_Series","fields","_setRawDefault","geoJSON","data","clear","_valuesDirty","undefined","_geoJSONparsed","_parseGeoJSON","chart","exclude","id","getDataItemById","_excludeDataItem","_excluded","_unexcludeDataItem","include","indexOf","_notIncludeDataItem","_unNotIncludeDataItem","_notIncluded","_removeGeometry","_addGeometry","includes","excludes","features","console","log","geodataNames","idField","_loop","feature","dataObject","properties","name","_types","dataContext","geometryType","processDataItem","madeFromGeoData","len","_chart","moveValue","markDirtyGeometries","removeValue","Series","MapPolygon","_Graphics","_projectionDirty","_clear","isHover","showTooltip","biggestArea","coordinates","coords","geoArea","$polylabel","visualCentroid","Graphics","MapPolygonSeries","_MapSeries","ListTemplate","Template","_new","mapPolygons","template","mapPolygon","make","_setDataItem","makeMapPolygon","reverse","polygon","zoomToGeoBounds","classNames","W0","W1","lambda00","phi00","z0","sphere","lambda","phi","radians","cosPhi","cos","centroidPointCartesian","sin","centroidLinePointFirst","centroidLinePoint","atan2","centroidRingPointFirst","centroidRingPoint","cz","m","asin","v","lambda0","phi0","lambda1","phi1","lambda2","deltaSum","ranges","range","boundsStream","boundsPoint","boundsLineStart","boundsLineEnd","boundsRingPoint","boundsRingStart","boundsRingEnd","epsilon","linePoint","p","cartesian","normal","cartesianCross","equatorial","inflection","cartesianNormalizeInPlace","spherical","phii","sign","lambdai","degrees","antimeridian","angle","rangeCompare","a","b","rangeContains","getGeoCentroid","epsilon2","geoCentroid","getGeoBounds","n","merged","deltaMax","Infinity","sort","ZoomControl","_Container","Button","verticalLayout","plusButton","icon","layout","minusButton","isPrivateDirty","_prevPrivateSettings","_disposer","MultiDisposer","zoomIn","zoomOut","Container","Queue","require","polylabel","debug","minX","minY","maxX","maxY","cellSize","degeneratePoleOfInaccessibility","distance","cellQueue","compareMax","Cell","bestCell","points","f","getCentroidCell","bboxCell","numProbes","cell","pop","poleOfInaccessibility","inside","minDistSq","ring","getSegDistSq","pointToPolygonDist","SQRT2","px","py","t","default","module","exports","TinyQueue","compare","defaultCompare","_down","item","_up","pos","parent","current","halfLength","best","_defineProperty","obj","enumerable","configurable","writable","ownKeys","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","_objectSpread2","source","forEach","getOwnPropertyDescriptors","lim","l","p2b","n2b","b2n","n2p","map$1","A","B","C","D","E","F","c","e","hex","_toConsumableArray","h1","h2","eq","isShort","g","alpha","HUE_RE","hsl2rgbn","hsv2rgbn","hwb2rgbn","rgb","rgb2hsl","hueValue","calln","Array","isArray","map","hsl2rgb","hue","hueParse","str","exec","p2","hwb2rgb","hsv2rgb","names","Z","Y","X","W","V","U","T","S","R","Q","P","O","N","M","L","K","G","H","I","J","names$1","OiceXe","antiquewEte","aqua","aquamarRe","azuY","beige","bisque","black","blanKedOmond","Xe","XeviTet","bPwn","burlywood","caMtXe","KartYuse","KocTate","cSO","cSnflowerXe","cSnsilk","crimson","cyan","xXe","xcyan","xgTMnPd","xWay","xgYF","xgYy","xkhaki","xmagFta","xTivegYF","xSange","xScEd","xYd","xsOmon","xsHgYF","xUXe","xUWay","xUgYy","xQe","xviTet","dAppRk","dApskyXe","dimWay","dimgYy","dodgerXe","fiYbrick","flSOwEte","foYstWAn","fuKsia","gaRsbSo","ghostwEte","gTd","gTMnPd","Way","gYF","gYFLw","gYy","honeyMw","hotpRk","RdianYd","Rdigo","ivSy","khaki","lavFMr","lavFMrXsh","lawngYF","NmoncEffon","ZXe","ZcSO","Zcyan","ZgTMnPdLw","ZWay","ZgYF","ZgYy","ZpRk","ZsOmon","ZsHgYF","ZskyXe","ZUWay","ZUgYy","ZstAlXe","ZLw","lime","limegYF","lRF","magFta","maPon","VaquamarRe","VXe","VScEd","VpurpN","VsHgYF","VUXe","VsprRggYF","VQe","VviTetYd","midnightXe","mRtcYam","mistyPse","moccasR","navajowEte","navy","Tdlace","Tive","TivedBb","Sange","SangeYd","ScEd","pOegTMnPd","pOegYF","pOeQe","pOeviTetYd","papayawEp","pHKpuff","peru","pRk","plum","powMrXe","purpN","YbeccapurpN","Yd","Psybrown","PyOXe","saddNbPwn","sOmon","sandybPwn","sHgYF","sHshell","siFna","silver","skyXe","UXe","UWay","UgYy","snow","sprRggYF","stAlXe","tan","teO","tEstN","tomato","Qe","viTet","JHt","wEte","wEtesmoke","Lw","LwgYF","nameParse","ok","nk","unpacked","tkeys","replace","parseInt","unpack","transparent","toLowerCase","RGB_RE","from","modHSL","ratio","tmp","clone","proto","assign","fromObject","input","functionParse","charAt","rgbParse","ret","hexParse","_rgb","_valid","hexString","hslString","color","weight","w2","c1","c2","w1","rgb1","rgb2","interpolate","val","deg","uid","isNullOrUndef","toString","isObject","isNumberFinite","Number","isFinite","finiteOrDefault","defaultValue","valueOrDefault","toDimension","dimension","endsWith","parseFloat","callback","fn","args","thisArg","loopable","_elementsEqual","a0","a1","ilen","v0","v1","datasetIndex","index","create","klen","isValidKey","_merger","options","tval","sval","merge","sources","merger","mergeIf","_mergerIf","hasOwnProperty","keyResolvers","o","_getKeyResolver","_step","parts","split","_iterator","_createForOfIteratorHelper","done","err","_splitKey","_step2","_iterator2","resolveObjectKey","_capitalize","toUpperCase","defined","isFunction","setsEqual","size","_step3","_iterator3","has","PI","TAU","PITAU","INFINITY","POSITIVE_INFINITY","RAD_PER_DEG","HALF_PI","QUARTER_PI","TWO_THIRDS_PI","log10","almostEquals","niceNum","roundedRange","niceRange","fraction","isNumber","isNaN","_setMinAndMaxByKey","array","property","toRadians","toDegrees","_decimalPlaces","getAngleFromPoint","centrePoint","anglePoint","distanceFromXCenter","distanceFromYCenter","radialDistanceFromCenter","distanceBetweenPoints","pt1","pt2","_angleDiff","_normalizeAngle","_angleBetween","start","end","sameAngleIsFullCircle","angleToStart","angleToEnd","startToAngle","endToAngle","_limitValue","_isBetween","_lookup","table","cmp","mid","hi","lo","_lookupByKey","last","ti","_rlookupByKey","arrayEvents","unlistenArrayEvents","listener","stub","_chartjs","listeners","splice","_arrayUnique","items","Set","requestAnimFrame","window","requestAnimationFrame","throttled","argsToUse","ticking","_len2","_key2","_toLeftRightCenter","align","_alignStartEnd","_getStartAndCountOfVisiblePoints","meta","animationsDisabled","pointCount","_sorted","iScale","_parsed","axis","_iScale$getUserBounds","getUserBounds","minDefined","maxDefined","getPixelForValue","_scaleRangesChanged","xScale","yScale","_scaleRanges","newRanges","xmin","xmax","ymin","ymax","changed","atEdge","elasticIn","elasticOut","effects","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","isPatternOrGradient","getHoverColor","saturate","darken","numbers","colors","intlCache","Map","formatNumber","num","cacheKey","JSON","stringify","formatter","Intl","NumberFormat","getNumberFormat","format","formatters","values","numeric","tickValue","ticks","notation","maxTick","calculateDelta","logDelta","numDecimal","minimumFractionDigits","maximumFractionDigits","logarithmic","remain","significand","Ticks","overrides","descriptors","getScope$1","node","root","scope","Defaults","_descriptors","_appliers","animation","backgroundColor","borderColor","datasets","devicePixelRatio","platform","getDevicePixelRatio","elements","font","family","style","lineHeight","hover","hoverBackgroundColor","ctx","hoverBorderColor","hoverColor","indexAxis","interaction","mode","intersect","includeInvisible","maintainAspectRatio","onHover","onClick","parsing","plugins","responsive","scales","showLine","drawActiveElementsOnTop","describe","targetScope","targetName","_Object$definePropert","scopeObject","targetScopeObject","privateName","appliers","defaults","_scriptable","startsWith","_indexable","_fallback","delay","loop","active","resize","show","animations","visible","hide","autoPadding","padding","offset","beginAtZero","grace","grid","lineWidth","drawOnChartArea","drawTicks","tickLength","tickWidth","_ctx","tickColor","border","dash","dashOffset","title","text","minRotation","maxRotation","mirror","textStrokeWidth","textStrokeColor","autoSkip","autoSkipPadding","labelOffset","minor","major","crossAlign","showLabelBackdrop","backdropColor","backdropPadding","route","_measureText","gc","longest","string","textWidth","measureText","_longestText","arrayOfThings","cache","garbageCollect","save","jlen","thing","nestedThing","restore","gcLen","_alignPixel","pixel","currentDevicePixelRatio","halfWidth","clearCanvas","canvas","getContext","resetTransform","clearRect","drawPoint","drawPointLegend","xOffset","yOffset","cornerRadius","xOffsetW","yOffsetW","pointStyle","rotation","radius","rad","drawImage","beginPath","ellipse","SQRT1_2","rect","borderWidth","stroke","_isPointInArea","margin","clipArea","clip","unclipArea","_steppedLineTo","flip","midpoint","_bezierCurveTo","bezierCurveTo","cp1x","cp2x","cp1y","cp2y","renderText","line","opts","lines","strokeColor","translation","fillStyle","textAlign","textBaseline","setRenderOpts","backdrop","drawBackdrop","strokeStyle","strokeText","maxWidth","fillText","decorateText","strikethrough","underline","metrics","actualBoundingBoxLeft","actualBoundingBoxRight","actualBoundingBoxAscent","actualBoundingBoxDescent","yDecoration","decorationWidth","oldColor","fillRect","addRoundedRectPath","topLeft","bottomLeft","bottomRight","topRight","LINE_HEIGHT","FONT_STYLE","toLineHeight","matches","numberOrZero","_readValueToProps","props","_step4","objProps","read","prop","_iterator4","toTRBL","toTRBLCorners","toPadding","toFont","fallback","warn","toFontString","resolve","inputs","info","cacheable","createContext","parentContext","_createResolver","scopes","_cache","prefixes","rootScopes","getTarget","_resolve","Symbol","toStringTag","Proxy","deleteProperty","_keys","_cached","proxy","_step7","_iterator7","prefix","readKey","needsSubResolver","createSubResolver","_resolveWithPrefixes","Reflect","_scopes","getPrototypeOf","getKeysFromAllScopes","storage","_storage","_attachContext","subProxy","descriptorDefaults","_cacheable","_proxy","_subProxy","_stack","setContext","override","receiver","isScriptable","Error","join","delete","_resolveScriptable","isIndexable","arr","_step5","_iterator5","resolver","_resolveArray","_resolveWithContext","allKeys","scriptable","indexable","_proxy$_scriptable","_proxy$_indexable","_proxy$_allKeys","_allKeys","constructor","resolveFallback","getScope","addScopes","parentScopes","parentFallback","_step6","_iterator6","_rootScopes","allScopes","addScopesFromKey","_getTarget","subGetTarget","_step8","_iterator8","_step9","_iterator9","_step10","_iterator10","resolveKeysFromAllScopes","_parseObjectDataRadialScale","_this$_parsing$key","_parsing","parsed","parse","EPSILON","getPoint","skip","getValueAxis","splineCurve","firstPoint","middlePoint","afterPoint","next","d01","d12","s01","s12","fa","fb","splineCurveMonotone","pointBefore","pointCurrent","valueAxis","pointsLen","deltaK","mK","pointAfter","slopeDelta","alphaK","betaK","tauK","squaredMagnitude","monotoneAdjust","iPixel","vPixel","monotoneCompute","capControlPoint","pt","_updateBezierControlPoints","controlPoints","spanGaps","cubicInterpolationMode","tension","capBezierPoints","inArea","inAreaPrev","inAreaNext","_isDomSupported","document","_getParentNode","domNode","parentNode","host","parseMaxStyle","styleValue","parentProperty","valueInPixels","getComputedStyle","element","ownerDocument","defaultView","positions","getPositionedStyle","styles","suffix","useOffsetPos","shadowRoot","getRelativePosition","borderBox","boxSizing","paddings","borders","_getCanvasPosition","touches","offsetX","offsetY","box","getBoundingClientRect","clientX","clientY","getCanvasPosition","round1","getMaximumSize","bbWidth","bbHeight","aspectRatio","margins","maxHeight","containerSize","container","containerStyle","containerBorder","containerPadding","clientWidth","clientHeight","getContainerSize","retinaScale","forceRatio","forceStyle","pixelRatio","deviceHeight","deviceWidth","setTransform","supportsEventListenerOptions","passiveSupported","passive","addEventListener","removeEventListener","readUsedSize","el","getPropertyValue","getStyle","_pointInLine","_steppedInterpolation","_bezierInterpolation","cp1","cp2","getRightToLeftAdapter","rectX","setWidth","xPlus","leftForLtr","itemWidth","getLeftToRightAdapter","_itemWidth","getRtlAdapter","rtl","overrideTextDirection","direction","original","getPropertyPriority","setProperty","prevTextDirection","restoreTextDirection","propertyFn","between","normalize","normalizeSegment","_ref","_boundSegment","segment","prevValue","startBound","endBound","_propertyFn2","_getSegment","_propertyFn","getSegment","subStart","shouldStart","shouldStop","_boundSegments","segments","sub","splitByStyles","segmentOptions","chartContext","baseStyle","readStyle","_datasetIndex","prevStyle","addStyle","st","dir","_step11","_iterator11","styleChanged","p0DataIndex","p1DataIndex","doSplitByStyles","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","Animator","_request","_charts","_running","_lastDate","anims","date","callbacks","numSteps","initial","currentStep","_update","_refresh","Date","now","remaining","running","_active","_total","tick","_notify","charts","complete","progress","cb","_getAnims","_this$_getAnims$items","reduce","acc","cur","_duration","cancel","animator","interpolators","boolean","factor","c0","valid","mix","number","Animation","cfg","currentValue","_fn","_easing","_start","_target","_prop","_from","_to","_promises","elapsed","promises","Promise","res","rej","resolved","method","Animations","config","_properties","configure","animationOptions","animatedProps","getOwnPropertyNames","_i","_animationOptions","option","newOptions","$shared","$animations","resolveTargetOptions","_createAnimations","anim","wait","all","awaitAll","then","update","_animateOptions","scaleClip","allowedOverflow","getSortedDatasetIndices","filterVisible","metasets","_getSortedDatasetMetas","applyStack","stack","dsIndex","otherValue","singleMode","isStacked","stacked","getOrCreateStack","stacks","stackKey","indexValue","subStack","getLastIndexInStack","vScale","positive","getMatchingVisibleMetas","updateStacks","controller","_cachedMeta","_stacks","iAxis","vAxis","indexScale","valueScale","getStackKey","_top","_bottom","_visualValues","getFirstScaleId","shift","clearStacks","isDirectUpdateMode","cloneIfNotShared","cached","shared","DatasetController","_cachedDataOpts","getMeta","_type","_data","_objectData","_sharedOptions","_drawStart","_drawCount","enableOptionSharing","supportsDecimation","$context","_syncList","datasetElementType","dataElementType","initialize","linkScales","_stacked","addElements","isPluginEnabled","dataset","getDataset","chooseId","xid","xAxisID","yid","yAxisID","rid","rAxisID","iid","iAxisID","vid","vAxisID","getScaleForId","rScale","getDatasetMeta","scaleID","adata","convertObjectDataToArray","isExtensible","base","_len","_key","_dataCheck","resetNewElements","stackChanged","oldStacked","_resyncElements","scopeKeys","datasetScopeKeys","getOptionScopes","createResolver","sorted","parseArrayData","parseObjectData","parsePrimitiveData","labels","getLabels","singleScale","_parsed$i","_this$_parsing","_this$_parsing$xAxisK","xAxisKey","_this$_parsing$yAxisK","yAxisKey","parsedValue","canStack","otherScale","_getOtherScale","hidden","createStack","NEGATIVE_INFINITY","_getUserBounds","_scale$getUserBounds","otherMin","otherMax","_skip","updateRangeFromParsed","getParsed","label","getLabelForValue","_clip","disabled","toClip","defaultClip","getMaxOverflow","chartArea","resolveDatasetElementOptions","resolveDataElementOptions","dataIndex","createDataContext","createDatasetContext","_resolveElementOptions","elementType","sharing","datasetElementScopeKeys","resolveNamedOptions","transition","datasetAnimationScopeKeys","sharedOptions","_animationsDisabled","firstOpts","previouslySharedOptions","getSharedOptions","includeOptions","updateSharedOptions","_resolveAnimations","_setStyle","_step3$value","_slicedToArray","arg1","arg2","numMeta","numData","_insertElements","_removeElements","move","updateElements","removed","_args2","_dataChanges","_sync","newCount","computeMinSampleSize","curr","$bar","visibleMetas","getAllParsedValues","getAllScaleValues","_length","updateMinAndPrev","getPixelForTick","parseValue","entry","startValue","endValue","barStart","barEnd","_custom","parseFloatBar","parseArrayOrPrimitive","isFloatBar","custom","setBorderSkipped","edge","borderSkipped","_borderProps","horizontal","borderProps","enableBorderRadius","parseEdge","orig","v2","startEnd","setInflateAmount","inflateAmount","BarController","_DatasetController","_this$_parsing2","_this$_parsing2$xAxis","_this$_parsing2$yAxis","iAxisKey","vAxisKey","bars","reset","getBasePixel","isHorizontal","ruler","_getRuler","_this$_getSharedOptio","_getSharedOptions","vpixels","head","_calculateBarValuePixels","ipixels","_calculateBarIndexPixels","updateElement","grouped","skipNull","_getStacks","pixels","barThickness","_startPixel","_endPixel","stackCount","_getStackCount","categoryPercentage","barPercentage","_this$_cachedMeta","_this$options","baseValue","minBarLength","actualBase","floating","getDataVisibility","barSign","startPixel","getPixelForDecimal","endPixel","getValueForPixel","halfGrid","getLineWidthForValue","maxBarThickness","percent","chunk","computeFlexCategoryTraits","thickness","computeFitCategoryTraits","stackIndex","_getStackIndex","rects","_index_","_value_","BubbleController","_DatasetController2","_super2","_this$_cachedMeta2","_this$_getSharedOptio2","DoughnutController","_DatasetController3","_super3","innerRadius","outerRadius","getter","circumference","isDatasetVisible","_getRotation","_getCircumference","arcs","spacing","getMaxBorderWidth","getMaxOffset","maxSize","cutout","chartWeight","_getRingWeight","_this$_getRotationExt","_getRotationExtents","_getRatioAndOffset","ratioX","ratioY","startAngle","endAngle","startX","startY","endX","endY","calcMax","calcMin","getRatioAndOffset","maxRadius","radiusLength","_getVisibleDatasetWeightTotal","total","calculateTotal","_getRingWeightOffset","animateRotate","calculateCircumference","animationOpts","animateScale","_this$_getSharedOptio3","_circumference","metaData","borderAlign","hoverBorderWidth","hoverOffset","ringWeightOffset","legend","generateLabels","_chart$legend$options2","fontColor","legendItem","toggleDataVisibility","LineController","_DatasetController4","_super4","_meta$data","_dataset","_getStartAndCountOfVi","_decimated","animated","_this$_cachedMeta3","_this$_getSharedOptio4","_this$options2","maxGapLength","directUpdate","pointsCount","prevParsed","nullData","lastPoint","updateControlPoints","PolarAreaController","_DatasetController5","_super5","_updateRadius","_this6","minSize","cutoutPercentage","getVisibleDatasetCount","xCenter","yCenter","datasetStartAngle","getIndexAngle","defaultAngle","countVisibleElements","_computeAngle","getDistanceFromCenterForValue","_this7","_chart$legend$options3","angleLines","circular","pointLabels","PieController","_DoughnutController","_super6","RadarController","_DatasetController6","_super7","_fullLoop","pointPosition","getPointPositionForValue","ScatterController","_DatasetController7","_super8","_meta$data2","_getStartAndCountOfVi2","getElement","_this$_cachedMeta4","_this$options3","abstract","adapters","_date","DateAdapterBase","members","binarySearch","metaset","lookupMethod","_reversePixels","getRange","evaluateInteractionItems","handler","getSortedVisibleDatasetMetas","_metasets$i","_binarySearch","getIntersectItems","useFinalPosition","isPointInArea","inRange","getNearestCartesianItems","distanceMetric","useX","useY","getDistanceMetricForAxis","minDistance","getCenterPoint","getNearestItems","_element$getProps","getProps","getNearestRadialItems","getAxisItems","rangeMethod","intersectsItem","Interaction","modes","nearest","STATIC_POSITIONS","filterByPosition","filterDynamicPositionByAxis","sortByWeight","setLayoutDims","layouts","params","wrap","stackWeight","placed","buildStacks","vBoxMaxWidth","hBoxMaxHeight","fullSize","availableWidth","availableHeight","getCombinedMax","maxPadding","updateMaxPadding","boxPadding","updateDims","getPadding","newWidth","outerWidth","newHeight","outerHeight","widthChanged","heightChanged","same","other","getMargins","marginForPositions","fitBoxes","boxes","refit","refitBoxes","_updateDims","setBoxDims","placeBoxes","userPadding","height1","width1","addBox","_layers","removeBox","layoutItem","minPadding","layoutBoxes","_box","_box$options","_box$options$stackWei","wrapBoxes","centerHorizontal","centerVertical","leftAndTop","rightAndBottom","vertical","buildLayoutBoxes","verticalBoxes","horizontalBoxes","beforeLayout","visibleVerticalBoxCount","updatePos","change","handleMaxPadding","BasePlatform","BasicPlatform","_BasePlatform","_super9","EXPANDO_KEY","EVENT_TYPES","touchstart","touchmove","touchend","pointerenter","pointerdown","pointermove","pointerup","pointerleave","pointerout","isNullOrEmpty","eventListenerOptions","removeListener","nodeListContains","nodeList","contains","createAttachObserver","observer","MutationObserver","entries","trigger","addedNodes","removedNodes","observe","childList","subtree","createDetachObserver","drpListeningCharts","oldDevicePixelRatio","onWindowResize","dpr","createResizeObserver","ResizeObserver","contentRect","listenDevicePixelRatioChanges","releaseObserver","disconnect","unlistenDevicePixelRatioChanges","createProxyAndListen","_getRelativePosition","native","fromNativeEvent","addListener","DomPlatform","_BasePlatform2","_super10","renderHeight","getAttribute","renderWidth","displayWidth","displayHeight","initCanvas","removeAttribute","setAttribute","proxies","$proxies","attach","detach","isConnected","Element","_this$getProps","final","_this8","tickOpts","determinedMaxTicks","_tickSize","maxScale","maxChart","_maxLength","determineMaxTicks","ticksLimit","maxTicksLimit","majorIndices","enabled","getMajorIndices","numMajorIndices","first","newTicks","ceil","skipMajors","evenMajorSpacing","diff","getEvenSpacing","factors","_factorize","calculateSpacing","avgMajorSpacing","majorStart","majorEnd","reverseAlign","offsetFromEdge","getTicksLimit","ticksLength","sample","numItems","increment","getPixelForGridLine","offsetGridLines","validIndex","lineValue","getTickMarkLength","getTitleHeight","titleAlign","Scale","_Element","_super11","_this9","_margins","paddingTop","paddingLeft","labelRotation","_range","_gridLineItems","_labelItems","_labelSizes","_longestTextCache","_userMax","_userMin","_suggestedMax","_suggestedMin","_ticksLength","_borderValue","_dataLimitsCached","suggestedMin","suggestedMax","_this$getUserBounds","metas","getMinMax","xLabels","yLabels","_computeLabelItems","beforeUpdate","_this$options4","sampleSize","beforeSetDimensions","setDimensions","afterSetDimensions","beforeDataLimits","determineDataLimits","afterDataLimits","minmax","keepZero","_addGrace","beforeBuildTicks","buildTicks","afterBuildTicks","samplingEnabled","_convertTicksToLabels","beforeCalculateLabelRotation","calculateLabelRotation","afterCalculateLabelRotation","afterAutoSkip","beforeFit","fit","afterFit","afterUpdate","reversePixels","_alignToPixels","alignToPixels","notifyPlugins","_callHooks","beforeTickToLabelConversion","afterTickToLabelConversion","maxLabelDiagonal","numTicks","_isVisible","labelSizes","_getLabelSizes","maxLabelWidth","widest","maxLabelHeight","highest","_this$options5","titleOpts","gridOpts","titleHeight","_this$_getLabelSizes","tickPadding","angleRadians","labelHeight","labelWidth","_calculatePadding","_handleMargins","_this$options6","_this$options6$ticks","isRotated","labelsBelowTicks","offsetLeft","offsetRight","_this$options7","generateTickLabels","_computeLabelSizes","tickFont","fontString","nestedLabel","caches","widths","heights","widestLabelSize","highestLabelSize","_resolveTickFontOptions","valueAt","idx","decimal","getBaseValue","createTickContext","optionTicks","rot","borderValue","alignedLineValue","tx1","ty1","tx2","ty2","x1","y1","x2","y2","tl","borderOpts","axisWidth","axisHalfWidth","alignBorderValue","positionAxisID","positionAxisID1","value1","limit","optsAtIndex","optsAtIndexBorder","lineColor","tickBorderDash","tickBorderDashOffset","lineCount","textOffset","tickAndPadding","hTickAndPadding","_getXAxisLabelAlignment","_getYAxisLabelAlignment","ret1","halfCount","tickTextAlign","labelPadding","_this$options8","_this$options9","_this$options9$ticks","findIndex","_computeGridLineItems","drawLine","setLineDash","lineDashOffset","_this$options10","lastLineWidth","_computeLabelArea","getLabelItems","renderTextOptions","_this$options11","_titleArgs","titleX","titleY","titleArgs","drawBackground","drawGrid","drawBorder","drawTitle","drawLabels","_this10","tz","gz","bz","axisID","fontSize","TypedRegistry","isPrototypeOf","parentScope","isIChartComponent","register","itemDefaults","defaultRoutes","routes","propertyParts","sourceName","sourceScope","routeDefaults","registerDefaults","Registry","controllers","_typedRegistries","_each","_len3","_key3","_len4","_key4","_len5","_key5","_len6","_key6","_len7","_key7","_len8","_key8","_len9","_key9","_len10","_key10","typedRegistry","_this11","arg","reg","_getRegistryForType","isForType","_exec","itemReg","component","camelMethod","PluginService","_init","hook","_createDescriptors","descriptor","plugin","cancelable","_oldCache","_notifyStateChanges","localIds","getPlugin","i1","allPlugins","_ref2","_step12","_iterator12","getOpts","pluginOpts","createDescriptors","previousDescriptors","some","_ref3","pluginScopeKeys","getIndexAxis","datasetDefaults","determineAxis","scaleOptions","initOptions","chartDefaults","configScales","chartIndexAxis","scaleConf","error","defaultId","getDefaultScaleIDFromAxis","defaultScaleOptions","defaultID","getAxisFromDefaultScaleID","mergeScaleConfig","initData","keyCache","keysCached","cachedKeys","generate","addIfFound","Config","_config","initConfig","_scopeCache","_resolverCache","clearCache","datasetType","additionalOptionScopes","mainScope","resetCache","keyLists","_cachedScopes","_getResolver","getResolver","subPrefixes","_step14","_descriptors2","_iterator14","hasFunction","needContext","_step13","_iterator13","resolverCache","KNOWN_POSITIONS","positionIsHorizontal","compare2Level","l2","onAnimationsComplete","onComplete","onAnimationProgress","onProgress","getCanvas","getElementById","instances","getChart","moveNumericKeys","_i2","intKey","Chart","userConfig","_this12","initialCanvas","existingChart","chartOptionScopes","OffscreenCanvas","_detectPlatform","updateConfig","acquireContext","_options","_aspectRatio","_metasets","_lastEvent","_listeners","_responsiveListeners","_sortedMetasets","_plugins","_hiddenIndices","attached","_doResize","timeout","clearTimeout","setTimeout","debounce","resizeDelay","listen","_initialize","_this$options12","bindEvents","_resizeBeforeDraw","_resize","newSize","newRatio","onResize","render","axisOptions","_this13","scaleOpts","updated","isRadial","dposition","dtype","scaleType","getScale","init","hasUpdated","_destroyDatasetMeta","_this14","newControllers","_removeUnreferencedMetasets","order","updateIndex","ControllerClass","getController","_defaults$datasets$ty","_updateMetasets","_this15","_resetElements","animsDisabled","_updateScales","_checkEventBindings","_updateHiddenIndices","invalidate","buildOrUpdateControllers","buildOrUpdateElements","_minPadding","_updateLayout","_updateDatasets","_eventHandler","_updateHoverStyles","_this16","ensureScalesHaveIDs","buildOrUpdateScales","existingEvents","newEvents","unbindEvents","_step15","changes","_getUniformDataChanges","_iterator15","_step15$value","datasetCount","makeSet","changeSet","_this17","noArea","_this17$_layers","_idx","ilen1","_updateDataset","_this$_resizeBeforeDr","layers","_drawDatasets","_drawDataset","useClip","getDatasetArea","setDatasetVisibility","_updateVisibility","_destroy","remove","_stop","releaseContext","_this$canvas","toDataURL","bindUserEvents","bindResponsiveEvents","_this18","_add","_this19","detached","_remove","isAttached","_this20","activeElements","_this21","lastActive","_ref4","notify","pluginId","replay","hoverOptions","deactivated","activated","updateHoverStyle","_this22","inChartArea","eventFilter","_handleEvent","_this$_active","_getActiveElements","isClick","_isClickEvent","lastEvent","determineLastEvent","getElementsAtEventForMode","invalidatePlugins","parseBorderRadius$1","angleDelta","borderRadius","halfThickness","innerLimit","computeOuterLimit","outerArcLimit","outerStart","outerEnd","innerStart","innerEnd","rThetaToXY","theta","pathArc","pixelMargin","innerR","spacingOffset","avNogSpacingRadius","angleOffset","_parseBorderRadius$","outerStartAdjustedRadius","outerEndAdjustedRadius","outerStartAdjustedAngle","outerEndAdjustedAngle","innerStartAdjustedRadius","innerEndAdjustedRadius","innerStartAdjustedAngle","innerEndAdjustedAngle","outerMidAdjustedAngle","pCenter","p4","pCenter1","innerMidAdjustedAngle","pCenter2","p8","pCenter3","outerStartX","outerStartY","outerEndX","outerEndY","fullCircles","inner","lineJoin","angleMargin","clipArc","ArcElement","_Element2","_super12","_this23","chartX","chartY","_getAngleFromPoint2","_this$getProps2","rAdjust","betweenAngles","withinRadius","_this$getProps3","_this$options13","halfAngle","halfRadius","radiusOffset","drawArc","setStyle","lineCap","pathVars","_params$start","paramsStart","_params$end","paramsEnd","segmentStart","segmentEnd","outside","pathSegment","_pathVars","lineMethod","stepped","getLineMethod","_ref5","_ref5$move","fastPathSegment","prevX","lastY","_pathVars2","_ref6","_ref6$move","avgX","countX","pointIndex","drawX","truncX","_getSegmentMethod","usePath2D","Path2D","_path","strokePathWithCache","_step16","segmentMethod","_iterator16","strokePathDirect","LineElement","_Element3","_super13","_this24","_points","_segments","_pointsUpdated","_findStartAndEnd","findStartAndEnd","solidSegments","_computeSegments","_interpolate","_getInterpolationMethod","_segments$i","interpolated","_step17","_iterator17","inRange$1","hitRadius","PointElement","_Element4","_super14","_this25","mouseX","mouseY","_this$getProps4","_this$getProps5","hoverRadius","getBarBounds","bar","half","_bar$getProps","skipOrLimit","boundingRects","maxW","maxH","parseBorderWidth","maxR","enableBorder","parseBorderRadius","outer","skipX","skipY","addNormalRectPath","inflateRect","amount","refRect","BarElement","_Element5","_super15","_this26","_this$options14","_boundingRects","addRectPath","_this$getProps6","_getBounds","_findSegmentEnd","_getEdge","_createBoundaryLine","boundary","_ref7","_ref7$x","_ref7$y","linePoints","_ref8","_pointsFromSegments","_shouldApplyFill","_resolveTarget","propagate","visited","_decodeFill","fillOption","parseFillOption","firstCh","decodeTargetIndex","addPointsBelow","sourcePoint","linesBelow","postponed","_findPoint","findPoint","unshift","pointValue","firstValue","lastValue","simpleArc","getLineByIndex","sourcePoints","below","getLinesBelow","_buildStackLine","_getTargetValue","computeCircularBoundary","_source$scale","_getTargetPixel","computeLinearBoundary","computeBoundary","_drawfill","lineOpts","_ref9","_ref9$above","above","_ref9$below","clipVertical","doFill","clipY","lineLoop","_step21","_iterator21","_step22","_step18","tpoints","_iterator18","_step19","targetSegments","_iterator19","_step20","tgt","subBounds","fillSources","_iterator20","fillSource","_iterator22","_step22$value","src","_src$style","_src$style2$backgroun","notShape","clipBounds","interpolatedLineTo","targetLoop","_scale$chart$chartAre","_ref10","interpolatedPoint","afterDatasetsUpdate","_args","$filler","beforeDraw","drawTime","beforeDatasetsDraw","beforeDatasetDraw","getBoxSize","labelOpts","_labelOpts$boxHeight","boxHeight","_labelOpts$boxWidth","boxWidth","usePointStyle","pointStyleWidth","itemHeight","Legend","_Element6","_super16","_this27","_added","legendHitBoxes","_hoveredItem","doughnutMode","legendItems","columnSizes","lineWidths","buildLabels","_this28","labelFont","_computeTitleHeight","_getBoxSize","_fitRows","_fitCols","hitboxes","totalHeight","row","_itemHeight","heightLimit","totalWidth","currentColWidth","currentColHeight","col","_calculateItemSize","legendItemText","calculateItemWidth","fontLineHeight","calculateLegendItemHeight","calculateItemHeight","calculateItemSize","_this$options15","rtlHelper","_step23","_iterator23","hitbox","_step24","_iterator24","hitbox1","_draw","cursor","_this29","defaultColor","halfFontSize","_getBoxSize2","textDirection","lineDash","drawOptions","yBoxTop","xBoxLeft","drawLegendBox","_textX","titleFont","titlePadding","topPaddingPlusHalfFontSize","hitBox","lh","onLeave","isListened","hoveredItem","_getLegendItemAt","sameItem","plugin_legend","_element","adjustHitBoxes","afterEvent","handleEvent","ci","_chart$legend$options","useBorderRadius","WeakMap","positioners","average","hasValue","tooltipPosition","eventPosition","nearestElement","tp","pushOrConcat","toPush","splitNewlines","String","createTooltipItem","_controller$getLabelA","getLabelAndValue","formattedValue","getTooltipSize","tooltip","body","footer","bodyFont","footerFont","titleLineCount","footerLineCount","bodyLineItemCount","combinedBodyLength","bodyItem","before","after","beforeBody","afterBody","titleSpacing","titleMarginBottom","displayColors","bodySpacing","footerMarginTop","footerSpacing","widthPadding","maxLineWidth","determineXAlign","yAlign","chartWidth","_chart$chartArea","xAlign","caret","caretSize","caretPadding","doesNotFitWithAlign","determineAlignment","determineYAlign","getBackgroundPoint","alignment","paddingAndSize","_toTRBLCorners","alignX","alignY","getAlignedX","getBeforeAfterBodyLines","overrideCallbacks","defaultCallbacks","beforeTitle","tooltipItems","labelCount","afterTitle","beforeLabel","tooltipItem","labelColor","labelTextColor","bodyColor","labelPointStyle","afterLabel","beforeFooter","afterFooter","invokeCallbackWithFallback","Tooltip","_Element8","_super18","_this31","opacity","_eventPosition","_size","_cachedAnimations","_tooltipItems","dataPoints","caretX","caretY","labelColors","labelPointStyles","labelTextColors","_this32","bodyItems","scoped","_this33","itemSort","_createItems","getTitle","getBeforeBody","getBody","getAfterBody","getFooter","positionAndSize","backgroundPoint","external","tooltipPoint","caretPosition","getCaretPosition","x3","y3","_toTRBLCorners2","ptX","ptY","titleColor","colorX","rtlColorX","yOffSet","colorY","multiKeyBackground","outerX","innerX","strokeRect","textColor","bodyAlign","bodyLineHeight","xLinePadding","fillLineOfText","bodyAlignForCalculation","_drawColorBox","footerAlign","footerColor","tooltipSize","_toTRBLCorners3","drawCaret","quadraticCurveTo","animX","animY","_updateAnimationTarget","hasTooltipContent","globalAlpha","drawBody","drawFooter","_this34","_ref11","positionChanged","_positionChanged","_ignoreReplayEvents","plugin_tooltip","afterInit","afterDraw","_willRender","_objectSpread","addIfString","addedLabels","_getLabelForValue","CategoryScale","_Scale","_super19","_this35","_startValue","_valueRange","_addedLabels","added","_step25","_iterator25","_step25$value","lastIndexOf","findOrAddLabel","_this$getUserBounds2","_this$getMinMax","getDecimalForPixel","generateTicks$1","generationOptions","dataRange","niceMin","niceMax","numSpaces","maxTicks","maxDigits","includeBounds","unit","maxSpaces","rmin","rmax","countDefined","minSpacing","rounded","almostWhole","decimalPlaces","relativeLabelSize","_ref12","LinearScaleBase","_Scale2","_super20","_this36","_endValue","_this$getUserBounds3","setMin","setMax","minSign","maxSign","stepSize","computeTickLimit","getTickLimit","_maxDigits","LinearScale","_LinearScaleBase","_super21","_this$getMinMax2","handleTickRangeOptions","log10Floor","changeExponent","isMajor","tickVal","steps","rangeExp","rangeStep","generateTicks","_ref13","minExp","exp","startExp","lastTick","LogarithmicScale","_Scale3","_super22","_this37","_zero","_this$getMinMax3","_this$getUserBounds4","getTickBackdropHeight","determineLimits","fitWithPointLabels","_padding","limits","valueCount","_pointLabels","pointLabelOpts","additionalAngle","centerPointLabels","getPointLabelContext","getPointPosition","drawingArea","plFont","textSize","updateLimits","setCenterPoint","_pointLabelItems","extra","outerDistance","pointLabelPosition","yForAngle","getTextAlignForAngle","leftForTextAlign","buildPointLabelItems","hLimits","vLimits","pathRadiusLine","RadialLinearScale","_LinearScaleBase2","_super23","_this38","_this$getMinMax4","_this39","leftMovement","rightMovement","topMovement","bottomMovement","scalingFactor","scaledDistance","pointLabel","createPointLabelContext","distanceFromCenter","_this$_pointLabelItem","_this$options16","_this40","_scale$_pointLabelIte","backdropLeft","backdropTop","backdropWidth","backdropHeight","drawPointLabels","gridLineOpts","drawRadiusLine","_this41","INTERVALS","millisecond","common","second","minute","hour","day","week","month","quarter","year","UNITS","sorter","adapter","_adapter","_scale$_parseOpts","_parseOpts","parser","isoWeekday","startOf","determineUnitForAutoTicks","minUnit","capacity","interval","MAX_SAFE_INTEGER","addTick","time","timestamps","_lookup2","ticksFromTimestamps","majorUnit","setMajorTicks","TimeScale","_Scale4","_super24","_this42","_unit","_majorUnit","_offsets","_normalized","displayFormats","formats","normalized","_this$getUserBounds5","_applyBounds","_getLabelBounds","endOf","getLabelTimestamps","timeOpts","_generate","_filterBetween","_getLabelCapacity","determineUnitForFormatting","determineMajorUnit","initOffsets","offsetAfterAutoskip","getDecimalForValue","weekday","hasWeekday","getDataTimestamps","tooltipFormat","datetime","fmt","minorFormat","majorFormat","_tickFormatFunction","offsets","ticksOpts","tickLabelWidth","cosRotation","sinRotation","tickFontSize","exampleTime","exampleLabel","_getLabelSize","prevSource","nextSource","prevTarget","nextTarget","_lookupByKey2","_table$lo","_table$hi","_lookupByKey3","_table$lo2","_table$hi2","span","TimeSeriesScale","_TimeScale","_super25","_this43","_table","_minPos","_tableRange","_getTimestampsForTable","buildLookupTable","_partials","Float64Array","_n","cosPhi0","sinPhi0","areaRing","quarterPi","dLambda","sdLambda","adLambda","sinPhi","u","cartesianDot","cartesianAddInPlace","cartesianScale","vector","pi","halfPi","atan","acos","compose","rotationIdentity","rotateRadians","deltaLambda","deltaPhi","deltaGamma","rotationLambda","rotationPhiGamma","forwardRotationLambda","cosDeltaPhi","sinDeltaPhi","cosDeltaGamma","sinDeltaGamma","rejoin","Intersection","compareIntersection","startInside","subject","pointEqual","link","isSubject","flatten","arrays","_regeneratorRuntime","delegateYield","t1","finish","_marked","pointVisible","clipLine","sink","ringBuffer","clipBuffer","ringSink","polygonStarted","pointRing","ringStart","ringEnd","winding","sum","point0","sinPhi1","cosPhi1","point1","absDelta","intersection","phiArc","polygonContains","clipRejoin","pointLine","clean","ringSegments","validSegment","sign0","sign1","sinLambda0Lambda1","clipAntimeridianIntersect","circleStream","t0","cosRadius","sinRadius","circleRadius","clipMax","clipMin","clipRectangle","corner","comparePoint","ca","x__","y__","v__","x_","y_","v_","activeStream","bufferStream","clipStream","b0","b1","polygonInside","cleanInside","ax","ay","transformer","methods","TransformStream","fitBounds","clipExtent","geoStream","fitExtent","extent","maxDepth","cosMinDistance","project","delta2","resampleLineTo","depth","d2","phi2","dx2","dy2","dz","a00","b00","c00","resampleStream","ringPoint","resample","resampleNone","transformRadians","scaleTranslateRotate","sx","sy","transform","scaleTranslate","cosAlpha","sinAlpha","ai","bi","fi","projectAt","projectResample","projectTransform","projectRotateTransform","cacheStream","preclip","clipAntimeridian","postclip","recenter","transformRotate","clipAngle","cr","smallRadius","notHemisphere","two","pa","pb","n1","n2","n2n2","n1n2","determinant","n1xn2","uu","t2","q","polar","q1","code","v00","point2","clipCircle","reflectX","reflectY","fitWidth","fitHeight","projectionMutator","mercatorRaw","reclip","forward","mercatorProjection","streamGeometry","streamGeometryType","streamObjectType","Feature","FeatureCollection","Sphere","Point","MultiPoint","LineString","streamLine","MultiLineString","Polygon","streamPolygon","MultiPolygon","GeometryCollection","closed","coordinate","_objectWithoutProperties","excluded","sourceKeys","sourceSymbolKeys","propertyIsEnumerable","defaultDatasetIdKey","reforwardRef","ref","setLabels","currentData","nextLabels","setDatasets","nextDatasets","datasetIdKey","addedDatasets","nextDataset","currentDataset","find","cloneData","nextData","ChartComponent","_props$height","_props$width","_props$redraw","redraw","_props$plugins","fallbackContent","updateMode","canvasProps","canvasRef","useRef","chartRef","renderChart","Chart$1","destroyChart","destroy","useEffect","nextOptions","setOptions","React","forwardRef","createTypedChart","registerables","Radar","Pie"],"sourceRoot":""}